/*! For license information please see main.d22c5c9e.js.LICENSE.txt */
!function(){var e={7757:function(e,t,n){e.exports=n(9727)},8598:function(e,t,n){var r=n(7401),a=n(3627),i=n(7320),o=n(7220),s=n(4972),u=n(2584),c=n(9638);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=s,c.tychei=u,e.exports=c},7401:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e=n.nmd(e),n.amdD)},2584:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e=n.nmd(e),n.amdD)},3627:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e=n.nmd(e),n.amdD)},4972:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e=n.nmd(e),n.amdD)},7220:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e=n.nmd(e),n.amdD)},7320:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e=n.nmd(e),n.amdD)},9638:function(e,t,n){var r;!function(a,i){var o,s=this,u=256,c=i.pow(u,6),l=i.pow(2,52),f=2*l,h=255;function d(e,t,n){var r=[],h=g(m((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(u):(e=new Uint8Array(u),(s.crypto||s.msCrypto).getRandomValues(e)),y(e)}catch(r){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,y(a)]}}():e,3),r),d=new p(r),b=function(){for(var e=d.g(6),t=c,n=0;e<l;)e=(e+n)*u,t*=u,n=d.g(1);for(;e>=f;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|d.g(4)},b.quick=function(){return d.g(4)/4294967296},b.double=b,g(y(d.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,d),e.state=function(){return v(d,{})}),n?(i.random=e,t):e})(b,h,"global"in t?t.global:this==i,t.state)}function p(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<u;)o[a]=a++;for(a=0;a<u;a++)o[a]=o[i=h&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=h&a+1],n=n*u+o[h&(o[a]=o[i=h&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(u)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(m(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function g(e,t){for(var n,r=e+"",a=0;a<r.length;)t[h&a]=h&(n^=19*t[h&a])+r.charCodeAt(a++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=d,g(i.random(),a),e.exports){e.exports=d;try{o=n(914)}catch(b){}}else void 0===(r=function(){return d}.call(t,n,t,e))||(e.exports=r)}([],Math)},282:function(e,t,n){var r=n(5141),a=n(9619),i=n(6422),o=n(6304),s=n(3410),u=n(5463),c=n(5274);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=s,c.tychei=u,e.exports=c},5141:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e=n.nmd(e),n.amdD)},5463:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e=n.nmd(e),n.amdD)},9619:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e=n.nmd(e),n.amdD)},3410:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e=n.nmd(e),n.amdD)},6304:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e=n.nmd(e),n.amdD)},6422:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e=n.nmd(e),n.amdD)},5274:function(e,t,n){var r;!function(a,i){var o,s=this,u=256,c=i.pow(u,6),l=i.pow(2,52),f=2*l,h=255;function d(e,t,n){var r=[],h=g(m((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(u):(e=new Uint8Array(u),(s.crypto||s.msCrypto).getRandomValues(e)),y(e)}catch(r){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,y(a)]}}():e,3),r),d=new p(r),b=function(){for(var e=d.g(6),t=c,n=0;e<l;)e=(e+n)*u,t*=u,n=d.g(1);for(;e>=f;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|d.g(4)},b.quick=function(){return d.g(4)/4294967296},b.double=b,g(y(d.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,d),e.state=function(){return v(d,{})}),n?(i.random=e,t):e})(b,h,"global"in t?t.global:this==i,t.state)}function p(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<u;)o[a]=a++;for(a=0;a<u;a++)o[a]=o[i=h&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=h&a+1],n=n*u+o[h&(o[a]=o[i=h&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(u)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(m(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function g(e,t){for(var n,r=e+"",a=0;a<r.length;)t[h&a]=h&(n^=19*t[h&a])+r.charCodeAt(a++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=d,g(i.random(),a),e.exports){e.exports=d;try{o=n(5778)}catch(b){}}else void 0===(r=function(){return d}.call(t,n,t,e))||(e.exports=r)}([],Math)},9998:function(e,t){"use strict";t.Z=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",a=(e.type||"").toLowerCase(),i=a.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?r.toLowerCase().endsWith(t):t.endsWith("/*")?i===t.replace(/\/.*$/,""):a===t}))}return!0}},2110:function(e,t,n){"use strict";var r=n(8309),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||a}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var a=d(n);a&&a!==p&&e(t,a,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var s=u(t),v=u(n),m=0;m<o.length;++m){var g=o[m];if(!i[g]&&(!r||!r[g])&&(!v||!v[g])&&(!s||!s[g])){var y=h(n,g);try{c(t,g,y)}catch(b){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function k(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case i:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case u:return e;default:return t}}case a:return t}}}function w(e){return k(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=h,t.Fragment=i,t.Lazy=m,t.Memo=v,t.Portal=a,t.Profiler=s,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return w(e)||k(e)===l},t.isConcurrentMode=w,t.isContextConsumer=function(e){return k(e)===c},t.isContextProvider=function(e){return k(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return k(e)===h},t.isFragment=function(e){return k(e)===i},t.isLazy=function(e){return k(e)===m},t.isMemo=function(e){return k(e)===v},t.isPortal=function(e){return k(e)===a},t.isProfiler=function(e){return k(e)===s},t.isStrictMode=function(e){return k(e)===o},t.isSuspense=function(e){return k(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===f||e===s||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===h||e.$$typeof===y||e.$$typeof===b||e.$$typeof===x||e.$$typeof===g)},t.typeOf=k},8309:function(e,t,n){"use strict";e.exports=n(746)},8987:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(C){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},i={};function o(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=i[e])?r:(n=u(e,(0|e)<0?-1:0,!0),o&&(i[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=u(e,e<0?-1:0,!1),o&&(a[e]=n),n)}function s(e,t){if(isNaN(e))return t?g:m;if(t){if(e<0)return g;if(e>=d)return w}else{if(e<=-p)return S;if(e+1>=p)return k}return e<0?s(-e,t).neg():u(e%h|0,e/h|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=o,n.fromNumber=s,n.fromBits=u;var c=Math.pow;function l(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(e.substring(1),t,n).neg();for(var a=s(c(n,8)),i=m,o=0;o<e.length;o+=8){var u=Math.min(8,e.length-o),f=parseInt(e.substring(o,o+u),n);if(u<8){var h=s(c(n,u));i=i.mul(h).add(s(f))}else i=(i=i.mul(a)).add(s(f))}return i.unsigned=t,i}function f(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?l(e,t):u(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=l,n.fromValue=f;var h=4294967296,d=h*h,p=d/2,v=o(1<<24),m=o(0);n.ZERO=m;var g=o(0,!0);n.UZERO=g;var y=o(1);n.ONE=y;var b=o(1,!0);n.UONE=b;var x=o(-1);n.NEG_ONE=x;var k=u(-1,2147483647,!1);n.MAX_VALUE=k;var w=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=w;var S=u(0,-2147483648,!1);n.MIN_VALUE=S;var I=n.prototype;I.toInt=function(){return this.unsigned?this.low>>>0:this.low},I.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},I.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=s(c(e,6),this.unsigned),i=this,o="";;){var u=i.div(a),l=(i.sub(u.mul(a)).toInt()>>>0).toString(e);if((i=u).isZero())return l+o;for(;l.length<6;)l="0"+l;o=""+l+o}},I.getHighBits=function(){return this.high},I.getHighBitsUnsigned=function(){return this.high>>>0},I.getLowBits=function(){return this.low},I.getLowBitsUnsigned=function(){return this.low>>>0},I.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},I.isZero=function(){return 0===this.high&&0===this.low},I.eqz=I.isZero,I.isNegative=function(){return!this.unsigned&&this.high<0},I.isPositive=function(){return this.unsigned||this.high>=0},I.isOdd=function(){return 1===(1&this.low)},I.isEven=function(){return 0===(1&this.low)},I.equals=function(e){return r(e)||(e=f(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},I.eq=I.equals,I.notEquals=function(e){return!this.eq(e)},I.neq=I.notEquals,I.ne=I.notEquals,I.lessThan=function(e){return this.comp(e)<0},I.lt=I.lessThan,I.lessThanOrEqual=function(e){return this.comp(e)<=0},I.lte=I.lessThanOrEqual,I.le=I.lessThanOrEqual,I.greaterThan=function(e){return this.comp(e)>0},I.gt=I.greaterThan,I.greaterThanOrEqual=function(e){return this.comp(e)>=0},I.gte=I.greaterThanOrEqual,I.ge=I.greaterThanOrEqual,I.compare=function(e){if(r(e)||(e=f(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},I.comp=I.compare,I.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(y)},I.neg=I.negate,I.add=function(e){r(e)||(e=f(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,c=e.low>>>16,l=0,h=0,d=0,p=0;return d+=(p+=i+(65535&e.low))>>>16,h+=(d+=a+c)>>>16,l+=(h+=n+s)>>>16,l+=t+o,u((d&=65535)<<16|(p&=65535),(l&=65535)<<16|(h&=65535),this.unsigned)},I.subtract=function(e){return r(e)||(e=f(e)),this.add(e.neg())},I.sub=I.subtract,I.multiply=function(e){if(this.isZero())return m;if(r(e)||(e=f(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(S))return e.isOdd()?S:m;if(e.eq(S))return this.isOdd()?S:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(v)&&e.lt(v))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,i=this.low>>>16,o=65535&this.low,c=e.high>>>16,l=65535&e.high,h=e.low>>>16,d=65535&e.low,p=0,g=0,y=0,b=0;return y+=(b+=o*d)>>>16,g+=(y+=i*d)>>>16,y&=65535,g+=(y+=o*h)>>>16,p+=(g+=a*d)>>>16,g&=65535,p+=(g+=i*h)>>>16,g&=65535,p+=(g+=o*l)>>>16,p+=n*d+a*h+i*l+o*c,u((y&=65535)<<16|(b&=65535),(p&=65535)<<16|(g&=65535),this.unsigned)},I.mul=I.multiply,I.divide=function(e){if(r(e)||(e=f(e)),e.isZero())throw Error("division by zero");var n,a,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?g:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return b;i=g}else{if(this.eq(S))return e.eq(y)||e.eq(x)?S:e.eq(S)?y:(n=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?y:x:(a=this.sub(e.mul(n)),i=n.add(a.div(e)));if(e.eq(S))return this.unsigned?g:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=m}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),l=o<=48?1:c(2,o-48),h=s(n),d=h.mul(e);d.isNegative()||d.gt(a);)d=(h=s(n-=l,this.unsigned)).mul(e);h.isZero()&&(h=y),i=i.add(h),a=a.sub(d)}return i},I.div=I.divide,I.modulo=function(e){return r(e)||(e=f(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},I.mod=I.modulo,I.rem=I.modulo,I.not=function(){return u(~this.low,~this.high,this.unsigned)},I.and=function(e){return r(e)||(e=f(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},I.or=function(e){return r(e)||(e=f(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},I.xor=function(e){return r(e)||(e=f(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},I.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},I.shl=I.shiftLeft,I.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},I.shr=I.shiftRight,I.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},I.shru=I.shiftRightUnsigned,I.shr_u=I.shiftRightUnsigned,I.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},I.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},I.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},I.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},I.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},888:function(e,t,n){"use strict";var r=n(9047);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4463:function(e,t,n){"use strict";var r=n(2791),a=n(5296);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=m.hasOwnProperty(t)?m[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),E=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function _(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var M,z=Object.assign;function P(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var B=!1;function W(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s]){var u="\n"+a[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?P(e):""}function U(e){switch(e.tag){case 5:return P(e.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 1:return e=W(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case w:return"Portal";case C:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case F:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function j(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Z(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){J(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ie(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ge=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,Ie=null;function Ce(e){if(e=ba(e)){if("function"!==typeof we)throw Error(i(280));var t=e.stateNode;t&&(t=ka(t),we(e.stateNode,e.type,t))}}function Ne(e){Se?Ie?Ie.push(e):Ie=[e]:Se=e}function Ee(){if(Se){var e=Se,t=Ie;if(Ie=Se=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Te(e,t){return e(t)}function Ae(){}var Re=!1;function Fe(e,t,n){if(Re)return e(t,n);Re=!0;try{return Te(e,t,n)}finally{Re=!1,(null!==Se||null!==Ie)&&(Ae(),Ee())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=ka(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Oe=!1;if(l)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(le){Oe=!1}function _e(e,t,n,r,a,i,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,ze=null,Pe=!1,Be=null,We={onError:function(e){Me=!0,ze=e}};function Ue(e,t,n,r,a,i,o,s,u){Me=!1,ze=null,_e.apply(We,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(Ve(e)!==e)throw Error(i(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return Ge(a),e;if(o===r)return Ge(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,u=a.child;u;){if(u===n){s=!0,n=a,r=o;break}if(u===r){s=!0,r=a,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=a;break}if(u===r){s=!0,r=o,n=a;break}u=u.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var qe=a.unstable_scheduleCallback,Xe=a.unstable_cancelCallback,Ye=a.unstable_shouldYield,Ze=a.unstable_requestPaint,Je=a.unstable_now,Qe=a.unstable_getCurrentPriorityLevel,$e=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~a;0!==s?r=ft(s):0!==(i&=o)&&(r=ft(i))}else 0!==(o=n&~a)?r=ft(o):0!==i&&(r=ft(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(i=t&-t)||16===a&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-ot(t)),r|=e[n],t&=~a;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var kt,wt,St,It,Ct,Nt=!1,Et=[],Tt=null,At=null,Rt=null,Ft=new Map,Dt=new Map,Ot=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _t(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Ft.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function zt(e){var t=ya(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=je(n)))return e.blockedOn=t,void Ct(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Pt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Bt(e,t,n){Pt(e)&&n.delete(t)}function Wt(){Nt=!1,null!==Tt&&Pt(Tt)&&(Tt=null),null!==At&&Pt(At)&&(At=null),null!==Rt&&Pt(Rt)&&(Rt=null),Ft.forEach(Bt),Dt.forEach(Bt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Wt)))}function Vt(e){function t(t){return Ut(t,e)}if(0<Et.length){Ut(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Ut(Tt,e),null!==At&&Ut(At,e),null!==Rt&&Ut(Rt,e),Ft.forEach(t),Dt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)zt(n),null===n.blockedOn&&Ot.shift()}var jt=x.ReactCurrentBatchConfig,Gt=!0;function Ht(e,t,n,r){var a=bt,i=jt.transition;jt.transition=null;try{bt=1,qt(e,t,n,r)}finally{bt=a,jt.transition=i}}function Kt(e,t,n,r){var a=bt,i=jt.transition;jt.transition=null;try{bt=4,qt(e,t,n,r)}finally{bt=a,jt.transition=i}}function qt(e,t,n,r){if(Gt){var a=Yt(e,t,n,r);if(null===a)Gr(e,t,r,Xt,n),_t(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Tt=Mt(Tt,e,t,n,r,a),!0;case"dragenter":return At=Mt(At,e,t,n,r,a),!0;case"mouseover":return Rt=Mt(Rt,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Ft.set(i,Mt(Ft.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Dt.set(i,Mt(Dt.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(_t(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==a;){var i=ba(a);if(null!==i&&kt(i),null===(i=Yt(e,t,n,r))&&Gr(e,t,r,Xt,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Xt=null;function Yt(e,t,n,r){if(Xt=null,null!==(e=ya(e=ke(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=je(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Qt=null,$t=null;function en(){if($t)return $t;var e,t,n=Qt,r=n.length,a="value"in Jt?Jt.value:Jt.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return $t=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=z({},cn,{view:0,detail:0}),hn=an(fn),dn=z({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(z({},dn,{dataTransfer:0})),mn=an(z({},fn,{relatedTarget:0})),gn=an(z({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=z({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),xn=an(z({},cn,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return In}var Nn=z({},fn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an(Nn),Tn=an(z({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(z({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Rn=an(z({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Fn=z({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(Fn),On=[9,13,27,32],Ln=l&&"CompositionEvent"in window,_n=null;l&&"documentMode"in document&&(_n=document.documentMode);var Mn=l&&"TextEvent"in window&&!_n,zn=l&&(!Ln||_n&&8<_n&&11>=_n),Pn=String.fromCharCode(32),Bn=!1;function Wn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ne(r),0<(t=Kr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,qn=null;function Xn(e){Pr(e,0)}function Yn(e){if(q(xa(e)))return e}function Zn(e,t){if("change"===e)return t}var Jn=!1;if(l){var Qn;if(l){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Qn=$n}else Qn=!1;Jn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),qn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(qn)){var t=[];Hn(t,qn,e,ke(e)),Fe(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(qn)}function ir(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!f.call(t,a)||!sr(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=lr(n,i);var o=lr(n,r);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==X(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Kr(gr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function kr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionend:kr("Transition","TransitionEnd")},Sr={},Ir={};function Cr(e){if(Sr[e])return Sr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return Sr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Nr=Cr("animationend"),Er=Cr("animationiteration"),Tr=Cr("animationstart"),Ar=Cr("transitionend"),Rr=new Map,Fr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Rr.set(e,t),u(t,[e])}for(var Or=0;Or<Fr.length;Or++){var Lr=Fr[Or];Dr(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Dr(Nr,"onAnimationEnd"),Dr(Er,"onAnimationIteration"),Dr(Tr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(_r));function zr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,s,u,c){if(Ue.apply(this,arguments),Me){if(!Me)throw Error(i(198));var l=ze;Me=!1,ze=null,Pe||(Pe=!0,Be=l)}}(r,t,void 0,e),e.currentTarget=null}function Pr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==i&&a.isPropagationStopped())break e;zr(a,s,c),i=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==i&&a.isPropagationStopped())break e;zr(a,s,c),i=u}}}if(Pe)throw e=Be,Pe=!1,Be=null,e}function Br(e,t){var n=t[va];void 0===n&&(n=t[va]=new Set);var r=e+"__bubble";n.has(r)||(jr(t,e,2,!1),n.add(r))}function Wr(e,t,n){var r=0;t&&(r|=4),jr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Ur]){e[Ur]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Wr(t,!1,e),Wr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Wr("selectionchange",!1,t))}}function jr(e,t,n,r){switch(Zt(t)){case 1:var a=Ht;break;case 4:a=Kt;break;default:a=qt}n=a.bind(null,t,n,e),a=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=ya(s)))return;if(5===(u=o.tag)||6===u){r=i=o;continue e}s=s.parentNode}}r=r.return}Fe((function(){var r=i,a=ke(n),o=[];e:{var s=Rr.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=En;break;case"focusin":c="focus",u=mn;break;case"focusout":c="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=An;break;case Nr:case Er:case Tr:u=gn;break;case Ar:u=Rn;break;case"scroll":u=hn;break;case"wheel":u=Dn;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Tn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=De(p,h))&&l.push(Hr(p,v,d)))),f)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,a),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!ya(c)&&!c[pa])&&(u||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ya(c):null)&&(c!==(f=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Tn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:xa(u),d=null==c?s:xa(c),(s=new l(v,p+"leave",u,n,a)).target=f,s.relatedTarget=d,v=null,ya(a)===r&&((l=new l(h,p+"enter",c,n,a)).target=d,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(h=c,p=0,d=l=u;d;d=qr(d))p++;for(d=0,v=h;v;v=qr(v))d++;for(;0<p-d;)l=qr(l),p--;for(;0<d-p;)h=qr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=qr(l),h=qr(h)}l=null}else l=null;null!==u&&Xr(o,s,u,l,!1),null!==c&&null!==f&&Xr(o,f,c,l,!0)}if("select"===(u=(s=r?xa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Zn;else if(Gn(s))if(Jn)m=or;else{m=ar;var g=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ir);switch(m&&(m=m(e,r))?Hn(o,m,n,a):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?xa(r):window,e){case"focusin":(Gn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(o,n,a);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":xr(o,n,a)}var y;if(Ln)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?Wn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(zn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(y=en()):(Qt="value"in(Jt=a)?Jt.value:Jt.textContent,Vn=!0)),0<(g=Kr(r,b)).length&&(b=new xn(b,e,null,n,a),o.push({event:b,listeners:g}),y?b.data=y:null!==(y=Un(n))&&(b.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Bn=!0,Pn);case"textInput":return(e=t.data)===Pn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Ln&&Wn(e,t)?(e=en(),$t=Qt=Jt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(a=new xn("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=y))}Pr(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=De(e,n))&&r.unshift(Hr(e,i,a)),null!=(i=De(e,t))&&r.push(Hr(e,i,a))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,a?null!=(u=De(n,i))&&o.unshift(Hr(n,u,s)):a||null!=(u=De(n,i))&&o.push(Hr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Zr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Zr,"")}function Qr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(i(425))}function $r(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,oa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(sa)}:ra;function sa(e){setTimeout((function(){throw e}))}function ua(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Vt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function la(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fa=Math.random().toString(36).slice(2),ha="__reactFiber$"+fa,da="__reactProps$"+fa,pa="__reactContainer$"+fa,va="__reactEvents$"+fa,ma="__reactListeners$"+fa,ga="__reactHandles$"+fa;function ya(e){var t=e[ha];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[ha]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=la(e);null!==e;){if(n=e[ha])return n;e=la(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[ha]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ka(e){return e[da]||null}var wa=[],Sa=-1;function Ia(e){return{current:e}}function Ca(e){0>Sa||(e.current=wa[Sa],wa[Sa]=null,Sa--)}function Na(e,t){Sa++,wa[Sa]=e.current,e.current=t}var Ea={},Ta=Ia(Ea),Aa=Ia(!1),Ra=Ea;function Fa(e,t){var n=e.type.contextTypes;if(!n)return Ea;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Da(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oa(){Ca(Aa),Ca(Ta)}function La(e,t,n){if(Ta.current!==Ea)throw Error(i(168));Na(Ta,t),Na(Aa,n)}function _a(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(i(108,j(e)||"Unknown",a));return z({},n,r)}function Ma(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ea,Ra=Ta.current,Na(Ta,e),Na(Aa,Aa.current),!0}function za(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=_a(e,t,Ra),r.__reactInternalMemoizedMergedChildContext=e,Ca(Aa),Ca(Ta),Na(Ta,e)):Ca(Aa),Na(Aa,n)}var Pa=null,Ba=!1,Wa=!1;function Ua(e){null===Pa?Pa=[e]:Pa.push(e)}function Va(){if(!Wa&&null!==Pa){Wa=!0;var e=0,t=bt;try{var n=Pa;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Pa=null,Ba=!1}catch(a){throw null!==Pa&&(Pa=Pa.slice(e+1)),qe($e,Va),a}finally{bt=t,Wa=!1}}return null}var ja=x.ReactCurrentBatchConfig;function Ga(e,t){if(e&&e.defaultProps){for(var n in t=z({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ha=Ia(null),Ka=null,qa=null,Xa=null;function Ya(){Xa=qa=Ka=null}function Za(e){var t=Ha.current;Ca(Ha),e._currentValue=t}function Ja(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Qa(e,t){Ka=e,Xa=qa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ks=!0),e.firstContext=null)}function $a(e){var t=e._currentValue;if(Xa!==e)if(e={context:e,memoizedValue:t,next:null},null===qa){if(null===Ka)throw Error(i(308));qa=e,Ka.dependencies={lanes:0,firstContext:e}}else qa=qa.next=e;return t}var ei=null,ti=!1;function ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ri(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ai(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ii(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,tc(e)?(null===(e=n.interleaved)?(t.next=t,null===ei?ei=[n]:ei.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function oi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function si(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ui(e,t,n,r){var a=e.updateQueue;ti=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?i=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==i){var f=a.baseState;for(o=0,l=c=u=null,s=i;;){var h=s.lane,d=s.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=z({},f,h);break e;case 2:ti=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=f):l=l.next=d,o|=h;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(h=s).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===l&&(u=f),a.baseState=u,a.firstBaseUpdate=c,a.lastBaseUpdate=l,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);Ou|=o,e.lanes=o,e.memoizedState=f}}function ci(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var li=(new r.Component).refs;function fi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:z({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var hi={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ju(),a=Qu(e),i=ai(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ii(e,i),null!==(t=$u(e,a,r))&&oi(t,e,a)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ju(),a=Qu(e),i=ai(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ii(e,i),null!==(t=$u(e,a,r))&&oi(t,e,a)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ju(),r=Qu(e),a=ai(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),ii(e,a),null!==(t=$u(e,r,n))&&oi(t,e,r)}};function di(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(a,i))}function pi(e,t,n){var r=!1,a=Ea,i=t.contextType;return"object"===typeof i&&null!==i?i=$a(i):(a=Da(t)?Ra:Ta.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Fa(e,a):Ea),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=hi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function vi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&hi.enqueueReplaceState(t,t.state,null)}function mi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=li,ni(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=$a(i):(i=Da(t)?Ra:Ta.current,a.context=Fa(e,i)),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(fi(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&hi.enqueueReplaceState(a,a.state,null),ui(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}var gi=[],yi=0,bi=null,xi=0,ki=[],wi=0,Si=null,Ii=1,Ci="";function Ni(e,t){gi[yi++]=xi,gi[yi++]=bi,bi=e,xi=t}function Ei(e,t,n){ki[wi++]=Ii,ki[wi++]=Ci,ki[wi++]=Si,Si=e;var r=Ii;e=Ci;var a=32-ot(r)-1;r&=~(1<<a),n+=1;var i=32-ot(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Ii=1<<32-ot(t)+a|n<<a|r,Ci=i+e}else Ii=1<<i|n<<a|r,Ci=e}function Ti(e){null!==e.return&&(Ni(e,1),Ei(e,1,0))}function Ai(e){for(;e===bi;)bi=gi[--yi],gi[yi]=null,xi=gi[--yi],gi[yi]=null;for(;e===Si;)Si=ki[--wi],ki[wi]=null,Ci=ki[--wi],ki[wi]=null,Ii=ki[--wi],ki[wi]=null}var Ri=null,Fi=null,Di=!1,Oi=null;function Li(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function _i(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Ri=e,Fi=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Ri=e,Fi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Si?{id:Ii,overflow:Ci}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Ri=e,Fi=null,!0);default:return!1}}function Mi(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function zi(e){if(Di){var t=Fi;if(t){var n=t;if(!_i(e,t)){if(Mi(e))throw Error(i(418));t=ca(n.nextSibling);var r=Ri;t&&_i(e,t)?Li(r,n):(e.flags=-4097&e.flags|2,Di=!1,Ri=e)}}else{if(Mi(e))throw Error(i(418));e.flags=-4097&e.flags|2,Di=!1,Ri=e}}}function Pi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ri=e}function Bi(e){if(e!==Ri)return!1;if(!Di)return Pi(e),Di=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=Fi)){if(Mi(e)){for(e=Fi;e;)e=ca(e.nextSibling);throw Error(i(418))}for(;t;)Li(e,t),t=ca(t.nextSibling)}if(Pi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Fi=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Fi=null}}else Fi=Ri?ca(e.stateNode.nextSibling):null;return!0}function Wi(){Fi=Ri=null,Di=!1}function Ui(e){null===Oi?Oi=[e]:Oi.push(e)}function Vi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=a.refs;t===li&&(t=a.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function ji(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Gi(e){return(0,e._init)(e._payload)}function Hi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===S?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===D&&Gi(i)===t.type)?((r=a(t,n.props)).ref=Vi(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=Vi(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function f(e,t,n,r,i){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case k:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Vi(e,null,t),n.return=e,n;case w:return(t=zc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||_(t))return(t=Lc(t,e.mode,n,null)).return=e,t;ji(e,t)}return null}function d(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case k:return n.key===a?c(e,t,n,r):null;case w:return n.key===a?l(e,t,n,r):null;case D:return d(e,t,(a=n._init)(n._payload),r)}if(te(n)||_(n))return null!==a?null:f(e,t,n,r,null);ji(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a);case D:return p(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||_(r))return f(t,e=e.get(n)||null,r,a,null);ji(t,r)}return null}function v(a,i,s,u){for(var c=null,l=null,f=i,v=i=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var g=d(a,f,s[v],u);if(null===g){null===f&&(f=m);break}e&&f&&null===g.alternate&&t(a,f),i=o(g,i,v),null===l?c=g:l.sibling=g,l=g,f=m}if(v===s.length)return n(a,f),Di&&Ni(a,v),c;if(null===f){for(;v<s.length;v++)null!==(f=h(a,s[v],u))&&(i=o(f,i,v),null===l?c=f:l.sibling=f,l=f);return Di&&Ni(a,v),c}for(f=r(a,f);v<s.length;v++)null!==(m=p(f,a,v,s[v],u))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),i=o(m,i,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(a,e)})),Di&&Ni(a,v),c}function m(a,s,u,c){var l=_(u);if("function"!==typeof l)throw Error(i(150));if(null==(u=l.call(u)))throw Error(i(151));for(var f=l=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var b=d(a,v,y.value,c);if(null===b){null===v&&(v=g);break}e&&v&&null===b.alternate&&t(a,v),s=o(b,s,m),null===f?l=b:f.sibling=b,f=b,v=g}if(y.done)return n(a,v),Di&&Ni(a,m),l;if(null===v){for(;!y.done;m++,y=u.next())null!==(y=h(a,y.value,c))&&(s=o(y,s,m),null===f?l=y:f.sibling=y,f=y);return Di&&Ni(a,m),l}for(v=r(a,v);!y.done;m++,y=u.next())null!==(y=p(v,a,m,y.value,c))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=o(y,s,m),null===f?l=y:f.sibling=y,f=y);return e&&v.forEach((function(e){return t(a,e)})),Di&&Ni(a,m),l}return function e(r,i,o,u){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case k:e:{for(var c=o.key,l=i;null!==l;){if(l.key===c){if((c=o.type)===S){if(7===l.tag){n(r,l.sibling),(i=a(l,o.props.children)).return=r,r=i;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Gi(c)===l.type){n(r,l.sibling),(i=a(l,o.props)).ref=Vi(r,l,o),i.return=r,r=i;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===S?((i=Lc(o.props.children,r.mode,u,o.key)).return=r,r=i):((u=Oc(o.type,o.key,o.props,null,r.mode,u)).ref=Vi(r,i,o),u.return=r,r=u)}return s(r);case w:e:{for(l=o.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(r,i.sibling),(i=a(i,o.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=zc(o,r.mode,u)).return=r,r=i}return s(r);case D:return e(r,i,(l=o._init)(o._payload),u)}if(te(o))return v(r,i,o,u);if(_(o))return m(r,i,o,u);ji(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==i&&6===i.tag?(n(r,i.sibling),(i=a(i,o)).return=r,r=i):(n(r,i),(i=Mc(o,r.mode,u)).return=r,r=i),s(r)):n(r,i)}}var Ki=Hi(!0),qi=Hi(!1),Xi={},Yi=Ia(Xi),Zi=Ia(Xi),Ji=Ia(Xi);function Qi(e){if(e===Xi)throw Error(i(174));return e}function $i(e,t){switch(Na(Ji,t),Na(Zi,e),Na(Yi,Xi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ca(Yi),Na(Yi,t)}function eo(){Ca(Yi),Ca(Zi),Ca(Ji)}function to(e){Qi(Ji.current);var t=Qi(Yi.current),n=ue(t,e.type);t!==n&&(Na(Zi,e),Na(Yi,n))}function no(e){Zi.current===e&&(Ca(Yi),Ca(Zi))}var ro=Ia(0);function ao(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var io=[];function oo(){for(var e=0;e<io.length;e++)io[e]._workInProgressVersionPrimary=null;io.length=0}var so=x.ReactCurrentDispatcher,uo=x.ReactCurrentBatchConfig,co=0,lo=null,fo=null,ho=null,po=!1,vo=!1,mo=0,go=0;function yo(){throw Error(i(321))}function bo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function xo(e,t,n,r,a,o){if(co=o,lo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,so.current=null===e||null===e.memoizedState?rs:as,e=n(r,a),vo){o=0;do{if(vo=!1,mo=0,25<=o)throw Error(i(301));o+=1,ho=fo=null,t.updateQueue=null,so.current=is,e=n(r,a)}while(vo)}if(so.current=ns,t=null!==fo&&null!==fo.next,co=0,ho=fo=lo=null,po=!1,t)throw Error(i(300));return e}function ko(){var e=0!==mo;return mo=0,e}function wo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ho?lo.memoizedState=ho=e:ho=ho.next=e,ho}function So(){if(null===fo){var e=lo.alternate;e=null!==e?e.memoizedState:null}else e=fo.next;var t=null===ho?lo.memoizedState:ho.next;if(null!==t)ho=t,fo=e;else{if(null===e)throw Error(i(310));e={memoizedState:(fo=e).memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},null===ho?lo.memoizedState=ho=e:ho=ho.next=e}return ho}function Io(e,t){return"function"===typeof t?t(e):t}function Co(e){var t=So(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=fo,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}r.baseQueue=a=o,n.pending=null}if(null!==a){o=a.next,r=r.baseState;var u=s=null,c=null,l=o;do{var f=l.lane;if((co&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=h,s=r):c=c.next=h,lo.lanes|=f,Ou|=f}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(ks=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{o=a.lane,lo.lanes|=o,Ou|=o,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=So(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);sr(o,t.memoizedState)||(ks=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Eo(){}function To(e,t){var n=lo,r=So(),a=t(),o=!sr(r.memoizedState,a);if(o&&(r.memoizedState=a,ks=!0),r=r.queue,Bo(Fo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==ho&&1&ho.memoizedState.tag){if(n.flags|=2048,Lo(9,Ro.bind(null,n,r,a,t),void 0,null),null===Nu)throw Error(i(349));0!==(30&co)||Ao(n,t,a)}return a}function Ao(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ro(e,t,n,r){t.value=n,t.getSnapshot=r,Do(t)&&$u(e,1,-1)}function Fo(e,t,n){return n((function(){Do(t)&&$u(e,1,-1)}))}function Do(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Oo(e){var t=wo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=Jo.bind(null,lo,e),[t.memoizedState,e]}function Lo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function _o(){return So().memoizedState}function Mo(e,t,n,r){var a=wo();lo.flags|=e,a.memoizedState=Lo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var a=So();r=void 0===r?null:r;var i=void 0;if(null!==fo){var o=fo.memoizedState;if(i=o.destroy,null!==r&&bo(r,o.deps))return void(a.memoizedState=Lo(t,n,i,r))}lo.flags|=e,a.memoizedState=Lo(1|t,n,i,r)}function Po(e,t){return Mo(8390656,8,e,t)}function Bo(e,t){return zo(2048,8,e,t)}function Wo(e,t){return zo(4,2,e,t)}function Uo(e,t){return zo(4,4,e,t)}function Vo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function jo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Vo.bind(null,t,e),n)}function Go(){}function Ho(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&bo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ko(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&bo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qo(e,t,n){return 0===(21&co)?(e.baseState&&(e.baseState=!1,ks=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),lo.lanes|=n,Ou|=n,e.baseState=!0),t)}function Xo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=uo.transition;uo.transition={};try{e(!1),t()}finally{bt=n,uo.transition=r}}function Yo(){return So().memoizedState}function Zo(e,t,n){var r=Qu(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e)?$o(t,n):(es(e,t,n),null!==(e=$u(e,r,n=Ju()))&&ts(e,t,r))}function Jo(e,t,n){var r=Qu(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))$o(t,a);else{es(e,t,a);var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,sr(s,o))return}catch(u){}null!==(e=$u(e,r,n=Ju()))&&ts(e,t,r)}}function Qo(e){var t=e.alternate;return e===lo||null!==t&&t===lo}function $o(e,t){vo=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function es(e,t,n){tc(e)?(null===(e=t.interleaved)?(n.next=n,null===ei?ei=[t]:ei.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function ts(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var ns={readContext:$a,useCallback:yo,useContext:yo,useEffect:yo,useImperativeHandle:yo,useInsertionEffect:yo,useLayoutEffect:yo,useMemo:yo,useReducer:yo,useRef:yo,useState:yo,useDebugValue:yo,useDeferredValue:yo,useTransition:yo,useMutableSource:yo,useSyncExternalStore:yo,useId:yo,unstable_isNewReconciler:!1},rs={readContext:$a,useCallback:function(e,t){return wo().memoizedState=[e,void 0===t?null:t],e},useContext:$a,useEffect:Po,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mo(4194308,4,Vo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Mo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mo(4,2,e,t)},useMemo:function(e,t){var n=wo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=wo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Zo.bind(null,lo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},wo().memoizedState=e},useState:Oo,useDebugValue:Go,useDeferredValue:function(e){return wo().memoizedState=e},useTransition:function(){var e=Oo(!1),t=e[0];return e=Xo.bind(null,e[1]),wo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=lo,a=wo();if(Di){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Nu)throw Error(i(349));0!==(30&co)||Ao(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Po(Fo.bind(null,r,o,e),[e]),r.flags|=2048,Lo(9,Ro.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=wo(),t=Nu.identifierPrefix;if(Di){var n=Ci;t=":"+t+"R"+(n=(Ii&~(1<<32-ot(Ii)-1)).toString(32)+n),0<(n=mo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=go++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},as={readContext:$a,useCallback:Ho,useContext:$a,useEffect:Bo,useImperativeHandle:jo,useInsertionEffect:Wo,useLayoutEffect:Uo,useMemo:Ko,useReducer:Co,useRef:_o,useState:function(){return Co(Io)},useDebugValue:Go,useDeferredValue:function(e){return qo(So(),fo.memoizedState,e)},useTransition:function(){return[Co(Io)[0],So().memoizedState]},useMutableSource:Eo,useSyncExternalStore:To,useId:Yo,unstable_isNewReconciler:!1},is={readContext:$a,useCallback:Ho,useContext:$a,useEffect:Bo,useImperativeHandle:jo,useInsertionEffect:Wo,useLayoutEffect:Uo,useMemo:Ko,useReducer:No,useRef:_o,useState:function(){return No(Io)},useDebugValue:Go,useDeferredValue:function(e){var t=So();return null===fo?t.memoizedState=e:qo(t,fo.memoizedState,e)},useTransition:function(){return[No(Io)[0],So().memoizedState]},useMutableSource:Eo,useSyncExternalStore:To,useId:Yo,unstable_isNewReconciler:!1};function os(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a}}function ss(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var us,cs,ls,fs="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=ai(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Uu||(Uu=!0,Vu=r),ss(0,t)},n}function ds(e,t,n){(n=ai(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){ss(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ss(0,t),"function"!==typeof r&&(null===ju?ju=new Set([this]):ju.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ps(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function vs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ms(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ai(-1,1)).tag=2,ii(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}function gs(e,t){if(!Di)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ys(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function bs(e,t,n){var r=t.pendingProps;switch(Ai(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ys(t),null;case 1:case 17:return Da(t.type)&&Oa(),ys(t),null;case 3:return r=t.stateNode,eo(),Ca(Aa),Ca(Ta),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Bi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Oi&&(ic(Oi),Oi=null))),ys(t),null;case 5:no(t);var a=Qi(Ji.current);if(n=t.type,null!==e&&null!=t.stateNode)cs(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return ys(t),null}if(e=Qi(Yi.current),Bi(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ha]=t,r[da]=o,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(a=0;a<_r.length;a++)Br(_r[a],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":Z(r,o),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Br("invalid",r);break;case"textarea":ae(r,o),Br("invalid",r)}for(var u in ye(n,o),a=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Qr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Qr(r.textContent,c,e),a=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Br("scroll",r)}switch(n){case"input":K(r),$(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[ha]=t,e[da]=r,us(e,t),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":Br("cancel",e),Br("close",e),a=r;break;case"iframe":case"object":case"embed":Br("load",e),a=r;break;case"video":case"audio":for(a=0;a<_r.length;a++)Br(_r[a],e);a=r;break;case"source":Br("error",e),a=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),a=r;break;case"details":Br("toggle",e),a=r;break;case"input":Z(e,r),a=Y(e,r),Br("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=z({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Br("invalid",e)}for(o in ye(n,a),c=a)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Br("scroll",e):null!=l&&b(e,o,l,u))}switch(n){case"input":K(e),$(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return ys(t),null;case 6:if(e&&null!=t.stateNode)ls(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Qi(Ji.current),Qi(Yi.current),Bi(t)){if(r=t.stateNode,n=t.memoizedProps,r[ha]=t,(o=r.nodeValue!==n)&&null!==(e=Ri))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ha]=t,t.stateNode=r}return ys(t),null;case 13:if(Ca(ro),r=t.memoizedState,Di&&null!==Fi&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Fi;r;)r=ca(r.nextSibling);return Wi(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Bi(t),null===e){if(!r)throw Error(i(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(i(317));r[ha]=t}else Wi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return ys(t),null}return null!==Oi&&(ic(Oi),Oi=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Bi(t):n=null!==e.memoizedState,r!==n&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ro.current)?0===Fu&&(Fu=3):pc())),null!==t.updateQueue&&(t.flags|=4),ys(t),null);case 4:return eo(),null===e&&Vr(t.stateNode.containerInfo),ys(t),null;case 10:return Za(t.type._context),ys(t),null;case 19:if(Ca(ro),null===(o=t.memoizedState))return ys(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)gs(o,!1);else{if(0!==Fu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=ao(e))){for(t.flags|=128,gs(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Na(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Bu&&(t.flags|=128,r=!0,gs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ao(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),gs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!Di)return ys(t),null}else 2*Je()-o.renderingStartTime>Bu&&1073741824!==n&&(t.flags|=128,r=!0,gs(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ro.current,Na(ro,r?1&n|2:1&n),t):(ys(t),null);case 22:case 23:return lc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Au)&&(ys(t),6&t.subtreeFlags&&(t.flags|=8192)):ys(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}us=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},cs=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Qi(Yi.current);var i,o=null;switch(n){case"input":a=Y(e,a),r=Y(e,r),o=[];break;case"select":a=z({},a,{value:void 0}),r=z({},r,{value:void 0}),o=[];break;case"textarea":a=re(e,a),r=re(e,r),o=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(l in ye(n,r),n=null,a)if(!r.hasOwnProperty(l)&&a.hasOwnProperty(l)&&null!=a[l])if("style"===l){var u=a[l];for(i in u)u.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=a?a[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(i in u)!u.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&u[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Br("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var xs=x.ReactCurrentOwner,ks=!1;function ws(e,t,n,r){t.child=null===e?qi(t,null,n,r):Ki(t,e.child,n,r)}function Ss(e,t,n,r,a){n=n.render;var i=t.ref;return Qa(t,a),r=xo(e,t,n,r,i,a),n=ko(),null===e||ks?(Di&&n&&Ti(t),t.flags|=1,ws(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Gs(e,t,a))}function Is(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||Fc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Cs(e,t,i,r,a))}if(i=e.child,0===(e.lanes&a)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Gs(e,t,a)}return t.flags|=1,(e=Dc(i,r)).ref=t.ref,e.return=t,t.child=e}function Cs(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(ur(i,r)&&e.ref===t.ref){if(ks=!1,t.pendingProps=r=i,0===(e.lanes&a))return t.lanes=e.lanes,Gs(e,t,a);0!==(131072&e.flags)&&(ks=!0)}}return Ts(e,t,n,r,a)}function Ns(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Na(Ru,Au),Au|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Na(Ru,Au),Au|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Na(Ru,Au),Au|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Na(Ru,Au),Au|=r;return ws(e,t,a,n),t.child}function Es(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,a){var i=Da(n)?Ra:Ta.current;return i=Fa(t,i),Qa(t,a),n=xo(e,t,n,r,i,a),r=ko(),null===e||ks?(Di&&r&&Ti(t),t.flags|=1,ws(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Gs(e,t,a))}function As(e,t,n,r,a){if(Da(n)){var i=!0;Ma(t)}else i=!1;if(Qa(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),pi(t,n,r),mi(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=$a(c):c=Fa(t,c=Da(n)?Ra:Ta.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&vi(t,o,r,c),ti=!1;var h=t.memoizedState;o.state=h,ui(t,r,o,a),u=t.memoizedState,s!==r||h!==u||Aa.current||ti?("function"===typeof l&&(fi(t,n,l,r),u=t.memoizedState),(s=ti||di(t,n,s,r,h,u,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ri(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Ga(t.type,s),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=$a(u):u=Fa(t,u=Da(n)?Ra:Ta.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&vi(t,o,r,u),ti=!1,h=t.memoizedState,o.state=h,ui(t,r,o,a);var p=t.memoizedState;s!==f||h!==p||Aa.current||ti?("function"===typeof d&&(fi(t,n,d,r),p=t.memoizedState),(c=ti||di(t,n,c,r,h,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Rs(e,t,n,r,i,a)}function Rs(e,t,n,r,a,i){Es(e,t);var o=0!==(128&t.flags);if(!r&&!o)return a&&za(t,n,!1),Gs(e,t,i);r=t.stateNode,xs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ki(t,e.child,null,i),t.child=Ki(t,null,s,i)):ws(e,t,s,i),t.memoizedState=r.state,a&&za(t,n,!0),t.child}function Fs(e){var t=e.stateNode;t.pendingContext?La(0,t.pendingContext,t.pendingContext!==t.context):t.context&&La(0,t.context,!1),$i(e,t.containerInfo)}function Ds(e,t,n,r,a){return Wi(),Ui(a),t.flags|=256,ws(e,t,n,r),t.child}var Os={dehydrated:null,treeContext:null,retryLane:0};function Ls(e){return{baseLanes:e,cachePool:null,transitions:null}}function _s(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Ms(e,t,n){var r,a=t.pendingProps,o=ro.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Na(ro,1&o),null===e)return zi(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=a.children,e=a.fallback,s?(a=t.mode,s=t.child,o={mode:"hidden",children:o},0===(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=o):s=_c(o,a,0,null),e=Lc(e,a,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ls(n),t.memoizedState=Os,e):zs(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(u)return 256&t.flags?(t.flags&=-257,Ws(e,t,n,Error(i(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=a.fallback,o=t.mode,a=_c({mode:"visible",children:a.children},o,0,null),(s=Lc(s,o,n,null)).flags|=2,a.return=t,s.return=t,a.sibling=s,t.child=a,0!==(1&t.mode)&&Ki(t,e.child,null,n),t.child.memoizedState=Ls(n),t.memoizedState=Os,s);if(0===(1&t.mode))t=Ws(e,t,n,null);else if("$!"===r.data)t=Ws(e,t,n,Error(i(419)));else if(a=0!==(n&e.childLanes),ks||a){if(null!==(a=Nu)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(a=0!==(s&(a.suspendedLanes|n))?0:s)&&a!==o.retryLane&&(o.retryLane=a,$u(e,a,-1))}pc(),t=Ws(e,t,n,Error(i(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=Nc.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Fi=ca(r.nextSibling),Ri=t,Di=!0,Oi=null,null!==n&&(ki[wi++]=Ii,ki[wi++]=Ci,ki[wi++]=Si,Ii=n.id,Ci=n.overflow,Si=t),(t=zs(t,t.pendingProps.children)).flags|=4096);return t}return s?(a=Bs(e,t,a.children,a.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Ls(n):_s(o,n),s.childLanes=e.childLanes&~n,t.memoizedState=Os,a):(n=Ps(e,t,a.children,n),t.memoizedState=null,n)}return s?(a=Bs(e,t,a.children,a.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Ls(n):_s(o,n),s.childLanes=e.childLanes&~n,t.memoizedState=Os,a):(n=Ps(e,t,a.children,n),t.memoizedState=null,n)}function zs(e,t){return(t=_c({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ps(e,t,n,r){var a=e.child;return e=a.sibling,n=Dc(a,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Bs(e,t,n,r,a){var i=t.mode,o=(e=e.child).sibling,s={mode:"hidden",children:n};return 0===(1&i)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=s,t.deletions=null):(n=Dc(e,s)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=Dc(o,r):(r=Lc(r,i,a,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Ws(e,t,n,r){return null!==r&&Ui(r),Ki(t,e.child,null,n),(e=zs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ja(e.return,t,n)}function Vs(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function js(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,n,t);else if(19===e.tag)Us(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Na(ro,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ao(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Vs(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ao(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Vs(t,!0,n,null,i);break;case"together":Vs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ou|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hs(e,t){switch(Ai(t),t.tag){case 1:return Da(t.type)&&Oa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Ca(Aa),Ca(Ta),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Ca(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));Wi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ca(ro),null;case 4:return eo(),null;case 10:return Za(t.type._context),null;case 22:case 23:return lc(),null;default:return null}}var Ks=!1,qs=!1,Xs="function"===typeof WeakSet?WeakSet:Set,Ys=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function Js(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var Qs=!1;function $s(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&Js(t,n,i)}a=a.next}while(a!==r)}}function eu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function tu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function nu(e){var t=e.alternate;null!==t&&(e.alternate=null,nu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[da],delete t[va],delete t[ma],delete t[ga])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ru(e){return 5===e.tag||3===e.tag||4===e.tag}function au(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ru(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function iu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(iu(e,t,n),e=e.sibling;null!==e;)iu(e,t,n),e=e.sibling}function ou(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ou(e,t,n),e=e.sibling;null!==e;)ou(e,t,n),e=e.sibling}var su=null,uu=!1;function cu(e,t,n){for(n=n.child;null!==n;)lu(e,t,n),n=n.sibling}function lu(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,n)}catch(s){}switch(n.tag){case 5:qs||Zs(n,t);case 6:var r=su,a=uu;su=null,cu(e,t,n),uu=a,null!==(su=r)&&(uu?(e=su,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):su.removeChild(n.stateNode));break;case 18:null!==su&&(uu?(e=su,n=n.stateNode,8===e.nodeType?ua(e.parentNode,n):1===e.nodeType&&ua(e,n),Vt(e)):ua(su,n.stateNode));break;case 4:r=su,a=uu,su=n.stateNode.containerInfo,uu=!0,cu(e,t,n),su=r,uu=a;break;case 0:case 11:case 14:case 15:if(!qs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&Js(n,t,o),a=a.next}while(a!==r)}cu(e,t,n);break;case 1:if(!qs&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Sc(n,t,s)}cu(e,t,n);break;case 21:cu(e,t,n);break;case 22:1&n.mode?(qs=(r=qs)||null!==n.memoizedState,cu(e,t,n),qs=r):cu(e,t,n);break;default:cu(e,t,n)}}function fu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xs),t.forEach((function(t){var r=Ec.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function hu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:su=u.stateNode,uu=!1;break e;case 3:case 4:su=u.stateNode.containerInfo,uu=!0;break e}u=u.return}if(null===su)throw Error(i(160));lu(o,s,a),su=null,uu=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(l){Sc(a,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)du(t,e),t=t.sibling}function du(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hu(t,e),pu(e),4&r){try{$s(3,e,e.return),eu(3,e)}catch(v){Sc(e,e.return,v)}try{$s(5,e,e.return)}catch(v){Sc(e,e.return,v)}}break;case 1:hu(t,e),pu(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(hu(t,e),pu(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(v){Sc(e,e.return,v)}}if(4&r&&null!=(a=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&J(a,o),be(u,s);var l=be(u,o);for(s=0;s<c.length;s+=2){var f=c[s],h=c[s+1];"style"===f?me(a,h):"dangerouslySetInnerHTML"===f?fe(a,h):"children"===f?he(a,h):b(a,f,h,l)}switch(u){case"input":Q(a,o);break;case"textarea":ie(a,o);break;case"select":var d=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(a,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(a,!!o.multiple,o.defaultValue,!0):ne(a,!!o.multiple,o.multiple?[]:"",!1))}a[da]=o}catch(v){Sc(e,e.return,v)}}break;case 6:if(hu(t,e),pu(e),4&r){if(null===e.stateNode)throw Error(i(162));l=e.stateNode,f=e.memoizedProps;try{l.nodeValue=f}catch(v){Sc(e,e.return,v)}}break;case 3:if(hu(t,e),pu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(v){Sc(e,e.return,v)}break;case 4:default:hu(t,e),pu(e);break;case 13:hu(t,e),pu(e),8192&(l=e.child).flags&&null!==l.memoizedState&&(null===l.alternate||null===l.alternate.memoizedState)&&(Pu=Je()),4&r&&fu(e);break;case 22:if(l=null!==n&&null!==n.memoizedState,1&e.mode?(qs=(f=qs)||l,hu(t,e),qs=f):hu(t,e),pu(e),8192&r){f=null!==e.memoizedState;e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{a=d.stateNode,f?"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=d.stateNode,s=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(v){Sc(e,e.return,v)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=f?"":d.memoizedProps}catch(v){Sc(e,e.return,v)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}if(f&&!l&&0!==(1&e.mode))for(Ys=e,e=e.child;null!==e;){for(l=Ys=e;null!==Ys;){switch(h=(f=Ys).child,f.tag){case 0:case 11:case 14:case 15:$s(4,f,f.return);break;case 1:if(Zs(f,f.return),"function"===typeof(o=f.stateNode).componentWillUnmount){d=f,p=f.return;try{a=d,o.props=a.memoizedProps,o.state=a.memoizedState,o.componentWillUnmount()}catch(v){Sc(d,p,v)}}break;case 5:Zs(f,f.return);break;case 22:if(null!==f.memoizedState){yu(l);continue}}null!==h?(h.return=f,Ys=h):yu(l)}e=e.sibling}}break;case 19:hu(t,e),pu(e),4&r&&fu(e);case 21:}}function pu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ru(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(he(a,""),r.flags&=-33),ou(e,au(e),a);break;case 3:case 4:var o=r.stateNode.containerInfo;iu(e,au(e),o);break;default:throw Error(i(161))}}catch(s){Sc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vu(e,t,n){Ys=e,mu(e,t,n)}function mu(e,t,n){for(var r=0!==(1&e.mode);null!==Ys;){var a=Ys,i=a.child;if(22===a.tag&&r){var o=null!==a.memoizedState||Ks;if(!o){var s=a.alternate,u=null!==s&&null!==s.memoizedState||qs;s=Ks;var c=qs;if(Ks=o,(qs=u)&&!c)for(Ys=a;null!==Ys;)u=(o=Ys).child,22===o.tag&&null!==o.memoizedState?bu(a):null!==u?(u.return=o,Ys=u):bu(a);for(;null!==i;)Ys=i,mu(i,t,n),i=i.sibling;Ys=a,Ks=s,qs=c}gu(e)}else 0!==(8772&a.subtreeFlags)&&null!==i?(i.return=a,Ys=i):gu(e)}}function gu(e){for(;null!==Ys;){var t=Ys;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:qs||eu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!qs)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Ga(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ci(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ci(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(i(163))}qs||512&t.flags&&tu(t)}catch(d){Sc(t,t.return,d)}}if(t===e){Ys=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ys=n;break}Ys=t.return}}function yu(e){for(;null!==Ys;){var t=Ys;if(t===e){Ys=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ys=n;break}Ys=t.return}}function bu(e){for(;null!==Ys;){var t=Ys;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{eu(4,t)}catch(u){Sc(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(u){Sc(t,a,u)}}var i=t.return;try{tu(t)}catch(u){Sc(t,i,u)}break;case 5:var o=t.return;try{tu(t)}catch(u){Sc(t,o,u)}}}catch(u){Sc(t,t.return,u)}if(t===e){Ys=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Ys=s;break}Ys=t.return}}var xu,ku=Math.ceil,wu=x.ReactCurrentDispatcher,Su=x.ReactCurrentOwner,Iu=x.ReactCurrentBatchConfig,Cu=0,Nu=null,Eu=null,Tu=0,Au=0,Ru=Ia(0),Fu=0,Du=null,Ou=0,Lu=0,_u=0,Mu=null,zu=null,Pu=0,Bu=1/0,Wu=null,Uu=!1,Vu=null,ju=null,Gu=!1,Hu=null,Ku=0,qu=0,Xu=null,Yu=-1,Zu=0;function Ju(){return 0!==(6&Cu)?Je():-1!==Yu?Yu:Yu=Je()}function Qu(e){return 0===(1&e.mode)?1:0!==(2&Cu)&&0!==Tu?Tu&-Tu:null!==ja.transition?(0===Zu&&(Zu=vt()),Zu):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function $u(e,t,n){if(50<qu)throw qu=0,Xu=null,Error(i(185));var r=ec(e,t);return null===r?null:(gt(r,t,n),0!==(2&Cu)&&r===Nu||(r===Nu&&(0===(2&Cu)&&(Lu|=t),4===Fu&&oc(r,Tu)),nc(r,n),1===t&&0===Cu&&0===(1&e.mode)&&(Bu=Je()+500,Ba&&Va())),r)}function ec(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function tc(e){return(null!==Nu||null!==ei)&&0!==(1&e.mode)&&0===(2&Cu)}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),s=1<<o,u=a[o];-1===u?0!==(s&n)&&0===(s&r)||(a[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=ht(e,e===Nu?Tu:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){Ba=!0,Ua(e)}(sc.bind(null,e)):Ua(sc.bind(null,e)),oa((function(){0===Cu&&Va()})),n=null;else{switch(xt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Yu=-1,Zu=0,0!==(6&Cu))throw Error(i(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=ht(e,e===Nu?Tu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var a=Cu;Cu|=2;var o=dc();for(Nu===e&&Tu===t||(Wu=null,Bu=Je()+500,fc(e,t));;)try{gc();break}catch(u){hc(e,u)}Ya(),wu.current=o,Cu=a,null!==Eu?t=0:(Nu=null,Tu=0,t=Fu)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(r=a,t=ac(e,a))),1===t)throw n=Du,fc(e,0),oc(e,r),nc(e,Je()),n;if(6===t)oc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!sr(i(),a))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=vc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Du,fc(e,0),oc(e,r),nc(e,Je()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:xc(e,zu,Wu);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Pu+500-Je())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&r)!==r){Ju(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(xc.bind(null,e,zu,Wu),t);break}xc(e,zu,Wu);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>a&&(a=s),r&=~o}if(r=a,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ku(r/1960))-r)){e.timeoutHandle=ra(xc.bind(null,e,zu,Wu),r);break}xc(e,zu,Wu);break;default:throw Error(i(329))}}}return nc(e,Je()),e.callbackNode===n?rc.bind(null,e):null}function ac(e,t){var n=Mu;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=zu,zu=n,null!==t&&ic(t)),e}function ic(e){null===zu?zu=e:zu.push.apply(zu,e)}function oc(e,t){for(t&=~_u,t&=~Lu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Cu))throw Error(i(327));kc();var t=ht(e,0);if(0===(1&t))return nc(e,Je()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Du,fc(e,0),oc(e,t),nc(e,Je()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,zu,Wu),nc(e,Je()),null}function uc(e,t){var n=Cu;Cu|=1;try{return e(t)}finally{0===(Cu=n)&&(Bu=Je()+500,Ba&&Va())}}function cc(e){null!==Hu&&0===Hu.tag&&0===(6&Cu)&&kc();var t=Cu;Cu|=1;var n=Iu.transition,r=bt;try{if(Iu.transition=null,bt=1,e)return e()}finally{bt=r,Iu.transition=n,0===(6&(Cu=t))&&Va()}}function lc(){Au=Ru.current,Ca(Ru)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Eu)for(n=Eu.return;null!==n;){var r=n;switch(Ai(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oa();break;case 3:eo(),Ca(Aa),Ca(Ta),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:Ca(ro);break;case 10:Za(r.type._context);break;case 22:case 23:lc()}n=n.return}if(Nu=e,Eu=e=Dc(e.current,null),Tu=Au=t,Fu=0,Du=null,_u=Lu=Ou=0,zu=Mu=null,null!==ei){for(t=0;t<ei.length;t++)if(null!==(r=(n=ei[t]).interleaved)){n.interleaved=null;var a=r.next,i=n.pending;if(null!==i){var o=i.next;i.next=a,r.next=o}n.pending=r}ei=null}return e}function hc(e,t){for(;;){var n=Eu;try{if(Ya(),so.current=ns,po){for(var r=lo.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}po=!1}if(co=0,ho=fo=lo=null,vo=!1,mo=0,Su.current=null,null===n||null===n.return){Fu=1,Du=t,Eu=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Tu,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=u,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=vs(s);if(null!==p){p.flags&=-257,ms(p,s,u,0,t),1&p.mode&&ps(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){ps(o,l,t),pc();break e}c=Error(i(426))}else if(Di&&1&u.mode){var g=vs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ms(g,s,u,0,t),Ui(c);break e}}o=c,4!==Fu&&(Fu=2),null===Mu?Mu=[o]:Mu.push(o),c=os(c,u),u=s;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t,si(u,hs(0,c,t));break e;case 1:o=c;var y=u.type,b=u.stateNode;if(0===(128&u.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===ju||!ju.has(b)))){u.flags|=65536,t&=-t,u.lanes|=t,si(u,ds(u,o,t));break e}}u=u.return}while(null!==u)}bc(n)}catch(x){t=x,Eu===n&&null!==n&&(Eu=n=n.return);continue}break}}function dc(){var e=wu.current;return wu.current=ns,null===e?ns:e}function pc(){0!==Fu&&3!==Fu&&2!==Fu||(Fu=4),null===Nu||0===(268435455&Ou)&&0===(268435455&Lu)||oc(Nu,Tu)}function vc(e,t){var n=Cu;Cu|=2;var r=dc();for(Nu===e&&Tu===t||(Wu=null,fc(e,t));;)try{mc();break}catch(a){hc(e,a)}if(Ya(),Cu=n,wu.current=r,null!==Eu)throw Error(i(261));return Nu=null,Tu=0,Fu}function mc(){for(;null!==Eu;)yc(Eu)}function gc(){for(;null!==Eu&&!Ye();)yc(Eu)}function yc(e){var t=xu(e.alternate,e,Au);e.memoizedProps=e.pendingProps,null===t?bc(e):Eu=t,Su.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=bs(n,t,Au)))return void(Eu=n)}else{if(null!==(n=Hs(n,t)))return n.flags&=32767,void(Eu=n);if(null===e)return Fu=6,void(Eu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Eu=t);Eu=t=e}while(null!==t);0===Fu&&(Fu=5)}function xc(e,t,n){var r=bt,a=Iu.transition;try{Iu.transition=null,bt=1,function(e,t,n,r){do{kc()}while(null!==Hu);if(0!==(6&Cu))throw Error(i(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ot(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}(e,o),e===Nu&&(Eu=Nu=null,Tu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gu||(Gu=!0,Tc(tt,(function(){return kc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Iu.transition,Iu.transition=null;var s=bt;bt=1;var u=Cu;Cu|=4,Su.current=null,function(e,t){if(ea=Gt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==a&&3!==h.nodeType||(u=s+a),h!==o||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===a&&(u=s),d===o&&++f===r&&(c=s),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Gt=!1,Ys=t;null!==Ys;)if(e=(t=Ys).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ys=e;else for(;null!==Ys;){t=Ys;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Ga(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;if(1===x.nodeType)x.textContent="";else if(9===x.nodeType){var k=x.body;null!=k&&(k.textContent="")}break;default:throw Error(i(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ys=e;break}Ys=t.return}v=Qs,Qs=!1}(e,n),du(n,e),pr(ta),Gt=!!ea,ta=ea=null,e.current=n,vu(n,e,a),Ze(),Cu=u,bt=s,Iu.transition=o}else e.current=n;if(Gu&&(Gu=!1,Hu=e,Ku=a),0===(o=e.pendingLanes)&&(ju=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r(t[n]);if(Uu)throw Uu=!1,e=Vu,Vu=null,e;0!==(1&Ku)&&0!==e.tag&&kc(),0!==(1&(o=e.pendingLanes))?e===Xu?qu++:(qu=0,Xu=e):qu=0,Va()}(e,t,n,r)}finally{Iu.transition=a,bt=r}return null}function kc(){if(null!==Hu){var e=xt(Ku),t=Iu.transition,n=bt;try{if(Iu.transition=null,bt=16>e?16:e,null===Hu)var r=!1;else{if(e=Hu,Hu=null,Ku=0,0!==(6&Cu))throw Error(i(331));var a=Cu;for(Cu|=4,Ys=e.current;null!==Ys;){var o=Ys,s=o.child;if(0!==(16&Ys.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Ys=l;null!==Ys;){var f=Ys;switch(f.tag){case 0:case 11:case 15:$s(8,f,o)}var h=f.child;if(null!==h)h.return=f,Ys=h;else for(;null!==Ys;){var d=(f=Ys).sibling,p=f.return;if(nu(f),f===l){Ys=null;break}if(null!==d){d.return=p,Ys=d;break}Ys=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Ys=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Ys=s;else e:for(;null!==Ys;){if(0!==(2048&(o=Ys).flags))switch(o.tag){case 0:case 11:case 15:$s(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Ys=y;break e}Ys=o.return}}var b=e.current;for(Ys=b;null!==Ys;){var x=(s=Ys).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Ys=x;else e:for(s=b;null!==Ys;){if(0!==(2048&(u=Ys).flags))try{switch(u.tag){case 0:case 11:case 15:eu(9,u)}}catch(w){Sc(u,u.return,w)}if(u===s){Ys=null;break e}var k=u.sibling;if(null!==k){k.return=u.return,Ys=k;break e}Ys=u.return}}if(Cu=a,Va(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(w){}r=!0}return r}finally{bt=n,Iu.transition=t}}return!1}function wc(e,t,n){ii(e,t=hs(0,t=os(n,t),1)),t=Ju(),null!==(e=ec(e,1))&&(gt(e,1,t),nc(e,t))}function Sc(e,t,n){if(3===e.tag)wc(e,e,n);else for(;null!==t;){if(3===t.tag){wc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ju||!ju.has(r))){ii(t,e=ds(t,e=os(n,e),1)),e=Ju(),null!==(t=ec(t,1))&&(gt(t,1,e),nc(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Ju(),e.pingedLanes|=e.suspendedLanes&n,Nu===e&&(Tu&n)===n&&(4===Fu||3===Fu&&(130023424&Tu)===Tu&&500>Je()-Pu?fc(e,0):_u|=n),nc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=Ju();null!==(e=ec(e,t))&&(gt(e,t,n),nc(e,n))}function Nc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Ec(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Cc(e,n)}function Tc(e,t){return qe(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Ac(e,t,n,r)}function Fc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,a,o){var s=2;if(r=e,"function"===typeof e)Fc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Lc(n.children,a,o,t);case I:s=8,a|=8;break;case C:return(e=Rc(12,n,t,2|a)).elementType=C,e.lanes=o,e;case A:return(e=Rc(13,n,t,a)).elementType=A,e.lanes=o,e;case R:return(e=Rc(19,n,t,a)).elementType=R,e.lanes=o,e;case O:return _c(n,a,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:s=10;break e;case E:s=9;break e;case T:s=11;break e;case F:s=14;break e;case D:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Rc(s,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function _c(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={},e}function Mc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Pc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,a,i,o,s,u){return e=new Pc(e,t,n,s,u),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Rc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ni(i),e}function Wc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Uc(e){if(!e)return Ea;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Da(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Da(n))return _a(e,n,t)}return t}function Vc(e,t,n,r,a,i,o,s,u){return(e=Bc(n,r,!0,e,0,i,0,s,u)).context=Uc(null),n=e.current,(i=ai(r=Ju(),a=Qu(n))).callback=void 0!==t&&null!==t?t:null,ii(n,i),e.current.lanes=a,gt(e,a,r),nc(e,r),e}function jc(e,t,n,r){var a=t.current,i=Ju(),o=Qu(a);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ai(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ii(a,t),null!==(e=$u(a,o,i))&&oi(e,a,o),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}xu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Aa.current)ks=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ks=!1,function(e,t,n){switch(t.tag){case 3:Fs(t),Wi();break;case 5:to(t);break;case 1:Da(t.type)&&Ma(t);break;case 4:$i(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Na(Ha,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Na(ro,1&ro.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ms(e,t,n):(Na(ro,1&ro.current),null!==(e=Gs(e,t,n))?e.sibling:null);Na(ro,1&ro.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return js(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Na(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,Ns(e,t,n)}return Gs(e,t,n)}(e,t,n);ks=0!==(131072&e.flags)}else ks=!1,Di&&0!==(1048576&t.flags)&&Ei(t,xi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var a=Fa(t,Ta.current);Qa(t,n),a=xo(null,t,r,e,a,n);var o=ko();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Da(r)?(o=!0,Ma(t)):o=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,ni(t),a.updater=hi,t.stateNode=a,a._reactInternals=t,mi(t,r,e,n),t=Rs(null,t,r,!0,o,n)):(t.tag=0,Di&&o&&Ti(t),ws(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Fc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===F)return 14}return 2}(r),e=Ga(r,e),a){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=As(null,t,r,e,n);break e;case 11:t=Ss(null,t,r,e,n);break e;case 14:t=Is(null,t,r,Ga(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Ts(e,t,r,a=t.elementType===r?a:Ga(r,a),n);case 1:return r=t.type,a=t.pendingProps,As(e,t,r,a=t.elementType===r?a:Ga(r,a),n);case 3:e:{if(Fs(t),null===e)throw Error(i(387));r=t.pendingProps,a=(o=t.memoizedState).element,ri(e,t),ui(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ds(e,t,r,n,a=Error(i(423)));break e}if(r!==a){t=Ds(e,t,r,n,a=Error(i(424)));break e}for(Fi=ca(t.stateNode.containerInfo.firstChild),Ri=t,Di=!0,Oi=null,n=qi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Wi(),r===a){t=Gs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&zi(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,na(r,a)?s=null:null!==o&&na(r,o)&&(t.flags|=32),Es(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&zi(t),null;case 13:return Ms(e,t,n);case 4:return $i(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ki(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,Ss(e,t,r,a=t.elementType===r?a:Ga(r,a),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,s=a.value,Na(Ha,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===a.children&&!Aa.current){t=Gs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ai(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ja(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(i(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Ja(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Qa(t,n),r=r(a=$a(a)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return a=Ga(r=t.type,t.pendingProps),Is(e,t,r,a=Ga(r.type,a),n);case 15:return Cs(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ga(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Da(r)?(e=!0,Ma(t)):e=!1,Qa(t,n),pi(t,r,a),mi(t,r,a,n),Rs(null,t,r,!0,e,n);case 19:return js(e,t,n);case 22:return Ns(e,t,n)}throw Error(i(156,t.tag))};var qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function $c(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if("function"===typeof a){var s=a;a=function(){var e=Gc(o);s.call(e)}}jc(t,o,e,a)}else o=function(e,t,n,r,a){if(a){if("function"===typeof r){var i=r;r=function(){var e=Gc(o);i.call(e)}}var o=Vc(t,r,e,0,null,!1,0,"",Qc);return e._reactRootContainer=o,e[pa]=o.current,Vr(8===e.nodeType?e.parentNode:e),cc(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var s=r;r=function(){var e=Gc(u);s.call(e)}}var u=Bc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=u,e[pa]=u.current,Vr(8===e.nodeType?e.parentNode:e),cc((function(){jc(t,u,n,r)})),u}(n,t,e,a,r);return Gc(o)}Yc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));jc(e,t,null,null)},Yc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc((function(){jc(null,e,null,null)})),t[pa]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&zt(e)}},kt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(yt(t,1|n),nc(t,Je()),0===(6&Cu)&&(Bu=Je()+500,Va()))}break;case 13:var r=Ju();cc((function(){return $u(e,1,r)})),Kc(e,1)}},wt=function(e){13===e.tag&&($u(e,134217728,Ju()),Kc(e,134217728))},St=function(e){if(13===e.tag){var t=Ju(),n=Qu(e);$u(e,n,t),Kc(e,n)}},It=function(){return bt},Ct=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},we=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ka(r);if(!a)throw Error(i(90));q(r),Q(r,a)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=uc,Ae=cc;var el={usingClientEntryPoint:!1,Events:[ba,xa,ka,Ne,Ee,uc]},tl={findFiberByHostInstance:ya,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nl={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{at=rl.inject(nl),it=rl}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=el,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(i(200));return Wc(e,t,null,n)},t.createRoot=function(e,t){if(!Zc(e))throw Error(i(299));var n=!1,r="",a=qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,a),e[pa]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(i(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,a=!1,o="",s=qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,a,0,o,s),e[pa]=t.current,Vr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(i(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(i(40));return!!e._reactRootContainer&&(cc((function(){$c(null,null,e,!1,(function(){e._reactRootContainer=null,e[pa]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return $c(e,t,n,!1,r)},t.version="18.1.0-next-22edb9f77-20220426"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},1372:function(e,t){"use strict";var n=60103,r=60106,a=60107,i=60108,o=60114,s=60109,u=60110,c=60112,l=60113,f=60120,h=60115,d=60116,p=60121,v=60122,m=60117,g=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var b=Symbol.for;n=b("react.element"),r=b("react.portal"),a=b("react.fragment"),i=b("react.strict_mode"),o=b("react.profiler"),s=b("react.provider"),u=b("react.context"),c=b("react.forward_ref"),l=b("react.suspense"),f=b("react.suspense_list"),h=b("react.memo"),d=b("react.lazy"),p=b("react.block"),v=b("react.server.block"),m=b("react.fundamental"),g=b("react.debug_trace_mode"),y=b("react.legacy_hidden")}function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case a:case o:case i:case l:case f:return e;default:switch(e=e&&e.$$typeof){case u:case c:case d:case h:case s:return e;default:return t}}case r:return t}}}t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===o||e===g||e===i||e===l||e===f||e===y||"object"===typeof e&&null!==e&&(e.$$typeof===d||e.$$typeof===h||e.$$typeof===s||e.$$typeof===u||e.$$typeof===c||e.$$typeof===m||e.$$typeof===p||e[0]===v)},t.typeOf=x},7441:function(e,t,n){"use strict";e.exports=n(1372)},6374:function(e,t,n){"use strict";var r=n(2791),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:l,props:i,_owner:s.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var x=b.prototype=new y;x.constructor=b,v(x,g.prototype),x.isPureReactComponent=!0;var k=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var a,i={},o=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,a)&&!I.hasOwnProperty(a)&&(i[a]=t[a]);var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(a in u=e.defaultProps)void 0===i[a]&&(i[a]=u[a]);return{$$typeof:n,type:e,key:o,ref:s,props:i,_owner:S.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,a,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===i?"."+T(u,0):i,k(o)?(a="",null!=e&&(a=e.replace(E,"$&/")+"/"),A(o,t,a,"",(function(e){return e}))):null!=o&&(N(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(u=0,i=""===i?".":i+":",k(e))for(var c=0;c<e.length;c++){var l=i+T(s=e[c],c);u+=A(s,t,a,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=A(s=s.value,t,a,l=i+T(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function R(e,t,n){if(null==e)return e;var r=[],a=0;return A(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function F(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},O={transition:null},L={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=v({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=S.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)w.call(t,c)&&!I.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];a.children=u}return{$$typeof:n,type:e.type,key:i,ref:o,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:F}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.1.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},9727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(F){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),o=new T(r||[]);return i._invoke=function(e,t,n){var r=f;return function(a,i){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===a)throw i;return R()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=C(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,o),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(F){return{type:"throw",arg:F}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function m(){}function g(){}function y(){}var b={};u(b,i,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(A([])));k&&k!==n&&r.call(k,i)&&(b=k);var w=y.prototype=m.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(a,i,o,s){var u=l(e[a],e,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var a;this._invoke=function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}}function C(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var a=l(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function A(e){if(e){var n=e[i];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:R}}function R(){return{value:t,done:!0}}return g.prototype=y,u(w,"constructor",y),u(y,"constructor",g),g.displayName=u(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},S(I.prototype),u(I.prototype,o,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new I(c(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(w),u(w,s,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>i(u,n))c<a&&0>i(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<a&&0>i(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(l);null!==t;){if(null===t.callback)a(l);else{if(!(t.startTime<=e))break;a(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function k(e){if(m=!1,x(e),!v)if(null!==r(c))v=!0,O(w);else{var t=r(l);null!==t&&L(k,t.startTime-e)}}function w(e,n){v=!1,m&&(m=!1,y(N),N=-1),p=!0;var i=d;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&a(c),x(n)}else a(c);h=r(c)}if(null!==h)var u=!0;else{var f=r(l);null!==f&&L(k,f.startTime-n),u=!1}return u}finally{h=null,d=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,I=!1,C=null,N=-1,E=5,T=-1;function A(){return!(t.unstable_now()-T<E)}function R(){if(null!==C){var e=t.unstable_now();T=e;var n=!0;try{n=C(!0,e)}finally{n?S():(I=!1,C=null)}}else I=!1}if("function"===typeof b)S=function(){b(R)};else if("undefined"!==typeof MessageChannel){var F=new MessageChannel,D=F.port2;F.port1.onmessage=R,S=function(){D.postMessage(null)}}else S=function(){g(R,0)};function O(e){C=e,I||(I=!0,S())}function L(e,n){N=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:a,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,n(l,e),null===r(c)&&e===r(l)&&(m?(y(N),N=-1):m=!0,L(k,i-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,O(w))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},6699:function(e,t,n){var r=n(2501),a=n(9112),i=n(2132),o=n(890),s=n(4113),u=n(1725),c=n(3411);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=s,c.tychei=u,e.exports=c},2501:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e=n.nmd(e),n.amdD)},1725:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e=n.nmd(e),n.amdD)},9112:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e=n.nmd(e),n.amdD)},4113:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e=n.nmd(e),n.amdD)},890:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e=n.nmd(e),n.amdD)},2132:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e=n.nmd(e),n.amdD)},3411:function(e,t,n){var r;!function(a,i){var o,s=(0,eval)("this"),u=256,c=i.pow(u,6),l=i.pow(2,52),f=2*l,h=255;function d(e,t,n){var r=[],h=g(m((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(u):(e=new Uint8Array(u),(s.crypto||s.msCrypto).getRandomValues(e)),y(e)}catch(r){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,y(a)]}}():e,3),r),d=new p(r),b=function(){for(var e=d.g(6),t=c,n=0;e<l;)e=(e+n)*u,t*=u,n=d.g(1);for(;e>=f;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|d.g(4)},b.quick=function(){return d.g(4)/4294967296},b.double=b,g(y(d.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,d),e.state=function(){return v(d,{})}),n?(i.random=e,t):e})(b,h,"global"in t?t.global:this==i,t.state)}function p(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<u;)o[a]=a++;for(a=0;a<u;a++)o[a]=o[i=h&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=h&a+1],n=n*u+o[h&(o[a]=o[i=h&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(u)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(m(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function g(e,t){for(var n,r=e+"",a=0;a<r.length;)t[h&a]=h&(n^=19*t[h&a])+r.charCodeAt(a++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=d,g(i.random(),a),e.exports){e.exports=d;try{o=n(5042)}catch(b){}}else void 0===(r=function(){return d}.call(t,n,t,e))||(e.exports=r)}([],Math)},9613:function(e){e.exports=function(e,t,n,r){var a=n?n.call(r,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),u=0;u<i.length;u++){var c=i[u];if(!s(c))return!1;var l=e[c],f=t[c];if(!1===(a=n?n.call(r,l,f,c):void 0)||void 0===a&&l!==f)return!1}return!0}},914:function(){},5410:function(){},8628:function(){},5778:function(){},1601:function(){},7792:function(){},4977:function(){},5042:function(){}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&a&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(i,o),i}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/diabetic-retinopathy/",function(){"use strict";var e={};n.r(e),n.d(e,{browserFiles:function(){return Im},browserHTTPRequest:function(){return Mm},concatenateArrayBuffers:function(){return kv},copyModel:function(){return cm},decodeWeights:function(){return vv},encodeWeights:function(){return dv},fromMemory:function(){return Bm},getLoadHandlers:function(){return Dv},getModelArtifactsForJSON:function(){return Iv},getModelArtifactsInfoForJSON:function(){return Nv},getSaveHandlers:function(){return Fv},http:function(){return _m},isHTTPScheme:function(){return Om},listModels:function(){return im},loadWeights:function(){return Tm},moveModel:function(){return fm},registerLoadRouter:function(){return Rv},registerSaveRouter:function(){return Av},removeModel:function(){return sm},weightsLoaderFactory:function(){return Rm},withSaveHandler:function(){return Wm}});var t=n(2791),r=n.t(t,2),a=n(1250);function i(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(7441),s=n(9613),u=n.n(s);var c=function(e){function t(e,r,u,c,h){for(var d,p,v,m,x,w=0,S=0,I=0,C=0,N=0,D=0,L=v=d=0,M=0,z=0,P=0,B=0,W=u.length,U=W-1,V="",j="",G="",H="";M<W;){if(p=u.charCodeAt(M),M===U&&0!==S+C+I+w&&(0!==S&&(p=47===S?10:47),C=I=w=0,W++,U++),0===S+C+I+w){if(M===U&&(0<z&&(V=V.replace(f,"")),0<V.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:V+=u.charAt(M)}p=59}switch(p){case 123:for(d=(V=V.trim()).charCodeAt(0),v=1,B=++M;M<W;){switch(p=u.charCodeAt(M)){case 123:v++;break;case 125:v--;break;case 47:switch(p=u.charCodeAt(M+1)){case 42:case 47:e:{for(L=M+1;L<U;++L)switch(u.charCodeAt(L)){case 47:if(42===p&&42===u.charCodeAt(L-1)&&M+2!==L){M=L+1;break e}break;case 10:if(47===p){M=L+1;break e}}M=L}}break;case 91:p++;case 40:p++;case 34:case 39:for(;M++<U&&u.charCodeAt(M)!==p;);}if(0===v)break;M++}if(v=u.substring(B,M),0===d&&(d=(V=V.replace(l,"").trim()).charCodeAt(0)),64===d){switch(0<z&&(V=V.replace(f,"")),p=V.charCodeAt(1)){case 100:case 109:case 115:case 45:z=r;break;default:z=F}if(B=(v=t(r,z,v,p,h+1)).length,0<O&&(x=s(3,v,z=n(F,V,P),r,T,E,B,p,h,c),V=z.join(""),void 0!==x&&0===(B=(v=x.trim()).length)&&(p=0,v="")),0<B)switch(p){case 115:V=V.replace(k,o);case 100:case 109:case 45:v=V+"{"+v+"}";break;case 107:v=(V=V.replace(g,"$1 $2"))+"{"+v+"}",v=1===R||2===R&&i("@"+v,3)?"@-webkit-"+v+"@"+v:"@"+v;break;default:v=V+v,112===c&&(j+=v,v="")}else v=""}else v=t(r,n(r,V,P),v,c,h+1);G+=v,v=P=z=L=d=0,V="",p=u.charCodeAt(++M);break;case 125:case 59:if(1<(B=(V=(0<z?V.replace(f,""):V).trim()).length))switch(0===L&&(d=V.charCodeAt(0),45===d||96<d&&123>d)&&(B=(V=V.replace(" ",":")).length),0<O&&void 0!==(x=s(1,V,r,e,T,E,j.length,c,h,c))&&0===(B=(V=x.trim()).length)&&(V="\0\0"),d=V.charCodeAt(0),p=V.charCodeAt(1),d){case 0:break;case 64:if(105===p||99===p){H+=V+u.charAt(M);break}default:58!==V.charCodeAt(B-1)&&(j+=a(V,d,p,V.charCodeAt(2)))}P=z=L=d=0,V="",p=u.charCodeAt(++M)}}switch(p){case 13:case 10:47===S?S=0:0===1+d&&107!==c&&0<V.length&&(z=1,V+="\0"),0<O*_&&s(0,V,r,e,T,E,j.length,c,h,c),E=1,T++;break;case 59:case 125:if(0===S+C+I+w){E++;break}default:switch(E++,m=u.charAt(M),p){case 9:case 32:if(0===C+w+S)switch(N){case 44:case 58:case 9:case 32:m="";break;default:32!==p&&(m=" ")}break;case 0:m="\\0";break;case 12:m="\\f";break;case 11:m="\\v";break;case 38:0===C+S+w&&(z=P=1,m="\f"+m);break;case 108:if(0===C+S+w+A&&0<L)switch(M-L){case 2:112===N&&58===u.charCodeAt(M-3)&&(A=N);case 8:111===D&&(A=D)}break;case 58:0===C+S+w&&(L=M);break;case 44:0===S+I+C+w&&(z=1,m+="\r");break;case 34:case 39:0===S&&(C=C===p?0:0===C?p:C);break;case 91:0===C+S+I&&w++;break;case 93:0===C+S+I&&w--;break;case 41:0===C+S+w&&I--;break;case 40:if(0===C+S+w){if(0===d)if(2*N+3*D===533);else d=1;I++}break;case 64:0===S+I+C+w+L+v&&(v=1);break;case 42:case 47:if(!(0<C+w+I))switch(S){case 0:switch(2*p+3*u.charCodeAt(M+1)){case 235:S=47;break;case 220:B=M,S=42}break;case 42:47===p&&42===N&&B+2!==M&&(33===u.charCodeAt(B+2)&&(j+=u.substring(B,M+1)),m="",S=0)}}0===S&&(V+=m)}D=N,N=p,M++}if(0<(B=j.length)){if(z=r,0<O&&(void 0!==(x=s(2,j,z,e,T,E,B,c,h,c))&&0===(j=x).length))return H+j+G;if(j=z.join(",")+"{"+j+"}",0!==R*A){switch(2!==R||i(j,2)||(A=0),A){case 111:j=j.replace(b,":-moz-$1")+j;break;case 112:j=j.replace(y,"::-webkit-input-$1")+j.replace(y,"::-moz-$1")+j.replace(y,":-ms-input-$1")+j}A=0}}return H+j+G}function n(e,t,n){var a=t.trim().split(v);t=a;var i=a.length,o=e.length;switch(o){case 0:case 1:var s=0;for(e=0===o?"":e[0]+" ";s<i;++s)t[s]=r(e,t[s],n).trim();break;default:var u=s=0;for(t=[];s<i;++s)for(var c=0;c<o;++c)t[u++]=r(e[c]+" ",a[s],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(m,"$1"+e.trim());case 58:return e.trim()+t.replace(m,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(m,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function a(e,t,n,r){var o=e+";",s=2*t+3*n+4*r;if(944===s){e=o.indexOf(":",9)+1;var u=o.substring(e,o.length-1).trim();return u=o.substring(0,e).trim()+u+";",1===R||2===R&&i(u,1)?"-webkit-"+u+u:u}if(0===R||2===R&&!i(o,1))return o;switch(s){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(N,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(u=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+u+o;case 1005:return d.test(o)?o.replace(h,":-webkit-")+o.replace(h,":-moz-")+o:o;case 1e3:switch(t=(u=o.substring(13).trim()).indexOf("-")+1,u.charCodeAt(0)+u.charCodeAt(t)){case 226:u=o.replace(x,"tb");break;case 232:u=o.replace(x,"tb-rl");break;case 220:u=o.replace(x,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+u+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,s=(u=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|u.charCodeAt(7))){case 203:if(111>u.charCodeAt(8))break;case 115:o=o.replace(u,"-webkit-"+u)+";"+o;break;case 207:case 102:o=o.replace(u,"-webkit-"+(102<s?"inline-":"")+"box")+";"+o.replace(u,"-webkit-"+u)+";"+o.replace(u,"-ms-"+u+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return u=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+u+"-ms-flex-"+u+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(S,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(S,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===C.test(e))return 115===(u=e.substring(e.indexOf(":")+1)).charCodeAt(0)?a(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):o.replace(u,"-webkit-"+u)+o.replace(u,"-moz-"+u.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+r&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+o}return o}function i(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),L(2!==t?r:r.replace(I,"$1"),n,t)}function o(e,t){var n=a(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(w," or ($1)").substring(4):"("+t+")"}function s(e,t,n,r,a,i,o,s,u,l){for(var f,h=0,d=t;h<O;++h)switch(f=D[h].call(c,e,d,n,r,a,i,o,s,u,l)){case void 0:case!1:case!0:case null:break;default:d=f}if(d!==t)return d}function u(e){return void 0!==(e=e.prefix)&&(L=null,e?"function"!==typeof e?R=1:(R=2,L=e):R=0),u}function c(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<O){var a=s(-1,n,r,r,T,E,0,0,0,0);void 0!==a&&"string"===typeof a&&(n=a)}var i=t(F,r,n,0,0);return 0<O&&(void 0!==(a=s(-2,i,r,r,T,E,i.length,0,0,0))&&(i=a)),"",A=0,E=T=1,i}var l=/^\0+/g,f=/[\0\r\f]/g,h=/: */g,d=/zoo|gra/,p=/([,: ])(transform)/g,v=/,\r+?/g,m=/([\t\r\n ])*\f?&/g,g=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,b=/:(read-only)/g,x=/[svh]\w+-[tblr]{2}/,k=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,S=/-self|flex-/g,I=/[^]*?(:[rp][el]a[\w-]+)[^]*/,C=/stretch|:\s*\w+\-(?:conte|avail)/,N=/([^-])(image-set\()/,E=1,T=1,A=0,R=1,F=[],D=[],O=0,L=null,_=0;return c.use=function e(t){switch(t){case void 0:case null:O=D.length=0;break;default:if("function"===typeof t)D[O++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else _=0|!!t}return e},c.set=u,void 0!==e&&u(e),c},l={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var f=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},h=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,d=f((function(e){return h.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),p=n(2110),v=n.n(p);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var g=function(e,t){for(var n=[e[0]],r=0,a=t.length;r<a;r+=1)n.push(t[r],e[r+1]);return n},y=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,o.typeOf)(e)},b=Object.freeze([]),x=Object.freeze({});function k(e){return"function"==typeof e}function w(e){return e.displayName||e.name||"Component"}function S(e){return e&&"string"==typeof e.styledComponentId}var I="undefined"!=typeof process&&({NODE_ENV:"production",PUBLIC_URL:"/diabetic-retinopathy",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/diabetic-retinopathy",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",C="undefined"!=typeof window&&"HTMLElement"in window,N=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/diabetic-retinopathy",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/diabetic-retinopathy",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/diabetic-retinopathy",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/diabetic-retinopathy",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/diabetic-retinopathy",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/diabetic-retinopathy",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/diabetic-retinopathy",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/diabetic-retinopathy",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY));function E(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var T=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,a=r;e>=a;)(a<<=1)<0&&E(16,""+e);this.groupSizes=new Uint32Array(a),this.groupSizes.set(n),this.length=a;for(var i=r;i<a;i++)this.groupSizes[i]=0}for(var o=this.indexOfGroup(e+1),s=0,u=t.length;s<u;s++)this.tag.insertRule(o,t[s])&&(this.groupSizes[e]++,o++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var a=n;a<r;a++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),a=r+n,i=r;i<a;i++)t+=this.tag.getRule(i)+"/*!sc*/\n";return t},e}(),A=new Map,R=new Map,F=1,D=function(e){if(A.has(e))return A.get(e);for(;R.has(F);)F++;var t=F++;return A.set(e,t),R.set(t,e),t},O=function(e){return R.get(e)},L=function(e,t){t>=F&&(F=t+1),A.set(e,t),R.set(t,e)},_="style["+I+'][data-styled-version="5.3.5"]',M=new RegExp("^"+I+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),z=function(e,t,n){for(var r,a=n.split(","),i=0,o=a.length;i<o;i++)(r=a[i])&&e.registerName(t,r)},P=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],a=0,i=n.length;a<i;a++){var o=n[a].trim();if(o){var s=o.match(M);if(s){var u=0|parseInt(s[1],10),c=s[2];0!==u&&(L(c,u),z(e,c,s[3]),e.getTag().insertRules(u,r)),r.length=0}else r.push(o)}}},B=function(){return"undefined"!=typeof window&&void 0!==window.__webpack_nonce__?window.__webpack_nonce__:null},W=function(e){var t=document.head,n=e||t,r=document.createElement("style"),a=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(I))return r}}(n),i=void 0!==a?a.nextSibling:null;r.setAttribute(I,"active"),r.setAttribute("data-styled-version","5.3.5");var o=B();return o&&r.setAttribute("nonce",o),n.insertBefore(r,i),r},U=function(){function e(e){var t=this.element=W(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var a=t[n];if(a.ownerNode===e)return a}E(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),V=function(){function e(e){var t=this.element=W(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),j=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),G=C,H={isServer:!C,useCSSOMInjection:!N},K=function(){function e(e,t,n){void 0===e&&(e=x),void 0===t&&(t={}),this.options=m({},H,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&C&&G&&(G=!1,function(e){for(var t=document.querySelectorAll(_),n=0,r=t.length;n<r;n++){var a=t[n];a&&"active"!==a.getAttribute(I)&&(P(e,a),a.parentNode&&a.parentNode.removeChild(a))}}(this))}e.registerId=function(e){return D(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(m({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,a=t.target,e=n?new j(a):r?new U(a):new V(a),new T(e)));var e,t,n,r,a},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(D(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(D(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(D(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",a=0;a<n;a++){var i=O(a);if(void 0!==i){var o=e.names.get(i),s=t.getGroup(a);if(o&&s&&o.size){var u=I+".g"+a+'[id="'+i+'"]',c="";void 0!==o&&o.forEach((function(e){e.length>0&&(c+=e+",")})),r+=""+s+u+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},e}(),q=/(a)(d)/gi,X=function(e){return String.fromCharCode(e+(e>25?39:97))};function Y(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=X(t%52)+n;return(X(t%52)+n).replace(q,"$1-$2")}var Z=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},J=function(e){return Z(5381,e)};function Q(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(k(n)&&!S(n))return!1}return!0}var $=J("5.3.5"),ee=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&Q(e),this.componentId=t,this.baseHash=Z($,t),this.baseStyle=n,K.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,a=[];if(this.baseStyle&&a.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))a.push(this.staticRulesId);else{var i=ye(this.rules,e,t,n).join(""),o=Y(Z(this.baseHash,i)>>>0);if(!t.hasNameForId(r,o)){var s=n(i,"."+o,void 0,r);t.insertRules(r,o,s)}a.push(o),this.staticRulesId=o}else{for(var u=this.rules.length,c=Z(this.baseHash,n.hash),l="",f=0;f<u;f++){var h=this.rules[f];if("string"==typeof h)l+=h;else if(h){var d=ye(h,e,t,n),p=Array.isArray(d)?d.join(""):d;c=Z(c,p+f),l+=p}}if(l){var v=Y(c>>>0);if(!t.hasNameForId(r,v)){var m=n(l,"."+v,void 0,r);t.insertRules(r,v,m)}a.push(v)}}return a.join(" ")},e}(),te=/^\s*\/\/.*$/gm,ne=[":","[",".","#"];function re(e){var t,n,r,a,i=void 0===e?x:e,o=i.options,s=void 0===o?x:o,u=i.plugins,l=void 0===u?b:u,f=new c(s),h=[],d=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,a,i,o,s,u,c,l,f){switch(n){case 1:if(0===l&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(a[0]+r),"";default:return r+(0===f?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){h.push(e)})),p=function(e,r,i){return 0===r&&-1!==ne.indexOf(i[n.length])||i.match(a)?e:"."+t};function v(e,i,o,s){void 0===s&&(s="&");var u=e.replace(te,""),c=i&&o?o+" "+i+" { "+u+" }":u;return t=s,n=i,r=new RegExp("\\"+n+"\\b","g"),a=new RegExp("(\\"+n+"\\b){2,}"),f(o||!i?"":i,c)}return f.use([].concat(l,[function(e,t,a){2===e&&a.length&&a[0].lastIndexOf(n)>0&&(a[0]=a[0].replace(r,p))},d,function(e){if(-2===e){var t=h;return h=[],t}}])),v.hash=l.length?l.reduce((function(e,t){return t.name||E(15),Z(e,t.name)}),5381).toString():"",v}var ae=t.createContext(),ie=(ae.Consumer,t.createContext()),oe=(ie.Consumer,new K),se=re();function ue(){return(0,t.useContext)(ae)||oe}function ce(){return(0,t.useContext)(ie)||se}function le(e){var n=(0,t.useState)(e.stylisPlugins),r=n[0],a=n[1],i=ue(),o=(0,t.useMemo)((function(){var t=i;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),s=(0,t.useMemo)((function(){return re({options:{prefix:!e.disableVendorPrefixes},plugins:r})}),[e.disableVendorPrefixes,r]);return(0,t.useEffect)((function(){u()(r,e.stylisPlugins)||a(e.stylisPlugins)}),[e.stylisPlugins]),t.createElement(ae.Provider,{value:o},t.createElement(ie.Provider,{value:s},e.children))}var fe=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=se);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return E(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=se),this.name+e.hash},e}(),he=/([A-Z])/,de=/([A-Z])/g,pe=/^ms-/,ve=function(e){return"-"+e.toLowerCase()};function me(e){return he.test(e)?e.replace(de,ve).replace(pe,"-ms-"):e}var ge=function(e){return null==e||!1===e||""===e};function ye(e,t,n,r){if(Array.isArray(e)){for(var a,i=[],o=0,s=e.length;o<s;o+=1)""!==(a=ye(e[o],t,n,r))&&(Array.isArray(a)?i.push.apply(i,a):i.push(a));return i}return ge(e)?"":S(e)?"."+e.styledComponentId:k(e)?"function"!=typeof(u=e)||u.prototype&&u.prototype.isReactComponent||!t?e:ye(e(t),t,n,r):e instanceof fe?n?(e.inject(n,r),e.getName(r)):e:y(e)?function e(t,n){var r,a,i=[];for(var o in t)t.hasOwnProperty(o)&&!ge(t[o])&&(Array.isArray(t[o])&&t[o].isCss||k(t[o])?i.push(me(o)+":",t[o],";"):y(t[o])?i.push.apply(i,e(t[o],o)):i.push(me(o)+": "+(r=o,(null==(a=t[o])||"boolean"==typeof a||""===a?"":"number"!=typeof a||0===a||r in l?String(a).trim():a+"px")+";")));return n?[n+" {"].concat(i,["}"]):i}(e):e.toString();var u}var be=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function xe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return k(e)||y(e)?be(ye(g(b,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:be(ye(g(e,n)))}new Set;var ke=function(e,t,n){return void 0===n&&(n=x),e.theme!==n.theme&&e.theme||t||n.theme},we=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Se=/(^-|-$)/g;function Ie(e){return e.replace(we,"-").replace(Se,"")}var Ce=function(e){return Y(J(e)>>>0)};function Ne(e){return"string"==typeof e&&!0}var Ee=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},Te=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function Ae(e,t,n){var r=e[n];Ee(t)&&Ee(r)?Re(r,t):e[n]=t}function Re(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];if(Ee(o))for(var s in o)Te(s)&&Ae(e,o[s],s)}return e}var Fe=t.createContext();Fe.Consumer;var De={};function Oe(e,n,r){var a=S(e),i=!Ne(e),o=n.attrs,s=void 0===o?b:o,u=n.componentId,c=void 0===u?function(e,t){var n="string"!=typeof e?"sc":Ie(e);De[n]=(De[n]||0)+1;var r=n+"-"+Ce("5.3.5"+n+De[n]);return t?t+"-"+r:r}(n.displayName,n.parentComponentId):u,l=n.displayName,f=void 0===l?function(e){return Ne(e)?"styled."+e:"Styled("+w(e)+")"}(e):l,h=n.displayName&&n.componentId?Ie(n.displayName)+"-"+n.componentId:n.componentId||c,p=a&&e.attrs?Array.prototype.concat(e.attrs,s).filter(Boolean):s,g=n.shouldForwardProp;a&&e.shouldForwardProp&&(g=n.shouldForwardProp?function(t,r,a){return e.shouldForwardProp(t,r,a)&&n.shouldForwardProp(t,r,a)}:e.shouldForwardProp);var y,I=new ee(r,h,a?e.componentStyle:void 0),C=I.isStatic&&0===s.length,N=function(e,n){return function(e,n,r,a){var i=e.attrs,o=e.componentStyle,s=e.defaultProps,u=e.foldedComponentIds,c=e.shouldForwardProp,l=e.styledComponentId,f=e.target,h=function(e,t,n){void 0===e&&(e=x);var r=m({},t,{theme:e}),a={};return n.forEach((function(e){var t,n,i,o=e;for(t in k(o)&&(o=o(r)),o)r[t]=a[t]="className"===t?(n=a[t],i=o[t],n&&i?n+" "+i:n||i):o[t]})),[r,a]}(ke(n,(0,t.useContext)(Fe),s)||x,n,i),p=h[0],v=h[1],g=function(e,t,n,r){var a=ue(),i=ce();return t?e.generateAndInjectStyles(x,a,i):e.generateAndInjectStyles(n,a,i)}(o,a,p),y=r,b=v.$as||n.$as||v.as||n.as||f,w=Ne(b),S=v!==n?m({},n,{},v):n,I={};for(var C in S)"$"!==C[0]&&"as"!==C&&("forwardedAs"===C?I.as=S[C]:(c?c(C,d,b):!w||d(C))&&(I[C]=S[C]));return n.style&&v.style!==n.style&&(I.style=m({},n.style,{},v.style)),I.className=Array.prototype.concat(u,l,g!==l?g:null,n.className,v.className).filter(Boolean).join(" "),I.ref=y,(0,t.createElement)(b,I)}(y,e,n,C)};return N.displayName=f,(y=t.forwardRef(N)).attrs=p,y.componentStyle=I,y.displayName=f,y.shouldForwardProp=g,y.foldedComponentIds=a?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):b,y.styledComponentId=h,y.target=a?e.target:e,y.withComponent=function(e){var t=n.componentId,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(n,["componentId"]),i=t&&t+"-"+(Ne(e)?e:Ie(w(e)));return Oe(e,m({},a,{attrs:p,componentId:i}),r)},Object.defineProperty(y,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=a?Re({},e.defaultProps,t):t}}),y.toString=function(){return"."+y.styledComponentId},i&&v()(y,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),y}var Le=function(e){return function e(t,n,r){if(void 0===r&&(r=x),!(0,o.isValidElementType)(n))return E(1,String(n));var a=function(){return t(n,r,xe.apply(void 0,arguments))};return a.withConfig=function(a){return e(t,n,m({},r,{},a))},a.attrs=function(a){return e(t,n,m({},r,{attrs:Array.prototype.concat(r.attrs,a).filter(Boolean)}))},a}(Oe,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){Le[e]=Le(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=Q(e),K.registerId(this.componentId+1)}var t=e.prototype;t.createStyles=function(e,t,n,r){var a=r(ye(this.rules,t,n,r).join(""),""),i=this.componentId+e;n.insertRules(i,i,a)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&K.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();!function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=B();return"<style "+[n&&'nonce="'+n+'"',I+'="true"','data-styled-version="5.3.5"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?E(2):e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)return E(2);var r=((n={})[I]="",n["data-styled-version"]="5.3.5",n.dangerouslySetInnerHTML={__html:e.instance.toString()},n),a=B();return a&&(r.nonce=a),[t.createElement("style",m({},r,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new K({isServer:!0}),this.sealed=!1}var n=e.prototype;n.collectStyles=function(e){return this.sealed?E(2):t.createElement(le,{sheet:this.instance},e)},n.interleaveWithNodeStream=function(e){return E(3)}}();var _e=Le,Me=n.p+"static/media/uni_logo.a97d4300b75a91655170.png";function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function We(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}function Ue(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){We(i,r,a,o,s,"next",e)}function s(e){We(i,r,a,o,s,"throw",e)}o(void 0)}))}}function Ve(e){if(Array.isArray(e))return e}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ge(e,t){if(e){if("string"===typeof e)return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?je(e,t):void 0}}function He(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ke(e,t){return Ve(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||Ge(e,t)||He()}var qe=n(7757),Xe=n.n(qe);function Ye(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var Ze,Je,Qe=n(184),$e=["color","children","Icon","reversed","upload","text","setPhoto"],et=_e.button(Ze||(Ze=i(["\n  min-width: 150px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.7rem;\n  background-color: ",";\n  padding: 0.6rem 1rem;\n  color: ",";\n  border: none;\n  border-radius: 0.5rem;\n  font-weight: bold;\n  cursor: pointer;\n  svg path {\n    fill: ",";\n  }\n  &:hover {\n    opacity: 0.9;\n  }\n"])),(function(e){return e.color||"white"}),(function(e){return e.text||"black"}),(function(e){return e.iconColor||"currentColor"})),tt=_e.div(Je||(Je=i(["\n  min-width: 150px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.7rem;\n  background-color: ",";\n  padding: 0.6rem 1rem;\n  color: ",";\n  border: none;\n  border-radius: 0.5rem;\n  font-weight: bold;\n  cursor: pointer;\n  svg path {\n    fill: ",";\n  }\n  &:hover {\n    opacity: 0.9;\n  }\n"])),(function(e){return e.color||"white"}),(function(e){return e.text||"black"}),(function(e){return e.iconColor||"currentColor"})),nt=function(e){var t=e.color,n=e.children,r=e.Icon,a=e.reversed,i=e.upload,o=e.text,s=e.setPhoto,u=function(e,t){if(null==e)return{};var n,r,a=Ye(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,$e);return i?(0,Qe.jsxs)("label",{style:{display:"flex"},children:[(0,Qe.jsxs)(tt,{color:t,text:o,className:"UploadButton",children:[a&&(0,Qe.jsx)(r,{className:"buttonIcon"}),n,!a&&(0,Qe.jsx)(r,{className:"buttonIcon"})]}),(0,Qe.jsx)("input",{type:"file",onChange:function(e){if(e.target.files.length>0){var t=e.target.files[0],n=new FileReader;n.onabort=function(){return console.log("file reading was aborted")},n.onerror=function(){return console.log("file reading has failed")},n.onload=function(){var e=n.result;s(e)},n.readAsDataURL(t)}},name:"",id:"upload",style:{display:"none"}})]}):(0,Qe.jsxs)(et,Be(Be({color:t,text:o},u),{},{children:[a&&(0,Qe.jsx)(r,{className:"buttonIcon"}),n,!a&&(0,Qe.jsx)(r,{className:"buttonIcon"})]}))},rt=n.p+"static/media/retina.1f6196facb8b3195b8c7.png",at=n.p+"static/media/retina-photo.26a72e2e64a1ddae7aee.png",it=n.p+"static/media/placeholder.985a5f23b26f94ed39db.png";var ot=n.p+"static/media/tick-circle.ebc21123332a78c96ee2c6d68781607d.svg";var st,ut,ct,lt=n.p+"static/media/close-circle.8f038da7d084025ff07d611c18f51ce2.svg",ft=["title","titleId"];function ht(){return ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ht.apply(this,arguments)}function dt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function pt(e,n){var r=e.title,a=e.titleId,i=dt(e,ft);return t.createElement("svg",ht({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":a},i),r?t.createElement("title",{id:a},r):null,st||(st=t.createElement("path",{d:"M12 22.75C6.07 22.75 1.25 17.93 1.25 12C1.25 6.07 6.07 1.25 12 1.25C17.93 1.25 22.75 6.07 22.75 12C22.75 17.93 17.93 22.75 12 22.75ZM12 2.75C6.9 2.75 2.75 6.9 2.75 12C2.75 17.1 6.9 21.25 12 21.25C17.1 21.25 21.25 17.1 21.25 12C21.25 6.9 17.1 2.75 12 2.75Z",fill:"#292D32"})),ut||(ut=t.createElement("path",{d:"M12 16.25C11.59 16.25 11.25 15.91 11.25 15.5V9.5C11.25 9.09 11.59 8.75 12 8.75C12.41 8.75 12.75 9.09 12.75 9.5V15.5C12.75 15.91 12.41 16.25 12 16.25Z",fill:"#292D32"})),ct||(ct=t.createElement("path",{d:"M14.9995 12.2499C14.8095 12.2499 14.6195 12.1799 14.4695 12.0299L11.9995 9.55994L9.52945 12.0299C9.23945 12.3199 8.75945 12.3199 8.46945 12.0299C8.17945 11.7399 8.17945 11.2599 8.46945 10.9699L11.4695 7.96994C11.7595 7.67994 12.2395 7.67994 12.5295 7.96994L15.5295 10.9699C15.8195 11.2599 15.8195 11.7399 15.5295 12.0299C15.3795 12.1799 15.1895 12.2499 14.9995 12.2499Z",fill:"#292D32"})))}var vt,mt,gt,yt,bt,xt=t.forwardRef(pt),kt=(n.p,["title","titleId"]);function wt(){return wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wt.apply(this,arguments)}function St(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function It(e,n){var r=e.title,a=e.titleId,i=St(e,kt);return t.createElement("svg",wt({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":a},i),r?t.createElement("title",{id:a},r):null,vt||(vt=t.createElement("path",{d:"M9 10.75C7.48 10.75 6.25 9.52 6.25 8C6.25 6.48 7.48 5.25 9 5.25C10.52 5.25 11.75 6.48 11.75 8C11.75 9.52 10.52 10.75 9 10.75ZM9 6.75C8.31 6.75 7.75 7.31 7.75 8C7.75 8.69 8.31 9.25 9 9.25C9.69 9.25 10.25 8.69 10.25 8C10.25 7.31 9.69 6.75 9 6.75Z",fill:"#292D32"})),mt||(mt=t.createElement("path",{d:"M15 22.75H9C3.57 22.75 1.25 20.43 1.25 15V9C1.25 3.57 3.57 1.25 9 1.25H13C13.41 1.25 13.75 1.59 13.75 2C13.75 2.41 13.41 2.75 13 2.75H9C4.39 2.75 2.75 4.39 2.75 9V15C2.75 19.61 4.39 21.25 9 21.25H15C19.61 21.25 21.25 19.61 21.25 15V10C21.25 9.59 21.59 9.25 22 9.25C22.41 9.25 22.75 9.59 22.75 10V15C22.75 20.43 20.43 22.75 15 22.75Z",fill:"#292D32"})),gt||(gt=t.createElement("path",{d:"M21.25 5.75H15.75C15.34 5.75 15 5.41 15 5C15 4.59 15.34 4.25 15.75 4.25H21.25C21.66 4.25 22 4.59 22 5C22 5.41 21.66 5.75 21.25 5.75Z",fill:"#292D32"})),yt||(yt=t.createElement("path",{d:"M18.5 8.5C18.09 8.5 17.75 8.16 17.75 7.75V2.25C17.75 1.84 18.09 1.5 18.5 1.5C18.91 1.5 19.25 1.84 19.25 2.25V7.75C19.25 8.16 18.91 8.5 18.5 8.5Z",fill:"#292D32"})),bt||(bt=t.createElement("path",{d:"M2.66932 19.7001C2.42932 19.7001 2.18932 19.5801 2.04932 19.3701C1.81932 19.0301 1.90932 18.5601 2.24932 18.3301L7.17932 15.0201C8.25932 14.3001 9.74932 14.3801 10.7293 15.2101L11.0593 15.5001C11.5593 15.9301 12.4093 15.9301 12.8993 15.5001L17.0593 11.9301C18.1293 11.0201 19.7893 11.0201 20.8593 11.9301L22.4893 13.3301C22.7993 13.6001 22.8393 14.0701 22.5693 14.3901C22.2993 14.7001 21.8293 14.7401 21.5093 14.4701L19.8793 13.0701C19.3793 12.6401 18.5293 12.6401 18.0393 13.0701L13.8793 16.6401C12.8193 17.5501 11.1493 17.5501 10.0793 16.6401L9.74932 16.3501C9.28932 15.9601 8.52932 15.9201 8.01932 16.2701L3.09932 19.5801C2.95932 19.6601 2.80932 19.7001 2.66932 19.7001Z",fill:"#292D32"})))}var Ct=t.forwardRef(It);n.p;function Nt(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Et(e){return function(e){if(Array.isArray(e))return je(e)}(e)||Nt(e)||Ge(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(){return Tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tt.apply(this,arguments)}var At=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),Rt=Math.abs,Ft=String.fromCharCode,Dt=Object.assign;function Ot(e){return e.trim()}function Lt(e,t,n){return e.replace(t,n)}function _t(e,t){return e.indexOf(t)}function Mt(e,t){return 0|e.charCodeAt(t)}function zt(e,t,n){return e.slice(t,n)}function Pt(e){return e.length}function Bt(e){return e.length}function Wt(e,t){return t.push(e),e}var Ut=1,Vt=1,jt=0,Gt=0,Ht=0,Kt="";function qt(e,t,n,r,a,i,o){return{value:e,root:t,parent:n,type:r,props:a,children:i,line:Ut,column:Vt,length:o,return:""}}function Xt(e,t){return Dt(qt("",null,null,"",null,null,0),e,{length:-e.length},t)}function Yt(){return Ht=Gt>0?Mt(Kt,--Gt):0,Vt--,10===Ht&&(Vt=1,Ut--),Ht}function Zt(){return Ht=Gt<jt?Mt(Kt,Gt++):0,Vt++,10===Ht&&(Vt=1,Ut++),Ht}function Jt(){return Mt(Kt,Gt)}function Qt(){return Gt}function $t(e,t){return zt(Kt,e,t)}function en(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function tn(e){return Ut=Vt=1,jt=Pt(Kt=e),Gt=0,[]}function nn(e){return Kt="",e}function rn(e){return Ot($t(Gt-1,sn(91===e?e+2:40===e?e+1:e)))}function an(e){for(;(Ht=Jt())&&Ht<33;)Zt();return en(e)>2||en(Ht)>3?"":" "}function on(e,t){for(;--t&&Zt()&&!(Ht<48||Ht>102||Ht>57&&Ht<65||Ht>70&&Ht<97););return $t(e,Qt()+(t<6&&32==Jt()&&32==Zt()))}function sn(e){for(;Zt();)switch(Ht){case e:return Gt;case 34:case 39:34!==e&&39!==e&&sn(Ht);break;case 40:41===e&&sn(e);break;case 92:Zt()}return Gt}function un(e,t){for(;Zt()&&e+Ht!==57&&(e+Ht!==84||47!==Jt()););return"/*"+$t(t,Gt-1)+"*"+Ft(47===e?e:Zt())}function cn(e){for(;!en(Jt());)Zt();return $t(e,Gt)}var ln="-ms-",fn="-moz-",hn="-webkit-",dn="comm",pn="rule",vn="decl",mn="@keyframes";function gn(e,t){for(var n="",r=Bt(e),a=0;a<r;a++)n+=t(e[a],a,e,t)||"";return n}function yn(e,t,n,r){switch(e.type){case"@import":case vn:return e.return=e.return||e.value;case dn:return"";case mn:return e.return=e.value+"{"+gn(e.children,r)+"}";case pn:e.value=e.props.join(",")}return Pt(n=gn(e.children,r))?e.return=e.value+"{"+n+"}":""}function bn(e,t){switch(function(e,t){return(((t<<2^Mt(e,0))<<2^Mt(e,1))<<2^Mt(e,2))<<2^Mt(e,3)}(e,t)){case 5103:return hn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return hn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return hn+e+fn+e+ln+e+e;case 6828:case 4268:return hn+e+ln+e+e;case 6165:return hn+e+ln+"flex-"+e+e;case 5187:return hn+e+Lt(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return hn+e+ln+"flex-item-"+Lt(e,/flex-|-self/,"")+e;case 4675:return hn+e+ln+"flex-line-pack"+Lt(e,/align-content|flex-|-self/,"")+e;case 5548:return hn+e+ln+Lt(e,"shrink","negative")+e;case 5292:return hn+e+ln+Lt(e,"basis","preferred-size")+e;case 6060:return hn+"box-"+Lt(e,"-grow","")+hn+e+ln+Lt(e,"grow","positive")+e;case 4554:return hn+Lt(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return Lt(Lt(Lt(e,/(zoom-|grab)/,hn+"$1"),/(image-set)/,hn+"$1"),e,"")+e;case 5495:case 3959:return Lt(e,/(image-set\([^]*)/,hn+"$1$`$1");case 4968:return Lt(Lt(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+hn+e+e;case 4095:case 3583:case 4068:case 2532:return Lt(e,/(.+)-inline(.+)/,hn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Pt(e)-1-t>6)switch(Mt(e,t+1)){case 109:if(45!==Mt(e,t+4))break;case 102:return Lt(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+fn+(108==Mt(e,t+3)?"$3":"$2-$3"))+e;case 115:return~_t(e,"stretch")?bn(Lt(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==Mt(e,t+1))break;case 6444:switch(Mt(e,Pt(e)-3-(~_t(e,"!important")&&10))){case 107:return Lt(e,":",":"+hn)+e;case 101:return Lt(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+hn+(45===Mt(e,14)?"inline-":"")+"box$3$1"+hn+"$2$3$1"+ln+"$2box$3")+e}break;case 5936:switch(Mt(e,t+11)){case 114:return hn+e+ln+Lt(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return hn+e+ln+Lt(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return hn+e+ln+Lt(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return hn+e+ln+e+e}return e}function xn(e){return nn(kn("",null,null,null,[""],e=tn(e),0,[0],e))}function kn(e,t,n,r,a,i,o,s,u){for(var c=0,l=0,f=o,h=0,d=0,p=0,v=1,m=1,g=1,y=0,b="",x=a,k=i,w=r,S=b;m;)switch(p=y,y=Zt()){case 40:if(108!=p&&58==S.charCodeAt(f-1)){-1!=_t(S+=Lt(rn(y),"&","&\f"),"&\f")&&(g=-1);break}case 34:case 39:case 91:S+=rn(y);break;case 9:case 10:case 13:case 32:S+=an(p);break;case 92:S+=on(Qt()-1,7);continue;case 47:switch(Jt()){case 42:case 47:Wt(Sn(un(Zt(),Qt()),t,n),u);break;default:S+="/"}break;case 123*v:s[c++]=Pt(S)*g;case 125*v:case 59:case 0:switch(y){case 0:case 125:m=0;case 59+l:d>0&&Pt(S)-f&&Wt(d>32?In(S+";",r,n,f-1):In(Lt(S," ","")+";",r,n,f-2),u);break;case 59:S+=";";default:if(Wt(w=wn(S,t,n,c,l,a,s,b,x=[],k=[],f),i),123===y)if(0===l)kn(S,t,w,w,x,i,f,s,k);else switch(h){case 100:case 109:case 115:kn(e,w,w,r&&Wt(wn(e,w,w,0,0,a,s,b,a,x=[],f),k),a,k,f,s,r?x:k);break;default:kn(S,w,w,w,[""],k,0,s,k)}}c=l=d=0,v=g=1,b=S="",f=o;break;case 58:f=1+Pt(S),d=p;default:if(v<1)if(123==y)--v;else if(125==y&&0==v++&&125==Yt())continue;switch(S+=Ft(y),y*v){case 38:g=l>0?1:(S+="\f",-1);break;case 44:s[c++]=(Pt(S)-1)*g,g=1;break;case 64:45===Jt()&&(S+=rn(Zt())),h=Jt(),l=f=Pt(b=S+=cn(Qt())),y++;break;case 45:45===p&&2==Pt(S)&&(v=0)}}return i}function wn(e,t,n,r,a,i,o,s,u,c,l){for(var f=a-1,h=0===a?i:[""],d=Bt(h),p=0,v=0,m=0;p<r;++p)for(var g=0,y=zt(e,f+1,f=Rt(v=o[p])),b=e;g<d;++g)(b=Ot(v>0?h[g]+" "+y:Lt(y,/&\f/g,h[g])))&&(u[m++]=b);return qt(e,t,n,0===a?pn:s,u,c,l)}function Sn(e,t,n){return qt(e,t,n,dn,Ft(Ht),zt(e,2,-2),0)}function In(e,t,n,r){return qt(e,t,n,vn,zt(e,0,r),zt(e,r+1,-1),r)}var Cn=function(e,t,n){for(var r=0,a=0;r=a,a=Jt(),38===r&&12===a&&(t[n]=1),!en(a);)Zt();return $t(e,Gt)},Nn=function(e,t){return nn(function(e,t){var n=-1,r=44;do{switch(en(r)){case 0:38===r&&12===Jt()&&(t[n]=1),e[n]+=Cn(Gt-1,t,n);break;case 2:e[n]+=rn(r);break;case 4:if(44===r){e[++n]=58===Jt()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=Ft(r)}}while(r=Zt());return e}(tn(e),t))},En=new WeakMap,Tn=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||En.get(n))&&!r){En.set(e,!0);for(var a=[],i=Nn(t,a),o=n.props,s=0,u=0;s<i.length;s++)for(var c=0;c<o.length;c++,u++)e.props[u]=a[s]?i[s].replace(/&\f/g,o[c]):o[c]+" "+i[s]}}},An=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},Rn=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case vn:e.return=bn(e.value,e.length);break;case mn:return gn([Xt(e,{value:Lt(e.value,"@","@"+hn)})],r);case pn:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return gn([Xt(e,{props:[Lt(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return gn([Xt(e,{props:[Lt(t,/:(plac\w+)/,":-webkit-input-$1")]}),Xt(e,{props:[Lt(t,/:(plac\w+)/,":-moz-$1")]}),Xt(e,{props:[Lt(t,/:(plac\w+)/,ln+"input-$1")]})],r)}return""}))}}],Fn=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||Rn;var a,i,o={},s=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;s.push(e)}));var u,c,l=[yn,(c=function(e){u.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],f=function(e){var t=Bt(e);return function(n,r,a,i){for(var o="",s=0;s<t;s++)o+=e[s](n,r,a,i)||"";return o}}([Tn,An].concat(r,l));i=function(e,t,n,r){u=n,gn(xn(e?e+"{"+t.styles+"}":t.styles),f),r&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new At({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:i};return h.sheet.hydrate(s),h};var Dn=function(e){for(var t,n=0,r=0,a=e.length;a>=4;++r,a-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(a){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},On=/[A-Z]|^ms/g,Ln=/_EMO_([^_]+?)_([^]*?)_EMO_/g,_n=function(e){return 45===e.charCodeAt(1)},Mn=function(e){return null!=e&&"boolean"!==typeof e},zn=f((function(e){return _n(e)?e:e.replace(On,"-$&").toLowerCase()})),Pn=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(Ln,(function(e,t,n){return Wn={name:t,styles:n,next:Wn},t}))}return 1===l[e]||_n(e)||"number"!==typeof t||0===t?t:t+"px"};function Bn(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Wn={name:n.name,styles:n.styles,next:Wn},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)Wn={name:r.name,styles:r.styles,next:Wn},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var a=0;a<n.length;a++)r+=Bn(e,t,n[a])+";";else for(var i in n){var o=n[i];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=i+"{"+t[o]+"}":Mn(o)&&(r+=zn(i)+":"+Pn(i,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=Bn(e,t,o);switch(i){case"animation":case"animationName":r+=zn(i)+":"+s+";";break;default:r+=i+"{"+s+"}"}}else for(var u=0;u<o.length;u++)Mn(o[u])&&(r+=zn(i)+":"+Pn(i,o[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var a=Wn,i=n(e);return Wn=a,Bn(e,t,i)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var Wn,Un=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var Vn=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,a="";Wn=void 0;var i=e[0];null==i||void 0===i.raw?(r=!1,a+=Bn(n,t,i)):a+=i[0];for(var o=1;o<e.length;o++)a+=Bn(n,t,e[o]),r&&(a+=i[o]);Un.lastIndex=0;for(var s,u="";null!==(s=Un.exec(a));)u+="-"+s[1];return{name:Dn(a)+u,styles:a,next:Wn}},jn=(0,t.createContext)("undefined"!==typeof HTMLElement?Fn({key:"css"}):null);jn.Provider;var Gn=function(e){return(0,t.forwardRef)((function(n,r){var a=(0,t.useContext)(jn);return e(n,a,r)}))},Hn=(0,t.createContext)({});r.useInsertionEffect&&r.useInsertionEffect;function Kn(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var qn=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},Xn=d,Yn=function(e){return"theme"!==e},Zn=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?Xn:Yn},Jn=function(e,t,n){var r;if(t){var a=t.shouldForwardProp;r=e.__emotion_forwardProp&&a?function(t){return e.__emotion_forwardProp(t)&&a(t)}:a}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},Qn=r.useInsertionEffect?r.useInsertionEffect:function(e){e()};var $n=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;qn(t,n,r);var a;a=function(){return function(e,t,n){qn(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var a=t;do{e.insert(t===a?"."+r:"",a,e.sheet,!0),a=a.next}while(void 0!==a)}}(t,n,r)},Qn(a);return null},er=function e(n,r){var a,i,o=n.__emotion_real===n,s=o&&n.__emotion_base||n;void 0!==r&&(a=r.label,i=r.target);var u=Jn(n,r,o),c=u||Zn(s),l=!c("as");return function(){var f=arguments,h=o&&void 0!==n.__emotion_styles?n.__emotion_styles.slice(0):[];if(void 0!==a&&h.push("label:"+a+";"),null==f[0]||void 0===f[0].raw)h.push.apply(h,f);else{0,h.push(f[0][0]);for(var d=f.length,p=1;p<d;p++)h.push(f[p],f[0][p])}var v=Gn((function(e,n,r){var a=l&&e.as||s,o="",f=[],d=e;if(null==e.theme){for(var p in d={},e)d[p]=e[p];d.theme=(0,t.useContext)(Hn)}"string"===typeof e.className?o=Kn(n.registered,f,e.className):null!=e.className&&(o=e.className+" ");var v=Vn(h.concat(f),n.registered,d);o+=n.key+"-"+v.name,void 0!==i&&(o+=" "+i);var m=l&&void 0===u?Zn(a):c,g={};for(var y in e)l&&"as"===y||m(y)&&(g[y]=e[y]);return g.className=o,g.ref=r,(0,t.createElement)(t.Fragment,null,(0,t.createElement)($n,{cache:n,serialized:v,isStringTag:"string"===typeof a}),(0,t.createElement)(a,g))}));return v.displayName=void 0!==a?a:"Styled("+("string"===typeof s?s:s.displayName||s.name||"Component")+")",v.defaultProps=n.defaultProps,v.__emotion_real=v,v.__emotion_base=s,v.__emotion_styles=h,v.__emotion_forwardProp=u,Object.defineProperty(v,"toString",{value:function(){return"."+i}}),v.withComponent=function(t,n){return e(t,Tt({},r,n,{shouldForwardProp:Jn(v,n,!0)})).apply(void 0,h)},v}},tr=er.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){tr[e]=tr(e)}));var nr=tr;function rr(e,t){return nr(e,t)}function ar(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function ir(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?Tt({},e):e;return ar(e)&&ar(t)&&Object.keys(t).forEach((function(a){"__proto__"!==a&&(ar(t[a])&&a in e&&ar(e[a])?r[a]=ir(e[a],t[a],n):r[a]=t[a])})),r}var or=["values","unit","step"];function sr(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,r=e.unit,a=void 0===r?"px":r,i=e.step,o=void 0===i?5:i,s=Ye(e,or),u=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return Tt({},e,ze({},t.key,t.val))}),{})}(n),c=Object.keys(u);function l(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(a,")")}function f(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-o/100).concat(a,")")}function h(e,t){var r=c.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(a,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[c[r]]?n[c[r]]:t)-o/100).concat(a,")")}return Tt({keys:c,values:u,up:l,down:f,between:h,only:function(e){return c.indexOf(e)+1<c.length?h(e,c[c.indexOf(e)+1]):l(e)},not:function(e){var t=c.indexOf(e);return 0===t?l(c[1]):t===c.length-1?f(c[t]):h(e,c[c.indexOf(e)+1]).replace("@media","@media not all and")},unit:a},s)}var ur={borderRadius:4},cr={xs:0,sm:600,md:900,lg:1200,xl:1536},lr={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(cr[e],"px)")}};function fr(e,t,n){var r=e.theme||{};if(Array.isArray(t)){var a=r.breakpoints||lr;return t.reduce((function(e,r,i){return e[a.up(a.keys[i])]=n(t[i]),e}),{})}if("object"===typeof t){var i=r.breakpoints||lr;return Object.keys(t).reduce((function(e,r){if(-1!==Object.keys(i.values||cr).indexOf(r)){e[i.up(r)]=n(t[r],r)}else{var a=r;e[a]=t[a]}return e}),{})}return n(t)}function hr(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null==t||null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{});return n||{}}function dr(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function pr(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function vr(e){if("string"!==typeof e)throw new Error(pr(7));return e.charAt(0).toUpperCase()+e.slice(1)}function mr(e,t){if(!t||"string"!==typeof t)return null;if(e&&e.vars){var n="vars.".concat(t).split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e);if(null!=n)return n}return t.split(".").reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e)}function gr(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||a:mr(e,n)||a,t&&(r=t(r)),r}var yr=function(e){var t=e.prop,n=e.cssProperty,r=void 0===n?e.prop:n,a=e.themeKey,i=e.transform,o=function(e){if(null==e[t])return null;var n=e[t],o=mr(e.theme,a)||{};return fr(e,n,(function(e){var n=gr(o,i,e);return e===n&&"string"===typeof e&&(n=gr(o,i,"".concat(t).concat("default"===e?"":vr(e)),e)),!1===r?n:ze({},r,n)}))};return o.propTypes={},o.filterProps=[t],o};var br=function(e,t){return t?ir(e,t,{clone:!1}):e};var xr={m:"margin",p:"padding"},kr={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},wr={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Sr=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!wr[e])return[e];e=wr[e]}var t=Ke(e.split(""),2),n=t[0],r=t[1],a=xr[n],i=kr[r]||"";return Array.isArray(i)?i.map((function(e){return a+e})):[a+i]})),Ir=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Cr=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],Nr=[].concat(Ir,Cr);function Er(e,t,n,r){var a,i=null!=(a=mr(e,t))?a:n;return"number"===typeof i?function(e){return"string"===typeof e?e:i*e}:Array.isArray(i)?function(e){return"string"===typeof e?e:i[e]}:"function"===typeof i?i:function(){}}function Tr(e){return Er(e,"spacing",8)}function Ar(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function Rr(e,t,n,r){if(-1===t.indexOf(n))return null;var a=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=Ar(t,n),e}),{})}}(Sr(n),r);return fr(e,e[n],a)}function Fr(e,t){var n=Tr(e.theme);return Object.keys(e).map((function(r){return Rr(e,t,r,n)})).reduce(br,{})}function Dr(e){return Fr(e,Ir)}function Or(e){return Fr(e,Cr)}function Lr(e){return Fr(e,Nr)}Dr.propTypes={},Dr.filterProps=Ir,Or.propTypes={},Or.filterProps=Cr,Lr.propTypes={},Lr.filterProps=Nr;var _r=Lr;function Mr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=Tr({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=0===n.length?[1]:n;return a.map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}var zr=["breakpoints","palette","spacing","shape"];var Pr=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.palette,a=void 0===r?{}:r,i=e.spacing,o=e.shape,s=void 0===o?{}:o,u=Ye(e,zr),c=sr(n),l=Mr(i),f=ir({breakpoints:c,direction:"ltr",components:{},palette:Tt({mode:"light"},a),spacing:l,shape:Tt({},ur,s)},u),h=arguments.length,d=new Array(h>1?h-1:0),p=1;p<h;p++)d[p-1]=arguments[p];return f=d.reduce((function(e,t){return ir(e,t)}),f)},Br=["variant"];function Wr(e){return 0===e.length}function Ur(e){var t=e.variant,n=Ye(e,Br),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?Wr(r)?e[t]:vr(e[t]):"".concat(Wr(r)?t:vr(t)).concat(vr(e[t].toString()))})),r}var Vr=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),a=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?br(t,r[n](e)):t}),{})};return a.propTypes={},a.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),a};function jr(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var Gr=yr({prop:"border",themeKey:"borders",transform:jr}),Hr=yr({prop:"borderTop",themeKey:"borders",transform:jr}),Kr=yr({prop:"borderRight",themeKey:"borders",transform:jr}),qr=yr({prop:"borderBottom",themeKey:"borders",transform:jr}),Xr=yr({prop:"borderLeft",themeKey:"borders",transform:jr}),Yr=yr({prop:"borderColor",themeKey:"palette"}),Zr=yr({prop:"borderTopColor",themeKey:"palette"}),Jr=yr({prop:"borderRightColor",themeKey:"palette"}),Qr=yr({prop:"borderBottomColor",themeKey:"palette"}),$r=yr({prop:"borderLeftColor",themeKey:"palette"}),ea=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=Er(e.theme,"shape.borderRadius",4);return fr(e,e.borderRadius,(function(e){return{borderRadius:Ar(t,e)}}))}return null};ea.propTypes={},ea.filterProps=["borderRadius"];var ta=Vr(Gr,Hr,Kr,qr,Xr,Yr,Zr,Jr,Qr,$r,ea),na=Vr(yr({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),yr({prop:"display"}),yr({prop:"overflow"}),yr({prop:"textOverflow"}),yr({prop:"visibility"}),yr({prop:"whiteSpace"})),ra=Vr(yr({prop:"flexBasis"}),yr({prop:"flexDirection"}),yr({prop:"flexWrap"}),yr({prop:"justifyContent"}),yr({prop:"alignItems"}),yr({prop:"alignContent"}),yr({prop:"order"}),yr({prop:"flex"}),yr({prop:"flexGrow"}),yr({prop:"flexShrink"}),yr({prop:"alignSelf"}),yr({prop:"justifyItems"}),yr({prop:"justifySelf"})),aa=function(e){if(void 0!==e.gap&&null!==e.gap){var t=Er(e.theme,"spacing",8);return fr(e,e.gap,(function(e){return{gap:Ar(t,e)}}))}return null};aa.propTypes={},aa.filterProps=["gap"];var ia=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=Er(e.theme,"spacing",8);return fr(e,e.columnGap,(function(e){return{columnGap:Ar(t,e)}}))}return null};ia.propTypes={},ia.filterProps=["columnGap"];var oa=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=Er(e.theme,"spacing",8);return fr(e,e.rowGap,(function(e){return{rowGap:Ar(t,e)}}))}return null};oa.propTypes={},oa.filterProps=["rowGap"];var sa=Vr(aa,ia,oa,yr({prop:"gridColumn"}),yr({prop:"gridRow"}),yr({prop:"gridAutoFlow"}),yr({prop:"gridAutoColumns"}),yr({prop:"gridAutoRows"}),yr({prop:"gridTemplateColumns"}),yr({prop:"gridTemplateRows"}),yr({prop:"gridTemplateAreas"}),yr({prop:"gridArea"})),ua=Vr(yr({prop:"position"}),yr({prop:"zIndex",themeKey:"zIndex"}),yr({prop:"top"}),yr({prop:"right"}),yr({prop:"bottom"}),yr({prop:"left"})),ca=Vr(yr({prop:"color",themeKey:"palette"}),yr({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),yr({prop:"backgroundColor",themeKey:"palette"})),la=yr({prop:"boxShadow",themeKey:"shadows"});function fa(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var ha=yr({prop:"width",transform:fa}),da=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return fr(e,e.maxWidth,(function(t){var n,r,a;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(a=r.values)?void 0:a[t])||cr[t]||fa(t)}}))}return null};da.filterProps=["maxWidth"];var pa=yr({prop:"minWidth",transform:fa}),va=yr({prop:"height",transform:fa}),ma=yr({prop:"maxHeight",transform:fa}),ga=yr({prop:"minHeight",transform:fa}),ya=(yr({prop:"size",cssProperty:"width",transform:fa}),yr({prop:"size",cssProperty:"height",transform:fa}),Vr(ha,da,pa,va,ma,ga,yr({prop:"boxSizing"}))),ba=yr({prop:"fontFamily",themeKey:"typography"}),xa=yr({prop:"fontSize",themeKey:"typography"}),ka=yr({prop:"fontStyle",themeKey:"typography"}),wa=yr({prop:"fontWeight",themeKey:"typography"}),Sa=yr({prop:"letterSpacing"}),Ia=yr({prop:"textTransform"}),Ca=yr({prop:"lineHeight"}),Na=yr({prop:"textAlign"}),Ea=Vr(yr({prop:"typography",cssProperty:!1,themeKey:"typography"}),ba,xa,ka,wa,Sa,Ca,Na,Ia),Ta={borders:ta.filterProps,display:na.filterProps,flexbox:ra.filterProps,grid:sa.filterProps,positions:ua.filterProps,palette:ca.filterProps,shadows:la.filterProps,sizing:ya.filterProps,spacing:_r.filterProps,typography:Ea.filterProps},Aa={borders:ta,display:na,flexbox:ra,grid:sa,positions:ua,palette:ca,shadows:la,sizing:ya,spacing:_r,typography:Ea};Object.keys(Ta).reduce((function(e,t){return Ta[t].forEach((function(n){e[n]=Aa[t]})),e}),{});function Ra(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),a=new Set(r);return t.every((function(e){return a.size===Object.keys(e).length}))}function Fa(e,t){return"function"===typeof e?e(t):e}var Da=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Aa,t=Object.keys(e).reduce((function(t,n){return e[n].filterProps.forEach((function(r){t[r]=e[n]})),t}),{});function n(e,n,r){var a,i=(ze(a={},e,n),ze(a,"theme",r),a),o=t[e];return o?o(i):ze({},e,n)}function r(e){var a=e||{},i=a.sx,o=a.theme,s=void 0===o?{}:o;if(!i)return null;function u(e){var a=e;if("function"===typeof e)a=e(s);else if("object"!==typeof e)return e;if(!a)return null;var i=hr(s.breakpoints),o=Object.keys(i),u=i;return Object.keys(a).forEach((function(e){var i=Fa(a[e],s);if(null!==i&&void 0!==i)if("object"===typeof i)if(t[e])u=br(u,n(e,i,s));else{var o=fr({theme:s},i,(function(t){return ze({},e,t)}));Ra(o,i)?u[e]=r({sx:i,theme:s}):u=br(u,o)}else u=br(u,n(e,i,s))})),dr(o,u)}return Array.isArray(i)?i.map(u):u(i)}return r}();Da.filterProps=["sx"];var Oa=Da,La=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],_a=["theme"],Ma=["theme"];function za(e){return 0===Object.keys(e).length}var Pa=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null},Ba=function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=Ur(e.props);r[t]=e.style})),r},Wa=function(e,t,n,r){var a,i,o=e.ownerState,s=void 0===o?{}:o,u=[],c=null==n||null==(a=n.components)||null==(i=a[r])?void 0:i.variants;return c&&c.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){s[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&u.push(t[Ur(n.props)])})),u};function Ua(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var Va=Pr();function ja(e,t,n){var r;return Tt({toolbar:(r={minHeight:56},ze(r,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),ze(r,e.up("sm"),{minHeight:64}),r)},n)}function Ga(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function Ha(e){if(e.type)return e;if("#"===e.charAt(0))return Ha(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(pr(9,e));var r,a=e.substring(t+1,e.length-1);if("color"===n){if(r=(a=a.split(" ")).shift(),4===a.length&&"/"===a[3].charAt(0)&&(a[3]=a[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error(pr(10,r))}else a=a.split(",");return{type:n,values:a=a.map((function(e){return parseFloat(e)})),colorSpace:r}}function Ka(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function qa(e){var t="hsl"===(e=Ha(e)).type?Ha(function(e){var t=(e=Ha(e)).values,n=t[0],r=t[1]/100,a=t[2]/100,i=r*Math.min(a,1-a),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return a-i*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",u=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(s+="a",u.push(t[3])),Ka({type:s,values:u})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Xa(e,t){if(e=Ha(e),t=Ga(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return Ka(e)}function Ya(e,t){if(e=Ha(e),t=Ga(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return Ka(e)}var Za={black:"#000",white:"#fff"},Ja={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Qa={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},$a={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},ei={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},ti={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},ni={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},ri={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},ai=["mode","contrastThreshold","tonalOffset"],ii={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Za.white,default:Za.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},oi={text:{primary:Za.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Za.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function si(e,t,n,r){var a=r.light||r,i=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=Ya(e.main,a):"dark"===t&&(e.dark=Xa(e.main,i)))}function ui(e){var t=e.mode,n=void 0===t?"light":t,r=e.contrastThreshold,a=void 0===r?3:r,i=e.tonalOffset,o=void 0===i?.2:i,s=Ye(e,ai),u=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ti[200],light:ti[50],dark:ti[400]}:{main:ti[700],light:ti[400],dark:ti[800]}}(n),c=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Qa[200],light:Qa[50],dark:Qa[400]}:{main:Qa[500],light:Qa[300],dark:Qa[700]}}(n),l=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:$a[500],light:$a[300],dark:$a[700]}:{main:$a[700],light:$a[400],dark:$a[800]}}(n),f=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ni[400],light:ni[300],dark:ni[700]}:{main:ni[700],light:ni[500],dark:ni[900]}}(n),h=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ri[400],light:ri[300],dark:ri[700]}:{main:ri[800],light:ri[500],dark:ri[900]}}(n),d=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ei[400],light:ei[300],dark:ei[700]}:{main:"#ed6c02",light:ei[500],dark:ei[900]}}(n);function p(e){var t=function(e,t){var n=qa(e),r=qa(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,oi.text.primary)>=a?oi.text.primary:ii.text.primary;return t}var v=function(e){var t=e.color,n=e.name,r=e.mainShade,a=void 0===r?500:r,i=e.lightShade,s=void 0===i?300:i,u=e.darkShade,c=void 0===u?700:u;if(!(t=Tt({},t)).main&&t[a]&&(t.main=t[a]),!t.hasOwnProperty("main"))throw new Error(pr(11,n?" (".concat(n,")"):"",a));if("string"!==typeof t.main)throw new Error(pr(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return si(t,"light",s,o),si(t,"dark",c,o),t.contrastText||(t.contrastText=p(t.main)),t},m={dark:oi,light:ii};return ir(Tt({common:Tt({},Za),mode:n,primary:v({color:u,name:"primary"}),secondary:v({color:c,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:v({color:l,name:"error"}),warning:v({color:d,name:"warning"}),info:v({color:f,name:"info"}),success:v({color:h,name:"success"}),grey:Ja,contrastThreshold:a,getContrastText:p,augmentColor:v,tonalOffset:o},m[n]),s)}var ci=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var li={textTransform:"uppercase"},fi='"Roboto", "Helvetica", "Arial", sans-serif';function hi(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,a=void 0===r?fi:r,i=n.fontSize,o=void 0===i?14:i,s=n.fontWeightLight,u=void 0===s?300:s,c=n.fontWeightRegular,l=void 0===c?400:c,f=n.fontWeightMedium,h=void 0===f?500:f,d=n.fontWeightBold,p=void 0===d?700:d,v=n.htmlFontSize,m=void 0===v?16:v,g=n.allVariants,y=n.pxToRem,b=Ye(n,ci);var x=o/14,k=y||function(e){return"".concat(e/m*x,"rem")},w=function(e,t,n,r,i){return Tt({fontFamily:a,fontWeight:e,fontSize:k(t),lineHeight:n},a===fi?{letterSpacing:"".concat((o=r/t,Math.round(1e5*o)/1e5),"em")}:{},i,g);var o},S={h1:w(u,96,1.167,-1.5),h2:w(u,60,1.2,-.5),h3:w(l,48,1.167,0),h4:w(l,34,1.235,.25),h5:w(l,24,1.334,0),h6:w(h,20,1.6,.15),subtitle1:w(l,16,1.75,.15),subtitle2:w(h,14,1.57,.1),body1:w(l,16,1.5,.15),body2:w(l,14,1.43,.15),button:w(h,14,1.75,.4,li),caption:w(l,12,1.66,.4),overline:w(l,12,2.66,1,li)};return ir(Tt({htmlFontSize:m,pxToRem:k,fontFamily:a,fontSize:o,fontWeightLight:u,fontWeightRegular:l,fontWeightMedium:h,fontWeightBold:p},S),b,{clone:!1})}function di(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var pi=["none",di(0,2,1,-1,0,1,1,0,0,1,3,0),di(0,3,1,-2,0,2,2,0,0,1,5,0),di(0,3,3,-2,0,3,4,0,0,1,8,0),di(0,2,4,-1,0,4,5,0,0,1,10,0),di(0,3,5,-1,0,5,8,0,0,1,14,0),di(0,3,5,-1,0,6,10,0,0,1,18,0),di(0,4,5,-2,0,7,10,1,0,2,16,1),di(0,5,5,-3,0,8,10,1,0,3,14,2),di(0,5,6,-3,0,9,12,1,0,3,16,2),di(0,6,6,-3,0,10,14,1,0,4,18,3),di(0,6,7,-4,0,11,15,1,0,4,20,3),di(0,7,8,-4,0,12,17,2,0,5,22,4),di(0,7,8,-4,0,13,19,2,0,5,24,4),di(0,7,9,-4,0,14,21,2,0,5,26,4),di(0,8,9,-5,0,15,22,2,0,6,28,5),di(0,8,10,-5,0,16,24,2,0,6,30,5),di(0,8,11,-5,0,17,26,2,0,6,32,5),di(0,9,11,-5,0,18,28,2,0,7,34,6),di(0,9,12,-6,0,19,29,2,0,7,36,6),di(0,10,13,-6,0,20,31,3,0,8,38,7),di(0,10,13,-6,0,21,33,3,0,8,40,7),di(0,10,14,-6,0,22,35,3,0,8,42,7),di(0,11,14,-7,0,23,36,3,0,9,44,8),di(0,11,15,-7,0,24,38,3,0,9,46,8)],vi=["duration","easing","delay"],mi={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},gi={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function yi(e){return"".concat(Math.round(e),"ms")}function bi(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function xi(e){var t=Tt({},mi,e.easing),n=Tt({},gi,e.duration);return Tt({getAutoHeightDuration:bi,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.duration,i=void 0===a?n.standard:a,o=r.easing,s=void 0===o?t.easeInOut:o,u=r.delay,c=void 0===u?0:u;Ye(r,vi);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof i?i:yi(i)," ").concat(s," ").concat("string"===typeof c?c:yi(c))})).join(",")}},e,{easing:t,duration:n})}var ki={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},wi=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Si(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,r=e.palette,a=void 0===r?{}:r,i=e.transitions,o=void 0===i?{}:i,s=e.typography,u=void 0===s?{}:s,c=Ye(e,wi),l=ui(a),f=Pr(e),h=ir(f,{mixins:ja(f.breakpoints,f.spacing,n),palette:l,shadows:pi.slice(),typography:hi(l,u),transitions:xi(o),zIndex:Tt({},ki)});h=ir(h,c);for(var d=arguments.length,p=new Array(d>1?d-1:0),v=1;v<d;v++)p[v-1]=arguments[v];return h=p.reduce((function(e,t){return ir(e,t)}),h)}var Ii,Ci,Ni=Si(),Ei=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=void 0===t?Va:t,r=e.rootShouldForwardProp,a=void 0===r?Ua:r,i=e.slotShouldForwardProp,o=void 0===i?Ua:i,s=e.styleFunctionSx,u=void 0===s?Oa:s;return function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.name,s=r.slot,c=r.skipVariantsResolver,l=r.skipSx,f=r.overridesResolver,h=Ye(r,La),d=void 0!==c?c:s&&"Root"!==s||!1,p=l||!1;var v=Ua;"Root"===s?v=a:s&&(v=o);var m=rr(e,Tt({shouldForwardProp:v,label:t},h)),g=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var o=r?r.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){var r=t.theme,a=Ye(t,_a);return e(Tt({theme:za(r)?n:r},a))}:e})):[],s=e;i&&f&&o.push((function(e){var t=za(e.theme)?n:e.theme,r=Pa(i,t);if(r){var a={};return Object.entries(r).forEach((function(n){var r=Ke(n,2),i=r[0],o=r[1];a[i]="function"===typeof o?o(Tt({},e,{theme:t})):o})),f(e,a)}return null})),i&&!d&&o.push((function(e){var t=za(e.theme)?n:e.theme;return Wa(e,Ba(i,t),t,i)})),p||o.push((function(e){var t=za(e.theme)?n:e.theme;return u(Tt({},e,{theme:t}))}));var c=o.length-r.length;if(Array.isArray(e)&&c>0){var l=new Array(c).fill("");(s=[].concat(Et(e),Et(l))).raw=[].concat(Et(e.raw),Et(l))}else"function"===typeof e&&e.__emotion_real!==e&&(s=function(t){var r=t.theme,a=Ye(t,Ma);return e(Tt({theme:za(r)?n:r},a))});var h=m.apply(void 0,[s].concat(Et(o)));return h};return m.withConfig&&(g.withConfig=m.withConfig),g}}({defaultTheme:Ni,rootShouldForwardProp:function(e){return Ua(e)&&"classes"!==e}}),Ti=Ei,Ai=["title","titleId"];function Ri(){return Ri=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ri.apply(this,arguments)}function Fi(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Di(e,n){var r=e.title,a=e.titleId,i=Fi(e,Ai);return t.createElement("svg",Ri({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":a},i),r?t.createElement("title",{id:a},r):null,Ii||(Ii=t.createElement("path",{opacity:.4,d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",fill:"#292D32"})),Ci||(Ci=t.createElement("path",{d:"M10.7397 16.2802C10.5497 16.2802 10.3597 16.2102 10.2097 16.0602C9.91969 15.7702 9.91969 15.2902 10.2097 15.0002L13.2097 12.0002L10.2097 9.00016C9.91969 8.71016 9.91969 8.23016 10.2097 7.94016C10.4997 7.65016 10.9797 7.65016 11.2697 7.94016L14.7997 11.4702C15.0897 11.7602 15.0897 12.2402 14.7997 12.5302L11.2697 16.0602C11.1197 16.2102 10.9297 16.2802 10.7397 16.2802Z",fill:"#292D32"})))}var Oi,Li,_i=t.forwardRef(Di),Mi=(n.p,["title","titleId"]);function zi(){return zi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zi.apply(this,arguments)}function Pi(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Bi(e,n){var r=e.title,a=e.titleId,i=Pi(e,Mi);return t.createElement("svg",zi({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":a},i),r?t.createElement("title",{id:a},r):null,Oi||(Oi=t.createElement("path",{opacity:.4,d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",fill:"#292D32"})),Li||(Li=t.createElement("path",{d:"M13.2599 16.2802C13.0699 16.2802 12.8799 16.2102 12.7299 16.0602L9.19992 12.5302C8.90992 12.2402 8.90992 11.7602 9.19992 11.4702L12.7299 7.94016C13.0199 7.65016 13.4999 7.65016 13.7899 7.94016C14.0799 8.23016 14.0799 8.71016 13.7899 9.00016L10.7899 12.0002L13.7899 15.0002C14.0799 15.2902 14.0799 15.7702 13.7899 16.0602C13.6499 16.2102 13.4599 16.2802 13.2599 16.2802Z",fill:"#292D32"})))}var Wi,Ui=t.forwardRef(Bi),Vi=(n.p,["title","titleId"]);function ji(){return ji=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ji.apply(this,arguments)}function Gi(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Hi(e,n){var r=e.title,a=e.titleId,i=Gi(e,Vi);return t.createElement("svg",ji({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":a},i),r?t.createElement("title",{id:a},r):null,Wi||(Wi=t.createElement("path",{d:"M20.0402 6.82165L14.2802 2.79165C12.7102 1.69165 10.3002 1.75165 8.79023 2.92165L3.78023 6.83165C2.78023 7.61165 1.99023 9.21165 1.99023 10.4716V17.3716C1.99023 19.9216 4.06023 22.0016 6.61023 22.0016H17.3902C19.9402 22.0016 22.0102 19.9316 22.0102 17.3816V10.6016C22.0102 9.25165 21.1402 7.59165 20.0402 6.82165ZM12.7502 18.0016C12.7502 18.4116 12.4102 18.7516 12.0002 18.7516C11.5902 18.7516 11.2502 18.4116 11.2502 18.0016V15.0016C11.2502 14.5916 11.5902 14.2516 12.0002 14.2516C12.4102 14.2516 12.7502 14.5916 12.7502 15.0016V18.0016Z",fill:"#292D32"})))}var Ki,qi,Xi,Yi,Zi=t.forwardRef(Hi),Ji=(n.p,["title","titleId"]);function Qi(){return Qi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qi.apply(this,arguments)}function $i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function eo(e,n){var r=e.title,a=e.titleId,i=$i(e,Ji);return t.createElement("svg",Qi({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":a},i),r?t.createElement("title",{id:a},r):null,Ki||(Ki=t.createElement("path",{opacity:.4,d:"M12 5.29994V21.3299C11.83 21.3299 11.65 21.2999 11.51 21.2199L11.47 21.1999C9.55 20.1499 6.2 19.0499 4.03 18.7599L3.74 18.7199C2.78 18.5999 2 17.6999 2 16.7399V4.65994C2 3.46994 2.97 2.56994 4.16 2.66994C6.26 2.83994 9.44 3.89994 11.22 5.00994L11.47 5.15994C11.62 5.24994 11.81 5.29994 12 5.29994Z",fill:"#292D32"})),qi||(qi=t.createElement("path",{d:"M22 4.67003V16.74C22 17.7 21.22 18.6 20.26 18.72L19.93 18.76C17.75 19.05 14.39 20.16 12.47 21.22C12.34 21.3 12.18 21.33 12 21.33V5.30003C12.19 5.30003 12.38 5.25003 12.53 5.16003L12.7 5.05003C14.48 3.93003 17.67 2.86003 19.77 2.68003H19.83C21.02 2.58003 22 3.47003 22 4.67003Z",fill:"#292D32"})),Xi||(Xi=t.createElement("path",{d:"M7.75 9.23999H5.5C5.09 9.23999 4.75 8.89999 4.75 8.48999C4.75 8.07999 5.09 7.73999 5.5 7.73999H7.75C8.16 7.73999 8.5 8.07999 8.5 8.48999C8.5 8.89999 8.16 9.23999 7.75 9.23999Z",fill:"#292D32"})),Yi||(Yi=t.createElement("path",{d:"M8.5 12.24H5.5C5.09 12.24 4.75 11.9 4.75 11.49C4.75 11.08 5.09 10.74 5.5 10.74H8.5C8.91 10.74 9.25 11.08 9.25 11.49C9.25 11.9 8.91 12.24 8.5 12.24Z",fill:"#292D32"})))}var to,no,ro,ao,io=t.forwardRef(eo),oo=(n.p,["title","titleId"]);function so(){return so=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},so.apply(this,arguments)}function uo(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function co(e,n){var r=e.title,a=e.titleId,i=uo(e,oo);return t.createElement("svg",so({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":a},i),r?t.createElement("title",{id:a},r):null,to||(to=t.createElement("path",{d:"M22.0005 13.9001V16.1901C22.0005 19.8301 19.8305 22.0001 16.1905 22.0001H7.81055C5.26055 22.0001 3.42055 20.9301 2.56055 19.0301L2.67055 18.9501L7.59055 15.6501C8.39055 15.1101 9.52055 15.1701 10.2305 15.7901L10.5705 16.0701C11.3505 16.7401 12.6105 16.7401 13.3905 16.0701L17.5505 12.5001C18.3305 11.8301 19.5905 11.8301 20.3705 12.5001L22.0005 13.9001Z",fill:"#292D32"})),no||(no=t.createElement("path",{opacity:.4,d:"M20.97 8H18.03C16.76 8 16 7.24 16 5.97V3.03C16 2.63 16.08 2.29 16.22 2C16.21 2 16.2 2 16.19 2H7.81C4.17 2 2 4.17 2 7.81V16.19C2 17.28 2.19 18.23 2.56 19.03L2.67 18.95L7.59 15.65C8.39 15.11 9.52 15.17 10.23 15.79L10.57 16.07C11.35 16.74 12.61 16.74 13.39 16.07L17.55 12.5C18.33 11.83 19.59 11.83 20.37 12.5L22 13.9V7.81C22 7.8 22 7.79 22 7.78C21.71 7.92 21.37 8 20.97 8Z",fill:"#292D32"})),ro||(ro=t.createElement("path",{d:"M8.99914 10.3801C10.3136 10.3801 11.3791 9.31456 11.3791 8.00012C11.3791 6.68568 10.3136 5.62012 8.99914 5.62012C7.6847 5.62012 6.61914 6.68568 6.61914 8.00012C6.61914 9.31456 7.6847 10.3801 8.99914 10.3801Z",fill:"#292D32"})),ao||(ao=t.createElement("path",{d:"M20.97 1H18.03C16.76 1 16 1.76 16 3.03V5.97C16 7.24 16.76 8 18.03 8H20.97C22.24 8 23 7.24 23 5.97V3.03C23 1.76 22.24 1 20.97 1ZM21.91 4.93C21.81 5.03 21.66 5.1 21.5 5.11H20.09L20.1 6.5C20.09 6.67 20.03 6.81 19.91 6.93C19.81 7.03 19.66 7.1 19.5 7.1C19.17 7.1 18.9 6.83 18.9 6.5V5.1L17.5 5.11C17.17 5.11 16.9 4.83 16.9 4.5C16.9 4.17 17.17 3.9 17.5 3.9L18.9 3.91V2.51C18.9 2.18 19.17 1.9 19.5 1.9C19.83 1.9 20.1 2.18 20.1 2.51L20.09 3.9H21.5C21.83 3.9 22.1 4.17 22.1 4.5C22.09 4.67 22.02 4.81 21.91 4.93Z",fill:"#292D32"})))}var lo,fo,ho,po,vo,mo,go,yo,bo,xo,ko,wo,So,Io,Co=t.forwardRef(co),No=(n.p,["title","titleId"]);function Eo(){return Eo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Eo.apply(this,arguments)}function To(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ao(e,n){var r=e.title,a=e.titleId,i=To(e,No);return t.createElement("svg",Eo({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":a},i),r?t.createElement("title",{id:a},r):null,lo||(lo=t.createElement("path",{opacity:.4,d:"M15 4H9C6.24 4 4 6.24 4 9V15C4 17.76 6.24 20 9 20H15C17.76 20 20 17.76 20 15V9C20 6.24 17.76 4 15 4ZM17.26 14.26C17.26 15.92 15.92 17.26 14.26 17.26H9.74C8.08 17.26 6.74 15.92 6.74 14.26V9.74C6.74 8.08 8.08 6.74 9.74 6.74H14.25C15.91 6.74 17.25 8.08 17.25 9.74V14.26H17.26Z",fill:"#292D32"})),fo||(fo=t.createElement("path",{d:"M9.06055 2.75V4H9.00055C8.50055 4 8.02055 4.07 7.56055 4.21V2.75C7.56055 2.34 7.89055 2 8.31055 2C8.72055 2 9.06055 2.34 9.06055 2.75Z",fill:"#292D32"})),ho||(ho=t.createElement("path",{d:"M12.75 2.75V4H11.25V2.75C11.25 2.34 11.59 2 12 2C12.41 2 12.75 2.34 12.75 2.75Z",fill:"#292D32"})),po||(po=t.createElement("path",{d:"M16.4492 2.75V4.21C15.9892 4.07 15.4992 4 14.9992 4H14.9492V2.75C14.9492 2.34 15.2892 2 15.6992 2C16.1092 2 16.4492 2.34 16.4492 2.75Z",fill:"#292D32"})),vo||(vo=t.createElement("path",{d:"M21.9991 8.30005C21.9991 8.72005 21.6691 9.05005 21.2491 9.05005H19.9991V9.00005C19.9991 8.50005 19.9291 8.01005 19.7891 7.55005H21.2491C21.6691 7.55005 21.9991 7.89005 21.9991 8.30005Z",fill:"#292D32"})),mo||(mo=t.createElement("path",{d:"M22 12C22 12.41 21.67 12.75 21.25 12.75H20V11.25H21.25C21.67 11.25 22 11.58 22 12Z",fill:"#292D32"})),go||(go=t.createElement("path",{d:"M21.9991 15.7C21.9991 16.11 21.6691 16.45 21.2491 16.45H19.7891C19.9291 15.99 19.9991 15.5 19.9991 15V14.95H21.2491C21.6691 14.95 21.9991 15.28 21.9991 15.7Z",fill:"#292D32"})),yo||(yo=t.createElement("path",{d:"M16.4492 19.79V21.25C16.4492 21.66 16.1092 22 15.6992 22C15.2892 22 14.9492 21.66 14.9492 21.25V20H14.9992C15.4992 20 15.9892 19.93 16.4492 19.79Z",fill:"#292D32"})),bo||(bo=t.createElement("path",{d:"M12.7598 20V21.25C12.7598 21.66 12.4198 22 12.0098 22C11.5898 22 11.2598 21.66 11.2598 21.25V20H12.7598Z",fill:"#292D32"})),xo||(xo=t.createElement("path",{d:"M9.06055 20V21.25C9.06055 21.66 8.72055 22 8.31055 22C7.89055 22 7.56055 21.66 7.56055 21.25V19.79C8.02055 19.93 8.50055 20 9.00055 20H9.06055Z",fill:"#292D32"})),ko||(ko=t.createElement("path",{d:"M4.21 7.55005C4.07 8.01005 4 8.50005 4 9.00005V9.05005H2.75C2.34 9.05005 2 8.72005 2 8.30005C2 7.89005 2.34 7.55005 2.75 7.55005H4.21Z",fill:"#292D32"})),wo||(wo=t.createElement("path",{d:"M4 11.25V12.75H2.75C2.34 12.75 2 12.41 2 12C2 11.58 2.34 11.25 2.75 11.25H4Z",fill:"#292D32"})),So||(So=t.createElement("path",{d:"M4.21 16.45H2.75C2.34 16.45 2 16.11 2 15.7C2 15.28 2.34 14.95 2.75 14.95H4V15C4 15.5 4.07 15.99 4.21 16.45Z",fill:"#292D32"})),Io||(Io=t.createElement("path",{d:"M17.2602 9.73999V14.25C17.2602 15.91 15.9202 17.25 14.2602 17.25H9.74023C8.08023 17.25 6.74023 15.91 6.74023 14.25V9.73999C6.74023 8.07999 8.08023 6.73999 9.74023 6.73999H14.2502C15.9102 6.73999 17.2602 8.08999 17.2602 9.73999Z",fill:"#292D32"})))}var Ro,Fo,Do,Oo,Lo,_o=t.forwardRef(Ao),Mo=(n.p,["title","titleId"]);function zo(){return zo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zo.apply(this,arguments)}function Po(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Bo(e,n){var r=e.title,a=e.titleId,i=Po(e,Mo);return t.createElement("svg",zo({width:20,height:21,viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":a},i),r?t.createElement("title",{id:a},r):null,Ro||(Ro=t.createElement("path",{opacity:.4,d:"M14.19 0.970215H5.81C2.17 0.970215 0 3.14022 0 6.78022V15.1602C0 18.8002 2.17 20.9702 5.81 20.9702H14.19C17.83 20.9702 20 18.8002 20 15.1602V6.78022C20 3.14022 17.83 0.970215 14.19 0.970215Z",fill:"#292D32"})),Fo||(Fo=t.createElement("path",{d:"M16.3105 7.84033C16.3105 8.25033 15.9805 8.59033 15.5605 8.59033H10.3105C9.90055 8.59033 9.56055 8.25033 9.56055 7.84033C9.56055 7.43033 9.90055 7.09033 10.3105 7.09033H15.5605C15.9805 7.09033 16.3105 7.43033 16.3105 7.84033Z",fill:"#292D32"})),Do||(Do=t.createElement("path",{d:"M7.97055 6.87027L5.72055 9.12027C5.57055 9.27027 5.38055 9.34027 5.19055 9.34027C5.00055 9.34027 4.80055 9.27027 4.66055 9.12027L3.91055 8.37027C3.61055 8.08027 3.61055 7.60027 3.91055 7.31027C4.20055 7.02027 4.67055 7.02027 4.97055 7.31027L5.19055 7.53027L6.91055 5.81027C7.20055 5.52027 7.67055 5.52027 7.97055 5.81027C8.26055 6.10027 8.26055 6.58027 7.97055 6.87027Z",fill:"#292D32"})),Oo||(Oo=t.createElement("path",{d:"M16.3105 14.8403C16.3105 15.2503 15.9805 15.5903 15.5605 15.5903H10.3105C9.90055 15.5903 9.56055 15.2503 9.56055 14.8403C9.56055 14.4303 9.90055 14.0903 10.3105 14.0903H15.5605C15.9805 14.0903 16.3105 14.4303 16.3105 14.8403Z",fill:"#292D32"})),Lo||(Lo=t.createElement("path",{d:"M7.97055 13.8703L5.72055 16.1203C5.57055 16.2703 5.38055 16.3403 5.19055 16.3403C5.00055 16.3403 4.80055 16.2703 4.66055 16.1203L3.91055 15.3703C3.61055 15.0803 3.61055 14.6003 3.91055 14.3103C4.20055 14.0203 4.67055 14.0203 4.97055 14.3103L5.19055 14.5303L6.91055 12.8103C7.20055 12.5203 7.67055 12.5203 7.97055 12.8103C8.26055 13.1003 8.26055 13.5803 7.97055 13.8703Z",fill:"#292D32"})))}var Wo=t.forwardRef(Bo);n.p;function Uo(e){var t,n,r="";if("string"===typeof e||"number"===typeof e)r+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Uo(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function Vo(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Uo(e))&&(r&&(r+=" "),r+=t);return r}function jo(e,t,n){var r={};return Object.keys(e).forEach((function(a){r[a]=e[a].reduce((function(e,r){return r&&(n&&n[r]&&e.push(n[r]),e.push(t(r))),e}),[]).join(" ")})),r}var Go=vr;function Ho(e){var t=e.theme,n=e.name,r=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?function(e,t){var n=Tt({},t);return Object.keys(e).forEach((function(t){void 0===n[t]&&(n[t]=e[t])})),n}(t.components[n].defaultProps,r):r}var Ko=t.createContext(null);function qo(){return t.useContext(Ko)}function Xo(e){return 0===Object.keys(e).length}var Yo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=qo();return!t||Xo(t)?e:t},Zo=Pr();var Jo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zo;return Yo(e)};function Qo(e){return function(e){var t=e.props,n=e.name,r=e.defaultTheme;return Ho({theme:Jo(r),name:n,props:t})}({props:e.props,name:e.name,defaultTheme:Ni})}var $o=t.createContext({});var es=$o,ts=t.createContext({});var ns=ts,rs=function(e){return e},as=function(){var e=rs;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=rs}}}(),is=as,os={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function ss(e,t){return os[t]||"".concat(is.generate(e),"-").concat(t)}function us(e,t){var n={};return t.forEach((function(t){n[t]=ss(e,t)})),n}function cs(e){return ss("MuiStepConnector",e)}var ls=us("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]),fs=["className"],hs=Ti("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})((function(e){var t=e.ownerState;return Tt({flex:"1 1 auto"},"vertical"===t.orientation&&{marginLeft:12},t.alternativeLabel&&{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})})),ds=Ti("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:function(e,t){var n=e.ownerState;return[t.line,t["line".concat(Go(n.orientation))]]}})((function(e){var t=e.ownerState,n=e.theme;return Tt({display:"block",borderColor:"light"===n.palette.mode?n.palette.grey[400]:n.palette.grey[600]},"horizontal"===t.orientation&&{borderTopStyle:"solid",borderTopWidth:1},"vertical"===t.orientation&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})})),ps=t.forwardRef((function(e,n){var r=Qo({props:e,name:"MuiStepConnector"}),a=r.className,i=Ye(r,fs),o=t.useContext(es),s=o.alternativeLabel,u=o.orientation,c=void 0===u?"horizontal":u,l=t.useContext(ns),f=l.active,h=l.disabled,d=Tt({},r,{alternativeLabel:s,orientation:c,active:f,completed:l.completed,disabled:h}),p=function(e){var t=e.classes,n=e.orientation;return jo({root:["root",n,e.alternativeLabel&&"alternativeLabel",e.active&&"active",e.completed&&"completed",e.disabled&&"disabled"],line:["line","line".concat(Go(n))]},cs,t)}(d);return(0,Qe.jsx)(hs,Tt({className:Vo(p.root,a),ref:n,ownerState:d},i,{children:(0,Qe.jsx)(ds,{className:p.line,ownerState:d})}))}));function vs(e){return ss("MuiStepper",e)}us("MuiStepper",["root","horizontal","vertical","alternativeLabel"]);var ms=["activeStep","alternativeLabel","children","className","connector","nonLinear","orientation"],gs=Ti("div",{name:"MuiStepper",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel]}})((function(e){var t=e.ownerState;return Tt({display:"flex"},"horizontal"===t.orientation&&{flexDirection:"row",alignItems:"center"},"vertical"===t.orientation&&{flexDirection:"column"},t.alternativeLabel&&{alignItems:"flex-start"})})),ys=(0,Qe.jsx)(ps,{}),bs=t.forwardRef((function(e,n){var r=Qo({props:e,name:"MuiStepper"}),a=r.activeStep,i=void 0===a?0:a,o=r.alternativeLabel,s=void 0!==o&&o,u=r.children,c=r.className,l=r.connector,f=void 0===l?ys:l,h=r.nonLinear,d=void 0!==h&&h,p=r.orientation,v=void 0===p?"horizontal":p,m=Ye(r,ms),g=Tt({},r,{alternativeLabel:s,orientation:v}),y=function(e){return jo({root:["root",e.orientation,e.alternativeLabel&&"alternativeLabel"]},vs,e.classes)}(g),b=t.Children.toArray(u).filter(Boolean),x=b.map((function(e,n){return t.cloneElement(e,Tt({index:n,last:n+1===b.length},e.props))})),k=t.useMemo((function(){return{activeStep:i,alternativeLabel:s,connector:f,nonLinear:d,orientation:v}}),[i,s,f,d,v]);return(0,Qe.jsx)(es.Provider,{value:k,children:(0,Qe.jsx)(gs,Tt({ownerState:g,className:Vo(y.root,c),ref:n},m,{children:x}))})})),xs=bs;function ks(e){return ss("MuiStep",e)}us("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);var ws=["active","children","className","completed","disabled","expanded","index","last"],Ss=Ti("div",{name:"MuiStep",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})((function(e){var t=e.ownerState;return Tt({},"horizontal"===t.orientation&&{paddingLeft:8,paddingRight:8},t.alternativeLabel&&{flex:1,position:"relative"})})),Is=t.forwardRef((function(e,n){var r=Qo({props:e,name:"MuiStep"}),a=r.active,i=r.children,o=r.className,s=r.completed,u=r.disabled,c=r.expanded,l=void 0!==c&&c,f=r.index,h=r.last,d=Ye(r,ws),p=t.useContext(es),v=p.activeStep,m=p.connector,g=p.alternativeLabel,y=p.orientation,b=p.nonLinear,x=void 0!==a&&a,k=void 0!==s&&s,w=void 0!==u&&u;v===f?x=void 0===a||a:!b&&v>f?k=void 0===s||s:!b&&v<f&&(w=void 0===u||u);var S=t.useMemo((function(){return{index:f,last:h,expanded:l,icon:f+1,active:x,completed:k,disabled:w}}),[f,h,l,x,k,w]),I=Tt({},r,{active:x,orientation:y,alternativeLabel:g,completed:k,disabled:w,expanded:l}),C=function(e){var t=e.classes;return jo({root:["root",e.orientation,e.alternativeLabel&&"alternativeLabel",e.completed&&"completed"]},ks,t)}(I),N=(0,Qe.jsxs)(Ss,Tt({className:Vo(C.root,o),ref:n,ownerState:I},d,{children:[m&&g&&0!==f?m:null,i]}));return(0,Qe.jsx)(ns.Provider,{value:S,children:m&&!g&&0!==f?(0,Qe.jsxs)(t.Fragment,{children:[m,N]}):N})})),Cs=Is;function Ns(e){return ss("MuiSvgIcon",e)}us("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var Es=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Ts=Ti("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"inherit"!==n.color&&t["color".concat(Go(n.color))],t["fontSize".concat(Go(n.fontSize))]]}})((function(e){var t,n,r,a,i,o,s,u,c,l,f,h,d,p,v,m,g,y=e.theme,b=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(t=y.transitions)||null==(n=t.create)?void 0:n.call(t,"fill",{duration:null==(r=y.transitions)||null==(a=r.duration)?void 0:a.shorter}),fontSize:{inherit:"inherit",small:(null==(i=y.typography)||null==(o=i.pxToRem)?void 0:o.call(i,20))||"1.25rem",medium:(null==(s=y.typography)||null==(u=s.pxToRem)?void 0:u.call(s,24))||"1.5rem",large:(null==(c=y.typography)||null==(l=c.pxToRem)?void 0:l.call(c,35))||"2.1875"}[b.fontSize],color:null!=(f=null==(h=(y.vars||y).palette)||null==(d=h[b.color])?void 0:d.main)?f:{action:null==(p=(y.vars||y).palette)||null==(v=p.action)?void 0:v.active,disabled:null==(m=(y.vars||y).palette)||null==(g=m.action)?void 0:g.disabled,inherit:void 0}[b.color]}})),As=t.forwardRef((function(e,t){var n=Qo({props:e,name:"MuiSvgIcon"}),r=n.children,a=n.className,i=n.color,o=void 0===i?"inherit":i,s=n.component,u=void 0===s?"svg":s,c=n.fontSize,l=void 0===c?"medium":c,f=n.htmlColor,h=n.inheritViewBox,d=void 0!==h&&h,p=n.titleAccess,v=n.viewBox,m=void 0===v?"0 0 24 24":v,g=Ye(n,Es),y=Tt({},n,{color:o,component:u,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:d,viewBox:m}),b={};d||(b.viewBox=m);var x=function(e){var t=e.color,n=e.fontSize,r=e.classes;return jo({root:["root","inherit"!==t&&"color".concat(Go(t)),"fontSize".concat(Go(n))]},Ns,r)}(y);return(0,Qe.jsxs)(Ts,Tt({as:u,className:Vo(x.root,a),ownerState:y,focusable:"false",color:f,"aria-hidden":!p||void 0,role:p?"img":void 0,ref:t},b,g,{children:[r,p?(0,Qe.jsx)("title",{children:p}):null]}))}));As.muiName="SvgIcon";var Rs=As;function Fs(e,n){var r=function(t,r){return(0,Qe.jsx)(Rs,Tt({"data-testid":"".concat(n,"Icon"),ref:r},t,{children:e}))};return r.muiName=Rs.muiName,t.memo(t.forwardRef(r))}var Ds=Fs((0,Qe.jsx)("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),Os=Fs((0,Qe.jsx)("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function Ls(e){return ss("MuiStepIcon",e)}var _s,Ms=us("MuiStepIcon",["root","active","completed","error","text"]),zs=["active","className","completed","error","icon"],Ps=Ti(Rs,{name:"MuiStepIcon",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(e){var t,n=e.theme;return ze(t={display:"block",transition:n.transitions.create("color",{duration:n.transitions.duration.shortest}),color:(n.vars||n).palette.text.disabled},"&.".concat(Ms.completed),{color:(n.vars||n).palette.primary.main}),ze(t,"&.".concat(Ms.active),{color:(n.vars||n).palette.primary.main}),ze(t,"&.".concat(Ms.error),{color:(n.vars||n).palette.error.main}),t})),Bs=Ti("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:function(e,t){return t.text}})((function(e){var t=e.theme;return{fill:(t.vars||t).palette.primary.contrastText,fontSize:t.typography.caption.fontSize,fontFamily:t.typography.fontFamily}})),Ws=t.forwardRef((function(e,t){var n=Qo({props:e,name:"MuiStepIcon"}),r=n.active,a=void 0!==r&&r,i=n.className,o=n.completed,s=void 0!==o&&o,u=n.error,c=void 0!==u&&u,l=n.icon,f=Ye(n,zs),h=Tt({},n,{active:a,completed:s,error:c}),d=function(e){var t=e.classes;return jo({root:["root",e.active&&"active",e.completed&&"completed",e.error&&"error"],text:["text"]},Ls,t)}(h);if("number"===typeof l||"string"===typeof l){var p=Vo(i,d.root);return c?(0,Qe.jsx)(Ps,Tt({as:Os,className:p,ref:t,ownerState:h},f)):s?(0,Qe.jsx)(Ps,Tt({as:Ds,className:p,ref:t,ownerState:h},f)):(0,Qe.jsxs)(Ps,Tt({className:p,ref:t,ownerState:h},f,{children:[_s||(_s=(0,Qe.jsx)("circle",{cx:"12",cy:"12",r:"12"})),(0,Qe.jsx)(Bs,{className:d.text,x:"12",y:"16",textAnchor:"middle",ownerState:h,children:l})]}))}return l}));function Us(e){return ss("MuiStepLabel",e)}var Vs=us("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),js=["children","className","componentsProps","error","icon","optional","StepIconComponent","StepIconProps"],Gs=Ti("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.orientation]]}})((function(e){var t,n=e.ownerState;return Tt((ze(t={display:"flex",alignItems:"center"},"&.".concat(Vs.alternativeLabel),{flexDirection:"column"}),ze(t,"&.".concat(Vs.disabled),{cursor:"default"}),t),"vertical"===n.orientation&&{textAlign:"left",padding:"8px 0"})})),Hs=Ti("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:function(e,t){return t.label}})((function(e){var t,n=e.theme;return Tt({},n.typography.body2,(ze(t={display:"block",transition:n.transitions.create("color",{duration:n.transitions.duration.shortest})},"&.".concat(Vs.active),{color:(n.vars||n).palette.text.primary,fontWeight:500}),ze(t,"&.".concat(Vs.completed),{color:(n.vars||n).palette.text.primary,fontWeight:500}),ze(t,"&.".concat(Vs.alternativeLabel),{textAlign:"center",marginTop:16}),ze(t,"&.".concat(Vs.error),{color:(n.vars||n).palette.error.main}),t))})),Ks=Ti("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:function(e,t){return t.iconContainer}})((function(){return ze({flexShrink:0,display:"flex",paddingRight:8},"&.".concat(Vs.alternativeLabel),{paddingRight:0})})),qs=Ti("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:function(e,t){return t.labelContainer}})((function(e){var t=e.theme;return{width:"100%",color:(t.vars||t).palette.text.secondary}})),Xs=t.forwardRef((function(e,n){var r=Qo({props:e,name:"MuiStepLabel"}),a=r.children,i=r.className,o=r.componentsProps,s=void 0===o?{}:o,u=r.error,c=void 0!==u&&u,l=r.icon,f=r.optional,h=r.StepIconComponent,d=r.StepIconProps,p=Ye(r,js),v=t.useContext(es),m=v.alternativeLabel,g=v.orientation,y=t.useContext(ns),b=y.active,x=y.disabled,k=y.completed,w=y.icon,S=l||w,I=h;S&&!I&&(I=Ws);var C=Tt({},r,{active:b,alternativeLabel:m,completed:k,disabled:x,error:c,orientation:g}),N=function(e){var t=e.classes,n=e.orientation,r=e.active,a=e.completed,i=e.error,o=e.disabled,s=e.alternativeLabel;return jo({root:["root",n,i&&"error",o&&"disabled",s&&"alternativeLabel"],label:["label",r&&"active",a&&"completed",i&&"error",o&&"disabled",s&&"alternativeLabel"],iconContainer:["iconContainer",s&&"alternativeLabel"],labelContainer:["labelContainer"]},Us,t)}(C);return(0,Qe.jsxs)(Gs,Tt({className:Vo(N.root,i),ref:n,ownerState:C},p,{children:[S||I?(0,Qe.jsx)(Ks,{className:N.iconContainer,ownerState:C,children:(0,Qe.jsx)(I,Tt({completed:k,active:b,error:c,icon:S},d))}):null,(0,Qe.jsxs)(qs,{className:N.labelContainer,ownerState:C,children:[a?(0,Qe.jsx)(Hs,Tt({className:N.label,ownerState:C},s.label,{children:a})):null,f]})]}))}));Xs.muiName="StepLabel";var Ys,Zs,Js=Xs,Qs=_e.div(Ys||(Ys=i(["\n  min-height: 470px;\n  width: 900px;\n  padding: 2rem;\n  background-color: #f9f9f9;\n  border-radius: 1rem;\n  display: flex;\n  flex-direction: column;\n\n  .buttonWrapper {\n    margin-top: auto;\n    display: flex;\n    gap: 1rem;\n  }\n"]))),$s=Ti(ps)((function(e){var t,n=e.theme;return ze(t={marginLeft:22},"&.".concat(ls.active),ze({},"& .".concat(ls.line),{borderColor:"#E2E2E2"})),ze(t,"&.".concat(ls.completed),ze({},"& .".concat(ls.line),{borderColor:"#178DC2"})),ze(t,"& .".concat(ls.line),{width:3,height:40,border:0,backgroundColor:"dark"===n.palette.mode?n.palette.grey[800]:"#eaeaf0",borderRadius:1}),t})),eu=Ti("div")((function(e){var t=e.theme,n=e.ownerState;return Be(Be({backgroundColor:"dark"===t.palette.mode?t.palette.grey[700]:"white",zIndex:1,color:"#178DC2",width:40,height:40,display:"flex",borderRadius:"50%",justifyContent:"center",alignItems:"center",border:"4px solid #D3D3D3"},n.active&&{backgroundColor:"#178DC2",color:"white",border:"4px solid #178DC2"}),n.completed&&{backgroundColor:"#BABABA",color:"white"})}));function tu(e){var t=e.active,n=e.completed,r=e.className,a={1:(0,Qe.jsx)(Zi,{}),2:(0,Qe.jsx)(io,{}),3:(0,Qe.jsx)(Co,{}),4:(0,Qe.jsx)(_o,{}),5:(0,Qe.jsx)(Wo,{})};return(0,Qe.jsx)(eu,{ownerState:{completed:n,active:t},className:r,children:a[String(e.icon)]})}var nu=_e.div(Zs||(Zs=i(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 3rem;\n"]))),ru=function(e){var t=e.children,n=e.setCurrentStep,r=e.currentStep,a=e.photo,i=e.result,o=e.isPredicting,s=e.getPrediction,u=!1;0===r||(u=!0,(o||r>=3)&&(u=!1));var c=!1;r===t.length-1||(c=!0,2!==r&&3!==r||(c=!1));var l=!(!a||i||2!==r),f=1===i;return(0,Qe.jsxs)(nu,{children:[(0,Qe.jsxs)(Qs,{children:[t[r],(0,Qe.jsxs)("div",{className:"buttonWrapper",children:[u&&(0,Qe.jsx)(nt,{reversed:!0,onClick:function(){n((function(e){return e-1}))},color:"#71848C",text:"white",Icon:Ui,children:"Back"}),l&&(0,Qe.jsx)(nt,{onClick:function(){s(a)},color:"#178dc2",Icon:_i,text:"white",children:"Start Test"}),c&&(0,Qe.jsx)(nt,{onClick:function(){n((function(e){return e+1}))},color:"#178dc2",Icon:_i,text:"white",children:"Next"}),f&&(0,Qe.jsx)(nt,{type:"submit",form:"patientForm",color:"#178dc2",Icon:_i,text:"white",children:"Submit"})]})]}),(0,Qe.jsx)(xs,{activeStep:r,orientation:"vertical",connector:(0,Qe.jsx)($s,{}),children:t.map((function(e){return(0,Qe.jsx)(Cs,{children:(0,Qe.jsx)(Js,{StepIconComponent:tu,children:e.props.label})},e.props.label)}))})]})},au=n(2007),iu=n.n(au);function ou(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function su(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}Object.create;function uu(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o}function cu(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;var lu=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function fu(e,t){var n=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var n=t.split(".").pop().toLowerCase(),r=lu.get(n);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!==typeof n.path){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"===typeof t?t:"string"===typeof r&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}var hu=[".DS_Store","Thumbs.db"];function du(e){return"object"===typeof e&&null!==e}function pu(e){return yu(e.target.files).map((function(e){return fu(e)}))}function vu(e){return ou(this,void 0,void 0,(function(){return su(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return e.getFile()})))];case 1:return[2,t.sent().map((function(e){return fu(e)}))]}}))}))}function mu(e,t){return ou(this,void 0,void 0,(function(){var n;return su(this,(function(r){switch(r.label){case 0:return e.items?(n=yu(e.items).filter((function(e){return"file"===e.kind})),"drop"!==t?[2,n]:[4,Promise.all(n.map(bu))]):[3,2];case 1:return[2,gu(xu(r.sent()))];case 2:return[2,gu(yu(e.files).map((function(e){return fu(e)})))]}}))}))}function gu(e){return e.filter((function(e){return-1===hu.indexOf(e.name)}))}function yu(e){if(null===e)return[];for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function bu(e){if("function"!==typeof e.webkitGetAsEntry)return ku(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?Su(t):ku(e)}function xu(e){return e.reduce((function(e,t){return cu(cu([],uu(e),!1),uu(Array.isArray(t)?xu(t):[t]),!1)}),[])}function ku(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var n=fu(t);return Promise.resolve(n)}function wu(e){return ou(this,void 0,void 0,(function(){return su(this,(function(t){return[2,e.isDirectory?Su(e):Iu(e)]}))}))}function Su(e){var t=e.createReader();return new Promise((function(e,n){var r=[];!function a(){var i=this;t.readEntries((function(t){return ou(i,void 0,void 0,(function(){var i,o,s;return su(this,(function(u){switch(u.label){case 0:if(t.length)return[3,5];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return i=u.sent(),e(i),[3,4];case 3:return o=u.sent(),n(o),[3,4];case 4:return[3,6];case 5:s=Promise.all(t.map(wu)),r.push(s),a(),u.label=6;case 6:return[2]}}))}))}),(function(e){n(e)}))}()}))}function Iu(e){return ou(this,void 0,void 0,(function(){return su(this,(function(t){return[2,new Promise((function(t,n){e.file((function(n){var r=fu(n,e.fullPath);t(r)}),(function(e){n(e)}))}))]}))}))}var Cu=n(9998);function Nu(e){return function(e){if(Array.isArray(e))return Au(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Tu(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Eu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(e,t)||Tu(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tu(e,t){if(e){if("string"===typeof e)return Au(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Au(e,t):void 0}}function Au(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ru="file-invalid-type",Fu="file-too-large",Du="file-too-small",Ou="too-many-files",Lu=function(e){e=Array.isArray(e)&&1===e.length?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:Ru,message:"File type must be ".concat(t)}},_u=function(e){return{code:Fu,message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},Mu=function(e){return{code:Du,message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},zu={code:Ou,message:"Too many files"};function Pu(e,t){var n="application/x-moz-file"===e.type||(0,Cu.Z)(e,t);return[n,n?null:Lu(t)]}function Bu(e,t,n){if(Wu(e.size))if(Wu(t)&&Wu(n)){if(e.size>n)return[!1,_u(n)];if(e.size<t)return[!1,Mu(t)]}else{if(Wu(t)&&e.size<t)return[!1,Mu(t)];if(Wu(n)&&e.size>n)return[!1,_u(n)]}return[!0,null]}function Wu(e){return void 0!==e&&null!==e}function Uu(e){var t=e.files,n=e.accept,r=e.minSize,a=e.maxSize,i=e.multiple,o=e.maxFiles,s=e.validator;return!(!i&&t.length>1||i&&o>=1&&t.length>o)&&t.every((function(e){var t=Eu(Pu(e,n),1)[0],i=Eu(Bu(e,r,a),1)[0],o=s?s(e):null;return t&&i&&!o}))}function Vu(e){return"function"===typeof e.isPropagationStopped?e.isPropagationStopped():"undefined"!==typeof e.cancelBubble&&e.cancelBubble}function ju(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function Gu(e){e.preventDefault()}function Hu(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}function Ku(e){return-1!==e.indexOf("Edge/")}function qu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return Hu(e)||Ku(e)}function Xu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return t.some((function(t){return!Vu(e)&&t&&t.apply(void 0,[e].concat(r)),Vu(e)}))}}function Yu(){return"showOpenFilePicker"in window}function Zu(e){return Wu(e)?Object.entries(e).filter((function(e){var t=Eu(e,2),n=t[0],r=t[1],a=!0;return ec(n)||(console.warn('Skipped "'.concat(n,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),a=!1),Array.isArray(r)&&r.every(tc)||(console.warn('Skipped "'.concat(n,'" because an invalid file extension was provided.')),a=!1),a})).map((function(e){var t,n,r,a=Eu(e,2),i=a[0],o=a[1];return{accept:(t={},n=i,r=o,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t)}})):e}function Ju(e){if(Wu(e))return Object.entries(e).reduce((function(e,t){var n=Eu(t,2),r=n[0],a=n[1];return[].concat(Nu(e),[r],Nu(a))}),[]).filter((function(e){return ec(e)||tc(e)})).join(",")}function Qu(e){return e instanceof DOMException&&("AbortError"===e.name||e.code===e.ABORT_ERR)}function $u(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}function ec(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||/\w+\/[-+.\w]+/g.test(e)}function tc(e){return/^.*\.[\w]+$/.test(e)}var nc=["children"],rc=["open"],ac=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],ic=["refKey","onChange","onClick"];function oc(e){return function(e){if(Array.isArray(e))return cc(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||uc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(e,t)||uc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uc(e,t){if(e){if("string"===typeof e)return cc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cc(e,t):void 0}}function cc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lc(Object(n),!0).forEach((function(t){hc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dc(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var pc=(0,t.forwardRef)((function(e,n){var r=e.children,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=fc(fc({},vc),e),r=n.accept,a=n.disabled,i=n.getFilesFromEvent,o=n.maxSize,s=n.minSize,u=n.multiple,c=n.maxFiles,l=n.onDragEnter,f=n.onDragLeave,h=n.onDragOver,d=n.onDrop,p=n.onDropAccepted,v=n.onDropRejected,m=n.onFileDialogCancel,g=n.onFileDialogOpen,y=n.useFsAccessApi,b=n.autoFocus,x=n.preventDropOnDocument,k=n.noClick,w=n.noKeyboard,S=n.noDrag,I=n.noDragEventsBubbling,C=n.onError,N=n.validator,E=(0,t.useMemo)((function(){return Ju(r)}),[r]),T=(0,t.useMemo)((function(){return Zu(r)}),[r]),A=(0,t.useMemo)((function(){return"function"===typeof g?g:bc}),[g]),R=(0,t.useMemo)((function(){return"function"===typeof m?m:bc}),[m]),F=(0,t.useRef)(null),D=(0,t.useRef)(null),O=sc((0,t.useReducer)(yc,gc),2),L=O[0],_=O[1],M=L.isFocused,z=L.isFileDialogActive,P=(0,t.useRef)("undefined"!==typeof window&&window.isSecureContext&&y&&Yu()),B=function(){!P.current&&z&&setTimeout((function(){D.current&&(D.current.files.length||(_({type:"closeDialog"}),R()))}),300)};(0,t.useEffect)((function(){return window.addEventListener("focus",B,!1),function(){window.removeEventListener("focus",B,!1)}}),[D,z,R,P]);var W=(0,t.useRef)([]),U=function(e){F.current&&F.current.contains(e.target)||(e.preventDefault(),W.current=[])};(0,t.useEffect)((function(){return x&&(document.addEventListener("dragover",Gu,!1),document.addEventListener("drop",U,!1)),function(){x&&(document.removeEventListener("dragover",Gu),document.removeEventListener("drop",U))}}),[F,x]),(0,t.useEffect)((function(){return!a&&b&&F.current&&F.current.focus(),function(){}}),[F,b,a]);var V=(0,t.useCallback)((function(e){C?C(e):console.error(e)}),[C]),j=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),ne(e),W.current=[].concat(oc(W.current),[e.target]),ju(e)&&Promise.resolve(i(e)).then((function(t){if(!Vu(e)||I){var n=t.length,r=n>0&&Uu({files:t,accept:E,minSize:s,maxSize:o,multiple:u,maxFiles:c,validator:N});_({isDragAccept:r,isDragReject:n>0&&!r,isDragActive:!0,type:"setDraggedFiles"}),l&&l(e)}})).catch((function(e){return V(e)}))}),[i,l,V,I,E,s,o,u,c,N]),G=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),ne(e);var t=ju(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(n){}return t&&h&&h(e),!1}),[h,I]),H=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),ne(e);var t=W.current.filter((function(e){return F.current&&F.current.contains(e)})),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),W.current=t,t.length>0||(_({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),ju(e)&&f&&f(e))}),[F,f,I]),K=(0,t.useCallback)((function(e,t){var n=[],r=[];e.forEach((function(e){var t=sc(Pu(e,E),2),a=t[0],i=t[1],u=sc(Bu(e,s,o),2),c=u[0],l=u[1],f=N?N(e):null;if(a&&c&&!f)n.push(e);else{var h=[i,l];f&&(h=h.concat(f)),r.push({file:e,errors:h.filter((function(e){return e}))})}})),(!u&&n.length>1||u&&c>=1&&n.length>c)&&(n.forEach((function(e){r.push({file:e,errors:[zu]})})),n.splice(0)),_({acceptedFiles:n,fileRejections:r,type:"setFiles"}),d&&d(n,r,t),r.length>0&&v&&v(r,t),n.length>0&&p&&p(n,t)}),[_,u,E,s,o,c,d,p,v,N]),q=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),ne(e),W.current=[],ju(e)&&Promise.resolve(i(e)).then((function(t){Vu(e)&&!I||K(t,e)})).catch((function(e){return V(e)})),_({type:"reset"})}),[i,K,V,I]),X=(0,t.useCallback)((function(){if(P.current){_({type:"openDialog"}),A();var e={multiple:u,types:T};window.showOpenFilePicker(e).then((function(e){return i(e)})).then((function(e){K(e,null),_({type:"closeDialog"})})).catch((function(e){Qu(e)?(R(e),_({type:"closeDialog"})):$u(e)?(P.current=!1,D.current?(D.current.value=null,D.current.click()):V(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):V(e)}))}else D.current&&(_({type:"openDialog"}),A(),D.current.value=null,D.current.click())}),[_,A,R,y,K,V,T,u]),Y=(0,t.useCallback)((function(e){F.current&&F.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),X()))}),[F,X]),Z=(0,t.useCallback)((function(){_({type:"focus"})}),[]),J=(0,t.useCallback)((function(){_({type:"blur"})}),[]),Q=(0,t.useCallback)((function(){k||(qu()?setTimeout(X,0):X())}),[k,X]),$=function(e){return a?null:e},ee=function(e){return w?null:$(e)},te=function(e){return S?null:$(e)},ne=function(e){I&&e.stopPropagation()},re=(0,t.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.role,i=e.onKeyDown,o=e.onFocus,s=e.onBlur,u=e.onClick,c=e.onDragEnter,l=e.onDragOver,f=e.onDragLeave,h=e.onDrop,d=dc(e,ac);return fc(fc(hc({onKeyDown:ee(Xu(i,Y)),onFocus:ee(Xu(o,Z)),onBlur:ee(Xu(s,J)),onClick:$(Xu(u,Q)),onDragEnter:te(Xu(c,j)),onDragOver:te(Xu(l,G)),onDragLeave:te(Xu(f,H)),onDrop:te(Xu(h,q)),role:"string"===typeof r&&""!==r?r:"presentation"},n,F),a||w?{}:{tabIndex:0}),d)}}),[F,Y,Z,J,Q,j,G,H,q,w,S,a]),ae=(0,t.useCallback)((function(e){e.stopPropagation()}),[]),ie=(0,t.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.onChange,a=e.onClick,i=dc(e,ic);return fc(fc({},hc({accept:E,multiple:u,type:"file",style:{display:"none"},onChange:$(Xu(r,q)),onClick:$(Xu(a,ae)),tabIndex:-1},n,D)),i)}}),[D,r,u,q,a]);return fc(fc({},L),{},{isFocused:M&&!a,getRootProps:re,getInputProps:ie,rootRef:F,inputRef:D,open:$(X)})}(dc(e,nc)),i=a.open,o=dc(a,rc);return(0,t.useImperativeHandle)(n,(function(){return{open:i}}),[i]),t.createElement(t.Fragment,null,r(fc(fc({},o),{},{open:i})))}));pc.displayName="Dropzone";var vc={disabled:!1,getFilesFromEvent:function(e){return ou(this,void 0,void 0,(function(){return su(this,(function(t){return du(e)&&du(e.dataTransfer)?[2,mu(e.dataTransfer,e.type)]:function(e){return du(e)&&du(e.target)}(e)?[2,pu(e)]:Array.isArray(e)&&e.every((function(e){return"getFile"in e&&"function"===typeof e.getFile}))?[2,vu(e)]:[2,[]]}))}))},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};pc.defaultProps=vc,pc.propTypes={children:iu().func,accept:iu().objectOf(iu().arrayOf(iu().string)),multiple:iu().bool,preventDropOnDocument:iu().bool,noClick:iu().bool,noKeyboard:iu().bool,noDrag:iu().bool,noDragEventsBubbling:iu().bool,minSize:iu().number,maxSize:iu().number,maxFiles:iu().number,disabled:iu().bool,getFilesFromEvent:iu().func,onFileDialogCancel:iu().func,onFileDialogOpen:iu().func,useFsAccessApi:iu().bool,autoFocus:iu().bool,onDragEnter:iu().func,onDragLeave:iu().func,onDragOver:iu().func,onDrop:iu().func,onDropAccepted:iu().func,onDropRejected:iu().func,onError:iu().func,validator:iu().func};var mc=pc,gc={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function yc(e,t){switch(t.type){case"focus":return fc(fc({},e),{},{isFocused:!0});case"blur":return fc(fc({},e),{},{isFocused:!1});case"openDialog":return fc(fc({},gc),{},{isFileDialogActive:!0});case"closeDialog":return fc(fc({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return fc(fc({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return fc(fc({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return fc({},gc);default:return e}}function bc(){}var xc,kc,wc,Sc=[{text:"Monitor your blood sugar level",image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAABACAYAAACp3n/2AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAwrSURBVHgB1VtrbBzVFf7uzL68D++6DiZxYmcTEqA4D1sJCeXROIlACVKb/KBRhCpiKiKkSm1DRaAtP+zwo0CC6iC1VBSJGBUhKqiU0NJQaLFDIOAQkRemIg974yROYoK9i9f2vmZuz53xPj1e78vB+aTxzL13ZvZ+95x77rnnjBmmGTo6Oto5540mkwkOhyNRH4vFGlasWHEMJYCE6wQ0CG6UCCZcQzzzCffKKjyKBE+8jsp+Kvt/+wPmwzXClJHe+TGvl2SsUoF6MDQC3EuHplty6o1j5Z2ddCfDseDo514HH8JUoqSkd33CG1UJGyTwJg7uUZEnOOrVazDjWC43Kes2tahQO8zvvtVh1C7IkriahQFCkVjC/0e6PwSTLMPpciXqPx2u9l2NuVoeX8leRZGYlDRft9mrcqWHeuGTbpjZwNp2++NtpSQbx5rKr1FlCcNiNsPjTtquv3dbcHFY0wKfBFYU+Ul1iQg3izMrd3lhUn8lroVB2nWYt3OJt5eScI7wquBtOz9V9oh+oABkJR1d90AjnZpo2AGHnaYc2/byu5e3mSR+9Dsgmw7GmmQa9Oc7+RbkiaykZc7iUo5Xeb7f83kr2WAPpgc0qT/TqbTk89Ak6s39mTXW8CimG2Sw5ucOq+3NR3lOwshKmiR6QDuHwom6rptXYDqCcTQ6ojwn4llJP/3sm22H797g73fNwPmKOdh778/QXzkb0xa0zudCPKtz4ojwPQfve9BzEA/iuoFGXG2lq4cnumVCST+nG4eNNUov1offwerwf+HG1LqHJQNnTdmMmyHp5zr5RkbGYVH0JDaPvg5xXmY9g61l/0CN1I/rAcK4PfOJ8bI6jrRY8Bm4UA/cFflIq1M/uAD+UZ92vUz+CtcLaB3fYzS/x81pcnmbaV54xXU5D4D30xJ15Gsq0XHvLbCyCAoFj4WgXjwOdeiKYbvVYsUZF0e/RfgeDDarNdGmkgvqmOCnuWRB1DELUffczCavPQLhazyWWpnme2v7XYn3xMvbg8/qL+2i5bqmGriJrLhyI/4WWYt8IMgqZz6E0vuZYbtMI+3xeGCxWFAMVLMTwZp7EKMBSIWistW0X++Il6X0H9dGZRzYkhka4UIR/ey1rIQrKyuLJiwgRYMo794Py+Dp9HqZp/FKqLfmvHPehBIjRhLmKeosYl+CZBxOp1MjHm+TpPz305FIBENDyZXFcamTpD0TqkV3n4XjIoxaXNoJ0mNzOWdYeRhumvNhZkWAGYev+KgfSvfBZGco0Ld48WKNXCbsdjvMtJ0sFP39/bhw4YJ2zZQISfsMQjc2JNppLDfQqUO7Fn9ahYXLQ8oLYqfx6MiL2DLyCraqr+FO88lEmxgMYQAFMg3WbbfdZkhYqHYxhAWqqqowa1ZyLtv86SpOK1JT3JJrPYiGsDHXKI2Vh7A2/B+NHGR63FmBO3FSM3BV4XPaMifaAo45eCtYjktjz7kpIGBNscapKJZwHGVlZYlrKRLMbPY4whDb0Bf0YddFnxOq1Cs0R3RJcnOSxCKcwqKwvq5zmwPldgkL5PMJ0qmQSdouT9IwWqwWbV5bJbFUIS+Mjo5qh/ZeWc56LwU9NiJBGsUHBOpiSRWH2Zb13htme1E5c05anY366yrQgJ84cQKKokx6Hxm0eqHi0i7dVbumQQFZHj+vpTwlnP4+OddbPbYQ6k2cYSmmCY5d5PCPxSgaF+ij4B/lVK/Xeb8njiJGhyATXzHk9ZgGePxtFS8dSkbKV93E0EoR9DUvKvCH9DoP2akPfi6jvroY4mq9xCTdz/6u8a8vuUaq6XamnQ+c5dj3BdcIryKpN9IgCC3YdzIPZ8IAFNz0SpxPD9ICnjKGVzbLcNvSJdm0XMJDt5cm80Grg5fexKdLZFObv6tJnc8NFifNSeARwzctSN89X1dfodZTDE/2BJ7drR808VE25rxbHIl1mJks4JaysWur5tohGkYh+MsmCb+/X1frxj+pUyrtCUkvcpDfXLE4UU6bZa5Kg/qxTcel08gFMm0QbG+8idDmn0Ahv1mo9uAINGkHQumEfQNcay8VBGkR0B+n4neV92IqIff4YGs/gNiiOihrqvD0+xwvpyxZYj32jLnSO95Lry8SfiLN/EbGrFwuTE1zRWTlCgT+sBOxeV6tvKGOIRpNEtpC1noprcdiyTo3oEt5LhHecnvRpH1C0uLjFS9KgRF9I8JCw9qmIxuOXuX4xfG5+J3McX8t05yR+28d704232e8VK15m2M2/cRf1+Y3CLRE+030iK8Us4VHaEJyFUz41cKgRbLnvJxmhoVujln2wiS3drYePMwbjB0zUT+P5/PFAw9+Q55cxo5GiVEdHVZK59KRRMjwHaGRIBbeAOxZnex0VNWkkPPW8qll+o0iVCSOPHDMRN3vyHmPQmBOstxhUt/RgE62AHxz+QIGr15O7LYcFCoSO6XzyH+3lSdhxGI4bhKfMu3sVA0t+ISwOmi9LtOlHiksdavSr4tDIGqSwU1T/3UXKZLvqbtIvfUS20s77CbkA3JYhNR54HJOEo/Fxt9jC3yL2UdOoPzqIGKzqnC58U5EXM4J3/FG3wx8HnBilMt4YPYgVrkHkFeXOe8QZ5NewKu0r25CvhCempU6OeI3bPbYk9ILh8cvgUte30fEKXRrMYPFFDj3/htfbfoRFOv4EMo/r1Sgtadau66pkPDnS7qHmEo8HjYSUC3jB49B2ivOmgnbrseDjXs+CZjFPmFblTvZeSHpVOKe3os6YQG7/g7LUBDOvsuG73qn/3va2UZW3zRmeI8E00PPIyMjiWvF7EprE6q9/Q62T1wn7DZlKXen3nQ+XPynmDPdVljNyaXhypVkSDjkLjd8xkjKegf1hVXlxgusiJEFAoFEOVpem/mCvfGrRI9o7/ACUqR9crgKuYCr2efzkpqkmvX19SXmdsjtwoXlS/QGkrAwq4F5tQhWzzR8z6/n9cFFa02EHg+GOeySgoeqLibaxYCmBgcjGck8VdX4aUhbIHZ18mYO3hIvr/F0Y5mzD9mgWXBawiZCYCSGP75/PlGurq7G/PnzE+XKUz1w9l/FcPWNCC+ty5rWuRQy48CAroE/njmoERcQ06arqytxX7hiIYbn3JPSSd72xB1y4suENNIi0xGNaFnLxPK1voLi2Q7jRDwPk4SCk1vQ9774Bp+d/TZRrq2t1Y5MCMIi9ZNPPksQPn36dNp67b91k5bB1PpIc1nVs5a+xO+kvuCxBubnnO9Irds/eDO+MFB1PvptToQFfnhLBWz2pMHr7e1Fd3f3uPtU0sHh4WHtnAtE0i6T8Ajlr+KEtX5ytjvzs2pD/2fXYbWd7EVjat368i7UmXy6u6n52bl77Ieii/HxUC2iR17Tknpx2Gw2TeIiD5UJkd8SaSAjqQsrLRJ2AwPpgx6aUYeRWSsTZSHlJ1dK8zKfN3SDYgp7mJLzR5Gi5h8MLcQC65ewsijyQYA7cCi2GIz2xublP00jHgqFcOrUKU3qQq1dLhfKy9OtunBPBXFxFqocDAYNXc9MwgS/UGujPk3o6VI+V3x7uSdebtz/KhaGu1EupRgthx3Mmj0X088rcMZ+Ew4tW6eVhc+unP0QSt8Jw/vjSfpcsxZctmgqHa6sS68Ha3pygi+Fs7r3cWte09OFTXueHv9w1QzxoQhywfNbW9PK6uA5xM4eBB84Z3i/yEAKyU9EXpAdJemG6RDfnKS1gbUQ4R2YAFm9/O30IBEXly0oMaSKubAsn6tJXgyA+FohNZ8tNqUhMh9m6qKV5reJ0rmszKMZqahzlvalgREmIyww6dZGEN//Uru4bMEUgJW5IZctyXpPZOyYDLkQFshpQVz/6OodZK1bMI2RK2GBnL0A+b23dlCURXg1BW1MphD+MaOVE2GBvBJEpvffbJOY3ECbEx+mAchV6FBU1vBknv/PkXe4gr37ho9O85T7HmiGvgf34trDr3LW8ps72AsoAAWnAoW6M8m6mnZ8bbh2EKrcMmxh8wolLFB05FyAN23zQhZrOrmuzFjymet0nhBkd4/Q9ndHAyvappSEdCr4I7/cQDG3jZkDUABpP03aveSDtg2bcbwUZOMoOelU8K3b6qGgHhJf+vwjrfUUhxO+vBfpkVf/2HGMpOmj6eKjZw48QVFLTBH+D+k6s2sOqVRFAAAAAElFTkSuQmCC"},{text:"Manage your diabetes",image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAu/SURBVHgB1VpbcBvVGf7O7upiy7Il54ohiZI2XJJC7AQKactE6UBTaIGkHaaPMZ1SKCVg0/DAU5KZdpghoXFCmaHtMHE6fepLoPTyUKYxYWhDSmIz1CWJA5Zz8SWObdmyVtJqd0//s5JlyZZWK1+Y4ZtZaS/n9p3//Lezy1ABDrZ0hhnHbgaEOech+o9yxrokjvYXjjYdxwLhcEtngJvYbTLsZJw3ciBAfUXAeYcpS8dfbGvqcNoWc1JIdGiYvI1Od9s0FJG01PbWN7ZGMA8cfuZMo6koJ4hUqGRfnLdJsnSgta0pWqY5SHAAg+MEbMgJiAEZbk/nKzRAzBE0kSEid9KOnNUXYy2GwU/AAcoSPPjc2f20NMKlnvuTsfzLgEyzjznCNLkgF3BUmCH86nOd+8oXs4GYUVqanch26pcNbPQlUe/Wrefq0Dg8kV7I92aEdjrqw6iuiGZb9h5tOoIK8MHDR5tTsvdYJXVkU4/WxofWNnUcKLlUFbsGTMMMg7EcuYeXjqNGNnPPBwevob5xHdzuNGK6jElDzjzgfCf9VkTwpmDVbpMX3vPf9nvI3hu568TVHUiNbM4r4QrIgVWP0UlJA2e/RCVp09Rpk18tICegJzVIigyNzN27Y35oPLsgGCrWQ9njbnR53RDH8gffRt2dn0Ab+hEZlAbwxCaYsa0w4/dZz8UzUUacSx7Fti+lTL85fVjpSc96WNNQj4m+64g03IrRtFK0XgUI+JvehVIzhuiHj1g3uObF5MUnCwpVremGNrAOib6NmTJl+ipHsCQuql5MBENQI/3omay2LRsOvdJomtI2mLxwMBKLSBOxtzuiGR2KdT4A5k4icO87SA0Sid474F3xPozkMlopcSSH7odME6CNNFjkncCWIOfomnkvRcuxe7IKnVOkVt42ux6m64VDL4dMk50ENwOzTBp1YNRUdyCK7RRAdNAKD4uBj73/uKV7tRuOkJadzxVniorJ7h0FTTDOOjBXgrKE44YJ4eAxSUakO1aFbrUK5cDA2qbOTUN5npiUXEaMsbD4HxiY6DC5GS4Y2mc/K1Kj0GB6U+p7sIEtQREpvLrnbJtwrH8bqYMTkPQiupbMdcqI3JRxbFwftO509Yzm14iI33/d/q0j5JJaUIn+ct6+97UtEbsiZXVQhES6yXeyMtHFFEzTbH2pRLj20Nab8d37GjA4kiCSY+i5EsPIDXXXqSuZyTz07EdPkOV2FChYE5nWDpQr5ygWfZkcvkJRRhmSURhmy97X7y7wSU9+841jd34l2Dw4msCvnipi0SV3iH1vQ9/UJa2YZloxh2EjSaHjupba9ZKDuNcRwSm8Qp1LjJFOFfg5kVG066nkkWId3vjjmWNL6tzNJRudQVBATKiLY182YMgn2sVM/tYvfrOlrOSmUBHBKeyj7MKf5pZS7n19c59dWf6XzhaKjvehlESKEMzHoZ+fWyP+Yy42fsBB9jATswhO5Xw0e41k4YSBiFChLokkNNdUiL/TGaauThZ9WIZgMYgYWTfNZsakbUJtKDeNUgrVVSxXZPmVKC06lp85BOOjGPPVTw8U/MCLR7fsR4WwJajzINvlXDKHnjtLLshSE+i6DkVRoBg6dDlrLxl7S04lW6eEYcWiVh5GRuT69eHw+YuXcIGOzb0f4a7LH+Prl07nGif/tu/QnrMVRfy24KytMnLn2qfICZy/+BlUVbXGOt0m32m6PScPP/3vkLi0CArJiSSzPhjE6FgUy5YthS4p6A804NNbNuKOa91YNXI50wBjzQf3nG3BvMFa2KObWp2WtvLSIkm3rhtwGYVxspV8uzyWIBTLLGeXpUKZQZ3HhftXebAmXofTxnLc1XMO/cGbMRBsmB4aY/tI6u07oxSRecs7Zi2aCLgDhfFqvD8a7X36WMiu3to3noiIf7FlQitstwgY/IpJqVnpJMhDBiQlshoK+w4++5+wQo71MRETClRpCTwlD+OmMRdq1yzHdxIxJCf8iFb7LInmIXB7cvCEJEmN0MoTHD13FSu/fWvBvcnPhtslzT5b6/vx8SgHe+ukPtE3IvlD99XFKeFOoIcC/TPDmdwzEB+DN520dhZW1UnYuiRBeamEE9eD0Jj0vMTzjIooLGZAcmXIeNwSqm9ego3myKzONSaLeo7CKm08gYlLw7lrcZ66EXdSlXbTeHO9kbK2JlZ7U9bNtWwCG652W6Rqx4ctA7N+4AK+yjPjFHmrm7b6yD83KvmDdDcsRcPq2+H2ZwJqRtG2u64KrhoP3Nf5dEJLiDM3KkH0k36ol0ezhJOVVBWTWXD9Oa/FubUNiCUuoCNtYI00iY/X3o0RWcMDmMiVEy5ErJGcFRvR5By5fAii66sLB+XmBiqFIFYpuWJw6yr+++kFqAkVXq8Hf0j6reuRocFZZSXk5XxiTyUS40UbXeIqJFTNNSwmNDVJ+q9a5wEjYf2LlE3AT1sV69eFaC/Ig4YVy/FMTdy6XrciOF2f8lYRs1JoWZgwvnl22NpAmol6RS+4Xpsem1UmenUYCwXF7SKCGT0Nmhmpn4qSpCjZPjVeA4/HA0WeHqe4Pp+qyTzP7g9JZKDIEFq7X9PLVDUgcr/JayMFRDPbgRmEiFw1L/Q9anTS2gRaKIjNLHGY5OeWGXHrENbxwwnfzP2fHITUxPOehMdKpzQteVwSeRhZ0oLoXDR0pWcYfyJT+2b/Uus4Fa2xnvlMDRu1oYKGDRpEmpZUVaAGCwmFJkxTM5bzntQVuCrQe4q69ovsxhLRP8787vSOe34qPHjYS+u6qsqLmNePpLvQ4Ahy30j2wT9D/xIkPbGk3NXONoIqgRZT4ampIqNmYpURxTWlFumsVRXLsq7WjwSNU/X4piuZlJe+tuW3GaJ5sPIwgx8TUUD+fQ+tiA3VKtYM9NIsFu6NCunFBkdRu7LeWlILjbHLQwjcshxMygw1LrnwoWdV14jsC2GmH6aNK3IL+194bXPelkkRiHyvzuCbSKKhx+9hzctqEBYk432jGD8/BF2dlqA6OgGZpCdmeTGQ377kkuFZWgPvUl9bbeuDrb/ec26btfNO6dK4zD4uli/aJrz8750h6Kw3/54gN/7pEOJZp22kjYjskkNYJOhaGr5bggh+rcEKOrLoYo80Njmpbx8MGmzW2xul2o0lW1Zh5fZbofjcglw7FhFCt731vnxyAo38RKejMLEkQUt6HM2lnrsDVWjYsWE/vgAUjVtd0mNwgNIS1Fm57bsu9v1NC/ba2g7JG5Mw0zNchFn6nWU+ihLkf+5sBsq8IeLSAiS9ziEMXAHo/b2TesUlyJj9m1OOdvboXbZb5guN5OxlGsjs9dhjFsGs9EK2tQzueF/St7qedPUOMNf8fGSKlulsTL+/LIUCgpZhcSK9XU0ROER1Q61leaV5EhQ6OEsPwcsu08KoVYfQq5BtDcaPk4nOlRn64FLASOpFiwpSVTfVWb5TOFxBNNeVWnm6JQjOmKiwcBd2O3MzwnJm+6lItszJ/Fortq0vW0MQE8s0HwP/vIj0eALzhmIZw47Sj7PIKuxcXj07gh7XkBzOGAp3wFtkuc0R3PKHHaUeO/oQaCFAUQ9tYNVZh6vWOyedLF7HXg+nCeqzX1cvJNITKUz2jlpHakStWAdLGipG7yb++r81perlCGYVtQOLBFetBzVr663Du8xXYHAc1a+zyVbMdEkpFi5RhT8B8VXfIkDo4MTFG9ah9k9UbGCEuykN7owge4j8m8K3YxFICh0MbFxuHWKwnqU+55U5IiJgsEHJsLJkPkj+pZEi9rKRQqxnaCftdTqKC/MRvzzmvLCJ/at/uEn0YRMf8+3skdnfkZb8CIF0UhidsoaH3h+E6K9igo5B0jNhHqF9+AAFGaUJlnAXc/7SaQqvf65T2xyLBY+Jtl92/CTKf9D5nnjlVrJgCfLzJnhJNUXjWCwwLmXCMIOkYz/aomHbF+bo54vswO1VpkiW/6UhaKHMd2nFsvwvF0GY9kl2kSz/y0XQKBtpBSz3lof/Awws1LTRUaJhAAAAAElFTkSuQmCC"},{text:"Perform glycosylated hemoglobin test regularly",image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAABDCAYAAADJY8YcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAYrSURBVHgB7VttbBNlHP9d77a12zphGwiOxBqIKEbdNAETTCjwwegXxwcTSTTUj/ppJQTjJzb85gc3g0Q/QWdi0ETNEtBgIrH7YHgzMkgGmA1b2QbDrmvt27XXe/F5Cn259eWuteyupL/k1nuu/+f6/O7/fndjfryu+BQFDpgMNlYGw+SG/j1b2adQAyxmJEehqIcO1AgLHnE88gQ51BEtkaBqnO7qgdGoG8GOuRk4vvtcdWz2ncNIreuDkXioJsqmeBiNZpBpdNTsg/Zb19Dzx2RuXMocN3p/gNRmy43D27Yj/NwOrCZqJmj9ZwEd87OVZQILqnF80xasNpo+2Oio2UST6zchRHwqi9bIcpHJRjY/r/JBOme1UTPBKFk83bKgib5jRaIPvuREwgC/K0TTBxsddatFJWs7Ka67YTYwZ6YVBSaElXT0lnxHD9LRM6gBTR9sdDQJNjqaBBsdFfPg9G0J1+dkVIv1W6vPPFs6WPTZWNQbFQkKIhBLVr9Yu1z9HF5+OOm46YONjoomunEtrY6q9wt7R/Xm1metv/9RVCS4Ya2FbGhoNLSJOodOrtGSaViCTvcxD5h4yOk+7nMOHRsuJ9eQ7ZJz6LgLjHJSPYPxk23YO/rBuOqoFkFeUnAzJiKtI98/3mbBk+3awWIxJOOKL3/CvS+waOXU7V45ghmzZBJXyCNSR6lzS6I4kY6G3Bc8I3461uzo04T/vZTOaoYsQQ/Bu4QgJZmFIFKC0AcmNkT+OMp9zXLcoGBhB7e7jngEwK3LRCOiDFGHIXcRLXCMvsY7S5BqrttePKeUBp1DXzjASD6tc/PhJSiyTB6DK15d162Lq38soilIC5yUyHyKbPv9Axb5CDQutEiekVByFAwYp2mDTK/gx8u3PsmQXOzeiS/PL743Geo+WWmOLElIRUM5goTYlGkJ7vnzEGzppdw4Rvz0+8UN8Mw/UXaOkIhBTCbyB1ilX9NEaRS9FErrqvaf7eR0BZmZOxIuzUiZbqXTCry5o0UVRW3CkoocRScn4cCmBby2LoDx+T6cDfSqvqfaKyRH/M9z+cTHVzUdIfO7Om/Y6W150tL9VoxCEJncfu48rb2ZrRQ2tAn4cLMPo9tukv1U/px8XP0bjGWEfprWRNdIAbQv/IyByC8V5c4GenDir3X4O5h/AEuu8/DvXx01N0FJkeFdSsMuBvF6/DReSZ4vK3uX53DKZ8e3/i469F8aP5p77auu78nUEzeiEikygGW2B193uTDb+jQhegY9UrBIdqNNxMFtIexfE8bFgNW7r+A7XRoUiYieUs1Wxd316INbIW0ciso0Gtgmg0LJec7EOTj5cyWJIkScOyrTmOEBm3Az7omwriha7sdWgtaiA4+1aMpN3xZJFM1fsbd2tpBomidJo3Y5eNv34lpbf7HZ0lIr8eCcClwQrX6yN6JJkF5cO/mjp1TrbtFX8dhtFlKeKRAIj06bWnsLvKQZjbNme5p9A+/GxvGMNEOethLtSYVSTKZXNFWQoa7wWzCtO93EAqQsIxb2auIiBiM/oVfMmW0YojzAfPSN31QEZ0lbNpuQdMmmYgKEWD6BWhTGdWL+fWIOll3ERj3M4VOZl3hMQ7AaX5clGYmlFJT80v3j+7tLvhFsmlsWs3FRt2wqli4kR4Jmanc5WVPkwbllGdN+umDtNCOTaBe5Q/VyXzdcG+OZONTtLydvCoIXbojgk/pkQ3MKIVmwbAUjleQNN1HaWcR0kktGKbmCA6Tm9I7Z/JXmGEowxiuY8umLmgpJHXxYFQ/9hNyI1jyOmP0YZPTDAFy+JfUT7WnevKXg/12hPWBYz7yaXs2oB94e5R1p1qJ5A4lCIoElPFeoPWbKO2od0DPXMBMVWDj1yvKhFalaUfbpnGqkD7Iv6pES4grJewUHFHi0AkshTP9sIr6sDixk0wwshTCQoHRVS6IoLYAZq0Z7FIYRlCXrBGjVXwY0sBSlhVHrZ6gShhGccDNhhaaoEqA5L3avtrSwEoaliSwGP015WA4H6D4llowS04yUrFiq8r0sDCdI4TyYOmLhZJecLvo/QT9ZoOvXUdskaoQpCGax253epUB0ZAaKdNU71jmF/4n/AF3tr0FfMFfuAAAAAElFTkSuQmCC"},{text:"Keep your blood pressure and cholesterol under control",image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAm4SURBVHgBzVpLbCRHGf6r59UznpftXe+aLGAfFhEJKd5wgUgoXm5IQDCCA1xYuIWAdo0WIQ7I9gnBId5wgBNsuCQn4kVolRNZR0LkRrxSRIRA8gSy6/e8348u/r97Ht1dVd0949kon1QzPd011fX1/65qBlMG376bhaULKwDaM/hzBTg2YFm8suTsyXL4kQPGi/i9C13jIfv213ZhymAwBfCdHSQQWgUI3wTOkRBkYTIUcUa7OMY99s2v/hGmgHMRNIkZ0Vs4yk2YnJQKOZMstLfY2loOJsREBJ8wMRE92ILT8qvsxe/kYEyMTZC/tvMN0GPbok1NCMOwmh2aZjU7jk9yUK9vsp/8cCzVDUzQlBqPbuLhTd/OiTBAtw3wKA/Qwu9u1yLRxuODE6tPGPtEIzgDnIIexRazztkRjVrnItgqVWsMxu+A1tli6+tFCIBABPnOm0vAjR0gr6hCGJ/4J5MAl2YA5nQkVwDY2bMmVa0B1JsWWS8Q4dSMnKxj1uiBNXadrb+YAx/4ErTI8QdKlSRiyxlsaet4gAY+4F/9Fb+RmMFhLIRDAMkEwExCTTQgSU+CvuSI2NWskxjvoUoeomNAVfzFe3AuENFMCsnOyK8HIKmpLniSI0KfvwTw9JyTXK+EdvZPi9xBA86NLj6sM9SE04Jlx8IkcW4Gf8C3f7ekGkJK0MxGVOTiqDJfegptLWH7A06k8wjbvnVMeL8CU0OtDnB0qibZM3b49rY0XMkl+OmFTSW5Lyxa38MboONo/8eS2gD76FQeHIMKvU4X2vXGsAUCSVNFkpyfEdmQXRBskP/p/g08e1fo6UWO971jEyfx9zMpuV6nA/ViCRrlCjpkQ7iup1OQnJ+DkJf3JJBdXrqgcD7GGrv943ugIsjvvr4EmYyomkHIvYWk3sEn3BQnT6QqJ6dSYm6kLy9APJXy7kQkF9EHaC75mE6ndc0eI50qmk7fkKrm1Vlvcr/ft6QmIUeSKx8dByJHKB8eQ0+uhiOYzqcgnjedTtSRiAwJml6TgajHV5JWs6PzX6fkcjVQgSTnB4M742S9ECBJIdstV8XzHG7ZHc5Igr2OSI6kRtKzg2KcYRv4/TJ4oU2Bvo+jUhFOyiUUgOVpiVil0YD/nR7DQSE/uoVfxjNAqSJLIrJ2KY4IauFVYYArKVE1iaAdxQ4ERbPdgmoTCZ2dwP7xIXxwcgSnlZJJNE5557ggta9IwpFNiiZB03PKHItbNcnu3FjUwQuRWGx4/NTcBUjqcYj2PWA4FIIEXl+cnYPszOhe4dgYZMs1uRR55HlzLPOnBi+Au8+87pReLz+yOzs+m7bingJ6Oolq2hgSupjOgBdCkQgkZscoMQfJfNolDANu4eefLRXlsCr8cdk1EbdqDvslwAvxdNqMb0FA5DLo/n1joRs2Ox+BrZCahvnOX1aRoPORkeRSNjVRSS8gZuZm0cRDGOjL6EBa4lSwuJ1BqSWyGfN4bDRbVobjfDBZ6IZXwv3VLyfmXXbVy4MSAZ0MSZIaxcMOkqT4yLQQRLD2G1tiMjRRAEnXOEx7hs6sCp3n4qNjkpwhiTcD+IQJN0hC0TiOH4/DVEFSTArmsqJZa5YuJGxPwiiBEkTu3UArB08eHWmlgQQ5LAkX0nb7UxAkz/nGh/CxgdGTnGTZsLKgJVBtJ1NPkpqM3HPzANcxCdbx/wfo2V7DlK44mXOiMopstYsLVWSj8Uza21a7EoIMlrytm0tqtUJbTm4Wpf6VxdFvSgB+sAzw8r9gHBCxaj4PHZfrr+ULpjcOGnIG8PbJMoJvPJL3XZEE51lcJVtWrKdIUMMku/DosUBueB1J1ovj2bw3QcOlXlTQqiqHZk9+fu0KRiT/1Kt6lofq6ZlwnhLzmi121rBMClp6EbT+Lo9r1P4A7uBe8LAnskuZvZEUv/sp8ALFRJKODFR9HJcKowqkH0cFyBIEDjk8y0WZNwYuVyEVGUiCf8DC913JRMkesxHlX0tH8vUbItXstM0clponopLxGUeCDPaEC6Tn5EHdEtR9blLoWDb65oHrfFuZ8ZD0ZDZH5AY1Ykp3JgWUswoIy+bGiuRFRYLHaAsXH4v9yVMSyaaPZGnhKYb9nk5bfd2Ebei4itsGhoUmtnKjZtaJ0XDEUUpRFiQNF7ayzIZd7Gk8FHxNiZxCC6S4ht7ynTPwBa3ReCwdDsB7o4dFUjssjvLeTGLGQY6QujgvH0iXENTYHjLrkgSddtjE00VFiCSpTBGxlK3QRTubS6bMRkUwfWtstHJGMTAsk5S5CyWoaBG32t7WcPcUt42ZqKYnCoIU176oeIoTQEPvZ18mJKlR0yPO0ELkKNBLkZLG2l1zfPOQ456bGwd4g65ib+bLC75LFeMguXBBLhmwqo/sJy6ryZE9ytQTuLkAbDLob26ij3cVvsvo3ZYVtkggG/uHK/6REyLyl9HzXcYbx/uqQ7mpKlb20SiXoVWtm4E8hJueIVS9BOagnkVwNm3tQDm4QY799KXlIUGL5P0NvLDp6BjGhZrnKta3F2jBl7wlkdN9KnJ6KG/5O59AIOmZy/iC/b3Kbr/0fTqwzab9CridDanoewGCPZGiQK4HWG64vjA9GybJyeJfp701OBzOyHI2INriPg7wQfC1z0AgG/ZLGvxA1XtSsuDFYJP9fD03+Ol65CRFV25KbvxvWFVUgie4viBy187x9gmpZkYSrtD2oN12vIXhIGhK0eiuO/5EBs7QWdyvTJfkpPFUbXeUezqkRxCMhn3r6/eAM6eq0tOqGtMlSfF0jFrRhCc5dofd/pHwDo3cK2gtMtJR8I+j29f16ZOkWjGoLXqRI9Ust7Zkf1O+ZcFfx+20mG2fnjL+g/7qdhKfy7NI+DMxODeCrN0k8F60VKFJpkvkuu3rbtUcwPs1EjdJrLqhZFsHvYrZzrMY0FMTrEbbQWUWxUd3LUn2T4E8pVBlH3IE/xeB7CRpqeDDx84XAUiaJEkiOw2itBz5EMNxXrM8uKaYYgByhGCvctlJ4hYz1OtiJyK6iHbyOSQ7P+FS/AESzGH7N22Re2RPHP1Dt73mR44w3st4xdYGFAq3wG/RZ0CWWgqdwhy2mOtWLSRQxSwpj+0xasRhN5jzQm9JDoVtTfFlPDv4r39zA1hogxZV4aMEqaRhrLOfOV8T8cNkL8T+cnsJovr3MO3fhCcOXrSk1n4lqNTsON8rzUQ0Et0wN1CnLtHzERtgKi+lm9Mh1dVCL+DRqnTHKtgoRGQP0487UOq8fR5iA0yNoB385d8+j7s9K+jjV4GKaJKuexeLoU1xsAiBgaRCe1BqPZwGKTv+Dx0CFyXGCnNBAAAAAElFTkSuQmCC"},{text:"Pay attention to vision changes",image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADkAAAArCAYAAADCBiAVAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAoFSURBVHgBvVpbbBTXGf7O7Hq9toltfMPmYhYC4VIEOG1I1bTBqDcJtQoJpG36YtNWfaoEqFJVNaG22/SpL/DUh6pxSV+qVDRUlWhfWpxGagtSsSFgoBgwNtjr+3p3be96L6f/P2d3dmY9sxev6SeNPbtn5sz55r//ZwWeAWR/by1caIcmDkNoPvrmICRqaajWuEhgGFIOIxIPYCnaB//sDfHm2T48AwisEXRi5VoHkjhGH9tRLGIJIBINYDZ0CeHon8Q3z17CGqFkkvJOrw9xrZNmOgWzpErB/AIwGxxGLNYt3jh7ASVi1SR1ybm102tKLhsz83wM01lJZFdFUt7sPQZN68WzImdGZBkYmwHisWGI+BHxes8wikRRJFPS605JzxmxOLAYVf/1I6EOM8pcQDIJqWkQ5WWAxw2sq6Dv3Tbz0b2jkzxXgD71iOPvnEMRKJikbntJ7Qp5Sd+KQVosQktELAKE6X9SYlUgqckEzeWhF9BcD9FQkxnj75loNMafzhHRM4VOWxBJeav3IIWCD1cQZFKzIVAIWD0xJ5DzkTx/dRXE7lagstxKVGIAodgRcbInkG+qvCR1giAJmu2PHz4dVORyocwLVNVg3FWB+zGJMMowSutsiS+h0SOwR6PgKcNEaB45yU7TeHOdIsuq/XhCmYGQBdmpKIpgPnJMauMLQMNWhOo24YP5GP4yNYvx6LLt5ZORKJ73luOtlip0VNA184/JyTxUXtUMkqBOdI60ZksTxPMb6eY5pT0FSNSRpMUG2eb0h4TtiW3db5Bj/OaJHx/4pxCOJ1AIHoUWQLOga9c2dLTWkTreJ7KDwMiUlTBLdWIWoBeDLY0QIrV8iT5x4p0jKIakhaDuwqdtvCMta8chdZSV61+xxH587xGGFpdQLJiofymCn+7ajm4iS16IJPWIHNkwcG+UbHFKXUhqKkcmlbrWVCnnpDyyozOyJ3n7fXIy8pjuVPhNZjsVJrbnVYNcmuAPBofgd1DNQnBjdh6L8Tg6trSgt21v6lsim+gHFkgb/3nbCE0GUQpFonVDmugZu/CygqT85ALHwS5dPWeC1sFKMs3PfM1QSzOO9w+WRJCxSIu+MafUMyNRRlxJNfkEeDgG3KX/JHWDqItibWsTOSVPAAlxRHzj7QHzvJr5g66mTgRZel/8ni1BtsFSCTIqSRqNXqUdP7v3EH0zc6kRkpK2kw4fsJ2cTvt+papMjCXIjokJz4drocne7HktJHU7tCO4/yt0fNminmmwmr5HJPMh/mgSS5f7sXjxXwj/9SpiTyZtr2vyZp7RQ/ZtXe02RbSS/MHhA8rTbmqg74QiOkkqvbx8UF58t8t8m6GuFC46MR3qXUHw019X3tMB7z4Y0cNETnJ/vIZkYMH4LpmMY2l+DBUvfwrPHX0F7voayz3XSYJRDvyEv7/yItrr11sn1VV3WJ3fJad0dZC8bkrqrLpbmwPwyrZ0/NQlqatpKNJVLEHGx3POgTx25ykW3rtiIag/VHPDVVaBpau3MXP+95BZcXe9x2Ocvz8yvnJiXaKb1fnuLcDLe1Xey2CJjk7UIqYZaqvUdSrUhamAzzIRq2gegteDYcdYmJxbQITU0wluT5Va02wQc7+7bBmr4uQ9hUv+KfsJ2EZFKgkjouLQHqW2DAp38ulMu/zDz9v1S+XFX3RiKthpiYMcHna8hHzIFQ9ZTbMlaFmjOyOtyM0hizTLtQzJAHnPx5xp2cFFxJCqWg5sV5lQGnzP5Kxum6TA0lo2NZL33PMFFILxiLNHZVXNBVZZM5Zu3jfOvS6rPxxecnqZXqW6DPayX31JJfIpyNBSu/zVD9s1ymoOWu7bXRhBRijhnLbJSHEhRS5GsSrotulV5+x123Zmxth5zYRe0/QE14w7H6NQPOdyOT97fRWKgau+2jiPyyLKtiQ7ppQ6s4p+Ygo7VJCjqeYS/ZU9lpumqRIY/AcKQYvX4zjmas7dGUkmrJIu27zBOI9npZE1brf9JDKSCSX88fI1IGjyA9UVfeL7v/xIEyeo9beu4pzhmRh3SZqPbyIfdlRWOI55XtwG4S1zHE8m4sZ55Wf3wVWXkSTnr2nUkq0drHnOYZI7MKR4lc5HJzJjFFJES2M3nyoLb6rrwaZGaz32nz/nJfoCkVzntldZQVKu/PbnHe9NxJQzcVEiwAmBGQumsPRac6P9BJwQyNSS745ADgxlKiV6MaKh+rfijZ98xB91kqLtZIAq7h40VFsnykOUCR5tqHMcd29rQtV3jkCrtdonZzzx5QWU79yChlPfskiREVyOGefHWhrtCRoZDxH896Dq1eqMUsm6phlmaKlC5K0LV6i0aterfzPY4+59FXbgxJwrkHyI3XlCsXOK4iGpV0MF3Bvr4SGS2ZgngoMB9XwfacrDL30OtgS5+rhF5w/HIR+MGcPC10zO1tNNJZcTSb3d0a/XkNM2VUhWDZnG+eGneidgLTBEWdRURIWT/vZDOFBtssc0Qfai1+7qhYQcmVBqyhLcUMvVybA4fnabeU5L1BX7Tg5QbDkDTpizVXeIPNfffk0PWNlK+e7mZuzM4YQKRZTibppgF9WTBkHJ9eR9RZCl1ndzJUFW0Zp1VIXEV7RB7DsDrLa8acONo0mb/hDntJwVVWbChD/VGRgvoa68Pk3VB/WTLJ0BSdVFgqQ2PaHaIFxE6J2BFEF2Mum6UorT4sTb51EQSe6Ul2mcXftM3WvrRZUk7VYi69tvkPWnejz3S+jxsAS5oaVLT5J6Tt7OkGOYCXKYINvWg36xPZ4UUV+KaK1Kj4KqJWgHliwTbsx06woppBmc3YyGF+Glzltv2x4criMVXSZyY6SSI2OWAl7Sdfq+CGVaYnMDtztSAxigbl2b0zOK67s6STUNli4TbWiF31uHy7EyXM7Rd2VP6qN4+ma9Bx31tJRJ6rmOP6ABImNKCPQ9k6mA3hLVKw1ugfhn1HpK6bs6EtVXt2DYRk6wJyZV9lMH/b+xJMKahw431kVCqHa5sc8bQ+0iefJF55JMzodVz7eF9kZ2taqNIv1FpwjGYq+Lt0rooGcR/RCw2Qvhtx5cwFpDhhb1zSNB5LC9RTmWZGovJLLGeyHGQ5WNskR9KwY5odYXRUc0nl/CTs+gl8YLkmRrookUx7yrZSb4LHa1jEXoXldQtS1O57yQa0lWJ7ZFPvglsPPKblKz6rFn1N0/jbHTsd2fjKsufiQWoDDRbRcmcmG1O82dtDhuLfjwrMEm4adu4HKij+zvZD77s0Mpvxkg9RWn8kp1tchsMpH0JAX5//NvBsxIkWUV7sRagXerJ+cDJLlzCMbOF+JccqFkkmnoZPUfKGkdWM3veFhyQdrVCUcv0aaOUQuuBdaMpBm6g/Joh0nN2ukRFH5kLRdByP5F1jI5EuGiULBIx8KAOPqjNSNmxv8A63jXATwbh64AAAAASUVORK5CYII="}],Ic=_e.div(xc||(xc=i(["\n  max-width: 400px;\n  min-height: 35px;\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 0.5rem 1rem;\n  background-color: white;\n  border-radius: 0.5rem;\n  img {\n    width: 40px;\n  }\n"]))),Cc=_e.div(kc||(kc=i(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.7rem;\n"]))),Nc=function(e){var t=e.illustration,n=e.advice,r=e.className;return(0,Qe.jsxs)(Ic,{className:r,children:[(0,Qe.jsx)("img",{src:t,alt:""}),(0,Qe.jsx)("div",{className:"advice",children:n})]})},Ec=function(){return(0,Qe.jsx)(Cc,{children:Sc.map((function(e,t){return(0,Qe.jsx)(Nc,{illustration:e.image,advice:e.text},t)}))})},Tc=_e.form(wc||(wc=i(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.7rem;\n  padding-top: 1rem;\n  width: 50%;\n  @media (max-width: 800px) {\n    width: 100%;\n  }\n  div {\n    display: flex;\n    flex-direction: column;\n    gap: 0.2rem;\n  }\n  label {\n    font-size: 1rem;\n  }\n  input {\n    ::placeholder {\n      opacity: 0.6;\n    }\n    border: none;\n    border-radius: 0.2rem;\n    padding: 0.8rem;\n    background-color: #fff;\n    width: 100%;\n  }\n"]))),Ac=function(e){var n=e.setdone,r=Ke((0,t.useState)(""),2),a=r[0],i=r[1],o=Ke((0,t.useState)(""),2),s=o[0],u=o[1],c=Ke((0,t.useState)(""),2),l=c[0],f=c[1],h=Ke((0,t.useState)(""),2),d=h[0],p=h[1],v=Ke((0,t.useState)(""),2),m=v[0],g=v[1],y=function(e,t){t(e.target.value)},b=function(){var e=Ue(Xe().mark((function e(){var t,n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:a,phone:l,national_id:m,address:"test"},n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=4,fetch("http://164.92.206.127/diabetic/patients",n);case 4:return r=e.sent,e.t0=console,e.next=8,r.json();case 8:e.t1=e.sent,e.t0.log.call(e.t0,e.t1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Qe.jsxs)(Tc,{id:"patientForm",onSubmit:function(e){e.preventDefault(),b(),n(!0)},children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{htmlFor:"",children:"Name"}),(0,Qe.jsx)("input",{type:"text",placeholder:"Mostafa Gouda",name:"",id:"",value:a,onChange:function(e){y(e,i)}})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{htmlFor:"",children:"Age"}),(0,Qe.jsx)("input",{type:"number",placeholder:"21",name:"",id:"",value:s,onChange:function(e){y(e,u)}})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{htmlFor:"",children:"Phone Number"}),(0,Qe.jsx)("input",{type:"text",placeholder:"0172 2823 929",name:"",id:"",value:l,onChange:function(e){y(e,f)}})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{htmlFor:"",children:"Email"}),(0,Qe.jsx)("input",{type:"text",placeholder:"example@email.com",name:"",id:"",value:d,onChange:function(e){y(e,p)}})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{htmlFor:"",children:"National ID"}),(0,Qe.jsx)("input",{type:"text",placeholder:"2345678954374",name:"",id:"",value:m,onChange:function(e){y(e,g)}})]})]})};function Rc(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ge(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function Fc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oc(e,t,n){return t&&Dc(e.prototype,t),n&&Dc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Lc=function(){function e(t,n){Fc(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return Oc(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),_c=function(){function e(){Fc(this,e)}return Oc(e,[{key:"refCount",value:function(e){return Mc("refCount")}},{key:"incRef",value:function(e){return Mc("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return Mc("time")}},{key:"read",value:function(e){return Mc("read")}},{key:"readSync",value:function(e){return Mc("readSync")}},{key:"readToGPU",value:function(e,t){return Mc("readToGPU")}},{key:"numDataIds",value:function(){return Mc("numDataIds")}},{key:"disposeData",value:function(e,t){return Mc("disposeData")}},{key:"write",value:function(e,t,n){return Mc("write")}},{key:"move",value:function(e,t,n,r,a){return Mc("move")}},{key:"memory",value:function(){return Mc("memory")}},{key:"floatPrecision",value:function(){return Mc("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return Mc("dispose")}}]),e}();function Mc(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function zc(e){for(var t=e.length,n=0;t>0;)n=Math.random()*t|0,Wc(e,--t,n)}function Pc(e,t,n){return Math.max(e,Math.min(t,n))}function Bc(e){return e%2===0?e:e+1}function Wc(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Uc(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function Vc(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function jc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Vc(qc(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function Gc(e){Vc(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function Hc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||al(e)&&!n)for(var r=0;r<e.length;++r)Hc(e[r],t,n);else t.push(e);return t}function Kc(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function qc(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Xc(e){return e%1===0}function Yc(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Zc(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Jc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,a){var i=0;!function o(){if(e())r();else{i++;var s=t(i);null!=n&&i>=n?a():setTimeout(o,s)}}()}))}function Qc(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}function $c(e,t){var n=t.length;return Vc((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),Vc(e.every((function(e){return Xc(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function el(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:$c(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function tl(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function nl(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function rl(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function al(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function il(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function ol(e){return"string"===typeof e||e instanceof String}function sl(e){return"number"===typeof e}function ul(e){return Array.isArray(e)?ul(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":sl(e)?"float32":ol(e)?"string":"boolean"===typeof e?"bool":"float32"}function cl(e){return!!(e&&e.constructor&&e.call&&e.apply)}function ll(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function fl(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function hl(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var i=t[0]*(r?2:1),o=0;o<i;o++)a[o]=n[e+o];else for(var s=t[0],u=t.slice(1),c=u.reduce((function(e,t){return e*t}))*(r?2:1),l=0;l<s;l++)a[l]=hl(e+l*c,u,n,r);return a}function dl(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return hl(0,e,t,n)}function pl(e,t){for(var n=vl(e,t),r=0;r<n.length;r++)n[r]=1;return n}function vl(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function ml(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return dl(e,new Float32Array(n));if("int32"===t)return dl(e,new Int32Array(n));if("bool"===t)return dl(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function gl(e){e.forEach((function(t){Vc(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function yl(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function bl(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function xl(e){return e&&e.then&&"function"===typeof e.then}var kl="tfjsflags",wl=function(){function e(t){Fc(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Sl,this.populateURLFlags()}return Oc(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&(Cl().getBool("IS_TEST")||Cl().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];Cl().getBool("IS_TEST")||Cl().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=Ue(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(xl(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);if(kl in t)t.tfjsflags.split(",").forEach((function(t){var n=Ke(t.split(":"),2),r=n[0],a=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(r,a)}))}}}]),e}();function Sl(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return Il(t,r[0],r[1]),r.join("=")})),t}function Il(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function Cl(){return El}var Nl,El=null;function Tl(){if(null==Nl){var e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}Nl=e}return Nl}function Al(e,t){var n=function(){var e=Tl();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var Rl="Abs",Fl="Acos",Dl="Acosh",Ol="Add",Ll="AddN",_l="All",Ml="Any",zl="ArgMax",Pl="ArgMin",Bl="Asin",Wl="Asinh",Ul="Atan",Vl="Atanh",jl="Atan2",Gl="AvgPool",Hl="AvgPoolGrad",Kl="AvgPool3D",ql="AvgPool3DGrad",Xl="BatchMatMul",Yl="BatchToSpaceND",Zl="Bincount",Jl="BroadcastArgs",Ql="Cast",$l="Ceil",ef="ClipByValue",tf="Complex",nf="ComplexAbs",rf="Concat",af="Conv2D",of="Conv2DBackpropFilter",sf="Conv2DBackpropInput",uf="Conv3D",cf="Conv3DBackpropFilterV2",lf="Conv3DBackpropInputV2",ff="Cos",hf="Cosh",df="Cumprod",pf="Cumsum",vf="CropAndResize",mf="DenseBincount",gf="DepthToSpace",yf="DepthwiseConv2dNative",bf="DepthwiseConv2dNativeBackpropFilter",xf="DepthwiseConv2dNativeBackpropInput",kf="Diag",wf="Dilation2D",Sf="Dilation2DBackpropInput",If="Dilation2DBackpropFilter",Cf="RealDiv",Nf="Einsum",Ef="Elu",Tf="EluGrad",Af="Erf",Rf="Equal",Ff="Exp",Df="ExpandDims",Of="Expm1",Lf="FFT",_f="Fill",Mf="FlipLeftRight",zf="Floor",Pf="FloorDiv",Bf="FusedBatchNorm",Wf="GatherV2",Uf="GatherNd",Vf="Greater",jf="GreaterEqual",Gf="Identity",Hf="IFFT",Kf="Imag",qf="IsFinite",Xf="IsInf",Yf="IsNan",Zf="LeakyRelu",Jf="Less",Qf="LessEqual",$f="LinSpace",eh="Log",th="Log1p",nh="LogicalAnd",rh="LogicalNot",ah="LogicalOr",ih="LRN",oh="LRNGrad",sh="Max",uh="Maximum",ch="MaxPool",lh="MaxPoolGrad",fh="MaxPool3D",hh="MaxPool3DGrad",dh="MaxPoolWithArgmax",ph="Mean",vh="Min",mh="Minimum",gh="MirrorPad",yh="Mod",bh="Multinomial",xh="Multiply",kh="Neg",wh="NotEqual",Sh="NonMaxSuppressionV3",Ih="NonMaxSuppressionV4",Ch="NonMaxSuppressionV5",Nh="OnesLike",Eh="OneHot",Th="Pack",Ah="PadV2",Rh="Pow",Fh="Prelu",Dh="Prod",Oh="Range",Lh="Real",_h="Reciprocal",Mh="Relu",zh="Reshape",Ph="ResizeNearestNeighbor",Bh="ResizeNearestNeighborGrad",Wh="ResizeBilinear",Uh="ResizeBilinearGrad",Vh="Relu6",jh="Reverse",Gh="Round",Hh="Rsqrt",Kh="ScatterNd",qh="SearchSorted",Xh="Select",Yh="Selu",Zh="Slice",Jh="Sin",Qh="Sinh",$h="Sign",ed="Sigmoid",td="Softplus",nd="Sqrt",rd="Sum",ad="SpaceToBatchND",id="SplitV",od="Softmax",sd="SparseFillEmptyRows",ud="SparseReshape",cd="SparseSegmentMean",ld="SparseSegmentSum",fd="SparseToDense",hd="SquaredDifference",dd="Square",pd="StridedSlice",vd="StringNGrams",md="StringSplit",gd="StringToHashBucketFast",yd="Sub",bd="Tan",xd="Tanh",kd="Tile",wd="TopK",Sd="Transform",Id="Transpose",Cd="Unique",Nd="Unpack",Ed="UnsortedSegmentSum",Td="ZerosLike",Ad="Step",Rd="RotateWithOffset",Fd="_FusedMatMul",Dd="FusedConv2D",Od="FusedDepthwiseConv2D";function Ld(){var e;Cl().getBool("IS_TEST")||Cl().getBool("PROD")||(e=console).warn.apply(e,arguments)}var _d=Al("kernelRegistry",(function(){return new Map})),Md=Al("gradRegistry",(function(){return new Map}));function zd(e,t){var n=Vd(e,t);return _d.get(n)}function Pd(e){return Md.get(e)}function Bd(e){for(var t=_d.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=Ke(i,2),s=o[0],u=o[1];Ke(s.split("_"),1)[0]===e&&n.push(u)}return n}function Wd(e){var t=e.kernelName,n=e.backendName,r=Vd(t,n);_d.has(r)&&Ld("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),_d.set(r,e)}function Ud(e){var t=e.kernelName;Md.has(t)&&Cl().getBool("DEBUG")&&Ld("Overriding the gradient for '".concat(t,"'")),Md.set(t,e)}function Vd(e,t){return"".concat(t,"_").concat(e)}var jd=n(8987),Gd=n.n(jd)()||jd;function Hd(e){return Gd.fromString(e,!0,16)}var Kd=Hd("c3a5c85c97cb3127"),qd=Hd("b492b66fbe98f273"),Xd=Hd("9ae16a3b2f90404f");function Yd(e){return e.xor(e.shru(47))}function Zd(e,t,n){var r=e.slice(t,t+n);return Gd.fromBytes(Array.from(r),!0,!0)}function Jd(e,t){return Zd(e,t,8)}function Qd(e,t){return Zd(e,t,4)}function $d(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function ep(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hd("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function tp(e,t,n,r){return function(e,t,n,r,a,i){a=a.add(e),i=$d(i.add(a).add(r),21);var o=a;return a=(a=a.add(t)).add(n),i=i.add($d(a,44)),[a.add(r),i.add(o)]}(Jd(e,t),Jd(e,t+8),Jd(e,t+16),Jd(e,t+24),n,r)}function np(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=Xd.add(2*t),r=Jd(e,0).add(Xd),a=Jd(e,t-8),i=$d(a,37).mul(n).add(r),o=$d(r,25).add(a).mul(n);return ep(i,o,n)}if(t>=4){var s=Xd.add(2*t),u=Qd(e,0);return ep(u.shl(3).add(t),Qd(e,t-4),s)}if(t>0){var c=e[0],l=e[t>>1],f=e[t-1],h=c+(l<<8),d=t+(f<<2);return Yd(Xd.mul(h).xor(Kd.mul(d))).mul(Xd)}return Xd}function rp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=Xd.add(2*t),r=Jd(e,0).mul(qd),a=Jd(e,8),i=Jd(e,t-8).mul(n),o=Jd(e,t-16).mul(Xd);return ep($d(r.add(a),43).add($d(i,30)).add(o),r.add($d(a.add(Xd),18)).add(i),n)}function ap(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=Xd.add(2*t),r=Jd(e,0).mul(Xd),a=Jd(e,8),i=Jd(e,t-8).mul(n),o=Jd(e,t-16).mul(Xd),s=$d(r.add(a),43).add($d(i,30)).add(o),u=ep(s,r.add($d(a.add(Xd),18)).add(i),n),c=Jd(e,16).mul(n),l=Jd(e,24),f=s.add(Jd(e,t-32)).mul(n),h=u.add(Jd(e,t-24)).mul(n);return ep($d(c.add(l),43).add($d(f,30)).add(h),c.add($d(l.add(r),18)).add(f),n)}function ip(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=Gd.fromNumber(81,!0);if(t<=32)return t<=16?np(e,t):rp(e,t);if(t<=64)return ap(e,t);var r=n,a=n.mul(qd).add(113),i=Yd(a.mul(Xd).add(113)).mul(Xd),o=[Gd.UZERO,Gd.UZERO],s=[Gd.UZERO,Gd.UZERO];r=r.mul(Xd).add(Jd(e,0));var u=0,c=64*(t-1>>6),l=c+(t-1&63)-63;do{r=$d(r.add(a).add(o[0]).add(Jd(e,u+8)),37).mul(qd),a=$d(a.add(o[1]).add(Jd(e,u+48)),42).mul(qd),r=r.xor(s[1]),a=a.add(o[0]).add(Jd(e,u+40)),i=$d(i.add(s[0]),33).mul(qd),o=tp(e,u,o[1].mul(qd),r.add(s[0])),s=tp(e,u+32,i.add(s[1]),a.add(Jd(e,u+16)));var f=[r,i];i=f[0],r=f[1],u+=64}while(u!==c);var h=qd.add(i.and(255).shl(1));u=l,s[0]=s[0].add(t-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),r=$d(r.add(a).add(o[0]).add(Jd(e,u+8)),37).mul(h),a=$d(a.add(o[1]).add(Jd(e,u+48)),42).mul(h),r=r.xor(s[1].mul(9)),a=a.add(o[0].mul(9).add(Jd(e,u+40))),i=$d(i.add(s[0]),33).mul(h),o=tp(e,u,o[1].mul(h),r.add(s[0])),s=tp(e,u+32,i.add(s[1]),a.add(Jd(e,u+16)));var d=[r,i];return i=d[0],r=d[1],ep(ep(o[0],s[0],h).add(Yd(a).mul(Kd)).add(i),ep(o[1],s[1],h).add(r),h)}function op(e,t){return"string"===t?cp(e):sp([e],t)}function sp(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Hc(e)),Cl().getBool("DEBUG")&&function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function up(){return Cl().platform.now()}function cp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Cl().platform.encode(e,t)}function lp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Cl().platform.decode(e,t)}var fp=function(){function e(t,n){Fc(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new hp)}return Oc(e,[{key:"profileKernel",value:function(e,t,n){var r,a,i=function(){r=n()},o=up();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(i);else{i();var s,u=Rc(r);try{for(u.s();!(s=u.n()).done;){s.value.dataSync()}}catch(f){u.e(f)}finally{u.f()}a=Promise.resolve({kernelMs:up()-o})}if(Cl().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var c=function(t){var n=r[t];n.data().then((function(t){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(t,n.dtype,e)}))},l=0;l<r.length;l++)c(l);return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,i=e.inputs,o=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,o]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],i,r[2])}))}))}}]),e}();var hp=function(){function e(){Fc(this,e)}return Oc(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,i){var o="number"===typeof r?Zc("".concat(r,"ms"),9):r.error,s=Zc(e,25),u=t.rank,c=t.size,l=Zc(t.shape.toString(),14),f="";for(var h in a){var d=a[h];if(null!=d){var p=d.shape||t.shape,v=p.length;f+="".concat(h,": ").concat(v,"D ").concat(v>0?p:""," ")}}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(u,"D ").concat(l,"\t%c").concat(c,"\t%c").concat(f,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function dp(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var s=e[o],u=s.inputs;for(var c in u){for(var l=u[c],f=!1,h=0;h<t.length;h++)if(r[l.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),f=!0,a[s.id]=!0;break}if(f)break}}var d={};d[n.id]=!0;for(var p={},v=e.length-1;v>=0;v--)for(var m=e[v],g=m.inputs,y=0;y<m.outputs.length;y++)if(d[m.outputs[y].id]){for(var b in g)d[g[b].id]=!0,p[m.id]=!0;break}for(var x=[],k=0;k<e.length;k++){var w=e[k];if(a[w.id]&&p[w.id]){var S={};for(var I in w.inputs){var C=w.inputs[I];r[C.id]&&(S[I]=C)}var N=Object.assign({},w);N.inputs=S,N.outputs=w.outputs,x.push(N)}}return x}function pp(e,t,n,r){for(var a=function(a){var i=t[a],o=[];if(i.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(i.kernelName,"."));var s=i.gradient(o),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));var a=n((function(){return s[t]()}));if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));var o=i.inputs[t];if(!qc(a.shape,o.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(a.shape,"', which does not match ")+"the shape of the input '".concat(o.shape,"'"));if(null==e[o.id])e[o.id]=a;else{var u=e[o.id];e[o.id]=r(u,a),u.dispose()}};for(var c in i.inputs)u(c)},i=t.length-1;i>=0;i--)a(i)}function vp(e,t){return vp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},vp(e,t)}function mp(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vp(e,t)}function gp(e){return gp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},gp(e)}function yp(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function bp(e){return bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bp(e)}function xp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kp(e,t){if(t&&("object"===bp(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xp(e)}function wp(e){var t=yp();return function(){var n,r=gp(e);if(t){var a=gp(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return kp(this,n)}}function Sp(e,t,n,r){var a=fl(t),i=function(e,t,n,r){var a=Kc(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u="complex64"===n?Ep(e):e;if(s>1)for(var c=0;c<a/i;c++)for(var l=c*i,f=0;f<i;f++)o[f]=Math.max(o[f],Ip(u[l+f],0,n).length);return o}(e,t,n,a),o=t.length,s=Np(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(o)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function Ip(e,t,n){return Zc(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):ol(e)?"'".concat(e,"'"):"bool"===n?Cp(e):parseFloat(e.toFixed(7)).toString(),t)}function Cp(e){return 0===e?"false":"true"}function Np(e,t,n,r,a){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o="complex64"===n?2:1,s=t[0],u=t.length;if(0===u){if("complex64"===n){var c=Ep(e);return[Ip(c[0],0,n)]}return"bool"===n?[Cp(e[0])]:[e[0].toString()]}if(1===u){if(s>20){var l=3*o,f=Array.from(e.slice(0,l)),h=Array.from(e.slice((s-3)*o,s*o));return"complex64"===n&&(f=Ep(f),h=Ep(h)),["["+f.map((function(e,t){return Ip(e,a[t],n)})).join(", ")+", ..., "+h.map((function(e,t){return Ip(e,a[s-3+t],n)})).join(", ")+"]"]}var d="complex64"===n?Ep(e):Array.from(e);return["["+d.map((function(e,t){return Ip(e,a[t],n)})).join(", ")+"]"]}var p=t.slice(1),v=r.slice(1),m=r[0]*o,g=[];if(s>20){for(var y=0;y<3;y++){var b=y*m,x=b+m;g.push.apply(g,Et(Np(e.slice(b,x),p,n,v,a,!1)))}g.push("...");for(var k=s-3;k<s;k++){var w=k*m,S=w+m;g.push.apply(g,Et(Np(e.slice(w,S),p,n,v,a,k===s-1)))}}else for(var I=0;I<s;I++){var C=I*m,N=C+m;g.push.apply(g,Et(Np(e.slice(C,N),p,n,v,a,I===s-1)))}var E=2===u?",":"";g[0]="["+g[0]+E;for(var T=1;T<g.length-1;T++)g[T]=" "+g[T]+E;for(var A=",\n",R=2;R<u;R++)A+="\n";return g[g.length-1]=" "+g[g.length-1]+"]"+(i?"":A),g}function Ep(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var Tp=function(){function e(t,n,r){var a=this;if(Fc(this,e),this.dtype=n,this.shape=t.slice(),this.size=Kc(t),null!=r){var i=r.length;Vc(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||nl(n,this.size),this.strides=fl(t)}return Oc(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),Vc(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var i=this.locToIndex(r);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],c=0;c<t.length-1;++c)u+=this.strides[c]*t[c];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return Ap().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),Ap=null,Rp=null;var Fp=function(){function e(t,n,r,a){Fc(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=Kc(t),this.strides=fl(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return Oc(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=Ue(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",Rp.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return Rp.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=Ue(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",dl(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return dl(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=Ue(Xe().mark((function e(){var t,n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=Ap().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return lp(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),Ap().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=Ap().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return lp(e)}))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=Ue(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,Ap().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(Ap().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Rp.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),Rp.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataSync();return Sp(t,this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),Rp.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),Ap().makeVariable(this,e,t,n)}}]),e}();function Dp(){return Al("Tensor",(function(){return Fp}))}Object.defineProperty(Fp,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),Dp();var Op,Lp,_p,Mp,zp,Pp=function(e){mp(n,e);var t=wp(n);function n(e,r,a,i){var o;return Fc(this,n),(o=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=r,o.name=a,o}return Oc(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!qc(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));Ap().disposeTensor(this),this.dataId=e.dataId,Ap().incRef(this,null)}},{key:"dispose",value:function(){Ap().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(Fp);Object.defineProperty(Pp,Symbol.hasInstance,{value:function(e){return e instanceof Fp&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Op||(Op={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Lp||(Lp={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(_p||(_p={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Mp||(Mp={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(zp||(zp={}));var Bp={float32:Mp,int32:Lp,bool:_p,complex64:zp};function Wp(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return Bp[e][t]}function Up(e){return Wp(e,"int32")}function Vp(e,t){if(e.dtype===t.dtype)return[e,t];var n=Wp(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function jp(e,t){return t.some((function(t){return t.id===e.id}))}function Gp(e){var t=[];return Hp(e,t,new Set),t}function Hp(e,t,n){if(null!=e)if(e instanceof Fp)t.push(e);else if(r=e,Array.isArray(r)||"object"===typeof r){var r,a=e;for(var i in a){var o=a[i];n.has(o)||(n.add(o),Hp(o,t,n))}}}function Kp(e){return null!=e.kernelName}var qp=function(){function e(){Fc(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return Oc(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),Xp=function(){function e(t){Fc(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new qp}return Oc(e,[{key:"ready",value:function(){var e=Ue(Xe().mark((function e(){var t,n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(Ld("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=Ue(Xe().mark((function e(t){var n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new fp(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;Bd(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;Bd(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof _c||"function"!==typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,Ld("Initialization of backend ".concat(e," failed")),Ld(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(o){return Ld("Initialization of backend ".concat(e," failed")),Ld(o.stack||o.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(a){throw t(),a}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=Qp.runKernel(Gf,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return Qp.runKernel(Ql,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,!(null!=zd(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(o," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,i=[],o=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var c=Kp(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(Kp(e)){var l=e.kernelName,f=e.inputs,h=e.attrs;null==this.backendName&&this.backend;var d=zd(l,this.backendName);Vc(null!=d,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=d.kernelFunc({inputs:f,attrs:h,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t);var n=t.map((function(e){return null!=e.rank?e:a.makeTensorFromTensorInfo(e)}));if(o){var s=a.getTensorsForGradient(l,f,n);i=a.saveTensorsForBackwardMode(s)}return n}}else{var p=e.forwardFunc,v=function(e){o&&(i=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return p(a.backend,v)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t),t}}var m,g=e.inputs,y=e.attrs,b=Kp(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(m=a.profiler.profileKernel(c,g,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(m),t=m.outputs):t=n()})),o&&this.addTapeNode(c,g,t,b,i,y),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(g).map((function(e){return null!=g[e]?g[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:m.timeMs,extraInfo:m.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))}},{key:"getTensorsForGradient",value:function(e,t,n){var r=Pd(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(Vc(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var s=n.filter((function(e,t){return o[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&ol(e[0])&&(a=e.map((function(e){return cp(e)})));var i=r.write(a,t,n),o=new Fp(t,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){var s=this.state.tensorInfo.get(i),u=function(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return o}},{key:"makeTensorFromTensorInfo",value:function(e,t){var n=e.dataId,r=e.shape,a=e.dtype,i=new Fp(r,a,n,this.nextTensorId());return this.trackTensor(i,t),i}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new Pp(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*il(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof Pp||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*il(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=Ue(Xe().mark((function e(t){var n,r,a,i,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,Et(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=Rc(this.state.activeProfile.kernels),e.prev=12,a.s();case 14:if((i=a.n()).done){e.next=24;break}return o=i.value,e.next=18,o.kernelTimeMs;case 18:return o.kernelTimeMs=e.sent,e.next=21,o.extraInfo;case 21:o.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),a.e(e.t0);case 29:return e.prev=29,a.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=Pd(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=vl(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=Gp(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Vc(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var i=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));Vc(i instanceof Fp,(function(){return"The result y returned by f() must be a tensor."}));var o=dp(this.state.activeTape,t,i);if(!a&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[i.id]=null==n?Yp(i.shape):n,pp(e,o,(function(e){return r.tidy(e)}),$p);var a=t.map((function(t){return e[t.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=Rc(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(r){n.e(r)}finally{n.f()}})),r.state.activeTape=null),{value:i,grads:a}}))}},{key:"customGrad",value:function(e){var t=this;return Vc(cl(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i;Vc(r.every((function(e){return e instanceof Fp})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};r.forEach((function(e,t){o[t]=e}));var s=function(t,n){return Vc((i=e.apply(void 0,[].concat(r,[n]))).value instanceof Fp,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),Vc(cl(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},u=function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];Vc(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),Vc(a.every((function(e){return e instanceof Fp})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o};return t.runKernelFunc({forwardFunc:s,backwardsFunc:u,inputs:o})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:function(){var e=Ue(Xe().mark((function e(t){var n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=up(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=up()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new qp,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function Yp(e){var t=pl(Kc(e),"float32");return Qp.makeTensor(t,e,"float32")}function Zp(){var e=Tl();if(null==e._tfengine){var t=new wl(e);e._tfengine=new Xp(t)}return function(e){El=e}(e._tfengine.ENV),Ap=function(){return e._tfengine},e._tfengine}Xp.nextTensorId=0,Xp.nextVariableId=0;var Jp,Qp=Zp();function $p(e,t){var n={a:e,b:t};return Qp.runKernel(Ol,n)}function ev(e){if(void 0!==Jp)return Jp;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function tv(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}var nv=Cl();function rv(e,t){var n=e;if(al(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||al(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Cl().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&av(e,r,[]),r}function av(e,t,n){if(n=n||[],Array.isArray(e)||al(e)){Vc(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),Vc(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)av(e[a],r,n.concat(a))}else Vc(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function iv(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function ov(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof Fp)return iv(r,e.dtype,t,n),e;var a=ul(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),iv(r,a,t,n),null==e||!al(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var i=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(i,"'"))}var o=rv(e,a);al(e)||Array.isArray(e)||(e=[e]);var s=!0,u="string"!==a?sp(e,a):Hc(e,[],s);return Qp.makeTensor(u,o,a)}function sv(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");var a=e;return a.map((function(e,a){return ov(e,"".concat(t,"[").concat(a,"]"),n,r)}))}nv.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),nv.registerFlag("IS_BROWSER",(function(){return tv()})),nv.registerFlag("IS_NODE",(function(){return"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node})),nv.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),nv.registerFlag("PROD",(function(){return!1})),nv.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return nv.getBool("DEBUG")})),nv.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),nv.registerFlag("IS_TEST",(function(){return!1})),nv.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),nv.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1})),nv.registerFlag("ENGINE_COMPILE_ONLY",(function(){return!1}));function uv(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";var a=function(){Qp.startScope(n);try{var e=r.apply(void 0,arguments);return xl(e)&&console.error("Cannot return a Promise inside of tidy."),Qp.endScope(e),e}catch(t){throw Qp.endScope(null),t}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var cv=uv({complex_:function(e,t){var n=ov(e,"real","complex"),r=ov(t,"imag","complex");jc(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");var a={real:n,imag:r};return Qp.runKernel(tf,a)}});function lv(e,t,n,r){if(null==r&&(r=ul(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!al(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){gl(t);var a=Kc(t),i=Kc(n);Vc(a===i,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(a," values but has ").concat(i)}));for(var o=0;o<n.length;++o){var s=n[o],u=o!==n.length-1||s!==Kc(t.slice(o));Vc(n[o]===t[o]||!u,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return al(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?sp(e,r):Hc(e,[],!0),Qp.makeTensor(e,t,r)}function fv(e,t,n){return lv(e,t,rv(e,n),n)}var hv={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};function dv(e,t){return pv.apply(this,arguments)}function pv(){return pv=Ue(Xe().mark((function e(t,n){var r,a,i,o,s,u;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],a=[],i=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),o=function(e){var o=i[e],s=Array.isArray(t)?t[e].tensor:t[o];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error("Unsupported dtype in weight '".concat(o,"': ").concat(s.dtype));var u={name:o,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){var c=new Promise(function(){var e=Ue(Xe().mark((function e(t){var n,r,a,i,o,u,c;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+4*n.length,a=new Uint8Array(r),i=0,o=0;o<n.length;o++)u=n[o],c=new Uint8Array(new Uint32Array([u.length]).buffer),a.set(c,i),i+=4,a.set(u,i),i+=u.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());a.push(c)}else a.push(s.data());null!=n&&(u.group=n),r.push(u)},s=0;s<i.length;++s)o(s);return e.next=7,Promise.all(a);case 7:return u=e.sent,e.abrupt("return",{data:mv(u),specs:r});case 9:case"end":return e.stop()}}),e)}))),pv.apply(this,arguments)}function vv(e,t){var n,r,a={},i=0,o=Rc(t);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=s.name,c=s.dtype,l=s.shape,f=Kc(l),h=void 0;if("quantization"in s){var d=s.quantization;if("uint8"===d.dtype||"uint16"===d.dtype){if(!("min"in d)||!("scale"in d))throw new Error("Weight ".concat(s.name," with quantization ").concat(d.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==d.dtype)throw new Error("Weight ".concat(s.name," has unknown ")+"quantization dtype ".concat(d.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==c)throw new Error("Weight ".concat(s.name," is quantized with ").concat(d.dtype," ")+"which only supports weights of type float32 not ".concat(c,"."))}var p=hv[d.dtype],v=e.slice(i,i+f*p),m="uint8"===d.dtype?new Uint8Array(v):new Uint16Array(v);if("float32"===c)if("uint8"===d.dtype||"uint16"===d.dtype){h=new Float32Array(m.length);for(var g=0;g<m.length;g++){var y=m[g];h[g]=y*d.scale+d.min}}else{if("float16"!==d.dtype)throw new Error("Unsupported quantization type ".concat(d.dtype," ")+"for weight type float32.");void 0===n&&(n=Ev()),h=n(m)}else{if("int32"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));if("uint8"!==d.dtype&&"uint16"!==d.dtype)throw new Error("Unsupported quantization type ".concat(d.dtype," ")+"for weight type int32.");h=new Int32Array(m.length);for(var b=0;b<m.length;b++){var x=m[b];h[b]=Math.round(x*d.scale+d.min)}}i+=f*p}else if("string"===c){var k=Kc(s.shape);h=[];for(var w=0;w<k;w++){var S=new Uint32Array(e.slice(i,i+4))[0];i+=4;var I=new Uint8Array(e.slice(i,i+S));h.push(I),i+=S}}else{var C=hv[c],N=e.slice(i,i+f*C);if("float32"===c)h=new Float32Array(N);else if("int32"===c)h=new Int32Array(N);else if("bool"===c)h=new Uint8Array(N);else{if("complex64"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));h=new Float32Array(N);for(var E=new Float32Array(h.length/2),T=new Float32Array(h.length/2),A=0;A<E.length;A++)E[A]=h[2*A],T[A]=h[2*A+1];var R=fv(E,l,"float32"),F=fv(T,l,"float32");a[u]=cv(R,F),R.dispose(),F.dispose()}i+=f*C}"complex64"!==c&&(a[u]=fv(h,l,c))}}catch(D){o.e(D)}finally{o.f()}return a}function mv(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var gv="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function yv(e){return gv?Buffer.byteLength(e):new Blob([e]).size}function bv(e){if(gv)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function xv(e){if(gv){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function kv(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function wv(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Sv(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function Iv(e,t){return Cv.apply(this,arguments)}function Cv(){return Cv=Ue(Xe().mark((function e(t,n){var r,a,i,o,s;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},null!=t.trainingConfig&&(r.trainingConfig=t.trainingConfig),null==t.weightsManifest){e.next=11;break}return e.next=5,n(t.weightsManifest);case 5:a=e.sent,i=Ke(a,2),o=i[0],s=i[1],r.weightSpecs=o,r.weightData=s;case 11:return null!=t.signature&&(r.signature=t.signature),null!=t.userDefinedMetadata&&(r.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(r.modelInitializer=t.modelInitializer),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)}))),Cv.apply(this,arguments)}function Nv(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:yv(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:yv(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function Ev(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var s=r[o],u=e[n[s>>10]+(1023&s)]+t[s>>10];i[o]=u}return new Float32Array(a)}}var Tv=function(){function e(){Fc(this,e),this.saveRouters=[],this.loadRouters=[]}return Oc(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),Av=function(e){return Tv.registerSaveRouter(e)},Rv=function(e){return Tv.registerLoadRouter(e)},Fv=function(e){return Tv.getSaveHandlers(e)},Dv=function(e,t){return Tv.getLoadHandlers(e,t)},Ov="tensorflowjs",Lv="models_store",_v="model_info_store";function Mv(){if(!Cl().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function zv(e){var t=e.result;t.createObjectStore(Lv,{keyPath:"modelPath"}),t.createObjectStore(_v,{keyPath:"modelPath"})}var Pv=function(){function e(t){if(Fc(this,e),this.indexedDB=Mv(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return Oc(e,[{key:"save",value:function(){var e=Ue(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Ue(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(Ov,1);a.onupgradeneeded=function(){return zv(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(Lv,"readonly"),s=o.objectStore(Lv).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var u,c=Nv(t),l=i.transaction(_v,"readwrite"),f=l.objectStore(_v),h=f.put({modelPath:n.modelPath,modelArtifactsInfo:c});h.onsuccess=function(){var a=(u=i.transaction(Lv,"readwrite")).objectStore(Lv).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});a.onsuccess=function(){return e({modelArtifactsInfo:c})},a.onerror=function(e){var t=(f=l.objectStore(_v)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},h.onerror=function(e){return i.close(),r(h.error)},l.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();Pv.URL_SCHEME="indexeddb://";var Bv=function(e){return Cl().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Pv.URL_SCHEME)?(t=e.slice(Pv.URL_SCHEME.length),new Pv(t)):null;var t};Tv.registerSaveRouter(Bv),Tv.registerLoadRouter(Bv);var Wv=function(){function e(){Fc(this,e),this.indexedDB=Mv()}return Oc(e,[{key:"listModels",value:function(){var e=Ue(Xe().mark((function e(){var t=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(Ov,1);r.onupgradeneeded=function(){return zv(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(_v,"readonly"),i=a.objectStore(_v).getAll();i.onsuccess=function(){var t,n={},r=Rc(i.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(o){r.e(o)}finally{r.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=Ue(Xe().mark((function e(t){var n=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(r=t).startsWith(Pv.URL_SCHEME)?r.slice(Pv.URL_SCHEME.length):r,e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(Ov,1);a.onupgradeneeded=function(){return zv(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction(_v,"readwrite"),s=o.objectStore(_v),u=s.get(t);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=s.delete(t),o=function(){var a=(n=i.transaction(Lv,"readwrite")).objectStore(Lv).delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(u.error)}},u.onerror=function(e){return i.close(),r(u.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Uv="/",Vv="tensorflowjs_models",jv="info",Gv="model_topology",Hv="weight_specs",Kv="weight_data",qv="model_metadata";function Xv(e){return{info:[Vv,e,jv].join(Uv),topology:[Vv,e,Gv].join(Uv),weightSpecs:[Vv,e,Hv].join(Uv),weightData:[Vv,e,Kv].join(Uv),modelMetadata:[Vv,e,qv].join(Uv)}}function Yv(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function Zv(e){var t=e.split(Uv);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(Uv)}var Jv=function(){function e(t){if(Fc(this,e),!Cl().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=Xv(this.modelPath)}return Oc(e,[{key:"save",value:function(){var e=Ue(Xe().mark((function e(t){var n,r,a,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=Nv(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,bv(t.weightData)),i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),e.abrupt("return",{modelArtifactsInfo:a});case 17:throw e.prev=17,e.t0=e.catch(7),Yv(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Ue(Xe().mark((function e(){var t,n,r,a,i,o,s;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer),null!=o.trainingConfig&&(n.trainingConfig=o.trainingConfig)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=xv(s),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();Jv.URL_SCHEME="localstorage://";var Qv=function(e){return Cl().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Jv.URL_SCHEME)?(t=e.slice(Jv.URL_SCHEME.length),new Jv(t)):null;var t};Tv.registerSaveRouter(Qv),Tv.registerLoadRouter(Qv);var $v=function(){function e(){Fc(this,e),Vc(Cl().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),Vc("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return Oc(e,[{key:"listModels",value:function(){var e=Ue(Xe().mark((function e(){var t,n,r,a,i,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=Vv+Uv,r=Uv+jv,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=Zv(i),t[o]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=Ue(Xe().mark((function e(t){var n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(a=t).startsWith(Jv.URL_SCHEME)?a.slice(Jv.URL_SCHEME.length):a,n=Xv(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),Yv(n),e.abrupt("return",r);case 7:case"end":return e.stop()}var a}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),em="://",tm=function(){function e(){Fc(this,e),this.managers={}}return Oc(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){Vc(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(em)&&(t=t.slice(0,t.indexOf(em))),Vc(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();Vc(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}},{key:"getSchemes",value:function(){return Object.keys(this.getInstance().managers)}}]),e}();function nm(e){if(-1===e.indexOf(em))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(tm.getSchemes().join(",")));return{scheme:e.split(em)[0],path:e.split(em)[1]}}function rm(e,t){return am.apply(this,arguments)}function am(){return am=Ue(Xe().mark((function e(t,n){var r,a,i,o,s,u,c,l,f,h,d=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>2&&void 0!==d[2]&&d[2],Vc(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),Vc((a=Tv.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),Vc(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(t,".")})),i=a[0],Vc((o=Tv.getSaveHandlers(n)).length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),Vc(o.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(n,".")})),s=o[0],u=nm(t).scheme,c=nm(t).path,l=u===nm(t).scheme,e.next=15,i.load();case 15:if(f=e.sent,!r||!l){e.next=19;break}return e.next=19,tm.getManager(u).removeModel(c);case 19:return e.next=21,s.save(f);case 21:if(h=e.sent,!r||l){e.next=25;break}return e.next=25,tm.getManager(u).removeModel(c);case 25:return e.abrupt("return",h.modelArtifactsInfo);case 26:case"end":return e.stop()}}),e)}))),am.apply(this,arguments)}function im(){return om.apply(this,arguments)}function om(){return(om=Ue(Xe().mark((function e(){var t,n,r,a,i,o,s;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=tm.getSchemes(),n={},r=Rc(t),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=13;break}return i=a.value,e.next=9,tm.getManager(i).listModels();case 9:for(s in o=e.sent)n[i+em+s]=o[s];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})))).apply(this,arguments)}function sm(e){return um.apply(this,arguments)}function um(){return(um=Ue(Xe().mark((function e(t){var n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=nm(t),r=tm.getManager(n.scheme),e.abrupt("return",r.removeModel(n.path));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cm(e,t){return lm.apply(this,arguments)}function lm(){return(lm=Ue(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.abrupt("return",rm(t,n,false));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fm(e,t){return hm.apply(this,arguments)}function hm(){return(hm=Ue(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.abrupt("return",rm(t,n,true));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var dm=function(){function e(){Fc(this,e)}return Oc(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}();if(Cl().get("IS_BROWSER")){Cl().setPlatform("browser",new dm);try{tm.registerManager(Jv.URL_SCHEME,new $v)}catch(eq){}try{tm.registerManager(Pv.URL_SCHEME,new Wv)}catch(eq){}}var pm,vm=function(){return n(5410)};var mm=function(){function e(){Fc(this,e),this.util=n(8628),this.textEncoder=new this.util.TextEncoder}return Oc(e,[{key:"fetch",value:function(e,t){return null!=Cl().global.fetch?Cl().global.fetch(e,t):(null==pm&&(pm=vm()),pm(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}();function gm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",gl(e),new Tp(e,t,n)}Cl().get("IS_NODE")&&!Cl().get("IS_BROWSER")&&Cl().setPlatform("node",new mm);var ym=uv({cast_:function(e,t){var n=ov(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return Qp.runKernel(Ql,r,a)}});var bm=uv({clone_:function(e){var t={x:ov(e,"x","clone","string_or_numeric")};return Qp.runKernel(Gf,t)}});Zp();var xm={buffer:gm,cast:ym,clone:bm,print:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}};Rp=xm;function km(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var wm=function(){function e(t){if(Fc(this,e),!Cl().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return Oc(e,[{key:"save",value:function(){var e=Ue(Xe().mark((function e(t){var n,r,a,i,o,s;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a=Sv(t,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,o.href=i,e.next=15,km((function(){return o.dispatchEvent(new MouseEvent("click"))}));case 15:if(null==t.weightData){e.next=21;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=21,km((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 21:return e.abrupt("return",{modelArtifactsInfo:Nv(t)});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();wm.URL_SCHEME="downloads://";var Sm=function(){function e(t){if(Fc(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.jsonFile=t[0],this.weightsFiles=t.slice(1)}return Oc(e,[{key:"load",value:function(){var e=Ue(Xe().mark((function e(){var t=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(r){var a=JSON.parse(r.target.result),i=a.modelTopology;if(null!=i)if(null!=a.weightsManifest)if(0!==t.weightsFiles.length){var o=Iv(a,(function(e){return t.loadWeights(e)}));e(o)}else e({modelTopology:i});else n(new Error("weightManifest field is missing from file ".concat(t.jsonFile.name)));else n(new Error("modelTopology field is missing from file ".concat(t.jsonFile.name)))},r.onerror=function(e){return n("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},r.readAsText(t.jsonFile)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(e){var t,n=this,r=[],a=[],i=Rc(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;r.push.apply(r,Et(o.weights)),a.push.apply(a,Et(o.paths))}}catch(eq){i.e(eq)}finally{i.f()}var s=this.checkManifestAndWeightFiles(e),u=a.map((function(e){return n.loadWeightsFile(e,s[e])}));return Promise.all(u).then((function(e){return[r,kv(e)]}))}},{key:"loadWeightsFile",value:function(e,t){return new Promise((function(n,r){var a=new FileReader;a.onload=function(e){var t=e.target.result;n(t)},a.onerror=function(t){return r("Failed to weights data from file of path '".concat(e,"'."))},a.readAsArrayBuffer(t)}))}},{key:"checkManifestAndWeightFiles",value:function(e){var t,n=this,r=[],a=this.weightsFiles.map((function(e){return wv(e.name)})),i={},o=Rc(e);try{for(o.s();!(t=o.n()).done;){t.value.paths.forEach((function(e){var t=wv(e);if(-1!==r.indexOf(t))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(t,"'"));if(r.push(t),-1===a.indexOf(t))throw new Error("Weight file with basename '".concat(t,"' is not provided."));i[e]=n.weightsFiles[a.indexOf(t)]}))}}catch(eq){o.e(eq)}finally{o.f()}if(r.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return i}}]),e}();function Im(e){return new Sm(e)}function Cm(e,t,n,r){!function(e){Vc(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){Vc(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),Vc(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),Vc(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}function Nm(e,t){return Em.apply(this,arguments)}function Em(){return(Em=Ue(Xe().mark((function e(t,n){var r,a,i,o,s,u,c,l,f;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?Cl().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),i=0,o=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,Cm(a,n.onProgress,i,o);case 13:e.t0=e.sent;case 14:if(s=e.t0,u=s.map((function(e){return e.arrayBuffer()})),c=.5,l=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(u);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,Cm(u,n.onProgress,c,l);case 26:e.t1=e.sent;case 27:return f=e.t1,e.abrupt("return",f);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tm(e){return Am.apply(this,arguments)}function Am(){return Am=Ue(Xe().mark((function e(t){var n,r,a,i,o=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"",r=o.length>2?o[2]:void 0,a=o.length>3?o[3]:void 0,i=Rm((function(e){return Nm(e,{requestInit:a})})),e.abrupt("return",i(t,n,r));case 6:case"end":return e.stop()}}),e)}))),Am.apply(this,arguments)}function Rm(e){return function(){var t=Ue(Xe().mark((function t(n){var r,a,i,o,s,u,c,l,f,h,d,p,v=arguments;return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=v.length>1&&void 0!==v[1]?v[1]:"",a=v.length>2?v[2]:void 0,i=n.map((function(){return!1})),o={},s=null!=a?a.map((function(){return!1})):[],u=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,c=hv[r]*Kc(e.shape),l=function(){i[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:c})};null!=a?a.forEach((function(t,n){t===e.name&&(l(),s[n]=!0)})):l(),u.push(e.name),n+=c}))})),s.every((function(e){return e}))){t.next=10;break}throw c=a.filter((function(e,t){return!s[t]})),new Error("Could not find weights in manifest with names: "+"".concat(c.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(u.join(", "),"."));case 10:return l=i.reduce((function(e,t,n){return t&&e.push(n),e}),[]),f=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;f.push(t)}))})),t.next=15,e(f);case 15:return h=t.sent,d={},p=0,l.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=h[p+a].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),u=0,c=0;c<t;c++){var l=new Uint8Array(h[p+c]);s.set(l,u),u+=l.byteLength}o[e].forEach((function(e){var t=vv(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)d[n]=t[n]})),p+=t})),t.abrupt("return",d);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}Tv.registerSaveRouter((function(e){return Cl().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(wm.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new wm(e)}(e.slice(wm.URL_SCHEME.length)):null}));var Fm=function(){function e(t,n){if(Fc(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(Vc("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=Cl().platform.fetch,Vc(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&Vc(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return Oc(e,[{key:"save",value:function(){var e=Ue(Xe().mark((function e(t){var n,r,a,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=Sv(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=10,this.fetch(this.path,n);case 10:if(!(i=e.sent).ok){e.next=15;break}return e.abrupt("return",{modelArtifactsInfo:Nv(t),responses:[i]});case 15:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(i.status,"."));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Ue(Xe().mark((function e(){var t,n,r,a,i,o=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,i=n.weightsManifest,null!=a||null!=i){e.next=20;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 20:return e.abrupt("return",Iv(n,(function(e){return o.loadWeights(e)})));case 21:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=Ue(Xe().mark((function e(t){var n,r,a,i,o,s,u,c,l,f,h,d,p,v,m,g,y,b,x;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=Dm(n),a=Ke(r,2),i=a[0],o=a[1],s=this.weightPathPrefix||i,u=[],c=Rc(t);try{for(c.s();!(l=c.n()).done;)f=l.value,u.push.apply(u,Et(f.weights))}catch(eq){c.e(eq)}finally{c.f()}h=[],d=[],p=Rc(t);try{for(p.s();!(v=p.n()).done;){m=v.value,g=Rc(m.paths);try{for(g.s();!(y=g.n()).done;)b=y.value,null!=this.weightUrlConverter?d.push(this.weightUrlConverter(b)):h.push(s+b+o)}catch(eq){g.e(eq)}finally{g.f()}}}catch(eq){p.e(eq)}finally{p.f()}if(!this.weightUrlConverter){e.next=19;break}return e.t0=h.push,e.t1=h,e.t2=Et,e.next=16,Promise.all(d);case 16:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 19:return e.next=21,Nm(h,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 21:return x=e.sent,e.abrupt("return",[u,kv(x)]);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Dm(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function Om(e){return null!=e.match(Fm.URL_SCHEME_REGEX)}Fm.URL_SCHEME_REGEX=/^https?:\/\//;var Lm=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return Om(e)})):Om(e))?_m(e,t):null};function _m(e,t){return new Fm(e,t)}function Mm(e,t){return _m(e,t)}Tv.registerSaveRouter(Lm),Tv.registerLoadRouter(Lm);var zm=function(){function e(t){Fc(this,e),this.modelArtifacts=t}return Oc(e,[{key:"load",value:function(){var e=Ue(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.modelArtifacts);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Pm=function(){function e(t){Fc(this,e),this.saveHandler=t}return Oc(e,[{key:"save",value:function(){var e=Ue(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveHandler(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Bm(e,t,n,r){if(1===arguments.length){var a=null!=e.modelTopology||null!=e.weightSpecs;return a?new zm(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new zm({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new zm({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function Wm(e){return new Pm(e)}function Um(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function Vm(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function jm(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}n.unshift(i)}}return n}function Gm(e,t,n){var r=e.shape.length;Vc(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")})),Vc(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var a=function(a){Vc(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] ")+"(".concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},i=0;i<r;++i)a(i)}function Hm(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function Km(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function qm(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function Xm(e,t,n){var r,a,i=e.shape.length;return(r="number"===typeof t?[t].concat(Et(new Array(i-1).fill(0))):t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice()).forEach((function(e){Vc(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i).fill(-1):"number"===typeof n?[n].concat(Et(new Array(i-1).fill(-1))):n.length<i?n.concat(new Array(i-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(Vc(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function Ym(e,t,n,r,a,i,o,s,u){var c;if(null==r?(c=new Array(t.length)).fill(1):c=r,null!=o&&0!==(o&o-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var l=!1,f={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u},h=0;h<f.dims;h++)l&&0!==(1<<h&s)&&f.numAddAxisAfterEllipsis++,1<<h&o&&(l=!0);l||(f.ellipsisMask|=1<<f.dims,f.dims++);var d={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(f,d);for(var p=!0,v=!0,m=!0,g=[],y=[],b=0;b<e.length;++b){if(0===d.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));var x=!!(d.shrinkAxisMask&1<<b),k=e[b];if(-1!==k){var w=[d.beginMask&1<<b,d.endMask&1<<b],S=[d.strides[b]>0?0:-1,d.strides[b]>0?k:k-1];if(x&&d.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===d.strides[b];var I=!!(d.beginMask&1<<b&&d.endMask&1<<b);if(d.beginValid&&d.endValid){if(x){var C=d.begin[b]<0?k+d.begin[b]:d.begin[b];if(d.begin[b]=C,d.end[b]=d.begin[b]+1,C<0||C>=k)throw Error("slice index ".concat(d.begin[b]," of dimension ").concat(b," out of bounds."))}else d.begin[b]=Zm(d.begin[b],0,d.strides[b],k,w,S),d.end[b]=Zm(d.end[b],1,d.strides[b],k,w,S);var N=1===d.strides[b]&&0===d.begin[b]&&d.end[b]===k;p=p&&N,v=v&&(0===b&&1===d.strides[b]||N)}else p=p&&1===d.strides[b]&&I,v=v&&(0===b&&1===d.strides[b]||I);var E=void 0,T=!1;if(d.beginValid&&d.endValid?(E=d.end[b]-d.begin[b],T=!0):x?(E=1,T=!0):I&&k>=0&&(E=d.strides[b]<0?-k:k,T=!0),T){var A=void 0;A=0===E||E<0!==d.strides[b]<0?0:Math.trunc(E/d.strides[b])+(E%d.strides[b]!==0?1:0),g.push(A)}else g.push(-1)}else g.push(x?1:-1)}for(var R=0;R<d.finalShapeGatherIndices.length;++R){var F=d.finalShapeGatherIndices[R];F>=0?y.push(g[F]):-2===F&&y.push(1)}var D=y.filter((function(e,t){return-2!==d.finalShapeGatherIndices[t]}));return{finalShapeSparse:D,finalShape:y,isIdentity:p,sliceDim0:v,isSimpleSlice:m,begin:d.begin,end:d.end,strides:d.strides}}function Zm(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];var o=e<0?r+e:e;return o<i[0]?i[0]:o>i[1]?i[1]:o}var Jm=function(){function e(){Fc(this,e)}return Oc(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),Qm=function(){function e(){Fc(this,e),this.classNameMap={}}return Oc(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function $m(e){Vc(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),Vc("string"===typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),Vc(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),Qm.register(e)}function eg(){return Qp}function tg(){return Qp.memory()}function ng(e,t){return Qp.tidy(e,t)}function rg(e){Gp(e).forEach((function(e){return e.dispose()}))}function ag(e){return Qp.keep(e)}function ig(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Qp.registerBackend(e,t,n)}function og(e){return Qp.customGrad(e)}function sg(e,t){if((al(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&al(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return lv(e,[],[],t)}var ug=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,i=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(o)}else this.applyGradients(i);return rg(i),t?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return function(e,t){Vc(cl(e),(function(){return"The f passed in variableGrads(f) must be a function"})),Vc(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof Pp})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],Qp.registeredVariables)t.push(Qp.registeredVariables[r]);var a=n?t.filter((function(e){return!e.trainable})):null,i=t.length;t=t.filter((function(e){return e.trainable})),Vc(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(i," variables is ")+"trainable."}));var o=Qp.gradients(e,t,null,!0),s=o.value,u=o.grads;Vc(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),Vc(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(s.rank," tensor")}));var c={};return t.forEach((function(e,t){null!=u[t]&&(c[e.name]=u[t])})),null!=a&&a.forEach((function(e){return c[e.name]=null})),{value:s,grads:c}}(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&rg(this.iterations_)}},{key:"saveIterations",value:function(){var e=Ue(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this.iterations_&&(this.iterations_=0),e.abrupt("return",{name:"iter",tensor:sg(this.iterations_,"int32")});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeights",value:function(){var e=Ue(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Ue(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractIterations",value:function(){var e=Ue(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Jm);Object.defineProperty(ug,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var cg=uv({abs_:function(e){var t=ov(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return Qp.runKernel(nf,n)}var r={x:t};return Qp.runKernel(Rl,r)}});var lg=uv({add_:function(e,t){var n=ov(e,"a","add"),r=ov(t,"b","add"),a=Ke(Vp(n,r),2),i={a:n=a[0],b:r=a[1]};return Qp.runKernel(Ol,i)}});var fg=uv({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=ov(e,"x","all","bool"),a={x:r},i={axis:t,keepDims:n};return Qp.runKernel(_l,a,i)}});var hg=uv({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=ov(e,"x","any","bool"),a={x:r},i={axis:t,keepDims:n};return Qp.runKernel(Ml,a,i)}});var dg=uv({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=ov(e,"x","argMax"),r={x:n},a={axis:t};return Qp.runKernel(zl,r,a)}});function pg(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5?arguments[5]:void 0,o=e[3],s=[].concat(Et(t),[o]),u=Tg(a);return gg(e,s,n,i,r,null,null,u)}function vg(e,t,n,r,a,i){var o,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=xg(t),c=Ke(u,2),l=c[0],f=c[1];if("channelsLast"===s)o=[l,f,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));o=[l,f,e[1],e[1]]}return gg(e,o,n,r,a,i,!1,s)}function mg(e,t,n,r,a,i){var o,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",c=kg(t),l=Ke(c,3),f=l[0],h=l[1],d=l[2];if("NDHWC"===u)s="channelsLast",o=[f,h,d,e[4],e[4]];else{if("NCDHW"!==u)throw new Error("Unknown dataFormat ".concat(u));s="channelsFirst",o=[f,h,d,e[1],e[1]]}return yg(e,o,n,r,a,!1,s,i)}function gg(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",u=-1,c=-1,l=-1,f=-1;if("channelsLast"===s){var h=Ke(e,4);u=h[0],c=h[1],l=h[2],f=h[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var d=Ke(e,4);u=d[0],f=d[1],c=d[2],l=d[3]}var p,v=Ke(t,4),m=v[0],g=v[1],y=v[3],b=xg(n),x=Ke(b,2),k=x[0],w=x[1],S=xg(r),I=Ke(S,2),C=I[0],N=I[1],E=wg(m,C),T=wg(g,N),A=Sg(a,c,l,k,w,E,T,i,s),R=A.padInfo,F=A.outHeight,D=A.outWidth,O=o?y*f:y;return"channelsFirst"===s?p=[u,O,F,D]:"channelsLast"===s&&(p=[u,F,D,O]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:l,inChannels:f,outHeight:F,outWidth:D,outChannels:O,padInfo:R,strideHeight:k,strideWidth:w,filterHeight:m,filterWidth:g,effectiveFilterHeight:E,effectiveFilterWidth:T,dilationHeight:C,dilationWidth:N,inShape:e,outShape:p,filterShape:t}}function yg(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,u=-1,c=-1,l=-1,f=-1,h=-1;if("channelsLast"===o){var d=Ke(e,5);u=d[0],c=d[1],l=d[2],f=d[3],h=d[4]}else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat ".concat(o));var p=Ke(e,5);u=p[0],h=p[1],c=p[2],l=p[3],f=p[4]}var v,m=Ke(t,5),g=m[0],y=m[1],b=m[2],x=m[4],k=kg(n),w=Ke(k,3),S=w[0],I=w[1],C=w[2],N=kg(r),E=Ke(N,3),T=E[0],A=E[1],R=E[2],F=wg(g,T),D=wg(y,A),O=wg(b,R),L=Ig(a,c,l,f,S,I,C,F,D,O,s),_=L.padInfo,M=L.outDepth,z=L.outHeight,P=L.outWidth,B=i?x*h:x;return"channelsFirst"===o?v=[u,B,M,z,P]:"channelsLast"===o&&(v=[u,M,z,P,B]),{batchSize:u,dataFormat:o,inDepth:c,inHeight:l,inWidth:f,inChannels:h,outDepth:M,outHeight:z,outWidth:P,outChannels:B,padInfo:_,strideDepth:S,strideHeight:I,strideWidth:C,filterDepth:g,filterHeight:y,filterWidth:b,effectiveFilterDepth:F,effectiveFilterHeight:D,effectiveFilterWidth:O,dilationDepth:T,dilationHeight:A,dilationWidth:R,inShape:e,outShape:v,filterShape:t}}function bg(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=wg(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function xg(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function kg(e){return"number"===typeof e?[e,e,e]:e}function wg(e,t){return t<=1?e:e+(e-1)*(t-1)}function Sg(e,t,n,r,a,i,o,s,u){var c,l,f;if("number"===typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var h=function(e,t,n,r,a){null==r&&(r=bg(e,t,n));var i=e[0],o=e[1];return[Cg((i-t+2*r)/n+1,a),Cg((o-t+2*r)/n+1,a)]}([t,n],i,r,e,s);l=h[0],f=h[1]}else if("same"===e){l=Math.ceil(t/r),f=Math.ceil(n/a);var d=Math.max(0,(l-1)*r+i-t),p=Math.max(0,(f-1)*a+o-n),v=Math.floor(d/2),m=d-v,g=Math.floor(p/2);c={top:v,bottom:m,left:g,right:p-g,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-i+1)/r),f=Math.ceil((n-o+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var y="channelsLast"===u?e[1][0]:e[2][0],b="channelsLast"===u?e[1][1]:e[2][1],x="channelsLast"===u?e[2][0]:e[3][0],k="channelsLast"===u?e[2][1]:e[3][1];c={top:y,bottom:b,left:x,right:k,type:0===y&&0===b&&0===x&&0===k?"VALID":"EXPLICIT"},l=Cg((t-i+y+b)/r+1,s),f=Cg((n-o+x+k)/a+1,s)}return{padInfo:c,outHeight:l,outWidth:f}}function Ig(e,t,n,r,a,i,o,s,u,c,l){var f,h,d,p;if("number"===typeof e){f={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var v=function(e,t,n,r,a,i){null==a&&(a=bg(e,t,r));var o=e[0],s=e[1],u=e[2];return[Cg((o-t+2*a)/r+1,i),Cg((s-t+2*a)/r+1,i),Cg((u-t+2*a)/r+1,i),n]}([t,n,r,1],s,1,a,e,l);h=v[0],d=v[1],p=v[2]}else if("same"===e){var m=((h=Math.ceil(t/a))-1)*a+s-t,g=((d=Math.ceil(n/i))-1)*i+u-n,y=((p=Math.ceil(r/o))-1)*o+c-r,b=Math.floor(m/2),x=m-b,k=Math.floor(g/2),w=g-k,S=Math.floor(y/2);f={top:k,bottom:w,left:S,right:y-S,front:b,back:x,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));f={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},h=Math.ceil((t-s+1)/a),d=Math.ceil((n-u+1)/i),p=Math.ceil((r-c+1)/o)}return{padInfo:f,outDepth:h,outHeight:d,outWidth:p}}function Cg(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function Ng(e){var t=Ke(xg(e),3),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function Eg(e,t){return Ng(e)||Ng(t)}function Tg(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function Ag(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)Vc(Xc(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((function(t){t.forEach((function(t){Vc(Xc(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}))}))}))}}}var Rg=uv({reshape_:function(e,t){var n={x:ov(e,"x","reshape","string_or_numeric")},r={shape:t};return Qp.runKernel(zh,n,r)}});var Fg=uv({avgPool_:function(e,t,n,r,a){var i=ov(e,"x","avgPool","float32");Vc(Eg(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var o=i,s=!1;3===i.rank&&(s=!0,o=Rg(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Vc(4===o.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(o.rank,".")})),Ag("avgPool",r,a);var u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=Qp.runKernel(Gl,u,c);return l=ym(l,i.dtype),s?Rg(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var Dg=uv({avgPool3d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=ov(e,"x","avgPool3d","float32"),s=o,u=!1;4===o.rank&&(u=!0,s=Rg(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Vc(5===s.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),Vc("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),Ag("avgPool3d",r,a);var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},f=Qp.runKernel(Kl,c,l);return f=ym(f,s.dtype),u?Rg(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});var Og=uv({batchNorm_:function(e,t,n,r,a,i){null==i&&(i=.001);var o,s,u=ov(e,"x","batchNorm"),c=ov(t,"mean","batchNorm"),l=ov(n,"variance","batchNorm");null!=a&&(o=ov(a,"scale","batchNorm")),null!=r&&(s=ov(r,"offset","batchNorm")),Vc(c.rank===l.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Vc(null==s||c.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Vc(null==o||c.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var f=function(e){return 0===e.rank||1===e.rank?Rg(e,[1,1,1,e.size]):2===e.rank?Rg(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?Rg(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(u),h={x:f,scale:o,offset:s,mean:c,variance:l},d={varianceEpsilon:i},p=Qp.runKernel(Bf,h,d);return Rg(p,u.shape)}});var Lg=uv({batchNorm2d_:function(e,t,n,r,a,i){var o,s,u=ov(e,"x","batchNorm"),c=ov(t,"mean","batchNorm"),l=ov(n,"variance","batchNorm");return null!=a&&(o=ov(a,"scale","batchNorm")),null!=r&&(s=ov(r,"offset","batchNorm")),Vc(2===u.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(u.rank,".")})),Vc(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(c.rank,".")})),Vc(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&Vc(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&Vc(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(s.rank,".")})),Og(u,c,l,s,o,i)}});var _g=uv({batchNorm3d_:function(e,t,n,r,a,i){var o,s,u=ov(e,"x","batchNorm"),c=ov(t,"mean","batchNorm"),l=ov(n,"variance","batchNorm");return null!=a&&(o=ov(a,"scale","batchNorm")),null!=r&&(s=ov(r,"offset","batchNorm")),Vc(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(u.rank,".")})),Vc(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(c.rank,".")})),Vc(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&Vc(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&Vc(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(s.rank,".")})),Og(u,c,l,s,o,i)}});var Mg=uv({batchNorm4d_:function(e,t,n,r,a,i){var o,s,u=ov(e,"x","batchNorm"),c=ov(t,"mean","batchNorm"),l=ov(n,"variance","batchNorm");return null!=a&&(o=ov(a,"scale","batchNorm")),null!=r&&(s=ov(r,"offset","batchNorm")),Vc(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(u.rank,".")})),Vc(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(c.rank,".")})),Vc(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&Vc(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&Vc(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(s.rank,".")})),Og(u,c,l,s,o,i)}});var zg=uv({clipByValue_:function(e,t,n){var r=ov(e,"x","clipByValue");Vc(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")}));var a={x:r},i={clipValueMin:t,clipValueMax:n};return Qp.runKernel(ef,a,i)}});var Pg=uv({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Vc(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=sv(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return bm(n[0]);var r=n,a={axis:t};return Qp.runKernel(rf,r,a)}});var Bg=uv({concat1d_:function(e){return Pg(e,0)}});var Wg=uv({concat2d_:function(e,t){return Pg(e,t)}});var Ug=uv({concat3d_:function(e,t){return Pg(e,t)}});var Vg=uv({concat4d_:function(e,t){return Pg(e,t)}});var jg=uv({conv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=ov(e,"x","conv2d","float32"),u=ov(t,"filter","conv2d","float32"),c=s,l=!1;3===s.rank&&(l=!0,c=Rg(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Vc(4===c.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(c.rank,".")})),Vc(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")})),Ag("conv2d",r,o);var f="NHWC"===a?c.shape[3]:c.shape[1];Vc(f===u.shape[2],(function(){return"Error in conv2d: depth of input (".concat(f,") must match ")+"input depth for filter ".concat(u.shape[2],".")})),Vc(Eg(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")}));var h={x:c,filter:u},d={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},p=Qp.runKernel(af,h,d);return l?Rg(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var Gg=uv({conv1d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6?arguments[6]:void 0,s=ov(e,"x","conv1d"),u=ov(t,"filter","conv1d"),c=s,l=!1;2===s.rank&&(l=!0,c=Rg(s,[1,s.shape[0],s.shape[1]])),Vc(3===c.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(c.rank,".")})),Vc(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(u.rank,".")})),Ag("conv1d",r,o),Vc(c.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input (".concat(c.shape[2],") must match ")+"input depth for filter ".concat(u.shape[1],".")})),Vc(Eg(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(i,"'")})),Vc("NWC"===a,(function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")}));var f=Rg(u,[1,u.shape[0],u.shape[1],u.shape[2]]),h=Rg(c,[c.shape[0],1,c.shape[1],c.shape[2]]),d=[1,n],p=[1,i],v="NHWC",m=jg(h,f,d,r,v,p,o);return Rg(m,l?[m.shape[2],m.shape[3]]:[m.shape[0],m.shape[2],m.shape[3]])}});var Hg=uv({conv2DBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0;Vc(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var s=e,u=t,c=!1;3===t.rank&&(c=!0,u=Rg(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),Vc(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,".")})),Vc(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(u.rank)})),Vc(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var l="NHWC"===i?s[3]:s[1],f="NHWC"===i?u.shape[3]:u.shape[1];Vc(l===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(l,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),Vc(f===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(f,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),Ag("conv2dDerInput",a,o);var h={dy:u,filter:n},d={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},p=Qp.runKernel(sf,h,d);return c?Rg(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var Kg=uv({conv2dTranspose_:function(e,t,n,r,a,i){var o=ov(e,"x","conv2dTranspose"),s=ov(t,"filter","conv2dTranspose");return Hg(n,o,s,r,a,"NHWC",i)}});var qg=uv({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],o=ov(e,"x","conv3d"),s=ov(t,"filter","conv3d"),u=o,c=!1;4===o.rank&&(c=!0,u=Rg(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Vc(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(u.rank,".")})),Vc(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,".")})),Vc(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input (".concat(u.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],".")})),Vc(Eg(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")})),Vc("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")}));var l={x:u,filter:s},f={strides:n,pad:r,dataFormat:a,dilations:i},h=Qp.runKernel(uf,l,f);return c?Rg(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});var Xg=uv({conv3DBackpropInput_:function(e,t,n,r,a){Vc(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var i=e,o=t,s=!1;4===t.rank&&(s=!0,o=Rg(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);var u=i[4],c=o.shape[4];Vc(5===i.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(i.length,".")})),Vc(5===o.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(o.rank)})),Vc(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),Vc(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),Vc(c===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(c,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var l={dy:o,filter:n},f={pad:a,strides:r,inputShape:i},h=Qp.runKernel(lf,l,f);return s?Rg(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});var Yg=uv({conv3dTranspose_:function(e,t,n,r,a){var i=ov(e,"x","conv3dTranspose"),o=ov(t,"filter","conv3dTranspose");return Xg(n,i,o,r,a)}});var Zg=uv({depthwiseConv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=ov(e,"x","depthwiseConv2d","float32"),u=ov(t,"filter","depthwiseConv2d","float32"),c=s,l=!1;3===s.rank&&(l=!0,c=Rg(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Vc(4===c.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,".")})),Vc(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")})),Vc(c.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(c.shape[3],") must match the inChannels dimension in ")+"filter ".concat(u.shape[2],".")})),Ag("depthwiseConv2d",r,o);var f={x:c,filter:u},h={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},d=Qp.runKernel(yf,f,h);return l?Rg(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});var Jg=uv({floorDiv_:function(e,t){var n=ov(e,"a","floorDiv"),r=ov(t,"b","floorDiv"),a=Ke(Vp(n,r),2),i={a:n=a[0],b:r=a[1]};return Qp.runKernel(Pf,i)}});var Qg=uv({div_:function(e,t){var n=ov(e,"a","div"),r=ov(t,"b","div"),a=Ke(Vp(n,r),2);if(n=a[0],r=a[1],"int32"===n.dtype&&"int32"===r.dtype)return Jg(n,r);var i={a:n,b:r};return Qp.runKernel(Cf,i,{})}});var $g=uv({elu_:function(e){var t={x:ov(e,"x","elu","float32")};return Qp.runKernel(Ef,t)}});var ey=uv({equal_:function(e,t){var n=ov(e,"a","equal","string_or_numeric"),r=ov(t,"b","equal","string_or_numeric"),a=Ke(Vp(n,r),2);n=a[0],r=a[1],jm(n.shape,r.shape);var i={a:n,b:r};return Qp.runKernel(Rf,i)}});var ty=uv({exp_:function(e){var t={x:ov(e,"x","exp")};return Qp.runKernel(Ff,t)}});var ny=uv({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=ov(e,"x","expandDims","string_or_numeric");Vc(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return Qp.runKernel(Df,r,a)}});var ry=uv({tile_:function(e,t){var n=ov(e,"x","tile","string_or_numeric");Vc(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var r={x:n},a={reps:t};return Qp.runKernel(kd,r,a)}});var ay=uv({eye_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var a=gm([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=Rg(a.toTensor(),[e,t]);if(null==n)return s;if(1===n.length)return ry(ny(s,0),[n[0],1,1]);if(2===n.length)return ry(ny(ny(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return ry(ny(ny(ny(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});function iy(e,t,n){var r={shape:e,value:t,dtype:n};return Qp.runKernel(_f,{},r)}var oy=uv({floor_:function(e){var t={x:ov(e,"x","floor","float32")};return Qp.runKernel(zf,t)}});var sy=uv({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=ov(e,"x","gather"),i=ov(t,"indices","gather","int32"),o={x:a,indices:i},s={axis:n,batchDims:r};return Qp.runKernel(Wf,o,s)}});var uy=uv({greater_:function(e,t){var n=ov(e,"a","greater","string_or_numeric"),r=ov(t,"b","greater","string_or_numeric"),a=Ke(Vp(n,r),2);n=a[0],r=a[1],jm(n.shape,r.shape);var i={a:n,b:r};return Qp.runKernel(Vf,i)}});var cy=uv({greaterEqual_:function(e,t){var n=ov(e,"a","greaterEqual","string_or_numeric"),r=ov(t,"b","greaterEqual","string_or_numeric"),a=Ke(Vp(n,r),2);n=a[0],r=a[1],jm(n.shape,r.shape);var i={a:n,b:r};return Qp.runKernel(jf,i)}});var ly=uv({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=ov(e,"x","leakyRelu"),r={x:n},a={alpha:t};return Qp.runKernel(Zf,r,a)}});var fy=uv({log_:function(e){var t={x:ov(e,"x","log","float32")};return Qp.runKernel(eh,t)}});var hy=uv({log1p_:function(e){var t={x:ov(e,"x","log1p")};return Qp.runKernel(th,t)}});var dy=uv({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=ov(e,"x","max"),a={x:r},i={reductionIndices:t,keepDims:n};return Qp.runKernel(sh,a,i)}});var py=uv({mul_:function(e,t){var n=ov(e,"a","mul"),r=ov(t,"b","mul"),a=Ke(Vp(n,r),2),i={a:n=a[0],b:r=a[1]};return Qp.runKernel(xh,i)}});var vy=uv({sub_:function(e,t){var n=ov(e,"a","sub"),r=ov(t,"b","sub"),a=Ke(Vp(n,r),2),i={a:n=a[0],b:r=a[1]};return Qp.runKernel(yd,i)}});var my=uv({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=ov(e,"x","sum");"bool"===r.dtype&&(r=ym(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return Qp.runKernel(rd,a,i)}});var gy=uv({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=ov(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var r=og((function(e,n){var r=dy(e,t,!0),a=vy(e,r),i=vy(ym(a,"float32"),fy(my(ty(a),t,!0)));n([i]);return{value:i,gradFunc:function(e,n){var r=Ke(n,1)[0],a=ty(r);return vy(e,py(my(e,t,!0),a))}}}));return r(n)}});var yy=uv({logicalAnd_:function(e,t){var n=ov(e,"a","logicalAnd","bool"),r=ov(t,"b","logicalAnd","bool");jm(n.shape,r.shape);var a={a:n,b:r};return Qp.runKernel(nh,a)}});var by=uv({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=ov(e,"a","matMul"),i=ov(t,"b","matMul"),o=Vp(a,i),s=Ke(o,2),u={a:a=s[0],b:i=s[1]},c={transposeA:n,transposeB:r};return Qp.runKernel(Xl,u,c)}});var xy=uv({maxPool_:function(e,t,n,r,a){var i=ov(e,"x","maxPool"),o=i,s=!1;3===i.rank&&(s=!0,o=Rg(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Vc(4===o.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(o.rank,".")})),Vc(Eg(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),Ag("maxPool",r,a);var u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=Qp.runKernel(ch,u,c);return s?Rg(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var ky=uv({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=ov(e,"x","maxPool3d"),s=o,u=!1;4===o.rank&&(u=!0,s=Rg(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Vc(5===s.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),Vc("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),Ag("maxPool3d",r,a);var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},f=Qp.runKernel(fh,c,l);return u?Rg(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});var wy=uv({maximum_:function(e,t){var n=ov(e,"a","maximum"),r=ov(t,"b","maximum"),a=Ke(Vp(n,r),2);n=a[0],r=a[1],"bool"===n.dtype&&(n=ym(n,"int32"),r=ym(r,"int32")),jm(n.shape,r.shape);var i={a:n,b:r};return Qp.runKernel(uh,i)}});var Sy=uv({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=ov(e,"x","mean"),a={x:r},i={axis:t,keepDims:n};return Qp.runKernel(ph,a,i)}});var Iy=uv({minimum_:function(e,t){var n=ov(e,"a","minimum"),r=ov(t,"b","minimum"),a=Ke(Vp(n,r),2);n=a[0],r=a[1],"bool"===n.dtype&&(n=ym(n,"int32"),r=ym(r,"int32")),jm(n.shape,r.shape);var i={a:n,b:r};return Qp.runKernel(mh,i)}});function Cy(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function Ny(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var i=t.map((function(t){return e[t]}));return[n,i]}function Ey(e,t){return function(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}(e,t.map((function(e){return 1})),t)}function Ty(e,t,n){Vc(Cy(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function Ay(e,t){if(Cy(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function Ry(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function Fy(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}var Dy=uv({square_:function(e){var t=ov(e,"x","square");return Qp.runKernel("Square",{x:t},{})}});var Oy=uv({moments_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=$c(t,(e=ov(e,"x","moments")).shape),a=Sy(e,r,n),i=a.shape;n||(i=Ey(a.shape,r));var o=Dy(vy(ym(e,"float32"),Rg(a,i))),s=Sy(o,r,n);return{mean:a,variance:s}}});var Ly=uv({neg_:function(e){var t={x:ov(e,"x","neg")};return Qp.runKernel(kh,t)}});var _y=uv({notEqual_:function(e,t){var n=ov(e,"a","notEqual","string_or_numeric"),r=ov(t,"b","notEqual","string_or_numeric"),a=Ke(Vp(n,r),2);n=a[0],r=a[1],jm(n.shape,r.shape);var i={a:n,b:r};return Qp.runKernel(wh,i)}});var My=uv({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var a=ov(e,"indices","oneHot","int32"),i={indices:a},o={depth:t,onValue:n,offValue:r};return Qp.runKernel(Eh,i,o)}});function zy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=zy(e,"float32"),r=zy(e,"float32");return cv(n,r)}var a=vl(Kc(e),t);return Qp.makeTensor(a,e,t)}function Py(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=Py(e,"float32"),r=zy(e,"float32");return cv(n,r)}var a=pl(Kc(e),t);return Qp.makeTensor(a,e,t)}var By=uv({onesLike_:function(e){var t={x:ov(e,"x","onesLike")};return Qp.runKernel(Nh,t)}});var Wy=uv({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=ov(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},i={x:r};return Qp.runKernel(Ah,i,a)}});var Uy=uv({prelu_:function(e,t){var n={x:ov(e,"x","prelu"),alpha:ov(t,"alpha","prelu")};return Qp.runKernel(Fh,n)}}),Vy=n(282),jy=function(){function e(t,n,r,a,i){Fc(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=Vy.alea(o.toString())}return Oc(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),Gy=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(Fc(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==i&&(i=Math.random()),"number"===typeof i&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=Vy.alea(i)}return Oc(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}();var Hy=uv({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var i=new jy(t,n,r,!1,a),o=gm(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var Ky=uv({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0,i=gm(e,r),o=new Gy(t,n,null,a),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});var qy=uv({relu_:function(e){var t={x:ov(e,"x","relu")};return Qp.runKernel(Mh,t)}});var Xy=uv({reverse_:function(e,t){var n={x:ov(e,"x","reverse")},r={dims:t};return Qp.runKernel(jh,n,r)}});var Yy=uv({selu_:function(e){var t={x:ov(e,"x","selu")};return Qp.runKernel(Yh,t)}});var Zy=uv({separableConv2d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",s=ov(e,"x","separableConv2d"),u=ov(t,"depthwiseFilter","separableConv2d"),c=ov(n,"pointwiseFilter","separableConv2d"),l=s,f=!1;if(3===s.rank&&(f=!0,l=Rg(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Vc(4===l.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(l.rank,".")})),Vc(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),Vc(4===c.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),Vc(1===c.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(c.shape[0],".")})),Vc(1===c.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(c.shape[1],".")}));var h=u.shape[2],d=u.shape[3];Vc(c.shape[2]===h*d,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(h*d,", ")+"but got ".concat(c.shape[2],".")}));var p=Zg(l,u,r,a,o,i),v=1,m=jg(p,c,v,"valid",o);return f?Rg(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});var Jy=uv({sigmoid_:function(e){var t={x:ov(e,"x","sigmoid","float32")};return Qp.runKernel(ed,t)}});var Qy=uv({slice_:function(e,t,n){var r=ov(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},i={begin:t,size:n};return Qp.runKernel(Zh,a,i)}});var $y=uv({slice1d_:function(e,t,n){var r=ov(e,"x","slice1d");return Vc(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),Qy(r,[t],[n])}});var eb=uv({slice2d_:function(e,t,n){var r=ov(e,"x","slice2d");return Vc(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),Qy(r,t,n)}});var tb=uv({slice3d_:function(e,t,n){var r=ov(e,"x","slice3d");return Vc(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),Qy(r,t,n)}});var nb=uv({slice4d_:function(e,t,n){var r=ov(e,"x","slice4d");return Vc(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),Qy(r,t,n)}});var rb=uv({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=ov(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var r={logits:n},a={dim:t};return Qp.runKernel(od,r,a)}});var ab=uv({softplus_:function(e){var t={x:ov(e,"x","softplus")};return Qp.runKernel(td,t)}});var ib=uv({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=ov(e,"x","split"),a={x:r},i={numOrSizeSplits:t,axis:n};return Qp.runKernel(id,a,i)}});var ob=uv({sqrt_:function(e){var t={x:ov(e,"x","sqrt","float32")};return Qp.runKernel(nd,t)}});var sb=uv({squeeze_:function(e,t){var n=ov(e,"x","squeeze");return Rg(n,el(n.shape,t).newShape)}});var ub=uv({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=sv(e,"tensors","stack","string_or_numeric");Vc(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&Vc(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return Qp.runKernel(Th,r,a)}});var cb=uv({tanh_:function(e){var t={x:ov(e,"x","tanh","float32")};return Qp.runKernel(xd,t)}});function lb(e,t){Gc(e);var n=rv(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return lv(e,null,n,t)}var fb=uv({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var i=new jy(t,n,r,!0,a),o=gm(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var hb=uv({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=ov(e,"x","unstack","string_or_numeric");Vc(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var r={value:n},a={axis:t};return Qp.runKernel(Nd,r,a)}});function db(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return Qp.makeVariable(e,t,n,r)}var pb=uv({broadcastTo_:function(e,t){var n=ov(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!==0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=Rg(n,a)}for(var i=n.shape,o=Array.from(t),s=t.length-1;s>=0;s--)if(i[s]===t[s])o[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));var u=o.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));if(0===u.length)return bm(n);var c={x:n},l={reps:o};return Qp.runKernel(kd,c,l)}});var vb=uv({where_:function(e,t,n){var r=ov(t,"a","where"),a=ov(n,"b","where"),i=ov(e,"condition","where","bool"),o=jm(jm(i.shape,r.shape),a.shape),s={condition:pb(i,o),t:pb(r,o),e:pb(a,o)};return Qp.runKernel(Xh,s)}});var mb=uv({zerosLike_:function(e){var t={x:ov(e,"x","zerosLike")};return Qp.runKernel(Td,t)}});var gb=uv({transpose_:function(e,t){var n=ov(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),Vc(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){Vc(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(n.rank-1)+" but got ".concat(t)}))})),n.rank<=1)return n.clone();var r={x:n},a={perm:t};return Qp.runKernel(Id,r,a)}});var yb=uv({dropout_:function(e,t,n,r){var a=ov(e,"x","dropout");if(Vc("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),Vc(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof Fp?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(qc(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,s=Qg(oy(lg(Ky(i,0,1,"float32",r),o)),o);return py(a,s)}});var bb=uv({imag_:function(e){var t={input:ov(e,"input","imag")};return Qp.runKernel(Kf,t)}});var xb=uv({real_:function(e){var t={input:ov(e,"input","real")};return Qp.runKernel(Lh,t)}});var kb=uv({fft_:function(e){Vc("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return Qp.runKernel(Lf,t)}});var wb=uv({rfft_:function(e,t){Vc("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=Qy(e,i,o),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=Pg([e,zy(s)],e.shape.length-1),r=t}else n=e;var u=mb(n),c=Rg(cv(n,u),[a,r]),l=kb(c),f=Math.floor(r/2)+1,h=xb(l),d=bb(l),p=ib(h,[f,r-f],h.shape.length-1),v=ib(d,[f,r-f],d.shape.length-1),m=n.shape.slice();return m[n.shape.length-1]=f,Rg(cv(p[0],v[0]),m)}});var Sb=uv({ifft_:function(e){Vc("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return Qp.runKernel(Hf,t)}});var Ib=uv({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=Rg(e,[r,n]);t=Sb(a)}else{var i=[r,2*(n-1)],o=Rg(xb(e),[r,n]),s=Rg(bb(e),[r,n]),u=Xy(Qy(o,[0,1],[r,n-2]),1),c=py(Xy(Qy(s,[0,1],[r,n-2]),1),sg(-1)),l=Pg([o,u],1),f=Pg([s,c],1),h=Rg(cv(l,f),[i[0],i[1]]);t=Sb(h)}if(t=xb(t),3===e.rank&&0!==e.shape[0]){var d=t,p=e.shape[0];t=Rg(t,[p,t.shape[0]/p,t.shape[1]]),d.dispose()}return t}});var Cb=uv({conv2DBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=Rg(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=Rg(t,[1,t.shape[0],t.shape[1],t.shape[2]])),Vc(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,".")})),Vc(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(u.shape,".")})),Vc(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var c="NHWC"===i?s.shape[3]:s.shape[1],l="NHWC"===i?u.shape[3]:u.shape[1];Vc(c===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(c,") must ")+"match input depth in filter (".concat(n[2],".")})),Vc(l===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(l,") must ")+"match output depth for filter (".concat(n[3],").")})),Ag("conv2dDerFilter",a,o);var f={x:s,dy:u},h={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return Qp.runKernel(of,f,h)}});var Nb=uv({relu6_:function(e){var t={x:ov(e,"x","relu6")};return Qp.runKernel(Vh,t)}});var Eb=uv({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=ov(e,"x","step"),r={x:n},a={alpha:t};return Qp.runKernel(Ad,r,a)}});function Tb(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return py(e,Eb(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function Ab(e,t){var n=t,r=Vm(e.shape,t.shape);return r.length>0&&(n=my(n,r)),Rg(n,e.shape)}function Rb(e,t,n,r){if("linear"===t)return e;if("relu"===t)return qy(e);if("elu"===t)return $g(e);if("relu6"===t)return Nb(e);if("prelu"===t)return Uy(e,n);if("leakyrelu"===t)return ly(e,r);if("sigmoid"===t)return Jy(e);throw new Error("Unknown fused activation ".concat(t,"."))}var Fb=function(e,t){return!(e>0)||"linear"===t};var Db=uv({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,c=e.dimRoundingMode,l=e.bias,f=e.activation,h=void 0===f?"linear":f,d=e.preluActivationWeights,p=e.leakyreluAlpha;if(h=h||"linear",!1===Fb(Qp.state.gradientDepth,h)){var v=jg(t,n,r,a,o,u,c);return null!=l&&(v=lg(v,l)),Rb(v,h,d,p)}var m=ov(t,"x","conv2d","float32"),g=ov(n,"filter","conv2d","float32"),y=m,b=!1;3===m.rank&&(b=!0,y=Rg(m,[1,m.shape[0],m.shape[1],m.shape[2]])),Vc(4===y.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(y.rank,".")})),Vc(4===g.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(g.rank,".")})),Ag("fused conv2d",a,c),Vc(y.shape[3]===g.shape[2],(function(){return"Error in conv2d: depth of input (".concat(y.shape[3],") must match ")+"input depth for filter ".concat(g.shape[2],".")})),Vc(Eg(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(u,"'")})),Vc("NHWC"===o,(function(){return"Error in conv2d: got dataFormat of ".concat(o," but only NHWC is currently supported.")}));var x,k,w=gg(y.shape,g.shape,r,u,a,c);if(null!=l){var S=Ke(Vp(x=ov(l,"bias","fused conv2d"),m),1);x=S[0],"NHWC"===o?jm(w.outShape,x.shape):(Vc(x.shape.length<=1,(function(){return"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(x.shape.length,".")})),Vc(0===x.shape.length||x.shape[0]===w.outChannels||1===x.shape[0],(function(){return"Error in fused conv2d: bias shape (".concat(x.shape,") is not ")+"compatible with the number of output channels "+"(".concat(w.outChannels,")")})))}null!=d&&(k=ov(d,"prelu weights","fused conv2d"));var I=function(e,t){var n=Ke(t,4),i=n[0],o=n[1],s=n[2],c=n[3],l=Tb(e,s,h);Vc(Ng(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(u,"'")}));var f=[Hg(o.shape,l,i,r,a),Cb(o,l,i.shape,r,a)];if(null!=c){var d=Ab(c,l);f.push(d)}return f},C={x:y,filter:g,bias:x,preluActivationWeights:k},N={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:c,activation:h,leakyreluAlpha:p};if(null==l){var E=og((function(e,t,n){var r=Qp.runKernel(Dd,C,N);return n([t,e,r]),b&&(r=Rg(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:I}}));return E(y,g)}var T=og((function(e,t,n,r){var a=Qp.runKernel(Dd,C,N);return r([t,e,a,n]),b&&(a=Rg(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:I}}));return T(y,g,x)}});var Ob=uv({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=Rg(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=Rg(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={x:s,dy:u},l={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return Qp.runKernel(bf,c,l)}});var Lb=uv({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=t,u=!1;3===t.rank&&(u=!0,s=Rg(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={dy:s,filter:n},l={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:e},f=Qp.runKernel(xf,c,l);return u?Rg(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});uv({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,c=e.dimRoundingMode,l=e.bias,f=e.activation,h=void 0===f?"linear":f,d=e.preluActivationWeights,p=e.leakyreluAlpha;if(!1===Fb(Qp.state.gradientDepth,h)){var v=Zg(t,n,r,a,o,u,c);return null!=l&&(v=lg(v,l)),Rb(v,h,d,p)}var m=ov(t,"x","depthwiseConv2d","float32"),g=ov(n,"filter","depthwiseConv2d","float32"),y=m,b=!1;3===m.rank&&(b=!0,y=Rg(m,[1,m.shape[0],m.shape[1],m.shape[2]])),Vc(4===y.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(y.rank,".")})),Vc(4===g.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(g.rank,".")})),Vc(y.shape[3]===g.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(y.shape[3],") must match the inChannels dimension in ")+"filter ".concat(g.shape[2],".")})),null==u&&(u=[1,1]),Vc(Eg(r,u),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(u,"'")})),Ag("fused depthwiseConv2d",a,c);var x,k,w=gg(y.shape,g.shape,r,u,a,c,!0);if(null!=l){var S=Ke(Vp(x=ov(l,"bias","fused conv2d"),m),1);x=S[0],jm(w.outShape,x.shape)}null!=d&&(k=ov(d,"prelu weights","fused depthwiseConv2d"));var I=function(e,t){Vc(Ng(u),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(u,"'")}));var n=Ke(t,4),i=n[0],o=n[1],s=n[2],l=n[3],f=Tb(e,s,h),d=Lb(o.shape,f,i,r,a,u,c),p=Ob(o,f,i.shape,r,a,u,c);return null!=l?[d,p,Ab(x,f)]:[d,p]},C={x:y,filter:g,bias:x,preluActivationWeights:k},N={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:c,activation:h,leakyreluAlpha:p};if(null==l){var E=og((function(e,t,n){var r=Qp.runKernel(Od,C,N);return n([t,e,r]),b&&(r=Rg(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:I}}));return E(y,g)}var T=og((function(e,t,n,r){var a=Qp.runKernel(Od,C,N);return r([t,e,a,n]),b&&(a=Rg(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:I}}));return T(y,g,x)}});var _b=uv({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,i=e.transposeB,o=void 0!==i&&i,s=e.bias,u=e.activation,c=void 0===u?"linear":u,l=e.preluActivationWeights,f=e.leakyreluAlpha;if(!1===Fb(Qp.state.gradientDepth,c)){var h=by(t,n,a,o);return null!=s&&(h=lg(h,s)),Rb(h,c,l,f)}var d=ov(t,"a","fused matMul"),p=ov(n,"b","fused matMul"),v=Ke(Vp(d,p),2);d=v[0],p=v[1];var m=a?d.shape[d.rank-2]:d.shape[d.rank-1],g=o?p.shape[p.rank-1]:p.shape[p.rank-2],y=a?d.shape[d.rank-1]:d.shape[d.rank-2],b=o?p.shape[p.rank-2]:p.shape[p.rank-1],x=d.shape.slice(0,-2),k=p.shape.slice(0,-2),w=Kc(x),S=Kc(k);Vc(m===g,(function(){return"Error in fused matMul: inner shapes (".concat(m,") and (")+"".concat(g,") of Tensors with shapes ").concat(d.shape," and ")+"".concat(p.shape," and transposeA=").concat(a)+" and transposeB=".concat(o," must match.")}));var I,C,N=jm(d.shape.slice(0,-2),p.shape.slice(0,-2)).concat([y,b]),E=Rg(d,a?[w,m,y]:[w,y,m]),T=Rg(p,o?[S,b,g]:[S,g,b]);null!=s&&(I=Ke(Vp(I=ov(s,"bias","fused matMul"),d),1)[0],jm(N,I.shape)),null!=l&&(C=ov(l,"prelu weights","fused matMul"));var A=function(e,t){var n,r,i=Ke(t,4),u=i[0],l=i[1],f=i[2],h=i[3],d=Tb(Rg(e,f.shape),f,c);return a||o?!a&&o?(n=by(d,l,!1,!1),r=by(d,u,!0,!1)):a&&!o?(n=by(l,d,!1,!0),r=by(u,d,!1,!1)):(n=by(l,d,!0,!0),r=by(d,u,!0,!0)):(n=by(d,l,!1,!0),r=by(u,d,!0,!1)),null!=s?[n,r,Ab(h,d)]:[n,r]},R={a:E,b:T,bias:I,preluActivationWeights:C},F={transposeA:a,transposeB:o,activation:c,leakyreluAlpha:f};if(null==s){var D=og((function(e,t,n){var r=Qp.runKernel(Fd,R,F);return n([e,t,r]),{value:Rg(r,N),gradFunc:A}}));return D(E,T)}var O=og((function(e,t,n,r){var a=Qp.runKernel(Fd,R,F);return r([e,t,a,n]),{value:Rg(a,N),gradFunc:A}}));return O(E,T,I)}});function Mb(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function zb(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return lb(a,"float32")}uv({hammingWindow_:function(e){return zb(e,.54,.46)}});var Pb=uv({hannWindow_:function(e){return zb(e,.5,.5)}});function Bb(e,t,n){if(Gc(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=rv(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return lv(e,t,r,n)}var Wb=uv({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push(Qy(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=Pg([Qy(e,i,t-s),iy([s],a)]);o.push(u),i+=n}return 0===o.length?Bb([],[0,t]):Rg(Pg(o),[o.length,t])}});uv({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Pb;null==r&&(r=Mb(t));var i=Wb(e,t,n),o=py(i,a(t));return wb(o,r)}});var Ub=uv({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=ov(e,"image","cropAndResize"),s=ov(t,"boxes","cropAndResize","float32"),u=ov(n,"boxInd","cropAndResize","int32"),c=s.shape[0];Vc(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),Vc(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(c,",4] ")+"but had shape ".concat(s.shape,".")})),Vc(1===u.rank&&u.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(c,"] ")+"but had shape ".concat(s.shape,".")})),Vc(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),Vc(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),Vc("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var l={image:o,boxes:s,boxInd:u},f={method:a,extrapolationValue:i,cropSize:r},h=Qp.runKernel(vf,l,f);return h}});var Vb=uv({flipLeftRight_:function(e){var t=ov(e,"image","flipLeftRight","float32");Vc(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return Qp.runKernel(Mf,n,{})}});var jb=uv({grayscaleToRGB_:function(e){var t=ov(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];Vc(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),Vc(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,ry(t,a)}});var Gb=uv({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=ov(e,"image","rotateWithOffset","float32");Vc(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var i={image:a},o={radians:t,fillValue:n,center:r},s=Qp.runKernel(Rd,i,o);return s}});function Hb(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),Vc(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),Vc(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),Vc(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),Vc(1===t.rank,(function(){return"scores must be a 1D tensor"})),Vc(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])})),Vc(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var Kb=uv({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=ov(e,"boxes","nonMaxSuppression","float32"),o=ov(t,"scores","nonMaxSuppression","float32"),s=Hb(i,o,n,r,a),u={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return Qp.runKernel(Sh,{boxes:i,scores:o},u)}});function qb(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,i=0,o=!1;for(;r<a;){var s=n(t,e[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(e,t,n||Xb)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function Xb(e,t){return e>t?1:e<t?-1:0}function Yb(e,t,n,r,a){return Qb(e,t,n,r,a,0)}function Zb(e,t,n,r,a,i){return Qb(e,t,n,r,a,0,!1,i,!0)}function Jb(e,t,n,r,a,i){return Qb(e,t,n,r,a,i,!0)}function Qb(e,t,n,r,a,i){for(var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=[],l=0;l<t.length;l++)t[l]>a&&c.push({score:t[l],boxIndex:l,suppressBeginIndex:0});c.sort(tx);for(var f=i>0?-.5/i:0,h=[],d=[];h.length<n&&c.length>0;){var p=c.pop(),v=p.score,m=p.boxIndex,g=p.suppressBeginIndex;if(v<a)break;for(var y=!1,b=h.length-1;b>=g;--b){var x=$b(e,m,h[b]);if(x>=r){y=!0;break}if(p.score=p.score*ex(r,f,x),p.score<=a)break}p.suppressBeginIndex=h.length,y||(p.score===v?(h.push(m),d.push(p.score)):p.score>a&&qb(c,p,tx))}var k=h.length,w=n-k;s&&w>0&&(h.push.apply(h,Et(new Array(w).fill(0))),d.push.apply(d,Et(new Array(w).fill(0))));var S={selectedIndices:h};return o&&(S.selectedScores=d),u&&(S.validOutputs=k),S}function $b(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),f=Math.max(a[0],a[2]),h=Math.max(a[1],a[3]),d=(s-i)*(u-o),p=(f-c)*(h-l);if(d<=0||p<=0)return 0;var v=Math.max(i,c),m=Math.max(o,l),g=Math.min(s,f),y=Math.min(u,h),b=Math.max(g-v,0)*Math.max(y-m,0);return b/(d+p-b)}function ex(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function tx(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function nx(){return nx=Ue(Xe().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h,d,p=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>3&&void 0!==p[3]?p[3]:.5,i=p.length>4&&void 0!==p[4]?p[4]:Number.NEGATIVE_INFINITY,o=ov(t,"boxes","nonMaxSuppressionAsync"),s=ov(n,"scores","nonMaxSuppressionAsync"),u=Hb(o,s,r,a,i),r=u.maxOutputSize,a=u.iouThreshold,i=u.scoreThreshold,e.next=10,Promise.all([o.data(),s.data()]);case 10:return c=e.sent,l=c[0],f=c[1],h=Yb(l,f,r,a,i),d=h.selectedIndices,o!==t&&o.dispose(),s!==n&&s.dispose(),e.abrupt("return",lb(d,"int32"));case 17:case"end":return e.stop()}}),e)}))),nx.apply(this,arguments)}var rx=function(e,t,n){return nx.apply(this,arguments)};var ax=uv({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=ov(e,"boxes","nonMaxSuppression"),s=ov(t,"scores","nonMaxSuppression"),u=Hb(o,s,n,r,a,i),c={boxes:o,scores:s},l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},f=Qp.runKernel(Ch,c,l);return{selectedIndices:f[0],selectedScores:f[1]}}});function ix(){return ix=Ue(Xe().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h,d,p,v,m=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.length>3&&void 0!==m[3]?m[3]:.5,i=m.length>4&&void 0!==m[4]?m[4]:Number.NEGATIVE_INFINITY,o=m.length>5&&void 0!==m[5]?m[5]:0,s=ov(t,"boxes","nonMaxSuppressionAsync"),u=ov(n,"scores","nonMaxSuppressionAsync"),c=Hb(s,u,r,a,i,o),r=c.maxOutputSize,a=c.iouThreshold,i=c.scoreThreshold,o=c.softNmsSigma,e.next=12,Promise.all([s.data(),u.data()]);case 12:return l=e.sent,f=l[0],h=l[1],d=Jb(f,h,r,a,i,o),p=d.selectedIndices,v=d.selectedScores,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:lb(p,"int32"),selectedScores:lb(v)});case 19:case"end":return e.stop()}}),e)}))),ix.apply(this,arguments)}var ox=function(e,t,n){return ix.apply(this,arguments)};var sx=uv({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=ov(e,"boxes","nonMaxSuppression"),s=ov(t,"scores","nonMaxSuppression"),u=Hb(o,s,n,r,a,null),c=u.maxOutputSize,l=u.iouThreshold,f=u.scoreThreshold,h={boxes:o,scores:s},d={maxOutputSize:c,iouThreshold:l,scoreThreshold:f,padToMaxOutputSize:i},p=Qp.runKernel(Ih,h,d);return{selectedIndices:p[0],validOutputs:p[1]}}});function ux(){return ux=Ue(Xe().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h,d,p,v,m,g,y,b,x=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x.length>3&&void 0!==x[3]?x[3]:.5,i=x.length>4&&void 0!==x[4]?x[4]:Number.NEGATIVE_INFINITY,o=x.length>5&&void 0!==x[5]&&x[5],s=ov(t,"boxes","nonMaxSuppressionAsync"),u=ov(n,"scores","nonMaxSuppressionAsync"),c=Hb(s,u,r,a,i,null),l=c.maxOutputSize,f=c.iouThreshold,h=c.scoreThreshold,e.next=11,Promise.all([s.data(),u.data()]);case 11:return d=e.sent,p=Ke(d,2),v=p[0],m=p[1],g=Zb(v,m,l,f,h,o),y=g.selectedIndices,b=g.validOutputs,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:lb(y,"int32"),validOutputs:sg(b,"int32")});case 19:case"end":return e.stop()}}),e)}))),ux.apply(this,arguments)}var cx=function(e,t,n){return ux.apply(this,arguments)};function lx(e){return Ve(e)||Nt(e)||Ge(e)||He()}var fx=uv({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=ov(e,"images","resizeBilinear");Vc(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),Vc(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),Vc(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=Rg(a,[1,a.shape[0],a.shape[1],a.shape[2]])),lx(t);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=Qp.runKernel(Wh,s,u);return o?Rg(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var hx=uv({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=ov(e,"images","resizeNearestNeighbor");Vc(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),Vc(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),Vc("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),Vc(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=Rg(a,[1,a.shape[0],a.shape[1],a.shape[2]])),lx(t);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=Qp.runKernel(Ph,s,u);return o?Rg(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var dx=uv({bincount_:function(e,t,n){var r=ov(e,"x","bincount"),a=ov(t,"weights","bincount");Vc("int32"===r.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)})),Vc(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),Vc(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,".")}));var i={x:r,weights:a},o={size:n};return Qp.runKernel(Zl,i,o)}});var px=uv({lessEqual_:function(e,t){var n=ov(e,"a","lessEqual","string_or_numeric"),r=ov(t,"b","lessEqual","string_or_numeric"),a=Ke(Vp(n,r),2);n=a[0],r=a[1],jm(n.shape,r.shape);var i={a:n,b:r};return Qp.runKernel(Qf,i)}});var vx=uv({round_:function(e){var t={x:ov(e,"x","round")};return Qp.runKernel(Gh,t)}});function mx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return Qp.runKernel(Oh,{},a)}function gx(e,t){for(var n,r,a,i,o,s,u=lb([-1]),c=lb([0]),l=lb([0]),f=0;f<e.size-1;f++){n=Qy(e,0,f+1),r=Qy(e,f+1),o=Qg(my(n),t),s=Qg(my(r),t);var h=my(py(n,mx(0,n.size)));a=Qg(h,my(n));var d=iy(r.shape,n.size),p=lg(mx(0,r.size),d),v=py(r,p);i=Qg(my(v),my(r));var m=vy(a,i),g=vy(a,i),y=py(o,s);l=py(py(y,m),g);var b=uy(l,c);c=vb(b,l,c),u=vb(b,lb([f]),u)}return u}var yx=uv({threshold_:function(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,u=ov(e,"image","threshold"),c=.2989,l=.587,f=.114,h=u.shape[0]*u.shape[1],d=py(lb([s]),255);if(Vc(3===u.rank,(function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(u.rank,".")})),Vc(3===u.shape[2]||1===u.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(u.shape[2],".")})),Vc("int32"===u.dtype||"float32"===u.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(u.dtype,".")})),Vc("otsu"===i||"binary"===i,(function(){return"Method must be binary or otsu, but was ".concat(i)})),3===u.shape[2]){var p=ib(u,[1,1,1],-1),v=Ke(p,3);t=v[0],n=v[1],r=v[2];var m=py(t,c),g=py(n,l),y=py(r,f);a=lg(lg(m,g),y)}else a=e;if("otsu"===i){var b=dx(ym(vx(a),"int32"),fv([]),256);d=gx(b,h)}var x=o?px(a,d):uy(a,d),k=ym(py(x,255),"int32");return k}});var bx=uv({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0,o=ov(e,"image","transform","float32"),s=ov(t,"transforms","transform","float32");Vc(4===o.rank,(function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),Vc(2===s.rank&&(s.shape[0]===o.shape[0]||1===s.shape[0])&&8===s.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),Vc(null==i||2===i.length,(function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(i,".")}));var u={image:o,transforms:s},c={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return Qp.runKernel(Sd,u,c)}});var xx=uv({bandPart_:function(e,t,n){Vc(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),Vc(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=ov(e,"a","bandPart");Vc(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,i=Ke(r.shape.slice(-2),2),o=i[0],s=i[1];if(!(t<=o))throw new Error("bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(o,")."));if(!(n<=s))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(s,")."));t<0&&(t=o),n<0&&(n=s);var u=Rg(mx(0,o,1,"int32"),[-1,1]),c=mx(0,s,1,"int32"),l=vy(u,c),f=yy(px(l,sg(+t,"int32")),cy(l,sg(-n,"int32"))),h=zy([o,s],r.dtype);return Rg(ub(hb(Rg(r,[-1,o,s])).map((function(e){return vb(f,e,h)}))),a)}});var kx=uv({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=ov(e,"x","min"),a={x:r},i={axis:t,keepDims:n};return Qp.runKernel(vh,a,i)}});var wx=uv({pow_:function(e,t){var n=ov(e,"base","pow"),r=ov(t,"exp","pow"),a=Ke(Vp(n,r),2),i={a:n=a[0],b:r=a[1]};return Qp.runKernel(Rh,i)}});function Sx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return cg(e);if(1!==e.rank&&null===n)return Sx(Rg(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return my(cg(e),n);if(t===1/0)return dy(cg(e),n);if(t===-1/0)return kx(cg(e),n);if("euclidean"===t||2===t)return ob(my(wx(cg(e),sg(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return dy(my(cg(e),n[0]),n[1]-1);if(t===1/0)return dy(my(cg(e),n[1]),n[0]);if(t===-1/0)return kx(my(cg(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return ob(my(Dy(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var Ix=uv({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Sx(e=ov(e,"x","norm"),t,n),i=a.shape;if(r){var o=$c(n,e.shape);i=Ey(a.shape,o)}return Rg(a,i)}});var Cx=uv({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,Vc(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){Vc(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}():(t=!0,e=ib(e,e.shape[0],0).map((function(e){return sb(e,[0])}))),Vc(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var n=[],r=e,a=function(e){n.push(Qp.tidy((function(){var t=r[e];if(e>0)for(var a=0;a<e;++a){var i=py(my(py(n[a],t)),n[a]);t=vy(t,i)}return Qg(t,Ix(t,"euclidean"))})))},i=0;i<e.length;++i)a(i);return t?ub(n,0):n}});function Nx(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Qp.tidy((function(){Vc(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=ay(n),i=bm(e),o=Bb([[1]],[1,1]),s=bm(o),u=n>=r?r:n,c=function(e){var t=i,u=s,c=a,l=Ke(Qp.tidy((function(){var t=Qy(i,[e,e],[n-e,1]),u=Ix(t),c=Qy(i,[e,e],[1,1]),l=vb(uy(c,0),Bb([[-1]]),Bb([[1]])),f=vy(c,py(l,u)),h=Qg(t,f);s=1===h.shape[0]?bm(o):Pg([o,Qy(h,[1,0],[h.shape[0]-1,h.shape[1]])],0);var d=Ly(Qg(by(l,f),u)),p=Qy(i,[e,0],[n-e,r]),v=py(d,s),m=gb(s);if(0===e)i=vy(p,by(v,by(m,p)));else{var g=vy(p,by(v,by(m,p)));i=Pg([Qy(i,[0,0],[e,r]),g],0)}var y=gb(v),b=Qy(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=vy(b,by(by(b,s),y));else{var x=vy(b,by(by(b,s),y));a=Pg([Qy(a,[0,0],[n,e]),x],1)}return[s,i,a]})),3);s=l[0],i=l[1],a=l[2],rg([t,u,c])},l=0;l<u;++l)c(l);return!t&&n>r&&(a=Qy(a,[0,0],[n,r]),i=Qy(i,[0,0],[r,r])),[a,i]}))}var Ex,Tx=uv({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Vc(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return Nx(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=hb(Rg(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach((function(e){var n=Ke(Nx(e,t),2),r=n[0],o=n[1];a.push(r),i.push(o)}));var o=Rg(ub(a,0),e.shape),s=Rg(ub(i,0),e.shape);return[o,s]}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Ex||(Ex={}));var Ax=uv({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ex.SUM_BY_NONZERO_WEIGHTS,r=ov(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=ov(t,"weights","computeWeightedLoss"));var i=null==a?r:py(r,a);if(n===Ex.NONE)return i;if(n===Ex.SUM)return my(i);if(n===Ex.MEAN){if(null==a)return Sy(i);var o=r.size/a.size,s=Qg(my(i),my(a));return o>1?Qg(s,sg(o)):s}if(n===Ex.SUM_BY_NONZERO_WEIGHTS){if(null==a)return Qg(my(i),sg(r.size));var u=py(a,Py(r.shape)),c=ym(my(_y(u,sg(0))),"float32");return Qg(my(i),c)}throw Error("Unknown reduction: ".concat(n))}});uv({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ex.SUM_BY_NONZERO_WEIGHTS,a=ov(e,"labels","absoluteDifference"),i=ov(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=ov(n,"weights","absoluteDifference")),jc(a.shape,i.shape,"Error in absoluteDifference: ");var s=cg(vy(a,i));return Ax(s,o,r)}});uv({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ex.SUM_BY_NONZERO_WEIGHTS,i=ov(e,"labels","cosineDistance"),o=ov(t,"predictions","cosineDistance"),s=null;null!=r&&(s=ov(r,"weights","cosineDistance")),jc(i.shape,o.shape,"Error in cosineDistance: ");var u=sg(1),c=vy(u,my(py(i,o),n,!0));return Ax(c,s,a)}});uv({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ex.SUM_BY_NONZERO_WEIGHTS,a=ov(e,"labels","hingeLoss"),i=ov(t,"predictions","hingeLoss"),o=null;null!=n&&(o=ov(n,"weights","hingeLoss")),jc(a.shape,i.shape,"Error in hingeLoss: ");var s=sg(1);a=vy(py(sg(2),a),s);var u=qy(vy(s,py(a,i)));return Ax(u,o,r)}});uv({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ex.SUM_BY_NONZERO_WEIGHTS,i=ov(e,"labels","huberLoss"),o=ov(t,"predictions","huberLoss"),s=null;null!=n&&(s=ov(n,"weights","huberLoss")),jc(i.shape,o.shape,"Error in huberLoss: ");var u=sg(r),c=cg(vy(o,i)),l=Iy(c,u),f=vy(c,l),h=lg(py(sg(.5),Dy(l)),py(u,f));return Ax(h,s,a)}});uv({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ex.SUM_BY_NONZERO_WEIGHTS,i=ov(e,"labels","logLoss"),o=ov(t,"predictions","logLoss"),s=null;null!=n&&(s=ov(n,"weights","logLoss")),jc(i.shape,o.shape,"Error in logLoss: ");var u=sg(1),c=sg(r),l=Ly(py(i,fy(lg(o,c)))),f=py(vy(u,i),fy(lg(vy(u,o),c))),h=vy(l,f);return Ax(h,s,a)}});var Rx=uv({squaredDifference_:function(e,t){var n=ov(e,"a","squaredDifference"),r=ov(t,"b","squaredDifference"),a=Ke(Vp(n,r),2);n=a[0],r=a[1],jm(n.shape,r.shape);var i={a:n,b:r};return Qp.runKernel(hd,i,{})}});uv({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ex.SUM_BY_NONZERO_WEIGHTS,a=ov(e,"labels","meanSquaredError"),i=ov(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=ov(n,"weights","meanSquaredError")),jc(a.shape,i.shape,"Error in meanSquaredError: ");var s=Rx(a,i);return Ax(s,o,r)}});function Fx(e,t){var n=ov(e,"labels","sigmoidCrossEntropyWithLogits"),r=ov(t,"logits","sigmoidCrossEntropyWithLogits");jc(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=qy(r),i=py(r,n),o=hy(ty(Ly(cg(r))));return lg(vy(a,i),o)}uv({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ex.SUM_BY_NONZERO_WEIGHTS,i=ov(e,"multiClassLabels","sigmoidCrossEntropy"),o=ov(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=ov(n,"weights","sigmoidCrossEntropy")),jc(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=sg(r),c=sg(1),l=sg(.5);i=lg(py(i,vy(c,u)),py(l,u))}var f=Fx(i,o);return Ax(f,s,a)}});var Dx=uv({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=ov(e,"x","logSumExp"),a=$c(t,r.shape),i=dy(r,a,!0),o=vy(r,i),s=ty(o),u=my(s,a),c=fy(u),l=lg(Rg(i,c.shape),c);if(n){var f=Ey(l.shape,a);return Rg(l,f)}return l}});function Ox(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=og((function(e,t,r){var a=Dx(t,[n],!0),i=vy(ym(t,"float32"),a);r([e,i]);var o=Ly(py(i,e));return{value:my(o,[n]),gradFunc:function(e,t){var r=Ke(t,2),a=r[0],i=r[1],o=Ey(e.shape,[n]);return[py(Rg(e,o),vy(ym(a,"float32"),ty(i))),py(Rg(e,o),vy(ty(i),ym(a,"float32")))]}}}));return r(e,t)}uv({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ex.SUM_BY_NONZERO_WEIGHTS,i=ov(e,"onehotLabels","softmaxCrossEntropy"),o=ov(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=ov(n,"weights","softmaxCrossEntropy")),jc(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=sg(r),c=sg(1),l=sg(i.shape[1]);i=lg(py(i,vy(c,u)),Qg(u,l))}var f=Ox(i,o);return Ax(f,s,a)}});uv({sparseFillEmptyRows_:function(e,t,n,r){var a=ov(e,"indices","sparseFillEmptyRows","int32"),i=ov(t,"values","sparseFillEmptyRows"),o=ov(n,"denseShape","sparseFillEmptyRows","int32"),s=ov(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==i.rank)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(1!==o.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(o.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));var u={indices:a,values:i,denseShape:o,defaultValue:s},c=Qp.runKernel(sd,u);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}});uv({sparseReshape_:function(e,t,n){var r=ov(e,"inputIndices","sparseReshape","int32"),a=ov(t,"inputShape","sparseReshape","int32"),i=ov(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==i.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));var o={inputIndices:r,inputShape:a,newShape:i},s=Qp.runKernel(ud,o);return{outputIndices:s[0],outputShape:s[1]}}});uv({sparseSegmentMean_:function(e,t,n){var r=ov(e,"data","sparseSegmentMean"),a=ov(t,"indices","sparseSegmentMean","int32"),i=ov(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return Qp.runKernel(cd,o)}});uv({sparseSegmentSum_:function(e,t,n){var r=ov(e,"data","sparseSegmentSum"),a=ov(t,"indices","sparseSegmentSum","int32"),i=ov(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return Qp.runKernel(ld,o)}});uv({stringNGrams_:function(e,t,n,r,a,i,o,s){var u=ov(e,"data","stringNGrams","string");if("string"!==u.dtype)throw new Error("Data must be of datatype string");if(1!==u.shape.length)throw new Error("Data must be a vector, saw: ".concat(u.shape));var c=ov(t,"dataSplits","stringNGrams");if("int32"!==c.dtype)throw new Error("Data splits must be of datatype int32");var l={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},f={data:u,dataSplits:c},h=Qp.runKernel(vd,f,l);return{nGrams:h[0],nGramsSplits:h[1]}}});uv({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=ov(e,"input","stringSplit","string"),a=ov(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var i={skipEmpty:n},o={input:r,delimiter:a},s=Qp.runKernel(md,o,i);return{indices:s[0],values:s[1],shape:s[2]}}});uv({stringToHashBucketFast_:function(e,t){var n=ov(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return Qp.runKernel(gd,a,r)}});var Lx={flipLeftRight:Vb,grayscaleToRGB:jb,resizeNearestNeighbor:hx,resizeBilinear:fx,rotateWithOffset:Gb,cropAndResize:Ub,nonMaxSuppression:Kb,nonMaxSuppressionAsync:rx,nonMaxSuppressionWithScore:ax,nonMaxSuppressionWithScoreAsync:ox,nonMaxSuppressionPadded:sx,nonMaxSuppressionPaddedAsync:cx,threshold:yx,transform:bx},_x={bandPart:xx,gramSchmidt:Cx,qr:Tx},Mx=function(e){mp(n,e);var t=wp(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Fc(this,n),(a=t.call(this)).learningRate=e,a.rho=r,a.epsilon=i,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==i&&(a.epsilon=Qp.backend.epsilon()),a}return Oc(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Qp.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:ng((function(){return mb(a).variable(false)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:ng((function(){return mb(a).variable(false)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;ng((function(){var e=lg(py(o,t.rho),py(Dy(i),1-t.rho)),n=py(Qg(ob(lg(s,t.epsilon)),ob(lg(o,t.epsilon))),i),r=lg(py(s,t.rho),py(Dy(n),1-t.rho));o.assign(e),s.assign(r);var u=lg(py(n,-t.learningRate),a);a.assign(u)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&(rg(this.accumulatedGrads.map((function(e){return e.variable}))),rg(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:function(){var e=Ue(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(Et(this.accumulatedGrads),Et(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Ue(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,!1,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),n}(ug);Mx.className="Adadelta",$m(Mx);var zx=function(e){mp(n,e);var t=wp(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return Fc(this,n),(r=t.call(this)).learningRate=e,r.initialAccumulatorValue=a,r.accumulatedGrads=[],r}return Oc(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Qp.registeredVariables[n];if(null==t.accumulatedGrads[r]){t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:ng((function(){return iy(a.shape,t.initialAccumulatorValue).variable(false)}))}}var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable;ng((function(){var e=lg(o,Dy(i));o.assign(e);var n=lg(py(Qg(i,ob(lg(e,Qp.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&rg(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Ue(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Ue(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),n}(ug);zx.className="Adagrad",$m(zx);var Px=function(e){mp(n,e);var t=wp(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Fc(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],ng((function(){i.accBeta1=sg(r).variable(),i.accBeta2=sg(a).variable()})),null==o&&(i.epsilon=Qp.backend.epsilon()),i}return Oc(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);ng((function(){var r=vy(1,t.accBeta1),a=vy(1,t.accBeta2);n.forEach((function(n,i){var o=Qp.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:ng((function(){return mb(o).variable(false)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:"".concat(n,"/v"),variable:ng((function(){return mb(o).variable(false)}))});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,c=t.accumulatedSecondMoment[i].variable,l=lg(py(u,t.beta1),py(s,1-t.beta1)),f=lg(py(c,t.beta2),py(Dy(s),1-t.beta2)),h=Qg(l,r),d=Qg(f,a);u.assign(l),c.assign(f);var p=lg(py(Qg(h,lg(ob(d),t.epsilon)),-t.learningRate),o);o.assign(p)}})),t.accBeta1.assign(py(t.accBeta1,t.beta1)),t.accBeta2.assign(py(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&rg(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&rg(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Ue(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(Et(this.accumulatedFirstMoment),Et(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Ue(Xe().mark((function e(t){var n,r=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,ng((function(){r.accBeta1.assign(wx(r.beta1,r.iterations_+1)),r.accBeta2.assign(wx(r.beta2,r.iterations_+1))})),n=t.length/2,!1,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),n}(ug);Px.className="Adam",$m(Px);var Bx=function(e){mp(n,e);var t=wp(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return Fc(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.decay=s,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],ng((function(){i.iteration=sg(0).variable(),i.accBeta1=sg(r).variable()})),null==o&&(i.epsilon=Qp.backend.epsilon()),i}return Oc(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);ng((function(){var r=vy(1,t.accBeta1),a=Qg(-t.learningRate,lg(py(t.iteration,t.decay),1));n.forEach((function(n,i){var o=Qp.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:mb(o).variable(false)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:"".concat(n,"/v"),variable:mb(o).variable(false)});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,c=t.accumulatedWeightedInfNorm[i].variable,l=lg(py(u,t.beta1),py(s,1-t.beta1)),f=py(c,t.beta2),h=cg(s),d=wy(f,h);u.assign(l),c.assign(d);var p=lg(py(Qg(a,r),Qg(l,lg(d,t.epsilon))),o);o.assign(p)}})),t.iteration.assign(lg(t.iteration,1)),t.accBeta1.assign(py(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&rg(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&rg(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Ue(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Ue(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),n}(ug);Bx.className="Adamax",$m(Bx);var Wx=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this)).learningRate=e,r.setLearningRate(e),r}return Oc(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);n.forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=Qp.registeredVariables[n];ng((function(){var e=lg(py(t.c,a),i);i.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=ag(sg(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:function(){var e=Ue(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Ue(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),n}(ug);Wx.className="SGD",$m(Wx);var Ux=function(e){mp(n,e);var t=wp(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Fc(this,n),(a=t.call(this,e)).learningRate=e,a.momentum=r,a.useNesterov=i,a.accumulations=[],a.m=sg(a.momentum),a}return Oc(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Qp.registeredVariables[n];if(null==t.accumulations[r]){t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:ng((function(){return mb(a).variable(false)}))}}var i=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&ng((function(){var e,n=lg(py(t.m,i),o);e=t.useNesterov?lg(py(t.c,lg(o,py(n,t.m))),a):lg(py(t.c,n),a),i.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&rg(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:function(){var e=Ue(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Ue(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),n}(Wx);Ux.className="Momentum",$m(Ux);var Vx=function(e){mp(n,e);var t=wp(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Fc(this,n),(r=t.call(this)).learningRate=e,r.decay=a,r.momentum=i,r.epsilon=o,r.accumulatedMeanSquares=[],r.accumulatedMoments=[],r.accumulatedMeanGrads=[],r.centered=s,null==o&&(r.epsilon=Qp.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return r}return Oc(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Qp.registeredVariables[n],i=!1;null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:ng((function(){return mb(a).variable(i)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:ng((function(){return mb(a).variable(i)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:ng((function(){return mb(a).variable(i)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var s=t.accumulatedMeanSquares[r].variable,u=t.accumulatedMoments[r].variable;ng((function(){var e=lg(py(s,t.decay),py(Dy(o),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,i=lg(py(n,t.decay),py(o,1-t.decay)),c=Qg(py(o,t.learningRate),ob(vy(e,lg(Dy(i),t.epsilon)))),l=lg(py(u,t.momentum),c);s.assign(e),n.assign(i),u.assign(l);var f=vy(a,l);a.assign(f)}else{var h=lg(py(s,t.decay),py(Dy(o),1-t.decay)),d=lg(py(u,t.momentum),Qg(py(o,t.learningRate),ob(lg(h,t.epsilon))));s.assign(h),u.assign(d);var p=vy(a,d);a.assign(p)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&rg(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&rg(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&rg(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Ue(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(Et(this.accumulatedMeanSquares),Et(this.accumulatedMoments)),this.centered&&t.push.apply(t,Et(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Ue(Xe().mark((function e(t){var n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,r=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),n}(ug);Vx.className="RMSProp",$m(Vx);var jx=function(){function e(){Fc(this,e)}return Oc(e,null,[{key:"sgd",value:function(e){return new Wx(e)}},{key:"momentum",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Ux(e,t,n)}},{key:"rmsprop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Vx(e,t,n,r,a)}},{key:"adam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Px(e,t,n,r)}},{key:"adadelta",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Mx(e,t,n)}},{key:"adamax",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new Bx(e,t,n,r,a)}},{key:"adagrad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return new zx(e,t)}}]),e}(),Gx={sgd:jx.sgd,momentum:jx.momentum,adadelta:jx.adadelta,adagrad:jx.adagrad,rmsprop:jx.rmsprop,adamax:jx.adamax,adam:jx.adam},Hx="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:function(e){return e()};function Kx(){return new Promise((function(e){return Hx((function(){return e()}))}))}function qx(e,t){var n=e[0].length;e.forEach((function(e,t){Vc(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),Vc(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)Vc(i===t||e[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}function Xx(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function Yx(e){return e<=30?e:ll(e,Math.floor(Math.sqrt(e)))}function Zx(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function Jx(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function Qx(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var i=[],o=[],s=1;s<e;++s)s>=2*t+1||s%2===1?o.push(s):i.push(s);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function $x(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function ek(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function tk(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}function nk(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===Kc(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,i=a[a.length-1],o=1,s=0;s<a.length-1;++s)o*=a[s];var u=e.shape,c=a.slice();c.pop();for(var l=1,f=i;f<n;++f)l*=u[f],c.push(u[f]);var h=[].concat(Et(fl(e.shape).map((function(e){return e/l}))),[1]).slice(0,i);return[c,o,l,h]}function rk(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:Kc(t.shape)/u,sliceSize:o,strides:[].concat(Et(fl(n.slice(0,a))),[1]),outputSize:Kc(n)}}var ak=1.7580993408473768,ik=1.0507009873554805,ok=.3275911,sk=.254829592,uk=-.284496736,ck=1.421413741,lk=-1.453152027,fk=1.061405429;function hk(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function dk(e,t){return{real:e[2*t],imag:e[2*t+1]}}function pk(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function vk(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var mk="->",gk=/->/g;function yk(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(gk,"").length)/mk.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(mk,'").'));var r=Ke(e.split(mk),2),a=r[0],i=r[1];Vc(-1===a.indexOf("..."),(function(){return'The ellipsis notation ("'.concat("...",'") is not supported yet.')}));var o=a.split(","),s=o.length;if(t!==s)throw new Error("Expected ".concat(s," input tensors, received ").concat(t));if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var u=[],c=function(e){var t=i[e];if(!o.some((function(e){return-1!==e.indexOf(t)})))throw new Error("Output subscripts contain the label ".concat(t," ")+"not present in the input subscripts.");-1===u.indexOf(t)&&u.push(t)},l=0;l<i.length;++l)c(l);for(var f=0;f<a.length;++f){var h=a[f];-1===u.indexOf(h)&&","!==h&&u.push(h)}for(var d=new Array(o.length),p=0;p<s;++p){if(new Set(o[p].split("")).size!==o[p].length)throw new Error("Found duplicate axes in input component ".concat(o[p],". ")+"Support for duplicate axes in input is not implemented yet.");d[p]=[];for(var v=0;v<o[p].length;++v)d[p].push(u.indexOf(o[p][v]))}for(var m=u.length,g=[],y=i.length;y<m;++y)g.push(y);return{allDims:u,summedDims:g,idDims:d}}function bk(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],i=0;i<e;++i)-1===n[i]&&a.push(i);return{permutationIndices:n=n.filter((function(e){return-1!==e})),expandDims:a}}function xk(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,i=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:Vc(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(a),", ")+"but got dimension ".concat(a[n])}))},o=0;o<t[e].length;++o)i(o)},i=0;i<n.length;++i)a(i)}function kk(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var i=0;i<n;++i)a.push([]);for(var o=[],s=0;s<r.length;++s){var u,c=Rc(Sk(t,r[s]));try{for(c.s();!(u=c.n()).done;){var l=u.value;-1===o.indexOf(l)&&(a[s].push(l),o.push(l))}}catch(eq){c.e(eq)}finally{c.f()}}return{path:r,steps:a}}function wk(e){return e.every((function(e,t){return e===t}))}function Sk(e,t){for(var n=[],r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function Ik(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)Vc(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);Vc(a<=1,(function(){return"There should be only one negative value in split array."}));var i=t.indexOf(-1);if(-1!==i){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[i]=e.shape[n]-o}Vc(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function Ck(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function Nk(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function Ek(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function Tk(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var s=e.shape[n],u=[],c=1,l=1,f=1,h=0;h<r;++h)u.push(e.shape[h]),c*=e.shape[h];for(var d=r;d<n;d++)u.push(e.shape[d]),l*=e.shape[d];for(var p=r;p<a;p++)u.push(t.shape[p]);for(var v=n+1;v<i;v++)u.push(e.shape[v]),f*=e.shape[v];return{batchSize:c,sliceSize:f,outerSize:l,dimSize:s,outputShape:u}}function Ak(e){try{return e.map((function(e){return lp(e)}))}catch(eq){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(eq))}}function Rk(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=gm(e,"int32"),i=gm([n.length,e.length],"int32"),o=0;o<n.length;o++){var s=a.indexToLoc(n[o]),u=o*e.length;i.values.set(s,u)}return i.toTensor()}var Fk={kernelName:Rl,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){return py(e,Eb(ym(n,"float32"),-1))}}}},Dk={kernelName:Fl,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){var t=Dy(ym(n,"float32")),r=ob(vy(sg(1),t));return Ly(Qg(e,r))}}}},Ok={kernelName:Dl,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){var t=ob(vy(Dy(ym(n,"float32")),1));return Qg(e,t)}}}},Lk={kernelName:Ol,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Ke(t,2),r=n[0],a=n[1],i=jm(r.shape,a.shape);return{a:function(){var t=e,n=Vm(r.shape,i);return n.length>0&&(t=my(t,n)),Rg(t,r.shape)},b:function(){var t=e,n=Vm(a.shape,i);return n.length>0&&(t=my(t,n)),Rg(t,a.shape)}}}},_k={kernelName:Ll,saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},Mk={kernelName:zl,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){return mb(n)}}}},zk={kernelName:Pl,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){return mb(n)}}}},Pk={kernelName:Bl,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){return Qg(e,ob(vy(sg(1),Dy(ym(n,"float32")))))}}}},Bk={kernelName:Wl,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){var t=ob(lg(sg(1),Dy(ym(n,"float32"))));return Qg(e,t)}}}},Wk={kernelName:jl,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Ke(t,2),r=n[0],a=n[1],i=jm(r.shape,a.shape);return{a:function(){var t=lg(Dy(r),Dy(a)),n=py(e,Qg(a,t)),o=Vm(r.shape,i);return o.length>0&&(n=my(n,o)),Rg(n,r.shape)},b:function(){var t=lg(Dy(r),Dy(a)),n=Ly(py(e,Qg(r,t))),o=Vm(a.shape,i);return o.length>0&&(n=my(n,o)),Rg(n,a.shape)}}}},Uk={kernelName:Ul,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){return Qg(e,lg(Dy(ym(n,"float32")),1))}}}},Vk={kernelName:Vl,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){return Qg(e,vy(sg(1),Dy(ym(n,"float32"))))}}}};var jk=uv({avgPool3dGrad_:function(e,t,n,r,a,i){var o=ov(e,"dy","avgPool3dGrad"),s=ov(t,"input","avgPool3dGrad"),u=o,c=s,l=!1;4===s.rank&&(l=!0,u=Rg(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=Rg(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Vc(5===u.rank,(function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,".")})),Vc(5===c.rank,(function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(c.rank,".")})),Ag("avgPool3dGrad",a,i);var f={dy:u,input:c},h={filterSize:n,strides:r,pad:a,dimRoundingMode:i},d=Qp.runKernel(ql,f,h);return l?Rg(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}}),Gk={kernelName:Kl,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Ke(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad,s=n.dimRoundingMode;return{x:function(){return jk(e,r,a,i,o,s)}}}};var Hk=uv({avgPoolGrad_:function(e,t,n,r,a){var i=ov(e,"dy","avgPoolGrad"),o=ov(t,"input","avgPoolGrad");Vc(o.rank===i.rank,(function(){return"Rank of input (".concat(o.rank,") does not match rank of dy (").concat(i.rank,")")}));var s=o,u=i,c=!1;3===o.rank&&(c=!0,s=Rg(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=Rg(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Vc(4===u.rank,(function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(u.rank,".")})),Vc(4===s.rank,(function(){return"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(s.rank,".")}));var l={dy:u,input:s},f={filterSize:n,strides:r,pad:a},h=Qp.runKernel(Hl,l,f);return c?Rg(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),Kk={kernelName:Gl,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Ke(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad;return{x:function(){return Hk(e,r,a,i,o)}}}},qk={kernelName:Xl,inputsToSave:["a","b"],gradFunc:function(e,t,n){var r=Ke(t,2),a=r[0],i=r[1],o=n.transposeA,s=n.transposeB;return o||s?!o&&s?{a:function(){return by(e,i,!1,!1)},b:function(){return by(e,a,!0,!1)}}:o&&!s?{a:function(){return by(i,e,!1,!0)},b:function(){return by(a,e,!1,!1)}}:{a:function(){return by(i,e,!0,!0)},b:function(){return by(e,a,!0,!0)}}:{a:function(){return by(e,i,!1,!0)},b:function(){return by(a,e,!0,!1)}}}};var Xk=uv({spaceToBatchND_:function(e,t,n){var r=ov(e,"x","spaceToBatchND");Vc(r.rank>=1+t.length,(function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)})),Vc(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),Vc(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var a={x:r},i={blockShape:t,paddings:n};return Qp.runKernel(ad,a,i)}}),Yk={kernelName:Yl,gradFunc:function(e,t,n){var r=n.blockShape,a=n.crops;return{x:function(){return Xk(e,r,a)}}}},Zk={kernelName:"BroadcastTo",gradFunc:function(e,t,n){for(var r=n,a=r.inputShape,i=r.shape,o=Array.from(i),s=a.length-1;s>=0;s--)if(a[s]===i[s])o[s]=1;else if(1!==a[s])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(i,"]."));for(var u=[],c=0;c<o.length;c++)o[c]>1&&u.push(c);return{x:function(){return my(e,u,!0)}}}},Jk={kernelName:Ql,gradFunc:function(e){return{x:function(){return e.clone()}}}},Qk={kernelName:$l,gradFunc:function(e){return{x:function(){return mb(e)}}}},$k={kernelName:ef,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Ke(t,1)[0],a=n.clipValueMin,i=n.clipValueMax;return{x:function(){return vb(yy(cy(r,a),px(r,i)),e,mb(e))}}}},ew={kernelName:nf,inputsToSave:["x"],gradFunc:Fk.gradFunc},tw={kernelName:rf,saveAllInputs:!0,gradFunc:function(e,t,n){var r=t.map((function(e){return e.shape})),a=$c(n.axis,t[0].shape)[0],i=r.map((function(e){return e[a]}));return ib(e,i,a).map((function(e){return function(){return e}}))}},nw={kernelName:af,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=Ke(t,2),a=r[0],i=r[1],o=n.dilations,s=n.strides,u=n.pad,c=n.dataFormat;return Vc(Ng(o),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(o,"'")})),{x:function(){return Hg(a.shape,e,i,s,u,c)},filter:function(){return Cb(a,e,i.shape,s,u,c)}}}},rw={kernelName:sf,inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var r=Ke(t,2),a=r[0],i=r[1],o=n.strides,s=n.pad,u=n.dataFormat,c=n.dimRoundingMode;return{dy:function(){return jg(e,i,o,s,u,1,c)},filter:function(){return Cb(e,a,i.shape,o,s,u,c)}}}};var aw=uv({conv3DBackpropFilter_:function(e,t,n,r,a){var i=e;4===e.rank&&(i=Rg(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var o=t;4===o.rank&&(o=Rg(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),Vc(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(i.shape,".")})),Vc(5===o.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(o.shape,".")})),Vc(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")})),Vc(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")})),Vc(o.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy (".concat(o.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")}));var s={x:i,dy:o},u={strides:r,pad:a,filterShape:n};return Qp.runKernel(cf,s,u)}}),iw={kernelName:uf,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad;Vc(Ng(r),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'")}));var o=Ke(t,2),s=o[0],u=o[1];return{x:function(){return Xg(s.shape,e,u,a,i)},filter:function(){return aw(s,e,u.shape,a,i)}}}};var ow=uv({sin_:function(e){var t={x:ov(e,"x","sin","float32")};return Qp.runKernel(Jh,t)}}),sw={kernelName:ff,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){return py(Ly(ow(ym(n,"float32"))),e)}}}};var uw=uv({sinh_:function(e){var t={x:ov(e,"x","sinh")};return Qp.runKernel(Qh,t)}}),cw={kernelName:hf,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){return py(uw(ym(n,"float32")),e)}}}};var lw=uv({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=ov(e,"x","cumsum"),i={x:a},o={axis:t,exclusive:n,reverse:r};return Qp.runKernel(pf,i,o)}}),fw={kernelName:pf,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Ke(t,1)[0],a=n.axis,i=n.exclusive,o=n.reverse;return{x:function(){var t=Ay([a],r.rank),n=lw(e,a,i,!o);return null!=t&&(n=gb(n,t)),n}}}},hw={kernelName:yf,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad,o=n.dimRoundingMode,s=null==r?[1,1]:r;Vc(Ng(s),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(s,"'")}));var u=Ke(t,2),c=u[0],l=u[1];return Vc(4===c.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(c.rank,".")})),Vc(4===l.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(l.rank,".")})),Vc(c.shape[3]===l.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(c.shape[3],") must match the inChannels dimension ")+"in filter ".concat(l.shape[2],".")})),Vc(Eg(a,s),(function(){return"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(a," and dilations ")+"'".concat(s,"'.")})),Ag("depthwiseConv2d",i,o),{x:function(){return Lb(c.shape,e,l,a,i,s,o)},filter:function(){return Ob(c,e,l.shape,a,i,s,o)}}}},dw={kernelName:wf,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=Ke(t,2),a=r[0],i=r[1],o={x:a,filter:i,dy:e},s={x:a,filter:i,dy:e};return{x:function(){return Qp.runKernel(Sf,o,n)},filter:function(){return Qp.runKernel(If,s,n)}}}},pw={kernelName:Ef,outputsToSave:[!0],gradFunc:function(e,t){var n={dy:e,y:Ke(t,1)[0]};return{x:function(){return Qp.runKernel(Tf,n)}}}},vw={kernelName:Af,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0],r=py(ty(Ly(Dy(n))),2/Math.sqrt(Math.PI));return{x:function(){return py(e,r)}}}},mw={kernelName:Ff,outputsToSave:[!0],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){return py(e,n)}}}},gw={kernelName:Df,inputsToSave:["input"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{input:function(){return Rg(e,n.shape)}}}},yw={kernelName:Of,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){return py(e,ty(n))}}}},bw={kernelName:zf,gradFunc:function(e){return{x:function(){return mb(e)}}}},xw={kernelName:Pf,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Ke(t,2),r=n[0],a=n[1],i=jm(r.shape,a.shape);return{a:function(){var t=Qg(e,ym(a,"float32")),n=Vm(r.shape,i);return n.length>0?Rg(my(t,n),r.shape):t},b:function(){var t=py(e,ym(r,"float32")),n=Vm(a.shape,i);n.length>0&&(t=Rg(my(t,n),a.shape));var o=Dy(a);return Ly(Qg(t,ym(o,"float32")))}}}};var kw=uv({rsqrt_:function(e){var t={x:ov(e,"x","rsqrt","float32")};return Qp.runKernel(Hh,t)}}),ww={kernelName:Bf,inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,a=Ke(t,4),i=a[0],o=a[1],s=a[2],u=a[3],c=null==u?sg(1):u,l=Vm(o.shape,i.shape),f=[];if(1===o.rank){for(var h=0;h<i.shape.length-1;++h)f.push(i.shape[h]);f.push(1)}var d=vy(i,o),p=py(e,c),v=kw(lg(s,sg(r))),m=py(py(py(v,v),v),sg(-.5));return{x:function(){return 1===o.rank?Rg(py(py(e,ry(Rg(v,[1,1,1,o.shape[0]]),f)),c),i.shape):Rg(py(py(e,v),c),i.shape)},mean:function(){var e=py(py(v,sg(-1)),p);return 1===o.rank&&(e=my(e,l)),Rg(e,o.shape)},variance:function(){var e=py(py(m,d),p);return 1===o.rank&&(e=my(e,l)),Rg(e,o.shape)},scale:function(){var t=py(d,v),n=py(e,t);return 1===o.rank&&(n=my(n,l)),Rg(n,o.shape)},offset:function(){var t=e;return 1===o.rank&&(t=my(t,l)),Rg(t,o.shape)}}}};var Sw=uv({unsortedSegmentSum_:function(e,t,n){var r=ov(e,"x","unsortedSegmentSum"),a=ov(t,"segmentIds","unsortedSegmentSum","int32");Vc(Xc(n),(function(){return"numSegments must be of dtype int"}));var i={x:r,segmentIds:a},o={numSegments:n};return Qp.runKernel(Ed,i,o)}}),Iw={kernelName:Wf,inputsToSave:["x","indices"],gradFunc:function(e,t,n){var r=Ke(t,2),a=r[0],i=r[1],o=n.axis,s=$c(o,a.shape)[0];return{x:function(){var t=a.shape,n=i.size,r=t.slice(0,s),u=r.length,c=t.slice(o,t.length).slice(1),l=c.length,f=Cw(0,u),h=Cw(u+1,u+1+l),d=Nw([r,[n],c]),p=Rg(e,d),v=Rg(i,[n]),m=Nw([[u],f,h]),g=gb(p,m),y=Sw(g,v,a.shape[s]),b=Ry(m);return y=gb(y,b)},indices:function(){return i}}}};function Cw(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function Nw(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var Ew={kernelName:jf,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Ke(t,2),r=n[0],a=n[1];return{a:function(){return mb(r)},b:function(){return mb(a)}}}},Tw={kernelName:Gf,gradFunc:function(e){return{x:function(){return ym(e,"float32")}}}},Aw={kernelName:qf,gradFunc:function(e){return{x:function(){return mb(e)}}}},Rw={kernelName:Xf,gradFunc:function(e){return{x:function(){return mb(e)}}}},Fw={kernelName:Yf,gradFunc:function(e){return{x:function(){return mb(e)}}}},Dw={kernelName:Zf,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Ke(t,1)[0],a=n.alpha,i=uy(r,0);return{x:function(){return vb(i,e,py(e,a))}}}},Ow={kernelName:th,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){return Qg(e,lg(n,1))}}}},Lw={kernelName:eh,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){return Qg(e,ym(n,"float32"))}}}},_w={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:function(e,t,n){var r=Ke(t,1)[0],a=n.axis;return{logits:function(){var t=ty(r);return vy(e,py(my(e,a,!0),t))}}}};var Mw=uv({localResponseNormalizationBackprop_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5,s={x:e,y:t,dy:n},u={depthRadius:r,bias:a,alpha:i,beta:o};return Qp.runKernel(oh,s,u)}}),zw={kernelName:ih,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=Ke(t,2),a=r[0],i=r[1],o=n.depthRadius,s=n.bias,u=n.alpha,c=n.beta;return{x:function(){return Mw(a,i,e,o,s,u,c)}}}};function Pw(e,t,n,r){return t.rank<n.rank&&(t=Rg(t,Ey(t.shape,r))),e.rank<n.rank&&(e=Rg(e,Ey(e.shape,r))),{x:function(){return py(e,ym(ey(n,t),e.dtype))}}}var Bw={kernelName:sh,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.reductionIndices,a=t[0],i=Pw(e,t[1],a,$c(r,a.shape));return{x:function(){return i.x()}}}};var Ww=uv({less_:function(e,t){var n=ov(e,"a","less","string_or_numeric"),r=ov(t,"b","less","string_or_numeric"),a=Ke(Vp(n,r),2);n=a[0],r=a[1],jm(n.shape,r.shape);var i={a:n,b:r};return Qp.runKernel(Jf,i)}}),Uw={kernelName:uh,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Ke(t,2),r=n[0],a=n[1];return{a:function(){return py(e,ym(cy(r,a),"float32"))},b:function(){return py(e,ym(Ww(r,a),"float32"))}}}};var Vw=uv({maxPool3dGrad_:function(e,t,n,r,a,i,o){var s=ov(e,"dy","maxPool3dGrad"),u=ov(t,"input","maxPool3dGrad"),c=ov(n,"output","maxPool3dGrad"),l=s,f=u,h=c,d=!1;4===u.rank&&(d=!0,l=Rg(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),f=Rg(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),h=Rg(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),Vc(5===l.rank,(function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(l.rank,".")})),Vc(5===f.rank,(function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(f.rank,".")})),Vc(5===h.rank,(function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(h.rank,".")})),Ag("maxPool3dGrad",i,o);var p={dy:l,input:f,output:h},v={filterSize:r,strides:a,pad:i,dimRoundingMode:o},m=Qp.runKernel(hh,p,v);return d?Rg(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}}),jw={kernelName:fh,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=Ke(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,u=n.pad,c=n.dimRoundingMode;return{x:function(){return Vw(e,a,i,o,s,u,c)}}}};var Gw=uv({maxPoolGrad_:function(e,t,n,r,a,i,o){var s=ov(e,"dy","maxPoolGrad"),u=ov(t,"input","maxPoolGrad"),c=ov(n,"output","maxPoolGrad");Vc(u.rank===s.rank,(function(){return"Rank of input (".concat(u.rank,") does not match rank of dy ")+"(".concat(s.rank,")")})),Vc(4===s.rank,(function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(s.rank,".")})),Vc(4===u.rank,(function(){return"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(u.rank,".")})),Ag("maxPoolGrad",i,o);var l={dy:s,input:u,output:c},f={filterSize:r,strides:a,pad:i,dimRoundingMode:o};return Qp.runKernel(lh,l,f)}}),Hw={kernelName:ch,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=Ke(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,u=n.pad;return{x:function(){return Gw(e,a,i,o,s,u)}}}},Kw={kernelName:ph,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Ke(t,1)[0],a=$c(n.axis,r.shape),i=Kc(Ny(r.shape,a)[1]);return{x:function(){var t=r.shape.slice();a.forEach((function(e){t[e]=1}));var n=Rg(e,t);return Qg(py(n,Py(r.shape,"float32")),i)}}}},qw={kernelName:vh,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.axis,a=Ke(t,2),i=a[0],o=Pw(e,a[1],i,$c(r,i.shape));return{x:function(){return o.x()}}}},Xw={kernelName:mh,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Ke(t,2),r=n[0],a=n[1];return{a:function(){return py(e,ym(px(r,a),"float32"))},b:function(){return py(e,ym(uy(r,a),"float32"))}}}},Yw={kernelName:gh,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return Qy(e,a,r.shape)}}}},Zw={kernelName:yh,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Ke(t,2),r=n[0],a=n[1],i=jm(r.shape,a.shape);return{a:function(){var t=Vm(r.shape,i);return t.length>0?Rg(my(e,t),r.shape):e},b:function(){var t=py(e,Ly(oy(Qg(r,a)))),n=Vm(a.shape,i);return n.length>0?Rg(my(t,n),a.shape):t}}}},Jw={kernelName:xh,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Ke(t,2),r=n[0],a=n[1],i=jm(r.shape,a.shape);return{a:function(){var t=py(e,ym(a,"float32")),n=Vm(r.shape,i);return n.length>0?Rg(my(t,n),r.shape):t},b:function(){var t=py(e,ym(r,"float32")),n=Vm(a.shape,i);return n.length>0?Rg(my(t,n),a.shape):t}}}},Qw={kernelName:kh,gradFunc:function(e){return{x:function(){return Ly(e)}}}},$w={kernelName:Eh,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return zy(n.shape,"float32")}}}},eS={kernelName:Nh,gradFunc:function(e){return{x:function(){return mb(e)}}}},tS={kernelName:Th,saveAllInputs:!0,gradFunc:function(e,t,n){var r=n.axis;return hb(e,r).map((function(e){return function(){return e}}))}},nS={kernelName:Ah,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return Qy(e,a,r.shape)}}}},rS={kernelName:Rh,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(e,t){var n=Ke(t,3),r=n[0],a=n[1],i=n[2],o=r,s=a,u=jm(o.shape,s.shape);return{a:function(){var t=ym(s,"float32"),n=py(e,py(t,wx(o,vy(t,sg(1))))),r=Vm(o.shape,u);return r.length>0&&(n=my(n,r)),Rg(n,o.shape)},b:function(){var t=uy(o,0),n=vb(t,fy(o),mb(o)),r=py(e,py(i,n)),a=Vm(s.shape,u);return a.length>0&&(r=my(r,a)),Rg(r,s.shape)}}}},aS={kernelName:Fh,inputsToSave:["x","alpha"],gradFunc:function(e,t){var n=Ke(t,2),r=n[0],a=n[1],i=uy(r,0);return{x:function(){return vb(i,e,py(e,a))},alpha:function(){var t=vb(i,mb(e),py(e,r)),n=Vm(a.shape,e.shape);return n.length>0&&(t=my(t,n)),Rg(t,a.shape)}}}};var iS=uv({cumprod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=ov(e,"x","cumprod"),i={x:a},o={axis:t,exclusive:n,reverse:r};return Qp.runKernel(df,i,o)}});function oS(e,t,n){var r=e.shape.length,a=r-n.length,i=Ay(n,r),o=e;null!=i&&(o=gb(e,i));var s=o.shape.slice(),u=s.splice(r-n.length,n.length).reduce((function(e,t){return e*t}),1);s.push(u);var c=function(e,t,n){var r=e.shape.slice();r[n]=1;var a=Rg(t,r),i=iS(e,n,!0,!1),o=iS(e,n,!0,!0),s=py(i,o);return py(a,s)}(o.reshape(s),t,a);if(c=c.reshape(o.shape),null!=i){var l=Ry(i);c=gb(c,l)}return c}var sS={kernelName:Dh,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Ke(t,1)[0],a=n.axis,i=[];return i=void 0===a||null===a?r.shape.map((function(e,t){return t})):"number"===typeof a?[a]:a,{x:function(){return oS(r,e,i)}}}},uS={kernelName:Cf,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Ke(t,2),r=n[0],a=n[1],i=jm(r.shape,a.shape);return{a:function(){var t=Qg(e,ym(a,"float32")),n=Vm(r.shape,i);return n.length>0?Rg(my(t,n),r.shape):t},b:function(){var t=py(e,ym(r,"float32")),n=Vm(a.shape,i);n.length>0&&(t=Rg(my(t,n),a.shape));var o=Dy(a);return Ly(Qg(t,ym(o,"float32")))}}}},cS={kernelName:_h,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){return Qg(e,Ly(Dy(n)))}}}},lS={kernelName:Vh,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0],r=py(px(n,6),Eb(n));return{x:function(){return py(e,ym(r,"float32"))}}}},fS={kernelName:Mh,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){return py(e,ym(Eb(n),"float32"))}}}},hS={kernelName:zh,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){return Rg(e,n.shape)}}}},dS={kernelName:Wh,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:Ke(t,1)[0]};return{images:function(){return Qp.runKernel(Uh,r,n)}}}},pS={kernelName:Ph,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:Ke(t,1)[0]};return{images:function(){return Qp.runKernel(Bh,r,n)}}}},vS={kernelName:jh,gradFunc:function(e,t,n){var r=$c(n.dims,e.shape);return{x:function(){return Xy(e,r)}}}},mS={kernelName:Gh,gradFunc:function(e){return{x:function(){return mb(e)}}}},gS={kernelName:Hh,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){return Ly(Qg(e,py(wx(n,1.5),2)))}}}};var yS=uv({logicalNot_:function(e){var t={x:ov(e,"x","logicalNot","bool")};return Qp.runKernel(rh,t)}}),bS={kernelName:Xh,inputsToSave:["condition"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{condition:function(){return ym(mb(n),"float32")},t:function(){return py(e,ym(n,e.dtype))},e:function(){return py(e,ym(yS(n),e.dtype))}}}},xS={kernelName:Yh,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){var t=uy(n,sg(0)),r=sg(ak),a=sg(ik),i=py(e,a),o=py(py(e,r),ty(ym(n,"float32")));return vb(t,i,o)}}}},kS={kernelName:ed,outputsToSave:[!0],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){return py(e,py(n,vy(sg(1),n)))}}}},wS={kernelName:$h,gradFunc:function(e){return{x:function(){return mb(e)}}}};var SS=uv({cos_:function(e){var t={x:ov(e,"x","cos","float32")};return Qp.runKernel(ff,t)}}),IS={kernelName:Jh,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){return py(SS(ym(n,"float32")),e)}}}};var CS=uv({cosh_:function(e){var t={x:ov(e,"x","cosh","float32")};return Qp.runKernel(hf,t)}}),NS={kernelName:Qh,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){return py(CS(ym(n,"float32")),e)}}}},ES={kernelName:Zh,inputsToSave:["x"],gradFunc:function(e,t,n){for(var r=Ke(t,1)[0],a=n.begin,i=n.size,o=r.shape,s=Ke(Xm(r,a,i),2),u=s[0],c=s[1],l=[],f=0;f<e.rank;f++)l.push([u[f],o[f]-u[f]-c[f]]);return{x:function(){return Wy(e,l)}}}},TS={kernelName:od,outputsToSave:[!0],gradFunc:function(e,t,n){var r=Ke(t,1)[0],a=n.dim,i=py(e,r);return{logits:function(){return vy(i,py(my(i,[a],true),r))}}}},AS={kernelName:td,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){return py(e,Jy(n))}}}};var RS=uv({batchToSpaceND_:function(e,t,n){var r=ov(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));Vc(r.rank>=1+t.length,(function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)})),Vc(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),Vc(r.shape[0]%a===0,(function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a)}));var i={x:r},o={blockShape:t,crops:n};return Qp.runKernel(Yl,i,o)}}),FS={kernelName:ad,gradFunc:function(e,t,n){var r=n.blockShape,a=n.paddings;return{x:function(){return RS(e,r,a)}}}},DS={kernelName:id,gradFunc:function(e,t,n){var r=n.axis;return{x:function(){return Pg(e,r)}}}},OS={kernelName:hd,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Ke(t,2),r=n[0],a=n[1],i=sg(2);return{a:function(){return py(e,py(i,vy(r,a)))},b:function(){return py(e,py(i,vy(a,r)))}}}},LS={kernelName:yd,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Ke(t,2),r=n[0],a=n[1],i=jm(r.shape,a.shape);return{a:function(){var t=e,n=Vm(r.shape,i);return n.length>0&&(t=my(t,n)),Rg(t,r.shape)},b:function(){var t=e,n=Vm(a.shape,i);return n.length>0&&(t=my(t,n)),Rg(Ly(t),a.shape)}}}},_S={kernelName:rd,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Ke(t,1)[0],a=r.shape.slice();$c(n.axis,r.shape).forEach((function(e){a[e]=1}));var i=Rg(e,a),o=py(i,Py(r.shape,"float32"));return{x:function(){return o}}}},MS={kernelName:kd,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Ke(t,1)[0],a=n.reps;return{x:function(){var t=mb(r);if(1===r.rank)for(var n=0;n<a[0];++n)t=lg(t,Qy(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(var i=0;i<a[0];++i)for(var o=0;o<a[1];++o)t=lg(t,Qy(e,[i*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(var s=0;s<a[0];++s)for(var u=0;u<a[1];++u)for(var c=0;c<a[2];++c)t=lg(t,Qy(e,[s*r.shape[0],u*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(var l=0;l<a[0];++l)for(var f=0;f<a[1];++f)for(var h=0;h<a[2];++h)for(var d=0;d<a[3];++d)t=lg(t,Qy(e,[l*r.shape[0],f*r.shape[1],h*r.shape[2],d*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},zS={kernelName:Ed,inputsToSave:["segmentIds"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){return function(e,t){for(var n=wy(t,mb(t)),r=sy(e,n),a=cy(t,sg(0,"int32")),i=r.rank-a.rank,o=0;o<i;++o)a=ny(a,o+1);a=yy(a,Py(r.shape,"bool"));var s=mb(r);return vb(a,r,s)}(e,n)}}}};for(var PS=0,BS=[Fk,Dk,Ok,Lk,_k,Mk,zk,Pk,Bk,Wk,Uk,Vk,Gk,Kk,qk,Yk,Zk,Jk,Qk,$k,ew,tw,rw,nw,iw,sw,cw,fw,hw,dw,uS,pw,vw,mw,gw,yw,xw,bw,ww,Iw,Ew,Tw,Aw,Rw,Fw,Dw,Ow,Lw,_w,zw,Bw,Bw,Uw,jw,Hw,Kw,qw,Xw,Yw,Zw,Jw,Qw,$w,eS,tS,nS,nS,rS,aS,sS,cS,lS,fS,hS,dS,pS,vS,mS,gS,bS,xS,kS,wS,IS,NS,ES,TS,AS,FS,FS,DS,DS,{kernelName:nd,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){return Qg(e,py(ob(ym(n,"float32")),2))}}}},OS,{kernelName:dd,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){return py(e,py(ym(n,"float32"),2))}}}},{kernelName:Ad,gradFunc:function(e){return{x:function(){return mb(e)}}}},LS,_S,{kernelName:bd,inputsToSave:["x"],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){return Qg(e,Dy(SS(n)))}}}},{kernelName:xd,outputsToSave:[!0],gradFunc:function(e,t){var n=Ke(t,1)[0];return{x:function(){return py(vy(sg(1),Dy(n)),e)}}}},MS,{kernelName:Id,gradFunc:function(e,t,n){var r=Ry(n.perm);return{x:function(){return gb(e,r)}}}},{kernelName:Nd,gradFunc:function(e,t,n){var r=n.axis;return{value:function(){return ub(e,r)}}}},zS,{kernelName:Td,gradFunc:function(e){return{x:function(){return mb(e)}}}}];PS<BS.length;PS++){Ud(BS[PS])}Dp().prototype.abs=function(){return this.throwIfDisposed(),cg(this)};var WS=uv({acos_:function(e){var t={x:ov(e,"x","acos")};return Qp.runKernel(Fl,t)}});Dp().prototype.acos=function(){return this.throwIfDisposed(),WS(this)};var US=uv({acosh_:function(e){var t={x:ov(e,"x","acosh")};return Qp.runKernel(Dl,t)}});Dp().prototype.acosh=function(){return this.throwIfDisposed(),US(this)},Dp().prototype.add=function(e){return this.throwIfDisposed(),lg(this,e)},Dp().prototype.all=function(e,t){return this.throwIfDisposed(),fg(this,e,t)},Dp().prototype.any=function(e,t){return this.throwIfDisposed(),hg(this,e,t)},Dp().prototype.argMax=function(e){return this.throwIfDisposed(),dg(this,e)};var VS=uv({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=ov(e,"x","argMin"),r={x:n},a={axis:t};return Qp.runKernel(Pl,r,a)}});Dp().prototype.argMin=function(e){return this.throwIfDisposed(),VS(this,e)},Dp().prototype.asScalar=function(){return this.throwIfDisposed(),Vc(1===this.size,(function(){return"The array must have only 1 element."})),Rg(this,[])},Dp().prototype.asType=function(e){return this.throwIfDisposed(),ym(this,e)},Dp().prototype.as1D=function(){return this.throwIfDisposed(),Rg(this,[this.size])},Dp().prototype.as2D=function(e,t){return this.throwIfDisposed(),Rg(this,[e,t])},Dp().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),Rg(this,[e,t,n])},Dp().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),Rg(this,[e,t,n,r])},Dp().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),Rg(this,[e,t,n,r,a])};var jS=uv({asin_:function(e){var t={x:ov(e,"x","asin")};return Qp.runKernel(Bl,t)}});Dp().prototype.asin=function(){return this.throwIfDisposed(),jS(this)};var GS=uv({asinh_:function(e){var t={x:ov(e,"x","asinh")};return Qp.runKernel(Wl,t)}});Dp().prototype.asinh=function(){return this.throwIfDisposed(),GS(this)};var HS=uv({atan_:function(e){var t={x:ov(e,"x","atan")};return Qp.runKernel(Ul,t)}});Dp().prototype.atan=function(){return this.throwIfDisposed(),HS(this)};var KS=uv({atan2_:function(e,t){var n=ov(e,"a","atan2"),r=ov(t,"b","atan2"),a=Ke(Vp(n,r),2),i={a:n=a[0],b:r=a[1]};return Qp.runKernel(jl,i)}});Dp().prototype.atan2=function(e){return this.throwIfDisposed(),KS(this,e)};var qS=uv({atanh_:function(e){var t={x:ov(e,"x","atanh")};return Qp.runKernel(Vl,t)}});Dp().prototype.atanh=function(){return this.throwIfDisposed(),qS(this)},Dp().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Fg(this,e,t,n,r)},Dp().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),RS(this,e,t)},Dp().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),Og(this,e,t,n,r,a)},Dp().prototype.broadcastTo=function(e){return this.throwIfDisposed(),pb(this,e)},Dp().prototype.cast=function(e){return this.throwIfDisposed(),ym(this,e)};var XS=uv({ceil_:function(e){var t={x:ov(e,"x","ceil","float32")};return Qp.runKernel($l,t)}});Dp().prototype.ceil=function(){return this.throwIfDisposed(),XS(this)},Dp().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),zg(this,e,t)},Dp().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof Fp&&(e=[e]),Pg([this].concat(Et(e)),t)},Dp().prototype.conv1d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Gg(this,e,t,n,r,a,i)},Dp().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),Kg(this,e,t,n,r,a)},Dp().prototype.conv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),jg(this,e,t,n,r,a,i)},Dp().prototype.cos=function(){return this.throwIfDisposed(),SS(this)},Dp().prototype.cosh=function(){return this.throwIfDisposed(),CS(this)},Dp().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),iS(this,e,t,n)},Dp().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),lw(this,e,t,n)};var YS=uv({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=ov(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];Vc(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)})),Vc(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)})),Vc(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)})),Vc(o%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(o," for depthToSpace with input shape ").concat(r.shape)}));var s={x:r},u={blockSize:t,dataFormat:n};return Qp.runKernel(gf,s,u)}});Dp().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),YS(this,e,t)},Dp().prototype.depthwiseConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Zg(this,e,t,n,r,a,i)};var ZS=uv({dilation2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=ov(e,"x","dilation2d"),s=ov(t,"filter","dilation2d");Vc(3===o.rank||4===o.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(o.rank,".")})),Vc(3===s.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,".")})),Vc("NHWC"===i,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(i)}));var u=o,c=!1;3===o.rank&&(u=Rg(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0);var l={x:u,filter:s},f={strides:n,pad:r,dilations:a},h=Qp.runKernel(wf,l,f);return c?Rg(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});Dp().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),ZS(this,e,t,n,r,a)};var JS=uv({divNoNan_:function(e,t){var n=ov(e,"a","div"),r=ov(t,"b","div"),a=Ke(Vp(n,r),2);n=a[0],r=a[1];var i=Qg(n,r),o=mb(i),s=ey(r,o);return vb(s,o,i)}});Dp().prototype.divNoNan=function(e){return this.throwIfDisposed(),JS(this,e)},Dp().prototype.div=function(e){return this.throwIfDisposed(),Qg(this,e)};var QS=uv({dot_:function(e,t){var n=ov(e,"t1","dot"),r=ov(t,"t2","dot");Vc((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];if(Vc(a===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(a," and ").concat(i,".")})),1===n.rank&&1===r.rank){var o=Rg(n,[1,-1]),s=Rg(r,[-1,1]),u=by(o,s);return Rg(u,[])}if(1===n.rank&&2===r.rank){var c=Rg(n,[1,-1]),l=Rg(r,[r.shape[0],r.shape[1]]),f=by(c,l);return Rg(f,[f.size])}if(2===n.rank&&1===r.rank){var h=Rg(r,[-1,1]),d=by(n,h);return Rg(d,[d.size])}var p=Rg(r,[r.shape[0],r.shape[1]]);return by(n,p)}});Dp().prototype.dot=function(e){return this.throwIfDisposed(),QS(this,e)},Dp().prototype.elu=function(){return this.throwIfDisposed(),$g(this)},Dp().prototype.equal=function(e){return this.throwIfDisposed(),ey(this,e)};var $S=uv({erf_:function(e){var t=ov(e,"x","erf");Vc("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=ym(t,"float32"));var n={x:t};return Qp.runKernel(Af,n)}});Dp().prototype.erf=function(){return this.throwIfDisposed(),$S(this)};var eI=uv({euclideanNorm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ix(e,"euclidean",t,n)}});Dp().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),eI(this,e,t)},Dp().prototype.exp=function(){return this.throwIfDisposed(),ty(this)},Dp().prototype.expandDims=function(e){return this.throwIfDisposed(),ny(this,e)};var tI=uv({expm1_:function(e){var t={x:ov(e,"x","expm1")};return Qp.runKernel(Of,t)}});Dp().prototype.expm1=function(){return this.throwIfDisposed(),tI(this)},Dp().prototype.fft=function(){return this.throwIfDisposed(),kb(this)},Dp().prototype.flatten=function(){return this.throwIfDisposed(),Rg(this,[this.size])},Dp().prototype.floor=function(){return this.throwIfDisposed(),oy(this)},Dp().prototype.floorDiv=function(e){return this.throwIfDisposed(),Jg(this,e)},Dp().prototype.gather=function(e,t){return this.throwIfDisposed(),sy(this,e,t)},Dp().prototype.greaterEqual=function(e){return this.throwIfDisposed(),cy(this,e)},Dp().prototype.greater=function(e){return this.throwIfDisposed(),uy(this,e)},Dp().prototype.ifft=function(){return this.throwIfDisposed(),Sb(this)},Dp().prototype.irfft=function(){return this.throwIfDisposed(),Ib(this)};var nI=uv({isFinite_:function(e){var t={x:ov(e,"x","isFinite")};return Qp.runKernel(qf,t)}});Dp().prototype.isFinite=function(){return this.throwIfDisposed(),nI(this)};var rI=uv({isInf_:function(e){var t={x:ov(e,"x","isInf")};return Qp.runKernel(Xf,t)}});Dp().prototype.isInf=function(){return this.throwIfDisposed(),rI(this)};var aI=uv({isNaN_:function(e){var t={x:ov(e,"x","isNaN")};return Qp.runKernel(Yf,t)}});Dp().prototype.isNaN=function(){return this.throwIfDisposed(),aI(this)},Dp().prototype.leakyRelu=function(e){return this.throwIfDisposed(),ly(this,e)},Dp().prototype.lessEqual=function(e){return this.throwIfDisposed(),px(this,e)},Dp().prototype.less=function(e){return this.throwIfDisposed(),Ww(this,e)};var iI=uv({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,i=ov(e,"x","localResponseNormalization");Vc(4===i.rank||3===i.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(i.rank,".")})),Vc(Xc(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var o=i,s=!1;3===i.rank&&(s=!0,o=Rg(i,[1,i.shape[0],i.shape[1],i.shape[2]]));var u={x:o},c={depthRadius:t,bias:n,alpha:r,beta:a},l=Qp.runKernel(ih,u,c);return s?Rg(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});Dp().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),iI(this,e,t,n,r)};var oI=uv({logSigmoid_:function(e){var t=ov(e,"x","logSigmoid"),n=og((function(e){return{value:Ly(ab(Ly(e))),gradFunc:function(t){return py(t,Jy(Ly(e)))}}}));return n(t)}});Dp().prototype.logSigmoid=function(){return this.throwIfDisposed(),oI(this)},Dp().prototype.logSoftmax=function(e){return this.throwIfDisposed(),gy(this,e)},Dp().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),Dx(this,e,t)},Dp().prototype.log=function(){return this.throwIfDisposed(),fy(this)},Dp().prototype.log1p=function(){return this.throwIfDisposed(),hy(this)},Dp().prototype.logicalAnd=function(e){return this.throwIfDisposed(),yy(this,e)},Dp().prototype.logicalNot=function(){return this.throwIfDisposed(),yS(this)};var sI=uv({logicalOr_:function(e,t){var n=ov(e,"a","logicalOr","bool"),r=ov(t,"b","logicalOr","bool");jm(n.shape,r.shape);var a={a:n,b:r};return Qp.runKernel(ah,a)}});Dp().prototype.logicalOr=function(e){return this.throwIfDisposed(),sI(this,e)};var uI=uv({logicalXor_:function(e,t){var n=ov(e,"a","logicalXor","bool"),r=ov(t,"b","logicalXor","bool");return jm(n.shape,r.shape),yy(sI(e,t),yS(yy(e,t)))}});Dp().prototype.logicalXor=function(e){return this.throwIfDisposed(),uI(this,e)},Dp().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),by(this,e,t,n)},Dp().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),xy(this,e,t,n,r)},Dp().prototype.max=function(e,t){return this.throwIfDisposed(),dy(this,e,t)},Dp().prototype.maximum=function(e){return this.throwIfDisposed(),wy(this,e)},Dp().prototype.mean=function(e,t){return this.throwIfDisposed(),Sy(this,e,t)},Dp().prototype.min=function(e,t){return this.throwIfDisposed(),kx(this,e,t)},Dp().prototype.minimum=function(e){return this.throwIfDisposed(),Iy(this,e)};var cI=uv({mirrorPad_:function(e,t,n){Vc("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var r=ov(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");Vc(t.length===r.rank,(function(){return"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,".")}));for(var a="reflect"===n?1:0,i=function(e){Vc(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Vc(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(r.shape[e]-a," or less than 0 for input of ")+"shape ".concat(r.shape)}))},o=0;o<r.rank;o++)i(o);var s={paddings:t,mode:n},u={x:r};return Qp.runKernel(gh,u,s)}});Dp().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),cI(this,e,t)};var lI=uv({mod_:function(e,t){var n=ov(e,"a","mod"),r=ov(t,"b","mod"),a=Ke(Vp(n,r),2),i={a:n=a[0],b:r=a[1]};return Qp.runKernel(yh,i)}});Dp().prototype.mod=function(e){return this.throwIfDisposed(),lI(this,e)},Dp().prototype.mul=function(e){return this.throwIfDisposed(),py(this,e)},Dp().prototype.neg=function(){return this.throwIfDisposed(),Ly(this)},Dp().prototype.norm=function(e,t,n){return this.throwIfDisposed(),Ix(this,e,t,n)},Dp().prototype.notEqual=function(e){return this.throwIfDisposed(),_y(this,e)},Dp().prototype.oneHot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),My(this,e,t,n)},Dp().prototype.onesLike=function(){return this.throwIfDisposed(),By(this)},Dp().prototype.pad=function(e,t){return this.throwIfDisposed(),Wy(this,e,t)};var fI=uv({pool_:function(e,t,n,r,a,i,o){null==a&&(a=[1,1]),null==i&&(i=1),0===r&&(r="valid");var s=ov(e,"x","maxPool"),u=s,c=!1;3===s.rank&&(c=!0,u=Rg(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Vc(Eg(i,a),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(a,"'")}));var l,f=vg(u.shape,t,i,a,r),h=[f.dilationHeight,f.dilationWidth];l="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([f.filterHeight,f.filterWidth],h):[[0,0],[0,0]];var d=1===h[0]&&1===h[1],p=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),s=a.map((function(e,t){return e+o[t]})),u=t.map((function(e,t){return[r[t],s[t]]})),c=t.map((function(e,t){return[0,o[t]]}));return[u,c]}([f.inHeight,f.inWidth],h,l),v=Ke(p,2),m=v[0],g=v[1],y=d?r:"valid",b=d?u:Xk(u,h,m),x=("avg"===n?function(){return Fg(b,t,i,y,o)}:function(){return xy(b,t,i,y,o)})(),k=d?x:RS(x,h,g);return c?Rg(k,[k.shape[1],k.shape[2],k.shape[3]]):k}});Dp().prototype.pool=function(e,t,n,r,a,i){return this.throwIfDisposed(),fI(this,e,t,n,r,a,i)},Dp().prototype.pow=function(e){return this.throwIfDisposed(),wx(this,e)},Dp().prototype.prelu=function(e){return this.throwIfDisposed(),Uy(this,e)};var hI=uv({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=ov(e,"x","prod");"bool"===r.dtype&&(r=ym(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return Qp.runKernel(Dh,a,i)}});Dp().prototype.prod=function(e,t){return this.throwIfDisposed(),hI(this,e,t)};var dI=uv({reciprocal_:function(e){var t={x:ov(e,"x","reciprocal")};return Qp.runKernel(_h,t)}});Dp().prototype.reciprocal=function(){return this.throwIfDisposed(),dI(this)},Dp().prototype.relu=function(){return this.throwIfDisposed(),qy(this)},Dp().prototype.relu6=function(){return this.throwIfDisposed(),Nb(this)},Dp().prototype.reshapeAs=function(e){return this.throwIfDisposed(),Rg(this,e.shape)},Dp().prototype.reshape=function(e){return this.throwIfDisposed(),Rg(this,e)},Dp().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),fx(this,e,t,n)},Dp().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),hx(this,e,t,n)},Dp().prototype.reverse=function(e){return this.throwIfDisposed(),Xy(this,e)},Dp().prototype.rfft=function(){return this.throwIfDisposed(),wb(this)},Dp().prototype.round=function(){return this.throwIfDisposed(),vx(this)},Dp().prototype.rsqrt=function(){return this.throwIfDisposed(),kw(this)},Dp().prototype.selu=function(){return this.throwIfDisposed(),Yy(this)},Dp().prototype.separableConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Zy(this,e,t,n,r,a,i)},Dp().prototype.sigmoid=function(){return this.throwIfDisposed(),Jy(this)};var pI=uv({sign_:function(e){var t={x:ov(e,"x","sign")};return Qp.runKernel($h,t)}});Dp().prototype.sign=function(){return this.throwIfDisposed(),pI(this)},Dp().prototype.sin=function(){return this.throwIfDisposed(),ow(this)},Dp().prototype.sinh=function(){return this.throwIfDisposed(),uw(this)},Dp().prototype.slice=function(e,t){return this.throwIfDisposed(),Qy(this,e,t)},Dp().prototype.softmax=function(e){return this.throwIfDisposed(),rb(this,e)},Dp().prototype.softplus=function(){return this.throwIfDisposed(),ab(this)},Dp().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),Xk(this,e,t)},Dp().prototype.split=function(e,t){return this.throwIfDisposed(),ib(this,e,t)},Dp().prototype.sqrt=function(){return this.throwIfDisposed(),ob(this)},Dp().prototype.square=function(){return this.throwIfDisposed(),Dy(this)},Dp().prototype.squaredDifference=function(e){return this.throwIfDisposed(),Rx(this,e)},Dp().prototype.squeeze=function(e){return this.throwIfDisposed(),sb(this,e)},Dp().prototype.stack=function(e,t){this.throwIfDisposed();var n=e instanceof Fp?[this,e]:[this].concat(Et(e));return ub(n,t)},Dp().prototype.step=function(e){return this.throwIfDisposed(),Eb(this,e)};var vI=uv({stridedSlice_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=ov(e,"x","stridedSlice","string_or_numeric"),l={x:c},f={begin:t,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u};return Qp.runKernel(pd,l,f)}});Dp().prototype.stridedSlice=function(e,t,n,r,a,i,o,s){return this.throwIfDisposed(),vI(this,e,t,n,r,a,i,o,s)},Dp().prototype.sub=function(e){return this.throwIfDisposed(),vy(this,e)},Dp().prototype.sum=function(e,t){return this.throwIfDisposed(),my(this,e,t)};var mI=uv({tan_:function(e){var t={x:ov(e,"x","tan","float32")};return Qp.runKernel(bd,t)}});Dp().prototype.tan=function(){return this.throwIfDisposed(),mI(this)},Dp().prototype.tanh=function(){return this.throwIfDisposed(),cb(this)},Dp().prototype.tile=function(e){return this.throwIfDisposed(),ry(this,e)},Dp().prototype.toBool=function(){return this.throwIfDisposed(),ym(this,"bool")},Dp().prototype.toFloat=function(){return this.throwIfDisposed(),ym(this,"float32")},Dp().prototype.toInt=function(){return this.throwIfDisposed(),ym(this,"int32")};var gI=uv({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=ov(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") ")+"but got ".concat(t));var i={x:r},o={k:t,sorted:n},s=Qp.runKernel(wd,i,o),u=Ke(s,2),c=u[0],l=u[1];return{values:c,indices:l}}});Dp().prototype.topk=function(e,t){return this.throwIfDisposed(),gI(this,e,t)},Dp().prototype.transpose=function(e){return this.throwIfDisposed(),gb(this,e)};var yI=uv({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=ov(e,"x","unique","string_or_numeric");Vc(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var r={x:n},a={axis:t},i=Qp.runKernel(Cd,r,a),o=Ke(i,2),s=o[0],u=o[1];return{values:s,indices:u}}});function bI(e,t,n){return bI=yp()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&vp(a,n.prototype),a},bI.apply(null,arguments)}function xI(e){var t="function"===typeof Map?new Map:void 0;return xI=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return bI(e,arguments,gp(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),vp(n,e)},xI(e)}Dp().prototype.unique=function(e){return this.throwIfDisposed(),yI(this,e)},Dp().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),Sw(this,e,t)},Dp().prototype.unstack=function(e){return this.throwIfDisposed(),hb(this,e)},Dp().prototype.where=function(e,t){return this.throwIfDisposed(),vb(e,this,t)},Dp().prototype.zerosLike=function(){return this.throwIfDisposed(),mb(this)};var kI=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),r=t.call(this,e),Object.setPrototypeOf(xp(r),n.prototype),r}return Oc(n)}(xI(Error)),wI=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),r=t.call(this,e),Object.setPrototypeOf(xp(r),n.prototype),r}return Oc(n)}(xI(Error)),SI=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),r=t.call(this,e),Object.setPrototypeOf(xp(r),n.prototype),r}return Oc(n)}(xI(Error)),II=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),r=t.call(this,e),Object.setPrototypeOf(xp(r),n.prototype),r}return Oc(n)}(xI(Error)),CI=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),r=t.call(this,e),Object.setPrototypeOf(xp(r),n.prototype),r}return Oc(n)}(xI(Error)),NI=(Error,function(){function e(t){Fc(this,e),this.maxEntries=t||100,this.cache=new Map}return Oc(e,[{key:"get",value:function(e){var t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}},{key:"put",value:function(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,t)}},{key:"getMaxEntries",value:function(){return this.maxEntries}},{key:"setMaxEntries",value:function(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(var t=0;t<this.maxEntries-e;t++){var n=this.cache.keys().next().value;this.cache.delete(n)}this.maxEntries=e}}]),e}());function EI(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}var a=new Array(t);return a.fill(e),a}function TI(e,t){if(!e)throw new CI(t)}function AI(e,t){var n,r=0,a=Rc(e);try{for(a.s();!(n=a.n()).done;){n.value===t&&r++}}catch(eq){a.e(eq)}finally{a.f()}return r}function RI(e){return 1===e.length?e[0]:e}function FI(e){return Array.isArray(e)?e:[e]}function DI(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function OI(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}var LI={};function _I(e){if(null===e||void 0===e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function MI(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((function(e){return MI(e)}));else for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],a=e[r];null!=a&&"object"===typeof a&&(Array.isArray(a)||"ndarray"!==a.type||"number"!==typeof a.value?MI(a):e[r]=a.value)}}function zI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){var i,o=e;if(o in n)i=n[o];else if(o in LI)i=LI[o];else if(null==(i=t[o]))throw new SI("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return i}var s=e;if(null==s.className||null==s.config)throw new SI("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(s),".\n")+"'className' and 'config' must set.");var u,c,l=s.className;if(l in n){var f=Ke(n[l],2);u=f[0],c=f[1]}else if(l in LI){var h=Ke(LI.className,2);u=h[0],c=h[1]}else if(l in t){var d=Ke(t[l],2);u=d[0],c=d[1]}if(null==u)throw new SI("Unknown ".concat(r,": ").concat(l,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=c){for(var p={},v=0,m=Object.keys(LI);v<m.length;v++){var g=m[v];p[g]=LI[g]}for(var y=0,b=Object.keys(n);y<b.length;y++){var x=b[y];p[x]=n[x]}var k=s.config;k.customObjects=p;for(var w=Object.assign({},LI),S=0,I=Object.keys(n);S<I.length;S++){var C=I[S];LI[C]=n[C]}MI(s.config);var N=c(u,s.config,n,a);return LI=Object.assign({},w),N}for(var E=Object.assign({},LI),T=0,A=Object.keys(n);T<A.length;T++){var R=A[T];LI[R]=n[R]}var F=new u(s.config);return LI=Object.assign({},E),F}function PI(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function BI(e){if(null==e)return e;var t,n=[],r=Rc(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;-1===n.indexOf(a)&&n.push(a)}}catch(eq){r.e(eq)}finally{r.f()}return n}function WI(e){if(null==e)throw new SI("Invalid value in obj: ".concat(JSON.stringify(e)));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function UI(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new SI("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function VI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return TI(n>=0),TI(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return typeof e===t}))}function jI(e,t){Array.isArray(e)?(Vc(e.length>0,(function(){return"".concat(t," is unexpectedly an empty array.")})),e.forEach((function(e,n){return jI(e,"element ".concat(n+1," of ").concat(t))}))):Vc(Number.isInteger(e)&&e>0,(function(){return"Expected ".concat(t," to be a positive integer, but got ")+"".concat(GI(e),".")}))}function GI(e){return null===e?"null":Array.isArray(e)?"["+e.map((function(e){return GI(e)})).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function HI(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}var KI=0;function qI(){return KI++}var XI={};function YI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in XI||(XI[e]=0),XI[e]+=1,e+XI[e].toString()}var ZI=["channelsFirst","channelsLast"],JI=["nearest","bilinear"],QI=["valid","same","causal"],$I=["max","avg"],eC=["sum","mul","concat","ave"],tC=new Map;function nC(e){UI(ZI,"DataFormat",e)}function rC(e){UI(QI,"PaddingMode",e)}function aC(e){UI($I,"PoolMode",e)}var iC=[];function oC(e,t){iC.push(e);try{var n=t();return iC.pop(),n}catch(r){throw iC.pop(),r}}function sC(e){if(!fC(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===iC.length?"":iC.join("/")+"/")+e}function uC(e){if(!fC(e))throw new Error("Not a valid tensor name: '"+e+"'");tC.has(e)||tC.set(e,0);var t=tC.get(e);if(tC.set(e,tC.get(e)+1),t>0){var n="".concat(e,"_").concat(t);return tC.set(n,1),n}return e}var cC,lC=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function fC(e){return!!e.match(lC)}function hC(e){return e===parseInt(e.toString(),10)}function dC(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function pC(e){if(0===e.length)return Number.NaN;for(var t=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r<t&&(t=r)}return t}function vC(e){if(0===e.length)return Number.NaN;for(var t=Number.NEGATIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r>t&&(t=r)}return t}function mC(e,t){if(t<e)throw new SI("end (".concat(t,") < begin (").concat(e,") is forbidden."));for(var n=[],r=e;r<t;++r)n.push(r);return n}function gC(){return null==cC&&(cC=Qp.backend.epsilon()),cC}function yC(e,t){return ym(e,t)}function bC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),Rg(e,n)}function xC(e){var t=[dC(e.shape)];return Rg(e,t)}function kC(e,t,n){return ng((function(){switch(e.rank){case 1:return $y(e,t,n);case 2:return eb(e,[t,0],[n,e.shape[1]]);case 3:return tb(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return nb(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return Qy(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return Qy(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new SI("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function wC(e,t,n){return ng((function(){switch(e.rank){case 1:return $y(e,t,n);case 2:return eb(e,[0,t],[e.shape[0],n]);case 3:return tb(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return nb(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new SI("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function SC(e,t,n,r){return ng((function(){switch(e.rank){case 1:return $y(e,t,n);case 2:switch(r){case 1:return kC(e,t,n);case 2:return wC(e,t,n);default:throw new SI("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return kC(e,t,n);case 2:return tb(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return wC(e,t,n);default:throw new SI("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return kC(e,t,n);case 2:return nb(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return nb(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return wC(e,t,n);default:throw new SI("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new SI("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function IC(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(n=0!==(t=e[0].rank)?t:0),n===e[0].rank&&(n=-1),Pg(e,n)}function CC(e,t){switch(e.rank){case 1:return Bg([e,t]);case 2:return Wg([e,t],0);case 3:return Ug([e,t],0);case 4:return Vg([e,t],0);default:throw new SI("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function NC(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new SI("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return ry(e,t)}function EC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return Hy(e,t,n,r,a)}function TC(e,t,n,r){if(e.rank<2||t.rank<2)throw new II("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new II("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape));if(2===e.rank&&2===t.rank){return _b({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?FC(e.rank,r,"channelsLast"):null,activation:n})}var a=e.shape.slice(),i=a.pop();e=Rg(e,[-1,i]);var o=t.shape.slice(),s=o.pop(),u=o.pop(),c=[].concat(Et(o),[s]),l=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=Rg(gb(t,l),[u,-1]);var f=[].concat(Et(a),Et(c));return Rg(_b({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?FC(e.rank,r,"channelsLast"):null,activation:n}),f)}function AC(e,t,n){return ng((function(){return t=Array.isArray(t)?lb(t,"int32"):ym(t,"int32"),sy(e,t,n)}))}function RC(e){return py(e,e)}function FC(e,t,n){var r=t.shape;if(1!==t.rank&&t.rank!==e)throw new SI("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?Rg(t,[1,r[0],1,1,1]):Rg(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?Rg(t,[1,1,1,1,r[0]]):Rg(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?Rg(t,[1,r[0],1,1]):Rg(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?Rg(t,[1,1,1,r[0]]):Rg(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?Rg(t,[1,r[0],1]):Rg(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?Rg(t,[1,1,r[0]]):Rg(t,[1].concat(r))}else if(e<3)return t;throw new SI("Unsupported input rank by biasAdd: ".concat(t.rank))}function DC(e,t,n){return ng((function(){return null==n&&(n="channelsLast"),nC(n),lg(e,FC(e.rank,t,n))}))}function OC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new II("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return $g(e)}function LC(e,t,n,r){return ng((function(){return yb(e,t,n,r)}))}function _C(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?e():t()}var MC=["fanIn","fanOut","fanAvg"],zC=["normal","uniform","truncatedNormal"];var PC=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"fromConfigUsesCustomObjects",value:function(){return!1}},{key:"getConfig",value:function(){return{}}}]),n}(Jm),BC=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"apply",value:function(e,t){return zy(e,t)}}]),n}(PC);BC.className="Zeros",$m(BC);var WC=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"apply",value:function(e,t){return Py(e,t)}}]),n}(PC);WC.className="Ones",$m(WC);var UC=function(e){mp(n,e);var t=wp(n);function n(e){var r;if(Fc(this,n),r=t.call(this),"object"!==typeof e)throw new SI("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new SI("config must have value set but got ".concat(e));return r.value=e.value,r}return Oc(n,[{key:"apply",value:function(e,t){var n=this;return ng((function(){return py(sg(n.value),Py(e,t))}))}},{key:"getConfig",value:function(){return{value:this.value}}}]),n}(PC);UC.className="Constant",$m(UC);var VC=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this)).DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return Oc(n,[{key:"apply",value:function(e,t){return Ky(e,this.minval,this.maxval,t)}},{key:"getConfig",value:function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}]),n}(PC);VC.className="RandomUniform",$m(VC);var jC=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return Oc(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new II("randomNormal does not support dType ".concat(t,"."));return EC(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(PC);jC.className="RandomNormal",$m(jC);var GC=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return Oc(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new II("truncatedNormal does not support dType ".concat(t,"."));return fb(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(PC);GC.className="TruncatedNormal",$m(GC);var HC=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this)).gain=null!=e.gain?e.gain:1,r}return Oc(n,[{key:"apply",value:function(e,t){var n=this;return ng((function(){if(2!==e.length||e[0]!==e[1])throw new SI("Identity matrix initializer can only be used for 2D square matrices.");return py(n.gain,ay(e[0]))}))}},{key:"getConfig",value:function(){return{gain:this.gain}}}]),n}(PC);HC.className="Identity",$m(HC);var KC=function(e){mp(n,e);var t=wp(n);function n(e){var r,a;if(Fc(this,n),r=t.call(this),e.scale<0)throw new SI("scale must be a positive float. Got: ".concat(e.scale));return r.scale=null==e.scale?1:e.scale,r.mode=null==e.mode?"fanIn":e.mode,a=r.mode,UI(MC,"FanMode",a),r.distribution=null==e.distribution?"normal":e.distribution,function(e){UI(zC,"Distribution",e)}(r.distribution),r.seed=e.seed,r}return Oc(n,[{key:"apply",value:function(e,t){var n=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(nC(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){var a=dC(e,2);t=e[1]*a,n=e[0]*a}else if("channelsLast"===r){var i=dC(e,0,e.length-2);t=e[e.length-2]*i,n=e[e.length-1]*i}}else{var o=dC(e);t=Math.sqrt(o),n=Math.sqrt(o)}return[t,n]}(e),r=n[0],a=n[1],i=this.scale;if("fanIn"===this.mode?i/=Math.max(1,r):"fanOut"===this.mode?i/=Math.max(1,a):i/=Math.max(1,(r+a)/2),"normal"===this.distribution){var o=Math.sqrt(i);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new II("".concat(this.getClassName()," does not support dType ").concat(t,"."));return fb(e,0,o,t,this.seed)}var s=Math.sqrt(3*i);return Ky(e,-s,s,t)}},{key:"getConfig",value:function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}]),n}(PC);KC.className="VarianceScaling",$m(KC);var qC=function(e){mp(n,e);var t=wp(n);function n(e){return Fc(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}return Oc(n,[{key:"getClassName",value:function(){return KC.className}}]),n}(KC);qC.className="GlorotUniform",$m(qC);var XC=function(e){mp(n,e);var t=wp(n);function n(e){return Fc(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}return Oc(n,[{key:"getClassName",value:function(){return KC.className}}]),n}(KC);XC.className="GlorotNormal",$m(XC);var YC=function(e){mp(n,e);var t=wp(n);function n(e){return Fc(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return Oc(n,[{key:"getClassName",value:function(){return KC.className}}]),n}(KC);YC.className="HeNormal",$m(YC);var ZC=function(e){mp(n,e);var t=wp(n);function n(e){return Fc(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return Oc(n,[{key:"getClassName",value:function(){return KC.className}}]),n}(KC);ZC.className="HeUniform",$m(ZC);var JC=function(e){mp(n,e);var t=wp(n);function n(e){return Fc(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return Oc(n,[{key:"getClassName",value:function(){return KC.className}}]),n}(KC);JC.className="LeCunNormal",$m(JC);var QC=function(e){mp(n,e);var t=wp(n);function n(e){return Fc(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return Oc(n,[{key:"getClassName",value:function(){return KC.className}}]),n}(KC);QC.className="LeCunNormal",$m(QC);var $C=function(e){mp(n,e);var t=wp(n);function n(e){var r;if(Fc(this,n),(r=t.call(this)).DEFAULT_GAIN=1,r.gain=null==e.gain?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,null!=r.seed)throw new II("Random seed is not implemented for Orthogonal Initializer yet.");return r}return Oc(n,[{key:"apply",value:function(e,t){var n=this;return ng((function(){if(e.length<2)throw new II("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than 2000 (".concat(e[0]*e[1],") elements: ")+"Slowness may result.");var t=EC(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),r=_x.gramSchmidt(t);return e[0]>e[1]&&(r=gb(r)),py(n.gain,r)}))}},{key:"getConfig",value:function(){return{gain:this.gain,seed:this.seed}}}]),n}(PC);$C.className="Orthogonal",$m($C);var eN={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function tN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return zI(e,Qm.getMap().classNameMap,t,"initializer")}function nN(e){return _I(e)}function rN(e){if("string"===typeof e){var t=e in eN?eN[e]:e;if("GlorotNormal"===t)return new XC;if("GlorotUniform"===t)return new qC;if("HeNormal"===t)return new YC;if("HeUniform"===t)return new ZC;if("LeCunNormal"===t)return new JC;if("LeCunUniform"===t)return new QC;var n={};return n.className=t,n.config={},tN(n)}return e instanceof PC?e:tN(e)}function aN(e){return Array.isArray(e)&&Array.isArray(e[0])}function iN(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function oN(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new SI("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function sN(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new SI("Expected exactly 1 Shape; got ".concat(e.length))}return e}function uN(e){var t,n=0,r=Rc(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;0===a.shape.length?n+=1:n+=a.shape.reduce((function(e,t){return e*t}))}}catch(eq){r.e(eq)}finally{r.f()}return n}var cN="Variable",lN=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cN,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Fc(this,e),this.dtype=null==n?"float32":n,this.shape=t.shape,this.id=qI(),r=null==r?cN:r,this.originalName=sC(r),this.name=uC(this.originalName),this.trainable_=a,this.constraint=i,this.val=db(t,this.trainable_,this.name,this.dtype)}return Oc(e,[{key:"read",value:function(){return this.assertNotDisposed(),this.val}},{key:"write",value:function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}},{key:"dispose",value:function(){this.assertNotDisposed(),this.val.dispose()}},{key:"assertNotDisposed",value:function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e}}]),e}();function fN(e){return e.map((function(e){return e.read()}))}function hN(e){e.forEach((function(e){e[0].write(e[1])}))}var dN=Oc((function e(t){Fc(this,e),this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}})),pN=Oc((function e(t,n,r,a,i,o,s){Fc(this,e),this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=i,this.outputTensorIndex=s,this.id=qI(),null!=o&&(this.originalName=sC(o),this.name=uC(this.originalName)),this.rank=n.length})),vN=0,mN=function(){function e(t,n){Fc(this,e),this.callArgs=n,this.id=vN++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;var r,a=Rc(t.inboundLayers);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&i.outboundNodes.push(this)}}catch(eq){a.e(eq)}finally{a.f()}t.outboundLayer.inboundNodes.push(this)}return Oc(e,[{key:"getConfig",value:function(){var e,t=[],n=Rc(this.inboundLayers);try{for(n.s();!(e=n.n()).done;){var r=e.value;null!=r?t.push(r.name):t.push(null)}}catch(eq){n.e(eq)}finally{n.f()}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}]),e}(),gN=0,yN=function(e){mp(n,e);var t=wp(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Fc(this,n),(e=t.call(this))._callHook=null,e._addedWeightNames=[],e._stateful=!1,e.id=gN++,e.activityRegularizer=null,e.inputSpec=null,e.supportsMasking=!1,e._trainableWeights=[],e._nonTrainableWeights=[],e._losses=[],e._updates=[],e._built=!1,e.inboundNodes=[],e.outboundNodes=[];var a=r.name;if(!a){var i=e.getClassName();a=DI(i)+"_"+YI(i)}if(e.name=a,e.trainable_=null==r.trainable||r.trainable,null!=r.inputShape||null!=r.batchInputShape){var o;if(null!=r.batchInputShape)o=r.batchInputShape;else if(null!=r.inputShape){var s=null;null!=r.batchSize&&(s=r.batchSize),o=[s].concat(r.inputShape)}e.batchInputShape=o;var u=r.dtype;null==u&&(u=r.inputDType),null==u&&(u="float32"),e.dtype=u}return null!=r.weights?e.initialWeights=r.weights:e.initialWeights=null,e._refCount=null,e.fastWeightInitDuringBuild=!1,e}return Oc(n,[{key:"getNodeAtIndex",value:function(e,t){if(0===this.inboundNodes.length)throw new wI("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new SI("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}},{key:"getInputAt",value:function(e){return RI(this.getNodeAtIndex(e,"input").inputTensors)}},{key:"getOutputAt",value:function(e){return RI(this.getNodeAtIndex(e,"output").outputTensors)}},{key:"input",get:function(){if(this.inboundNodes.length>1)throw new kI("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new kI("Layer ".concat(this.name)+" is not connected, no input to return.");return RI(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new kI("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new kI("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return RI(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"calculateLosses",value:function(){return this.losses.map((function(e){return e()}))}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(e){this._built=e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"resetStates",value:function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}},{key:"assertInputCompatibility",value:function(e){if(e=FI(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=FI(this.inputSpec);if(e.length!==t.length)throw new SI("Layer ".concat(this.name," expects ").concat(t.length," inputs, ")+"but it received ".concat(e.length," input tensors. ")+"Input received: ".concat(e));for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(null!=a){var i=r.rank;if(null!=a.ndim&&i!==a.ndim)throw new SI("Input ".concat(n," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(a.ndim,", found ndim=").concat(i));if(null!=a.maxNDim&&i>a.maxNDim)throw new SI("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(a.maxNDim,", found ndim=").concat(i));if(null!=a.minNDim&&i<a.minNDim)throw new SI("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(a.minNDim,", found ndim=").concat(i,"."));if(null!=a.dtype&&r.dtype!==a.dtype)throw new SI("Input ".concat(n," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(a.dtype,", found dtype=").concat(r.dtype,"."));if(a.axes){var o=r.shape;for(var s in a.axes){var u=Number(s),c=a.axes[s],l=u>=0?o[u]:o[o.length+u];if(null!=c&&-1===[c,null].indexOf(l))throw new SI("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(u," of input shape to ")+"have value ".concat(c," but got shape ").concat(o,"."))}}if(null!=a.shape)for(var f=0;f<a.shape.length;++f){var h=a.shape[f],d=r.shape[f];if(null!=h&&null!=d&&h!==d)throw new SI("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(a.shape,", ")+"found shape=".concat(r.shape,"."))}}}}}},{key:"call",value:function(e,t){return e}},{key:"invokeCallHook",value:function(e,t){null!=this._callHook&&this._callHook(e,t)}},{key:"setCallHook",value:function(e){this._callHook=e}},{key:"clearCallHook",value:function(){this._callHook=null}},{key:"apply",value:function(e,t){var n=this;t=t||{},this.assertNotDisposed();var r,a=FI(e),i=!0,o=Rc(a);try{for(o.s();!(r=o.n()).done;){if(!(r.value instanceof pN)){i=!1;break}}}catch(eq){o.e(eq)}finally{o.f()}var s,u=!0,c=Rc(a);try{for(c.s();!(s=c.n()).done;){if(s.value instanceof pN){u=!1;break}}}catch(eq){c.e(eq)}finally{c.f()}if(i===u)throw new SI("Arguments to apply() must be all SymbolicTensors or all Tensors");return oC(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);var r,i=[],o=Rc(FI(e));try{for(o.s();!(r=o.n()).done;){var s=r.value;i.push(s.shape)}}catch(eq){o.e(eq)}finally{o.f()}n.build(RI(i)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&u&&(n._refCount=1)}if(n.assertInputCompatibility(e),u){var c,l=n.call(e,t),f=[],h=Rc(FI(l));try{for(h.s();!(c=h.n()).done;){var d=c.value;-1!==a.indexOf(d)&&(d=d.clone()),f.push(d)}}catch(eq){h.e(eq)}finally{h.f()}if(l=RI(f),null!=n.activityRegularizer)throw new II("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}var p,v=function(e){e=FI(e);var t,n=[],r=Rc(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.shape)}}catch(eq){r.e(eq)}finally{r.f()}return RI(n)}(e),m=n.computeOutputShape(v),g="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?v[0]:v),p=null!=m&&m.length>0&&Array.isArray(m[0])?m.map((function(r,a){return new pN(g,r,n,FI(e),t,n.name,a)})):new pN(g,m,n,FI(e),t,n.name),n.addInboundNode(e,p,null,null,v,m,t),n._refCount++,null!=n.activityRegularizer)throw new II("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return p}))}},{key:"warnOnIncompatibleInputShape",value:function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new kI("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");var e,t=[],n=Rc(this.inboundNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=JSON.stringify(r.outputShapes);-1===t.indexOf(a)&&t.push(a)}}catch(eq){n.e(eq)}finally{n.f()}if(1===t.length){var i=this.inboundNodes[0].outputShapes;return Array.isArray(i)&&Array.isArray(i[0])&&1===i.length?i[0]:i}throw new kI("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}},{key:"countParams",value:function(){if(!this.built)throw new wI("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return uN(this.weights)}},{key:"build",value:function(e){this.built=!0}},{key:"getWeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return fN(e?this.trainableWeights:this.weights)}},{key:"setWeights",value:function(e){var t=this;ng((function(){var n=t.weights;if(n.length!==e.length)throw new SI('You called setWeights(weights) on layer "'.concat(t.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(n.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0!==n.length){for(var r=[],a=fN(n),i=0;i<a.length;++i){var o=a[i],s=n[i],u=e[i];if(!qc(o.shape,u.shape))throw new SI("Layer weight shape ".concat(o.shape," ")+"not compatible with provided weight shape ".concat(u.shape));r.push([s,u])}hN(r)}}))}},{key:"addWeight",value:function(e,t,n,r,a,i,o,s){if(-1!==this._addedWeightNames.indexOf(e))throw new SI("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():rN("zeros"));var u=r.apply(t,n),c=new lN(u,n,e,i,o);return u.dispose(),null!=a&&this.addLoss((function(){return a.apply(c.read())})),null==i&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}},{key:"setFastWeightInitDuringBuild",value:function(e){this.fastWeightInitDuringBuild=e}},{key:"addLoss",value:function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=FI(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,Et(e)))}},{key:"computeOutputShape",value:function(e){return e}},{key:"computeMask",value:function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach((function(e){if(null!=e)throw new TypeError("Layer ".concat(n.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return t}},{key:"addInboundNode",value:function(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=FI(e);t=FI(t),n=FI(n),r=FI(r),a=iN(a),i=iN(i);var u,c=[],l=[],f=[],h=Rc(s);try{for(h.s();!(u=h.n()).done;){var d=u.value;c.push(d.sourceLayer),l.push(d.nodeIndex),f.push(d.tensorIndex)}}catch(eq){h.e(eq)}finally{h.f()}new mN({outboundLayer:this,inboundLayers:c,nodeIndices:l,tensorIndices:f,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},o);for(var p=0;p<t.length;p++)t[p].sourceLayer=this,t[p].nodeIndex=this.inboundNodes.length-1,t[p].tensorIndex=p}},{key:"getConfig",value:function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}},{key:"disposeWeights",value:function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length}},{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();var e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}],[{key:"nodeKey",value:function(e,t){return e.name+"_ib-"+t.toString()}}]),n}(Jm);function bN(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];var r=t.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var a=[],i=0;i<r.inboundLayers.length;i++){var o,s=Rc(bN(r.inputTensors[i],r.inboundLayers[i],r.nodeIndices[i]));try{for(s.s();!(o=s.n()).done;){var u=o.value;-1===a.indexOf(u)&&a.push(u)}}catch(eq){s.e(eq)}finally{s.f()}}return a}var xN=function(e){mp(n,e);var t=wp(n);function n(e){var r;if(Fc(this,n),r=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:YI("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new SI("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var a=e.batchInputShape;if(null==a){if(null==e.inputShape)throw new SI("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");a=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new SI("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var i=e.dtype||"float32";r.batchInputShape=a,r.dtype=i,r.inputSpec=[{shape:a}];var o=new pN(r.dtype,r.batchInputShape,xp(r),[],{},r.name);return o.nodeIndex=0,o.tensorIndex=0,new mN({outboundLayer:xp(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[a],outputShapes:[a]}),r}return Oc(n,[{key:"apply",value:function(e,t){throw new SI("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}},{key:"dispose",value:function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}},{key:"getConfig",value:function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}]),n}(yN);xN.className="InputLayer",$m(xN);var kN=function(){function e(t){if(Fc(this,e),this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;var r,a=Rc(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.add(i.key,i.value)}}catch(eq){a.e(eq)}finally{a.f()}}}return Oc(e,[{key:"add",value:function(e,t,n){if(null!=this.id2Value[e.id])throw new SI("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return ym(t,e.dtype)}catch(eq){throw new SI("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}},{key:"addFeed",value:function(e){this.add(e.key,e.value)}},{key:"hasKey",value:function(e){return null!=this.id2Value[e.id]}},{key:"names",value:function(){return Object.keys(this.name2Id)}},{key:"getValue",value:function(e){if(e instanceof pN){if(null==this.id2Value[e.id])throw new SI("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new SI("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}},{key:"getMask",value:function(e){if(e instanceof pN){if(null==this.id2Value[e.id])throw new SI("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new SI("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}},{key:"disposeMasks",value:function(){null!=this.id2Mask&&rg(this.id2Mask)}}]),e}(),wN=new NI,SN=new NI;function IN(e,t,n,r){var a,i=null!=n&&n.training,o=Array.isArray(e),s=o?e:[e],u=s.map((function(e){return e.name})),c=[],l=t.names(),f=Rc(u);try{for(f.s();!(a=f.n()).done;){var h=a.value;-1!==l.indexOf(h)?c.push(t.getValue(h)):c.push(null)}}catch(eq){f.e(eq)}finally{f.f()}null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var d,p=u.join(",")+"|"+t.names().sort().join(","),v=wN.get(p);if(null==v){var m=function(e,t){Vc(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],r={};if(1===e.length){var a=NN(e[0],t);n=a.sorted,r=a.recipientMap}else{var i,o=new Set,s=Rc(e);try{for(s.s();!(i=s.n()).done;){var u,c=NN(i.value,t),l=c.sorted,f=c.recipientMap,h=Rc(l);try{for(h.s();!(u=h.n()).done;){var d=u.value;o.has(d.name)||(n.push(d),o.add(d.name))}}catch(eq){h.e(eq)}finally{h.f()}var p=function(e){null==r[e]&&(r[e]=new Set),f[e].forEach((function(t){return r[e].add(t)}))};for(var v in f)p(v)}}catch(eq){s.e(eq)}finally{s.f()}}return{sorted:n,recipientCounts:CN(r)}}(s,t);v=m.sorted,d=m.recipientCounts,wN.put(p,v),SN.put(p,d)}d={},i||Object.assign(d,SN.get(p));for(var g=new kN(t),y=0;y<v.length;++y){if(null!=r){var b=tg().numTensors;b>r.maxNumTensors&&(r.maxNumTensors=b),b<r.minNumTensors&&(r.minNumTensors=b)}var x=v[y],k=x.sourceLayer;if(!(k instanceof xN)){var w,S=[],I=[],C=[],N=!1,E=Rc(x.inputs);try{for(E.s();!(w=E.n()).done;){var T=w.value,A=g.getValue(T),R=g.getMask(T);S.push(A),I.push(R),null!=R&&(N=!0),i||(d[T.name]--,0!==d[T.name]||t.hasKey(T)||-1!==u.indexOf(T.name)||A.isDisposed||!0===T.sourceLayer.stateful||C.push(A))}}catch(eq){E.e(eq)}finally{E.f()}N&&((n=n||{}).mask=I[0]);var F=FI(k.apply(S,n)),D=null;k.supportsMasking&&(D=k.computeMask(S,I));for(var O=EN(x),L=Array.isArray(O)?O:[O],_=0;_<L.length;++_){g.hasKey(L[_])||g.add(L[_],F[_],Array.isArray(D)?D[0]:D);var M=u.indexOf(L[_].name);-1!==M&&(c[M]=F[_])}i||rg(C)}}return g.disposeMasks(),o?c:c[0]}function CN(e){var t={};for(var n in e)t[n]=e[n].size;return t}function NN(e,t){var n,r=new Set,a=[],i={},o=Rc(t.names());try{for(o.s();!(n=o.n()).done;){var s=n.value;r.add(s)}}catch(eq){o.e(eq)}finally{o.f()}var u=[],c=[];for(u.push(e);u.length>0;){var l=u[u.length-1];if(r.has(l.name))u.pop();else{var f=c[c.length-1]===u.length-1;if(0===l.inputs.length||f)u.pop(),a.push(l),r.add(l.name),f&&c.pop();else{c.push(u.length-1);var h,d=Rc(l.inputs);try{for(d.s();!(h=d.n()).done;){var p=h.value;null==i[p.name]&&(i[p.name]=new Set),i[p.name].add(l.name),r.has(p.name)||u.push(p)}}catch(eq){d.e(eq)}finally{d.f()}}}}return{sorted:a,recipientMap:i}}function EN(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r){var a,i=Rc(e.sourceLayer.inboundNodes[r].outputTensors);try{for(i.s();!(a=i.n()).done;){if(a.value.id===e.id){n=r;break}}}catch(eq){i.e(eq)}finally{i.f()}}t=e.sourceLayer.getOutputAt(n)}return t}function TN(e,t){return ng((function(){return ob(my(py(e,e),t,!0))}))}Cl().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(function(){return 100}),(function(e){null!=wN&&wN.setMaxEntries(e),null!=SN&&SN.setMaxEntries(e)}));var AN=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"getConfig",value:function(){return{}}}]),n}(Jm),RN=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this)).defaultMaxValue=2,r.defaultAxis=0,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return Oc(n,[{key:"apply",value:function(e){var t=this;return ng((function(){var n=TN(e,t.axis),r=zg(n,0,t.maxValue);return py(e,Qg(r,lg(gC(),n)))}))}},{key:"getConfig",value:function(){return{maxValue:this.maxValue,axis:this.axis}}}]),n}(AN);RN.className="MaxNorm",$m(RN);var FN=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this)).defaultAxis=0,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return Oc(n,[{key:"apply",value:function(e){var t=this;return ng((function(){return Qg(e,lg(gC(),TN(e,t.axis)))}))}},{key:"getConfig",value:function(){return{axis:this.axis}}}]),n}(AN);FN.className="UnitNorm",$m(FN);var DN=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"apply",value:function(e){return qy(e)}}]),n}(AN);DN.className="NonNeg",$m(DN);var ON=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this)).defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=null!=e.minValue?e.minValue:r.defaultMinValue,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.rate=null!=e.rate?e.rate:r.defaultRate,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return Oc(n,[{key:"apply",value:function(e){var t=this;return ng((function(){var n=TN(e,t.axis),r=lg(py(t.rate,zg(n,t.minValue,t.maxValue)),py(1-t.rate,n));return py(e,Qg(r,lg(gC(),n)))}))}},{key:"getConfig",value:function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}]),n}(AN);ON.className="MinMaxNorm",$m(ON);var LN,_N={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function MN(e){return _I(e)}function zN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return zI(e,Qm.getMap().classNameMap,t,"constraint")}function PN(e){return null==e?null:"string"===typeof e?zN({className:e in _N?_N[e]:e,config:{}}):e instanceof AN?e:zN(e)}function BN(e){return WN.apply(this,arguments)}function WN(){return WN=Ue(Xe().mark((function e(t){var n,r,a,i,o,s,u,c;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:for(i in n=[],r=[],a=[],t)"number"!==typeof(o=t[i])&&(s=o,n.push(s.data()),r.push(i),a.push(s));if(!(n.length>0)){e.next=12;break}return e.next=9,Promise.all(n);case 9:for(u=e.sent,c=0;c<u.length;++c)t[r[c]]=u[c][0];rg(a);case 12:case"end":return e.stop()}}),e)}))),WN.apply(this,arguments)}function UN(e){if(null!=e)for(var t in e){var n=e[t];"number"!==typeof n&&n.dispose()}}!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(LN||(LN={}));var VN=function(){function e(){Fc(this,e),this.validationData=null}return Oc(e,[{key:"setParams",value:function(e){this.params=e}},{key:"onEpochBegin",value:function(){var e=Ue(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Ue(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=Ue(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Ue(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=Ue(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Ue(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setModel",value:function(e){}}]),e}(),jN=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;Fc(this,e),null==t&&(t=[]),this.callbacks=t,this.queueLength=n}return Oc(e,[{key:"append",value:function(e){this.callbacks.push(e)}},{key:"setParams",value:function(e){var t,n=Rc(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setParams(e)}}catch(eq){n.e(eq)}finally{n.f()}}},{key:"setModel",value:function(e){var t,n=Rc(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setModel(e)}}catch(eq){n.e(eq)}finally{n.f()}}},{key:"onEpochBegin",value:function(){var e=Ue(Xe().mark((function e(t,n){var r,a,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Rc(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Ue(Xe().mark((function e(t,n){var r,a,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Rc(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=Ue(Xe().mark((function e(t,n){var r,a,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Rc(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Ue(Xe().mark((function e(t,n){var r,a,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Rc(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=Ue(Xe().mark((function e(t){var n,r,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=Rc(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainBegin(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Ue(Xe().mark((function e(t){var n,r,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=Rc(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainEnd(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),GN=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.call(this)}return Oc(n,[{key:"onEpochBegin",value:function(){var e=Ue(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.seen=0,this.totals={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Ue(Xe().mark((function e(t,n){var r,a,i,o=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in null==n&&(n={}),r=null==n.size?0:n.size,this.seen+=r,a=function(e){var t=n[e];if("number"===typeof t)o.totals.hasOwnProperty(e)||(o.totals[e]=0),o.totals[e]=o.totals[e]+t*r;else{var a;e in o.totals?a=o.totals[e]:o.totals[e]=0;var i=ng((function(){return lg(o.totals[e],py(t,r))}));o.totals[e]=i,null!=a&&a.dispose()}},n)a(i);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Ue(Xe().mark((function e(t,n){var r,a,i,o=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n){e.next=19;break}r=Rc(this.params.metrics),e.prev=2,i=function(){var e=a.value;if(null==o.totals[e])return"continue";"number"===typeof o.totals[e]?n[e]=o.totals[e]/o.seen:ng((function(){var t=py(Qg(1,o.seen),o.totals[e]);n[e]=t,o.totals[e].dispose(),ag(n[e])}))},r.s();case 5:if((a=r.n()).done){e.next=11;break}if("continue"!==i()){e.next=9;break}return e.abrupt("continue",9);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[2,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(VN),HN=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"onTrainBegin",value:function(){var e=Ue(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.epoch=[],this.history={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Ue(Xe().mark((function e(t,n){var r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in null==n&&(n={}),this.epoch.push(t),n)null==this.history[r]&&(this.history[r]=[]),this.history[r].push(n[r]);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"syncData",value:function(){var e=Ue(Xe().mark((function e(){var t,n,r,a,i,o,s,u,c;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],n=[],r=[],this.history)for(i=this.history[a],o=0;o<i.length;++o)"number"!==typeof i[o]&&(s=i[o],t.push(s.data()),n.push(a),r.push(o));return e.next=6,Promise.all(t);case 6:for(u=e.sent,c=0;c<u.length;++c)this.history[n[c]][r[c]].dispose(),this.history[n[c]][r[c]]=u[c][0];case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(VN),KN=function(e){mp(n,e);var t=wp(n);function n(e,r){var a;if(Fc(this,n),(a=t.call(this)).currentEpoch=0,a.nowFunc=e.nowFunc,a.nextFrameFunc=e.nextFrameFunc||Kx,a.yieldEvery=r||"auto","auto"===a.yieldEvery&&(a.yieldEvery=125),"never"===a.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return sl(a.yieldEvery)&&(a.maybeWait=function(e,t,n){var r,a=null!=n?n():up();return function(){var i=null!=n?n():up();return i-a<t?r:(a=i,r=e.apply(void 0,arguments))}}(a.maybeWait.bind(xp(a)),a.yieldEvery,a.nowFunc)),a.trainBegin=e.onTrainBegin,a.trainEnd=e.onTrainEnd,a.epochBegin=e.onEpochBegin,a.epochEnd=e.onEpochEnd,a.batchBegin=e.onBatchBegin,a.batchEnd=e.onBatchEnd,a.yield=e.onYield,a}return Oc(n,[{key:"maybeWait",value:function(){var e=Ue(Xe().mark((function e(t,n,r){var a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],null==this.yield){e.next=5;break}return e.next=4,BN(r);case 4:a.push(this.yield(t,n,r));case 5:return a.push(this.nextFrameFunc()),e.next=8,Promise.all(a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"onEpochBegin",value:function(){var e=Ue(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch=t,null==this.epochBegin){e.next=6;break}return e.next=4,BN(n);case 4:return e.next=6,this.epochBegin(t,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Ue(Xe().mark((function e(t,n){var r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.epochEnd){e.next=5;break}return e.next=4,BN(n);case 4:r.push(this.epochEnd(t,n));case 5:return"epoch"===this.yieldEvery&&r.push(this.nextFrameFunc()),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=Ue(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.batchBegin){e.next=5;break}return e.next=3,BN(n);case 3:return e.next=5,this.batchBegin(t,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Ue(Xe().mark((function e(t,n){var r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.batchEnd){e.next=5;break}return e.next=4,BN(n);case 4:r.push(this.batchEnd(t,n));case 5:return"batch"===this.yieldEvery?r.push(this.nextFrameFunc()):sl(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,n)),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=Ue(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainBegin){e.next=5;break}return e.next=3,BN(t);case 3:return e.next=5,this.trainBegin(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Ue(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainEnd){e.next=5;break}return e.next=3,BN(t);case 3:return e.next=5,this.trainEnd(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(VN);function qN(e,t){return null==e&&(e={}),e instanceof VN?[e]:Array.isArray(e)&&e[0]instanceof VN?e:FI(e).map((function(e){return new KN(e,t)}))}var XN=function(){function e(){Fc(this,e)}return Oc(e,null,[{key:"registerCallbackConstructor",value:function(t,n){Vc(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(t)})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)}},{key:"checkForDuplicate",value:function(t){for(var n in e.constructors){e.constructors[+n].forEach((function(e){if(e===t)throw new SI("Duplicate callback constructor.")}))}}},{key:"clear",value:function(){e.constructors={}}},{key:"createCallbacks",value:function(t){var n=[];for(var r in e.constructors){var a=+r;t>=a&&n.push.apply(n,Et(e.constructors[a]))}return n.map((function(e){return new e}))}}]),e}();function YN(e,t,n,r,a,i,o,s,u){var c=new HN,l=[new GN].concat(Et(XN.createCallbacks(t)));null!=e&&l.push.apply(l,Et(e)),l.push(c);var f=new jN(l);return f.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:o,verbose:t,doValidation:s,metrics:u}),{callbackList:f,history:c}}function ZN(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gp(e)););return e}function JN(){return JN="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=ZN(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},JN.apply(this,arguments)}function QN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return zI(e,Qm.getMap().classNameMap,t,"layer",n)}function $N(e,t){return ng((function(){"float32"!==e.dtype&&(e=ym(e,"float32"));var n=my(RC(e),t,!0),r=iy(n.shape,gC()),a=ob(wy(n,r));return Qg(e,a)}))}function eE(e,t){return ng((function(){return Sy(RC(vy(t,e)),-1)}))}function tE(e,t){return ng((function(){return Sy(cg(vy(t,e)),-1)}))}function nE(e,t){return ng((function(){var n=vy(e,t),r=zg(cg(e),gC(),Number.MAX_VALUE),a=cg(Qg(n,r));return py(100,Sy(a,-1))}))}function rE(e,t){return ng((function(){var n=zg(t,gC(),Number.MAX_VALUE),r=fy(lg(1,n)),a=zg(e,gC(),Number.MAX_VALUE),i=fy(lg(1,a));return Sy(RC(vy(r,i)),-1)}))}function aE(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ng((function(){if(n)t=rb(t);else{var r=my(t,t.shape.length-1,!0);t=Qg(t,r)}return t=zg(t,gC(),1-gC()),Ly(my(py(ym(e,"float32"),fy(t)),t.shape.length-1))}))}function iE(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ng((function(){var r=ym(oy(xC(e)),"int32"),a=(t=zg(t,gC(),1-gC())).shape;return aE(Rg(My(r,a[a.length-1]),a),t,n)}))}function oE(e,t){return ng((function(){var n;return n=zg(t,gC(),1-gC()),n=fy(Qg(n,vy(1,n))),Sy(function(e,t){if(!qc(e.shape,t.shape))throw new SI("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return ng((function(){var n=qy(t),r=Ly(cg(t));return lg(vy(n,py(t,e)),hy(ty(r)))}))}(e,n),-1)}))}function sE(e,t){return ng((function(){var n=zg(e,gC(),1),r=zg(t,gC(),1);return my(py(e,fy(Qg(n,r))),-1)}))}function uE(e,t){return ng((function(){var n=$N(e,-1),r=$N(t,-1),a=py(n,r);return Ly(my(a,-1))}))}XN.constructors={};var cE={meanSquaredError:eE,meanAbsoluteError:tE,meanAbsolutePercentageError:nE,meanSquaredLogarithmicError:rE,squaredHinge:function(e,t){return ng((function(){var n=wy(0,vy(1,py(e,t)));return Sy(RC(n),-1)}))},hinge:function(e,t){return ng((function(){var n=wy(0,vy(1,py(e,t)));return Sy(n,-1)}))},categoricalHinge:function(e,t){return ng((function(){var n=my(py(e,t),-1),r=dy(py(vy(1,e),t),-1);return wy(0,lg(1,vy(r,n)))}))},logcosh:function(e,t){return ng((function(){var n=Math.log(2),r=vy(t,e),a=vy(lg(r,ab(py(-2,r))),n);return Sy(a,-1)}))},categoricalCrossentropy:aE,sparseCategoricalCrossentropy:iE,binaryCrossentropy:oE,kullbackLeiblerDivergence:sE,poisson:function(e,t){return ng((function(){var n=fy(lg(gC(),t));return Sy(vy(t,py(e,n)),-1)}))},cosineProximity:uE};function lE(e){if("string"===typeof e){if(e in cE)return cE[e];var t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new SI(t)}return e}function fE(e,t){return ng((function(){var n=py(.5,By(t)),r=yC(uy(t,n),e.dtype);return Sy(ey(e,r),-1)}))}function hE(e,t){return ng((function(){return yC(ey(dg(e,-1),dg(t,-1)),"float32")}))}function dE(e,t){return ng((function(){return ym(my(yy(ey(e,1),ey(t,1))),"float32")}))}function pE(e,t){return oE(e,t)}function vE(e,t){return e.rank===t.rank&&(e=sb(e,[e.rank-1])),(t=dg(t,-1)).dtype!==e.dtype&&(t=ym(t,e.dtype)),ym(ey(e,t),"float32")}var mE=aE,gE=iE,yE={binaryAccuracy:fE,categoricalAccuracy:hE,precision:function(e,t){return ng((function(){var n=dE(e,t),r=function(e,t){return ng((function(){return ym(my(yy(ey(e,0),ey(t,1))),"float32")}))}(e,t),a=lg(n,r);return ym(vb(uy(a,0),Qg(n,a),0),"float32")}))},categoricalCrossentropy:mE,sparseCategoricalCrossentropy:gE,mse:eE,MSE:eE,mae:tE,MAE:tE,mape:nE,MAPE:nE,cosine:uE};function bE(e){if("string"===typeof e&&e in yE)return yE[e];if("string"!==typeof e&&null!=e)return e;throw new SI("Unknown metric ".concat(e))}function xE(e){if(TI(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;for(var t,n=0,r=Object.keys(cE);n<r.length;n++){var a=r[n];if(cE[a]===e){t=a;break}}if(void 0!==t)return t;for(var i=0,o=Object.keys(yE);i<o.length;i++){var s=o[i];if(yE[s]===e){t=s;break}}return void 0!==t?t:e.name}var kE=1048576;function wE(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!SE(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>kE&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(r.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(kE,"."))}}function SE(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("string"!==typeof r)return!1;if(!SE(e[r]))return!1}return!0}if(Array.isArray(e)){var a,i=Rc(e);try{for(i.s();!(a=i.n()).done;){if(!SE(a.value))return!1}}catch(eq){i.e(eq)}finally{i.f()}return!0}return!1}var o=typeof e;return"string"===o||"number"===o||"boolean"===o}function IE(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,i=NE(e),o=["Layer (type)","Input Shape","Output shape","Param #"];if(i?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!i)for(var s in o.push("Receives inputs"),r=[],e.nodesByDepth){var u;(u=r).push.apply(u,Et(e.nodesByDepth[s]))}a("_".repeat(t)),EE(o,n,a),a("=".repeat(t));for(var c=e.layers,l=0;l<c.length;++l)i?TE(c[l],n,a):AE(c[l],n,r,a),a((l===c.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var f=CE(e),h=uN(e.nonTrainableWeights);a("Total params: ".concat(f+h)),a("Trainable params: ".concat(f)),a("Non-trainable params: ".concat(h)),a("_".repeat(t))}function CE(e){return null!=e.collectedTrainableWeights?uN(e.collectedTrainableWeights):uN(e.trainableWeights)}function NE(e){var t=!0,n=[],r=[];for(var a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(var i=0,o=n;i<o.length;i++){var s=o[i];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,Et(s))}if(t){var u,c=Rc(e.layers);try{for(c.s();!(u=c.n()).done;){var l,f=u.value,h=!1,d=Rc(f.inboundNodes);try{for(d.s();!(l=d.n()).done;){var p=l.value;if(-1!==r.indexOf(p)){if(h){t=!1;break}h=!0}}}catch(eq){d.e(eq)}finally{d.f()}if(!t)break}}catch(eq){c.e(eq)}finally{c.f()}}return t}function EE(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[a]).slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function TE(e,t,n){var r,a;try{a=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(eq){a="multiple"}try{r=JSON.stringify(e.outputShape)}catch(eq){r="multiple"}var i=e.name,o=e.getClassName();EE(["".concat(i," (").concat(o,")"),a,r,e.countParams().toString()],t,n)}function AE(e,t,n,r){var a,i;try{i=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(eq){i="multiple"}try{a=JSON.stringify(e.outputShape)}catch(eq){a="multiple"}var o,s=[],u=Rc(e.inboundNodes);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(c)))for(var l=0;l<c.inboundLayers.length;++l){var f=c.inboundLayers[l].name,h=c.nodeIndices[l],d=c.tensorIndices[l];s.push("".concat(f,"[").concat(h,"][").concat(d,"]"))}}}catch(eq){u.e(eq)}finally{u.f()}var p=e.name,v=e.getClassName(),m=0===s.length?"":s[0];EE(["".concat(p," (").concat(v,")"),i,a,e.countParams().toString(),m],t,r);for(var g=1;g<s.length;++g)EE(["","","","",s[g]],t,r)}function RE(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function FE(e,t){if(null===e)return null;if("string"===typeof e)return OI(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];RE(t,a,i)?n.push(i):n.push(FE(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var c=u[s],l=e[c];if("name"===c&&"string"===typeof l)o[c]=l;else{var f=OI(c);o[f]=FE(l,f)}}return o}function DE(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return DI(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];RE(t,a,i)?n.push(i):n.push(DE(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var c=u[s],l=e[c],f=DI(c);o[f]="name"!==c&&"className"!==c||"string"!==typeof l?DE(l,c):l}return o}var OE="3.17.0",LE=function(e){mp(n,e);var t=wp(n);function n(e){var r;if(Fc(this,n),(r=t.call(this,{})).containerNodes=new Set,r.name=e.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=YI(a)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(e.inputs)?r.inputs=e.inputs.slice():r.inputs=[e.inputs],Array.isArray(e.outputs)?r.outputs=e.outputs.slice():r.outputs=[e.outputs],BI(r.inputs).length!==r.inputs.length)throw new SI("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(r.inputs.map((function(e){return e.name}))));BI(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(r.outputs.map((function(e){return e.name})))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];var i,o=Rc(r.outputs);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.sourceLayer,c=s.nodeIndex,l=s.tensorIndex;r.outputLayers.push(u),r.outputLayersNodeIndices.push(c),r.outputLayersTensorIndices.push(l)}}catch(eq){o.e(eq)}finally{o.f()}var f,h=Rc(r.inputs);try{for(h.s();!(f=h.n()).done;){var d=f.value,p=d.sourceLayer,v=d.nodeIndex,m=d.tensorIndex;TI(0===v,"input layer has >1 nodes"),TI(0===m,"input layer has >1 tensors"),r.inputLayers.push(p),r.inputLayersNodeIndices.push(v),r.inputLayersTensorIndices.push(m)}}catch(eq){h.e(eq)}finally{h.f()}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var g=0;g<r.inputLayers.length;g++){var y=r.inputLayers[g];if(!(y instanceof xN))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(g," (0-based) originates ")+"from layer type ".concat(y.getClassName(),"."));r.inputNames.push(y.name),r.feedInputShapes.push(y.batchInputShape),r.feedInputNames.push(y.name)}var b,x=Rc(r.outputLayers);try{for(x.s();!(b=x.n()).done;){var k=b.value;r.outputNames.push(k.name)}}catch(eq){x.e(eq)}finally{x.f()}r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));var w,S={},I={},C={},N={},E={},T=[],A=function e(t,a,i,o,s,u){null!=o&&null!=s&&null!=u||(o=t.sourceLayer,s=t.nodeIndex,u=t.tensorIndex);var c=o.inboundNodes[s];if(-1!==i.indexOf(c))throw new wI("The tensor ".concat(t.name,' at layer "').concat(o.name,'" ')+"is part of a cycle.");if(-1===a.indexOf(c)){r.containerNodes.add(n.nodeKey(o,s)),o.id in E||(E[o.id]=Object.keys(E).length),-1===i.indexOf(c)&&i.push(c);for(var l=c.inboundLayers.length,f=0;f<l;f++){e(c.inputTensors[f],a,i,c.inboundLayers[f],c.nodeIndices[f],c.tensorIndices[f])}for(a.push(c);i.indexOf(c)>=0;)i.splice(i.indexOf(c),1);T.push(c)}},R=[],F=[],D=Rc(r.outputs);try{for(D.s();!(w=D.n()).done;){A(w.value,R,F)}}catch(eq){D.e(eq)}finally{D.f()}var O,L=Rc(T.slice().reverse());try{for(L.s();!(O=L.n()).done;){var _=O.value;I[_.id]=_,_.id in S||(S[_.id]=0);var M=S[_.id],z=null==C[_.outboundLayer.id]?0:C[_.outboundLayer.id];M=Math.max(M,z),C[_.outboundLayer.id]=M,N[_.outboundLayer.id]=_.outboundLayer,S[_.id]=M;for(var P=0;P<_.inboundLayers.length;P++){var B=_.inboundLayers[P],W=_.nodeIndices[P],U=B.inboundNodes[W],V=null==S[U.id]?0:S[U.id];S[U.id]=Math.max(M+1,V),I[U.id]=U}}}catch(eq){L.e(eq)}finally{L.f()}var j={};for(var G in S){var H=S[G];H in j||(j[H]=[]),j[H].push(I[G])}var K={};for(var q in C){var X=C[q];X in K||(K[X]=[]),K[X].push(N[q])}var Y=Object.keys(K).map((function(e){return parseInt(e,10)})).sort(PI);r.layers=[];var Z,J=Rc(Y);try{for(J.s();!(Z=J.n()).done;){var Q=K[Z.value];Q.sort((function(e,t){var n=E[e.id],r=E[t.id];return n<r?-1:n>r?1:0}));var $,ee=Rc(Q);try{for(ee.s();!($=ee.n()).done;){var te=$.value;te instanceof n&&r.internalContainerRefs.push(te),r.layers.push(te)}}catch(eq){ee.e(eq)}finally{ee.f()}}}catch(eq){J.e(eq)}finally{J.f()}r.layersByDepth=K,Y=Object.keys(j).map((function(e){return parseInt(e,10)})).sort(PI);var ne,re=r.inputs.slice(),ae=[],ie=Rc(Y);try{for(ie.s();!(ne=ie.n()).done;){var oe,se=Rc(j[ne.value]);try{for(se.s();!(oe=se.n()).done;){var ue=oe.value,ce=ue.outboundLayer;if(null!=ce){var le,fe=Rc(ue.inputTensors);try{for(fe.s();!(le=fe.n()).done;){var he=le.value;if(-1===re.indexOf(he))throw new wI("Graph disconnected: cannot obtain value for tensor ".concat(he)+' at layer "'.concat(ce.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(ae))}}catch(eq){fe.e(eq)}finally{fe.f()}var de,pe=Rc(ue.outputTensors);try{for(pe.s();!(de=pe.n()).done;){var ve=de.value;re.push(ve)}}catch(eq){pe.e(eq)}finally{pe.f()}ae.push(ce.name)}}}catch(eq){se.e(eq)}finally{se.f()}}}catch(eq){ie.e(eq)}finally{ie.f()}r.nodesByDepth=j;var me,ge=r.layers.map((function(e){return e.name})),ye=Rc(ge);try{var be=function(){var e=me.value,t=ge.filter((function(t){return t===e})).length;if(1!==t)throw new wI('The name "'.concat(e,'" is used ').concat(t," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(ge))};for(ye.s();!(me=ye.n()).done;)be()}catch(eq){ye.e(eq)}finally{ye.f()}return r.outboundNodes=[],r.inboundNodes=[],new mN({outboundLayer:xp(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,r}return Oc(n,[{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){var t,n=Rc(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.numDisposedVariables+=r.dispose().numDisposedVariables}}catch(eq){n.e(eq)}finally{n.f()}var a,i=Rc(this.internalContainerRefs);try{for(i.s();!(a=i.n()).done;){var o=a.value;e.numDisposedVariables+=o.dispose().numDisposedVariables}}catch(eq){i.e(eq)}finally{i.f()}}return e.refCountAfterDispose=this._refCount,e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new SI("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var e,t=[],n=Rc(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(r.trainableWeights)}}catch(eq){n.e(eq)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=Rc(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,Et(r.nonTrainableWeights))}}catch(eq){n.e(eq)}finally{n.f()}if(!this.trainable){var a,i=[],o=Rc(this.layers);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,Et(s.trainableWeights))}}catch(eq){o.e(eq)}finally{o.f()}return i.concat(t)}return t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"loadWeights",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},a=0,i=Rc(this.layers);try{for(i.s();!(t=i.n()).done;){var o,s=t.value,u=Rc(s.weights);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(null!=r[c.originalName])throw new SI("Duplicate weight name: ".concat(c.originalName));r[c.originalName]=c,a++}}catch(eq){u.e(eq)}finally{u.f()}}}catch(eq){i.e(eq)}finally{i.f()}var l=[];for(var f in e){var h=f;if(null==r[f]){var d=f.split("/"),p=d.slice(0,-2).concat([d[d.length-1]]);h=p.join("/")}if(null!=r[h])l.push([r[h],e[f]]);else if(n)throw new SI("Provided weight data has no target variable: ".concat(f));delete r[h]}if(n){var v=[];for(var m in r)v.push(m);if(v.length>0)throw new SI("".concat(v.length," of ").concat(a," weights are not set: ")+"".concat(v))}hN(l)}},{key:"updatedConfig",value:function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(OE),t.backend="TensorFlow.js",t}},{key:"toJSON",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=DE(this.updatedConfig());return t?JSON.stringify(n):n}},{key:"call",value:function(e,t){var n=this;return ng((function(){e=FI(e);for(var r=new kN,a=0;a<n.inputs.length;++a)r.add(n.inputs[a],e[a]);return IN(n.outputs,r,t)}))}},{key:"computeMask",value:function(e,t){var n=this;return ng((function(){var r;return e=FI(e),r=null==t?EI(null,e.length):FI(t),n.runInternalGraph(e,r)[1]}))}},{key:"computeOutputShape",value:function(e){var t=iN(e);if(t.length!==this.inputLayers.length)throw new SI("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));for(var n={},r=0;r<t.length;r++){var a=this.inputLayers[r],i=t[r];n[a.name+"_0_0"]=i}var o=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(PI);if(o.length>1){var s,u=Rc(o);try{for(u.s();!(s=u.n()).done;){var c,l=s.value,f=Rc(this.nodesByDepth[l]);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=h.outboundLayer;if(-1===this.inputLayers.map((function(e){return e.id})).indexOf(d.id)){for(var p=[],v=0;v<h.inboundLayers.length;v++){var m=h.inboundLayers[v],g=h.nodeIndices[v],y=h.tensorIndices[v],b=n["".concat(m.name,"_").concat(g,"_").concat(y)];p.push(b)}for(var x=iN(d.computeOutputShape(RI(p))),k=d.inboundNodes.indexOf(h),w=0;w<x.length;w++){n["".concat(d.name,"_").concat(k,"_").concat(w)]=x[w]}}}}catch(eq){f.e(eq)}finally{f.f()}}}catch(eq){u.e(eq)}finally{u.f()}}for(var S=[],I=[],C=0;C<this.outputLayers.length;C++){var N=this.outputLayers[C],E=this.outputLayersNodeIndices[C],T=this.outputLayersTensorIndices[C],A="".concat(N.name,"_").concat(E,"_").concat(T);I.push(A)}for(var R=0;R<I.length;R++){var F=I[R];TI(F in n),S.push(n[F])}return RI(S)}},{key:"runInternalGraph",value:function(e,t){null==t&&(t=EI(null,e.length));for(var n={},r=0;r<this.inputs.length;++r){var a=this.inputs[r],i=e[r],o=t[r];n[a.id]=[i,o]}var s,u=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(PI),c=Rc(u);try{for(c.s();!(s=c.n()).done;){var l,f=s.value,h=Rc(this.nodesByDepth[f]);try{for(h.s();!(l=h.n()).done;){var d,p=l.value,v=p.outboundLayer,m=p.inputTensors,g=p.outputTensors,y=new Array,b=Rc(m);try{for(b.s();!(d=b.n()).done;){var x=d.value;x.id in n&&y.push(n[x.id])}}catch(eq){b.e(eq)}finally{b.f()}if(y.length===m.length){var k={},w=void 0,S=void 0,I=void 0,C=void 0;if(null!=p.callArgs&&(k=p.callArgs),1===y.length){var N=Ke(y[0],2),E=N[0],T=N[1];null==k.mask&&(k.mask=T),I=FI(v.call(E,k)),C=FI(v.computeMask(E,T)),w=[E],S=[T]}else w=y.map((function(e){return e[0]})),S=y.map((function(e){return e[1]})),null==k.mask&&(k.mask=S),I=FI(v.call(w,k)),C=FI(v.computeMask(w,S));if(v.activityRegularizer)throw new II("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var A=0;A<g.length;++A){var R=g[A],F=I[A],D=C[A];n[R.id]=[F,D]}}}}catch(eq){h.e(eq)}finally{h.f()}}}catch(eq){c.e(eq)}finally{c.f()}var O,L=[],_=[],M=[],z=Rc(this.outputs);try{for(z.s();!(O=z.n()).done;){var P=O.value;TI(P.id in n,"Could not compute output ".concat(P.name," : ").concat(P.id));var B=Ke(n[P.id],2),W=B[0],U=B[1];M.push(W.shape),L.push(W),_.push(U)}}catch(eq){z.e(eq)}finally{z.f()}return[L,_,M]}},{key:"buildNodeConversionMap",value:function(e){var t,r,a={},i=Rc(this.layers);try{for(i.s();!(r=i.n()).done;){var o=r.value;t=o instanceof n?1:0;for(var s=0;s<o.inboundNodes.length;s++){var u=n.nodeKey(o,s);this.containerNodes.has(u)&&(a[u]=t,t+=1)}}}catch(eq){i.e(eq)}finally{i.f()}return a}},{key:"getLayer",value:function(e,t){if(null!=t){if(this.layers.length<=t)throw new SI("Was asked to retrieve layer at index ".concat(t,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[t]}if(null==e)throw new SI("Provide either a layer name or layer index");var n,r=Rc(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.name===e)return a}}catch(eq){r.e(eq)}finally{r.f()}throw new SI("No such layer: ".concat(e))}},{key:"calculateLosses",value:function(){var e=this;return ng((function(){var t,r=[],a=Rc(e.layers);try{for(a.s();!(t=a.n()).done;)for(var i=t.value,o=0;o<i.inboundNodes.length;++o){var s=n.nodeKey(i,o);e.containerNodes.has(s)&&r.push.apply(r,Et(i.calculateLosses()))}}catch(eq){a.e(eq)}finally{a.f()}return r}))}},{key:"getConfig",value:function(){var e,t={name:this.name},r=this.buildNodeConversionMap(this.layers),a=[],i=Rc(this.layers);try{for(i.s();!(e=i.n()).done;){for(var o=e.value,s=o.getClassName(),u=o.getConfig(),c=[],l=0;l<o.inboundNodes.length;l++){var f=o.inboundNodes[l],h=n.nodeKey(o,l),d={};if(this.containerNodes.has(h)){if(f.callArgs)try{JSON.stringify(f.callArgs),d=f.callArgs}catch(eq){console.warn("Layer ".concat(o.name," was passed ")+"non-serializable keyword arguments: "+"".concat(f.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),d={}}if(f.inboundLayers.length>0){for(var p=[],v=0;v<f.inboundLayers.length;v++){var m=f.inboundLayers[v],g=f.nodeIndices[v],y=f.tensorIndices[v],b=r[n.nodeKey(m,g)];null==b&&(b=0),p.push([m.name,b,y,d])}c.push(p)}}}var x={};x.name=o.name,x.className=s,x.config=u,x.inboundNodes=c,a.push(x)}}catch(eq){i.e(eq)}finally{i.f()}t.layers=a;for(var k=[],w=0;w<this.inputLayers.length;w++){var S=this.inputLayers[w],I=this.inputLayersNodeIndices[w],C=n.nodeKey(S,I);if(this.containerNodes.has(C)){var N=r[C];null!==N&&void 0!==N||(N=0);var E=this.inputLayersTensorIndices[w];k.push([S.name,N,E])}}t.inputLayers=k;for(var T=[],A=0;A<this.outputLayers.length;A++){var R=this.outputLayers[A],F=this.outputLayersNodeIndices[A],D=n.nodeKey(R,F);if(this.containerNodes.has(D)){var O=r[D];null!==O&&void 0!==O||(O=0);var L=this.outputLayersTensorIndices[A];T.push([R.name,O,L])}}return t.outputLayers=T,t}},{key:"stateful",get:function(){if(this._stateful)throw new SI("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");var e,t=Rc(this.layers);try{for(t.s();!(e=t.n()).done;){if(e.value.stateful)return!0}}catch(eq){t.e(eq)}finally{t.f()}return!1}},{key:"resetStates",value:function(){var e=this;ng((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={},a={};function i(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function o(e,t){var n,a,o=[],s=Rc(t);try{for(s.s();!(a=s.n()).done;){var u=a.value,c=u[0],l=u[1],f=u[2];if(n=null==u[3]?{}:u[3],!(c in r))return void i(e,t);var h=r[c];if(h.inboundNodes.length<=l)return void i(e,t);var d=h.inboundNodes[l];o.push(d.outputTensors[f])}}catch(eq){s.e(eq)}finally{s.f()}o.length>0&&e.apply(RI(o),n)}function s(e){var a=e.name,o=QN(e,null!=t.customObjects?t.customObjects:{});o.setFastWeightInitDuringBuild(n),r[a]=o,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new SI("Corrupted configuration, expected array for nodeData: ".concat(e));i(o,e)}))}var u,c=t.name,l=t.layers,f=Rc(l);try{for(f.s();!(u=f.n()).done;){var h=u.value;s(h)}}catch(eq){f.e(eq)}finally{f.f()}for(;!WI(a);){var d,p=Rc(l);try{for(p.s();!(d=p.n()).done;){var v=d.value,m=r[v.name];if(m.name in a){var g=a[m.name];delete a[m.name];var y,b=Rc(g);try{for(b.s();!(y=b.n()).done;){var x=y.value;o(m,x)}}catch(eq){b.e(eq)}finally{b.f()}}}}catch(eq){p.e(eq)}finally{p.f()}}var k,w=[],S=[],I=t.inputLayers,C=Rc(I);try{for(C.s();!(k=C.n()).done;){var N=k.value,E=N[0],T=N[1],A=N[2];TI(E in r);var R=r[E],F=R.inboundNodes[T].outputTensors;w.push(F[A])}}catch(eq){C.e(eq)}finally{C.f()}var D,O=t.outputLayers,L=Rc(O);try{for(L.s();!(D=L.n()).done;){var _=D.value,M=_[0],z=_[1],P=_[2];TI(M in r);var B=r[M],W=B.inboundNodes[z].outputTensors;S.push(W[P])}}catch(eq){L.e(eq)}finally{L.f()}return new e({inputs:w,outputs:S,name:c})}}]),n}(yN);function _E(e,t,n){var r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){var a=[];return t.forEach((function(t){t in e?a.push(e[t]):a.push(null)})),a}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function ME(e,t){return _E(e,t,"classWeight")}function zE(e,t,n,r){return PE.apply(this,arguments)}function PE(){return(PE=Ue(Xe().mark((function e(t,n,r,a){var i,o,s;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&null==a){e.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==r){e.next=15;break}return i=ng((function(){if(1===t.shape.length)return bm(t);if(2===t.shape.length){if(t.shape[1]>1){return dg(t,1)}if(1===t.shape[1])return Rg(t,[t.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(t.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(t.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),e.t0=Array,e.next=7,i.data();case 7:return e.t1=e.sent,o=e.t0.from.call(e.t0,e.t1),rg(i),s=[],o.forEach((function(e){if(null==r[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");s.push(r[e])})),e.abrupt("return",lb(s,"float32"));case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function BE(e,t){return py(e,t)}function WE(e,t){var n,r,a=t;n=a.xs,r=a.ys,Vc(null!=n&&null!=r,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)}));var i=UE("input",e.inputNames,n),o=UE("output",e.outputNames,r),s=i[0].shape[0];Vc(i.length===e.inputs.length,(function(){return"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(i.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")})),Vc(o.length===e.outputs.length,(function(){return"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(o.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")}));for(var u=function(t){Vc(i[t].shape[0]===s,(function(){return"Batch size mismatch: input "+"".concat(e.inputNames[t]," has ").concat(i[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},c=0;c<i.length;c++)u(c);for(var l=function(t){Vc(o[t].shape[0]===s,(function(){return"Batch size mismatch: output "+"".concat(e.outputNames[t]," has ").concat(o[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},f=0;f<o.length;f++)l(f);return{xs:i,ys:o}}function UE(e,t,n){if(n instanceof Fp)return[n];if(Array.isArray(n))return Vc(n.length===t.length,(function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")})),n;var r,a=[],i=Rc(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(null==n[o])throw new SI("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(o,"'."));a.push(n[o])}}catch(eq){i.e(eq)}finally{i.f()}return a}function VE(e){if(3===e.length)throw new II("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}function jE(e,t,n){return GE.apply(this,arguments)}function GE(){return GE=Ue(Xe().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h,d,p,v,m,g,y,b,x,k,w,S,I,C,N,E,T,A,R,F,D,O,L,_,M;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=r.batchesPerEpoch,Vc(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),Vc(null!=r,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),Vc(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(r.epochs)})),Vc(!a||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(r.batchesPerEpoch)})),Vc(null==r.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!t.isTraining){e.next=8;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 8:return t.isTraining=!0,e.prev=9,(i=null!=r.validationData)&&(KE(r.validationData)?Vc(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(r.validationBatches)})):(u=VE(r.validationData),o=u.xs,s=u.ys)),c=t.makeTrainFunction(),l=t.getDedupedMetricsNames(),f=i?l.slice().concat(l.map((function(e){return"val_"+e}))):l.slice(),h=qN(r.callbacks,r.yieldEvery),d=null==r.verbose?1:r.verbose,p=YN(h,d,r.epochs,null,null,HE(n,r),null,i,f),v=p.callbackList,m=p.history,v.setModel(t),t.history=m,e.next=22,v.onTrainBegin();case 22:return t.stopTraining_=!1,g=null==r.initialEpoch?0:r.initialEpoch,e.next=26,n.iterator();case 26:y=e.sent;case 27:if(!(g<r.epochs)){e.next=98;break}return b={},e.next=31,v.onEpochBegin(g);case 31:if(x=0,k=0,a){e.next=37;break}return e.next=36,n.iterator();case 36:y=e.sent;case 37:if(a&&!(x<r.batchesPerEpoch)){e.next=91;break}return e.next=40,y.next();case 40:if(w=e.sent,!a||!w.done){e.next=44;break}return console.warn("You provided `batchesPerEpoch` as "+"".concat(r.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(x," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(r.batchesPerEpoch*r.epochs," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("break",91);case 44:if(null==w.value){e.next=73;break}return S=WE(t,w.value),I=S.xs,C=S.ys,(N={}).batch=k,N.size=I[0].shape[0],e.next=51,v.onBatchBegin(k,N);case 51:if(E=[],null==r.classWeight){e.next=64;break}T=ME(r.classWeight,t.outputNames),A=0;case 55:if(!(A<T.length)){e.next=64;break}return e.t0=E,e.next=59,zE(C[A],null,T[A]);case 59:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 61:++A,e.next=55;break;case 64:for(R=I.concat(C).concat(E),F=c(R),rg(R),D=0;D<l.length;++D)O=l[D],L=F[D],N[O]=L,ag(L);return e.next=70,v.onBatchEnd(k,N);case 70:UN(N),k++,x++;case 73:if(!(a?x>=r.batchesPerEpoch:w.done)){e.next=87;break}if(!i){e.next=86;break}if(_=void 0,!KE(r.validationData)){e.next=84;break}return e.t2=FI,e.next=80,t.evaluateDataset(r.validationData,{batches:r.validationBatches});case 80:e.t3=e.sent,_=(0,e.t2)(e.t3),e.next=85;break;case 84:_=FI(t.evaluate(o,s,{batchSize:null==r.validationBatchSize?32:r.validationBatchSize,verbose:0}));case 85:for(M=0;M<t.metricsNames.length;++M)b["val_".concat(t.metricsNames[M])]=_[M];case 86:return e.abrupt("break",91);case 87:if(!t.stopTraining_){e.next=89;break}return e.abrupt("break",91);case 89:e.next=37;break;case 91:return e.next=93,v.onEpochEnd(g,b);case 93:if(g++,!t.stopTraining_){e.next=96;break}return e.abrupt("break",98);case 96:e.next=27;break;case 98:return e.next=100,v.onTrainEnd();case 100:return e.next=102,t.history.syncData();case 102:return e.abrupt("return",t.history);case 103:return e.prev=103,t.isTraining=!1,e.finish(103);case 106:case"end":return e.stop()}}),e,null,[[9,,103,106]])}))),GE.apply(this,arguments)}function HE(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function KE(e){return"function"===typeof e.iterator}function qE(e){return"function"===typeof e.next}function XE(e,t,n){return YE.apply(this,arguments)}function YE(){return YE=Ue(Xe().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=(r=r||{}).batches,i=t.testFunction,o=[],!(r.verbose>0)){e.next=6;break}throw new II("Verbose mode is not implemented yet.");case 6:if(Vc(!a||r.batches>0&&Number.isInteger(r.batches),(function(){return"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(r.batches))})),!qE(n)){e.next=11;break}e.t0=n,e.next=14;break;case 11:return e.next=13,n.iterator();case 13:e.t0=e.sent;case 14:s=e.t0,u=0,c=0,l=Xe().mark((function e(){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.next();case 2:if(n=e.sent,o=ng((function(){return n.value&&function(){var e=WE(t,n.value),r=e.xs,a=e.ys,s=r.concat(a),l=ng((function(){return i(s)}));if(rg(s),0===c)for(var f=0;f<l.length;++f)o.push(sg(0));for(var h=s[0].shape[0],d=function(e){var t=l[e],n=o[e];o[e]=ng((function(){return lg(o[e],py(h,t))})),c>0&&rg(n)},p=0;p<l.length;++p)d(p);rg(l),u+=h,++c}(),o})),!n.done){e.next=7;break}return a&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(r.batches," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("return","break");case 7:case"end":return e.stop()}}),e)}));case 18:if(a&&!(c<r.batches)){e.next=25;break}return e.delegateYield(l(),"t1",20);case 20:if("break"!==e.t1){e.next=23;break}return e.abrupt("break",25);case 23:e.next=18;break;case 25:for(f=0;f<o.length;++f)h=o[f],o[f]=Qg(o[f],u),rg(h);return e.abrupt("return",RI(o));case 27:case"end":return e.stop()}}),e)}))),YE.apply(this,arguments)}function ZE(e){Vc(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got ".concat(e)}))}function JE(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return kC(e,t,n-t)})):kC(e,t,n-t)}function QE(e,t){return ng((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return QE(e,t)})):AC(e,"int32"===t.dtype?t:ym(t,"int32"))}))}function $E(e,t){for(var n=[],r=0,a=null;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function eT(e,t,n,r,a,i,o,s,u,c,l,f,h,d,p){return tT.apply(this,arguments)}function tT(){return tT=Ue(Xe().mark((function e(t,n,r,a,i,o,s,u,c,l,f,h,d,p,v){var m,g,y,b,x,k,w,S;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==i&&(i=32),null==o&&(o=1),null==f&&(f=!0),null==d&&(d=0),m=!1,null!=c&&null!=l&&(m=!0),null==v){e.next=10;break}if(m=!0,null!=p){e.next=10;break}throw new SI("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");case 10:return null!=(g=t.checkNumSamples(r,i,p,"steps_per_epoch"))&&(y=mC(0,g)),null==s&&(s=1),b=YN(u,s,o,d,g,p,i,m,h),x=b.callbackList,k=b.history,x.setModel(t),t.history=k,e.next=18,x.onTrainBegin();case 18:t.stopTraining_=!1,w=Xe().mark((function e(o){var s;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.onEpochBegin(o);case 2:if(s={},null==p){e.next=7;break}throw new II("stepsPerEpoch mode is not implemented yet.");case 7:return e.delegateYield(Xe().mark((function e(){var o,u,h,d;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("batch"!==f){e.next=4;break}throw new II("batch shuffling is not implemneted yet");case 4:f&&zc(y);case 5:o=lb(y),u=$E(g,i),h=Xe().mark((function e(f){var h;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h={},e.next=3,x.onBatchBegin(f,h);case 3:return ng((function(){var e=u[f][0],d=u[f][1],p=kC(o,e,d-e);h.batch=f,h.size=d-e;for(var v=QE(r,p),g=n(v),y=0;y<a.length;++y){var b=a[y],x=g[y];h[b]=x,ag(x)}if(f===u.length-1&&m)for(var k=t.testLoop(c,l,i),w=0;w<a.length;++w){var S=a[w],I=k[w];ag(I),s["val_"+S]=I}})),e.next=6,x.onBatchEnd(f,h);case 6:if(UN(h),!t.stopTraining_){e.next=9;break}return e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),d=0;case 9:if(!(d<u.length)){e.next=17;break}return e.delegateYield(h(d),"t0",11);case 11:if("break"!==e.t0){e.next=14;break}return e.abrupt("break",17);case 14:++d,e.next=9;break;case 17:o.dispose();case 18:case"end":return e.stop()}}),e)}))(),"t0",8);case 8:return e.next=10,x.onEpochEnd(o,s);case 10:if(!t.stopTraining_){e.next=12;break}return e.abrupt("return","break");case 12:case"end":return e.stop()}}),e)})),S=d;case 21:if(!(S<o)){e.next=29;break}return e.delegateYield(w(S),"t0",23);case 23:if("break"!==e.t0){e.next=26;break}return e.abrupt("break",29);case 26:++S,e.next=21;break;case 29:return e.next=31,x.onTrainEnd();case 31:return e.next=33,t.history.syncData();case 33:return e.abrupt("return",t.history);case 34:case"end":return e.stop()}}),e)}))),tT.apply(this,arguments)}function nT(e,t,n){return rT.apply(this,arguments)}function rT(){return rT=Ue(Xe().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h,d,p,v,m,g,y,b,x,k,w,S,I,C,N,E,T,A,R=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=R.length>3&&void 0!==R[3]?R[3]:{},!t.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return t.isTraining=!0,e.prev=4,ZE(p=null==a.batchSize?32:a.batchSize),v=!1,e.next=10,t.standardizeUserData(n,r,a.sampleWeight,a.classWeight,v,p);case 10:if(m=e.sent,i=m[0],o=m[1],d=m[2],g=!1,!(null!=a.validationData&&a.validationData.length>0)){e.next=36;break}if(g=!0,2!==a.validationData.length){e.next=22;break}c=a.validationData[0],l=a.validationData[1],e.next=27;break;case 22:if(3!==a.validationData.length){e.next=26;break}throw new II("validationData including sample weights is not supported yet.");case 26:throw new SI("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(a.validationData," is invalid."));case 27:return b=!0,e.next=30,t.standardizeUserData(c,l,null,null,b,p);case 30:x=e.sent,f=x[0],h=x[1],y=f.concat(h),e.next=37;break;case 36:null!=a.validationSplit&&a.validationSplit>0&&a.validationSplit<1?(g=!0,k=Math.floor(i[0].shape[0]*(1-a.validationSplit)),w=i[0].shape[0],f=JE(i,k,w),s=i,i=JE(i,0,k),h=JE(o,k,w),u=o,o=JE(o,0,k),y=f.concat(h)):null!=a.validationSteps&&(g=!0);case 37:return S=i.concat(o).concat(d),t.checkTrainableWeightsConsistency(),I=t.makeTrainFunction(),C=t.getDedupedMetricsNames(),g?(t.makeTestFunction(),N=t.testFunction,E=C.slice().concat(C.map((function(e){return"val_"+e})))):(N=null,y=[],E=C.slice()),T=qN(a.callbacks,a.yieldEvery),e.next=45,eT(t,I,S,C,p,a.epochs,a.verbose,T,N,y,a.shuffle,E,a.initialEpoch,null,null);case 45:return A=e.sent,e.abrupt("return",A);case 47:return e.prev=47,t.isTraining=!1,iT(i,n),iT(o,r),iT(s,n),iT(u,r),iT(f,c),iT(h,l),null!=d&&rg(d),e.finish(47);case 57:case"end":return e.stop()}}),e,null,[[4,,47,57]])}))),rT.apply(this,arguments)}function aT(e){var t=[];e instanceof Fp&&(e=[e]);for(var n=0;n<e.length;++n){var r=e[n];if(1===r.rank)t.push(bC(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function iT(e,t){if(null!=e){var n=[];if(t instanceof Fp)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var r in t){var a=t[r];n.push(a.id)}var i=[];if(e instanceof Fp)-1===n.indexOf(e.id)&&i.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&i.push(e)}));else if(null!=e)for(var o in e){var s=e[o];-1===n.indexOf(s.id)&&i.push(s)}i.forEach((function(e){e.isDisposed||e.dispose()}))}}function oT(e){return Array.isArray(e)}function sT(e){return!function(e){return e instanceof Fp}(e)&&!oT(e)}function uT(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){var o=!1;if(oT(e)&&e.length>0)o=!0;else if(sT(e)){for(var s in e)if(e.hasOwnProperty(s)){o=!0;break}}else o=!0;if(o)throw new SI("Error when checking model ".concat(i," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map((function(e){return null}));if(sT(e)){r=[];var u,c=Rc(t);try{for(c.s();!(u=c.n()).done;){var l=u.value;if(null==e[l])throw new SI('No data provided for "'.concat(l,'". Need data for each key in: ')+"".concat(t));r.push(e[l])}}catch(eq){c.e(eq)}finally{c.f()}}else if(oT(e)){if(e.length!==t.length)throw new SI("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(t.length>1)throw new SI("The model ".concat(i," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=aT(r),null!=n)for(var f=0;f<t.length;++f)if(null!=n[f]){var h=r[f];if(h.shape.length!==n[f].length)throw new SI("Error when checking ".concat(i,": expected ").concat(t[f]," ")+"to have ".concat(n[f].length," dimension(s). but got array with ")+"shape ".concat(h.shape));for(var d=0;d<n[f].length;++d)if(0!==d||a){var p=h.shape[d],v=n[f][d];if(null!=v&&v>=0&&p!==v)throw new SI("".concat(i," expected a batch of elements where each ")+"example has shape [".concat(n[f].slice(1,n[f].length),"] ")+"(i.e.,tensor shape [*,".concat(n[f].slice(1,n[f].length),"])")+" but the ".concat(i," received an input with ").concat(h.shape[0])+" examples, each with shape [".concat(h.shape.slice(1,h.shape.length),"]")+" (tensor shape [".concat(h.shape,"])"))}}return r}function cT(e,t,n){var r=BI(e.map((function(e){return e.shape[0]})));r.sort();var a=BI(t.map((function(e){return e.shape[0]})));if(a.sort(),r.length>1)throw new SI("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((function(e){return e.shape})))));if(a.length>1)throw new SI("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((function(e){return e.shape})))));if(r.length>0&&a.length>0&&!qc(r,a))throw new SI("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(r[0]," input sample(s) and ").concat(a[0]," target ")+"sample(s).")}function lT(e,t,n){for(var r=[eE,oE,aE],a=0;a<e.length;++a){var i=e[a],o=t[a],s=n[a];if(null!=o){if(o===aE&&1===i.shape[i.shape.length-1])throw new SI("You are passing a target array of shape ".concat(i.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(o))for(var u=i.shape.slice(1),c=s.slice(1),l=0;l<u.length;++l){var f=u[l],h=c[l];if(null!=h&&f!==h)throw new SI("A target Tensor with shape ".concat(i.shape," was passed for an ")+"output of shape ".concat(s,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}function fT(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new SI("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new SI("The model expects ".concat(t.length," ").concat(i," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(var o=0;o<t.length;++o)if(null!=n[o]){var s=r[o];if(s.shape.length!==n[o].length)throw new SI("Error when checking ".concat(i,": expected ").concat(t[o]," ")+"to have ".concat(n[o].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(s.shape)));for(var u=0;u<n[o].length;++u)if(0!==u||a){var c=s.shape[u],l=n[o][u];if(null!=l&&l!==c)throw new SI("Error when checking ".concat(i,": expected ")+"".concat(t[o]," to have shape ").concat(JSON.stringify(n[o])," but ")+"got array with shape ".concat(JSON.stringify(s.shape),"."))}}}var hT=function(t){mp(r,t);var n=wp(r);function r(e){var t;return Fc(this,r),(t=n.call(this,e)).isTraining=!1,t}return Oc(r,[{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new SI("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");IE(this,e,t,n)}},{key:"compile",value:function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return Gx.adagrad(.01)},Adadelta:function(){return Gx.adadelta(1,.95,gC())},Adam:function(){return Gx.adam(.001,.9,.999,gC())},Adamax:function(){return Gx.adamax(.002,.9,.999,gC(),0)},RMSProp:function(){return Gx.rmsprop(.001,.9,0,gC())},SGD:function(){return Gx.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new SI("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof ug))throw new SI("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new SI("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));var r=e.loss;n=r.map((function(e){return lE(e)}))}else{var a=lE(e.loss);this.outputs.forEach((function(e){n.push(a)}))}else{for(var i in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(i))throw new SI('Unknown entry in loss dictionary: "'.concat(i,'". ')+"Only expected the following keys: ".concat(this.outputNames));var o,s=Rc(this.outputNames);try{for(s.s();!(o=s.n()).done;){var u=o.value;null==e.loss[u]&&console.warn('Output "'.concat(u,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(u," during training")),n.push(lE(e.loss[u]))}}catch(eq){s.e(eq)}finally{s.f()}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var c=0;c<this.outputs.length;++c){var l=this.internalOutputShapes[c],f=this.outputNames[c];this.feedOutputNames.push(f),this.feedOutputShapes.push(l),this.feedLossFns.push(this.lossFunctions[c])}var h=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],oC("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===h.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var d=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((function(e){return n}));var r,a=[],i=Rc(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=n.hasOwnProperty(o)?n[o]:[];Array.isArray(s)||(s=[s]),a.push(s)}}catch(eq){i.e(eq)}finally{i.f()}return a}(e.metrics,this.outputNames),p=function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])};oC("metric",(function(){for(var e=function(e){if(-1!==h.indexOf(e))return"continue";!function(n){var r,a,i,o,s=Rc(n);try{for(s.s();!(o=s.n()).done;){var u=o.value;if("string"===typeof u&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(u)){var c=t.internalOutputShapes[e];1===c[c.length-1]||t.lossFunctions[e]===oE?-1!==["accuracy","acc"].indexOf(u)?a=fE:-1!==["crossentropy","ce"].indexOf(u)&&(a=pE):t.lossFunctions[e]===iE?-1!==["accuracy","acc"].indexOf(u)?a=vE:-1!==["crossentropy","ce"].indexOf(u)&&(a=gE):-1!==["accuracy","acc"].indexOf(u)?a=hE:-1!==["crossentropy","ce"].indexOf(u)&&(a=mE);var l=void 0;-1!==["accuracy","acc"].indexOf(u)?l="acc":-1!==["crossentropy","ce"].indexOf(u)&&(l="ce"),i=a,r=""+l}else{var f=bE(u);i=f,r=""+xE(u)}var h=void 0;oC(r,(function(){h=i})),p(e,r,h)}}catch(eq){s.e(eq)}finally{s.f()}}(d[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights}},{key:"checkTrainableWeightsConsistency",value:function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null==n.batchSize?32:n.batchSize;ZE(r);var a=!0,i=this.standardizeUserDataXY(e,t,a,r);try{var o=i[0].concat(i[1]);this.makeTestFunction();var s=this.testFunction,u=this.testLoop(s,o,r,n.verbose,n.steps);return RI(u)}finally{iT(i[0],e),iT(i[1],t)}}},{key:"evaluateDataset",value:function(){var e=Ue(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.makeTestFunction(),e.abrupt("return",XE(this,t,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"checkNumSamples",value:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new SI("If ".concat(a," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new SI("Either the input data should have a defined shape, or "+"".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}},{key:"execute",value:function(e,t){if(Array.isArray(t)&&0===t.length)throw new SI("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),i=new kN;if(e instanceof Fp&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new SI("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(var o=0;o<this.inputs.length;++o)i.add(this.inputs[o],e[o])}else{var s,u=Rc(this.inputs);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=e[c.name];if(null==l)throw new SI("No value is provided for the model's input ".concat(c.name));i.add(c,l)}}catch(eq){u.e(eq)}finally{u.f()}}var f=IN(a,i);return n?f:f[0]}},{key:"retrieveSymbolicTensors",value:function(e){var t,n=EI(null,e.length),r=e.length,a=Rc(this.layers);try{for(a.s();!(t=a.n()).done;){for(var i=t.value,o=Array.isArray(i.output)?i.output:[i.output],s=o.map((function(e){return e.name})),u=0;u<e.length;++u){var c=s.indexOf(e[u]);if(-1!==c&&(n[u]=o[c],r--),0===r)break}if(0===r)break}}catch(eq){a.e(eq)}finally{a.f()}if(r>0){var l=[];throw n.forEach((function(t,n){null==t&&l.push(e[n])})),new SI("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(l)))}return n}},{key:"predictLoop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ng((function(){var a=t.checkNumSamples(e);if(r)throw new II("Verbose predictLoop() is not implemented yet.");for(var i=$E(a,n),o=t.outputs.map((function(e){return[]})),s=function(n){ng((function(){var r=i[n][0],a=i[n][1],o=JE(e,r,a),s=[];if(Array.isArray(o))for(var u=0;u<o.length;++u)s.push({key:t.inputs[u],value:o[u]});else s.push({key:t.inputs[0],value:o});var c=new kN(s);return IN(t.outputs,c)})).forEach((function(e,t){return o[t].push(e)}))},u=0;u<i.length;++u)s(u);return RI(o.map((function(e){return Pg(e,0)})))}))}},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=aT(e);fT(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==t.batchSize?32:t.batchSize;return ZE(r),this.predictLoop(n,r)}finally{iT(n,e)}}},{key:"predictOnBatch",value:function(e){fT(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}},{key:"standardizeUserDataXY",value:function(e,t){var n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new wI("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var r=[],a=0;a<this.feedOutputShapes.length;++a){var i=this.feedOutputShapes[a],o=this.feedLossFns[a];o===iE?r.push(i.slice(0,i.length-1).concat([1])):r.push(i)}if(cT(e=uT(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=uT(t,this.feedOutputNames,r,!1,"target")),lT(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new SI("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}},{key:"standardizeUserData",value:function(){var e=Ue(Xe().mark((function e(t,n,r,a){var i,o,s,u,c,l,f,h,d,p=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(p.length>4&&void 0!==p[4])||p[4],o=p.length>5?p[5]:void 0,s=this.standardizeUserDataXY(t,n,i,o),u=Ke(s,2),c=u[0],l=u[1],null==r){e.next=5;break}throw new Error("sample weight is not supported yet.");case 5:if(f=null,null==a){e.next=19;break}h=ME(a,this.outputNames),f=[],d=0;case 10:if(!(d<h.length)){e.next=19;break}return e.t0=f,e.next=14,zE(l[d],null,h[d]);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:++d,e.next=10;break;case 19:return e.abrupt("return",[c,l,f]);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"testLoop",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;return ng((function(){var o=r.checkNumSamples(t,n,i,"steps"),s=[];if(a>0)throw new II("Verbose mode is not implemented yet.");if(null!=i)throw new II("steps mode in testLoop() is not implemented yet");for(var u=$E(o,n),c=lb(mC(0,o)),l=0;l<u.length;++l){var f=u[l][0],h=u[l][1],d=kC(c,f,h-f),p=QE(t,d),v=e(p);if(0===l)for(var m=0;m<v.length;++m)s.push(sg(0));for(var g=0;g<v.length;++g){var y=v[g];s[g]=lg(s[g],py(h-f,y))}}for(var b=0;b<s.length;++b)s[b]=Qg(s[b],o);return s}))}},{key:"getDedupedMetricsNames",value:function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;if(AI(e,r)>1){var i=AI(e.slice(0,n),r);a+="_".concat(i)}t.push(a)}return t}},{key:"makeTrainFunction",value:function(){var e=this;return function(t){var n=[],r=t.slice(0,e.inputs.length),a=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),i=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),o=[],s=e.collectedTrainableWeights.map((function(e){return e.read()}));return[e.optimizer_.minimize((function(){for(var t=[],s=0;s<e.inputs.length;++s)t.push({key:e.inputs[s],value:r[s]});for(var u,c=new kN(t),l=IN(e.outputs,c,{training:!0}),f=0;f<e.lossFunctions.length;++f){var h=(0,e.lossFunctions[f])(a[f],l[f]);null!=i[f]&&(h=BE(h,i[f]));var d=Sy(h);n.push(d),u=0===f?h:lg(u,h)}for(var p=0;p<e.metricsTensors.length;++p){var v=void 0;if(e.outputs.length>1&&p<e.outputs.length)v=n[p];else{var m=e.metricsTensors[p][0],g=e.metricsTensors[p][1];v=Sy(m(a[g],l[g]))}ag(v),o.push(v)}return u=Sy(u),e.calculateLosses().forEach((function(e){u=lg(u,e)})),u}),!0,s)].concat(o)}}},{key:"makeTestFunction",value:function(){var e=this;this.testFunction=function(t){return ng((function(){for(var n,r=[],a=t.slice(0,e.inputs.length),i=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=[],s=0;s<e.inputs.length;++s)o.push({key:e.inputs[s],value:a[s]});for(var u=new kN(o),c=IN(e.outputs,u),l=0;l<e.lossFunctions.length;++l){var f=e.lossFunctions[l],h=Sy(f(i[l],c[l]));n=0===l?h:lg(n,h),r.push(n)}for(var d=0;d<e.metricsTensors.length;++d){var p=e.metricsTensors[d][0],v=e.metricsTensors[d][1],m=Sy(p(i[v],c[v]));r.push(m)}return r}))}}},{key:"fit",value:function(){var e=Ue(Xe().mark((function e(t,n){var r,a=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},e.abrupt("return",nT(this,t,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=Ue(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jE(this,t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=Ue(Xe().mark((function e(t,n){var r,a,i,o,s,u,c,l,f,h;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.standardizeUserData(t,n);case 2:r=e.sent,a=r[0],i=r[1],o=this.makeTrainFunction(),s=o(a.concat(i)),u=[],c=Rc(s),e.prev=9,c.s();case 11:if((l=c.n()).done){e.next=19;break}return f=l.value,e.next=15,f.data();case 15:h=e.sent,u.push(h[0]);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),c.e(e.t0);case 24:return e.prev=24,c.f(),e.finish(24);case 27:return rg(s),iT(r[0],t),iT(r[1],n),e.abrupt("return",RI(u));case 31:case"end":return e.stop()}}),e,this,[[9,21,24,27]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNamedWeights",value:function(e){for(var t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),i=0;i<r.length;++i)n&&!r[i].trainable||t.push({name:r[i].originalName,tensor:a[i]});return t}},{key:"stopTraining",get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e}},{key:"optimizer",get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}},{key:"dispose",value:function(){var e=JN(gp(r.prototype),"dispose",this).call(this);if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var t=tg().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-tg().numTensors}return e}},{key:"getLossIdentifiers",value:function(){var e;if("string"===typeof this.loss)e=DI(this.loss);else if(Array.isArray(this.loss)){var t,n=Rc(this.loss);try{for(n.s();!(t=n.n()).done;){if("string"!==typeof t.value)throw new Error("Serialization of non-string loss is not supported.")}}catch(eq){n.e(eq)}finally{n.f()}e=this.loss.map((function(e){return DI(e)}))}else{var r=Object.keys(this.loss);e={};for(var a=this.loss,i=0,o=r;i<o.length;i++){var s=o[i];if("string"!==typeof a[s])throw new Error("Serialization of non-string loss is not supported.");e[s]=DI(a[s])}}return e}},{key:"getMetricIdentifiers",value:function(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[DI(xE(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return DI(xE(e))}));var e={};for(var t in this.metrics)e[t]=DI(xE(this.metrics[t]));return e}},{key:"getTrainingConfig",value:function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}},{key:"loadTrainingConfig",value:function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,r=QN(FE(e.optimizer_config));if("string"===typeof e.loss)t=OI(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return OI(e)}));else if(null!=e.loss)for(var a in t={},e.loss)t[a]=OI(e.loss[a]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return OI(e)}));else if(null!=e.metrics)for(var i in n={},e.metrics)n[i]=OI(e.metrics[i]);this.compile({loss:t,metrics:n,optimizer:r})}},{key:"save",value:function(){var t=Ue(Xe().mark((function t(n,r){var a,i,o,s,u,c,l,f,h;return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!==typeof n){t.next=9;break}if(0!==(a=Fv(n)).length){t.next=6;break}throw new SI("Cannot find any save handlers for URL '".concat(n,"'"));case 6:if(!(a.length>1)){t.next=8;break}throw new SI("Found more than one (".concat(a.length,") save handlers for ")+"URL '".concat(n,"'"));case 8:n=a[0];case 9:if(null!=n.save){t.next=11;break}throw new SI("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return t.next=13,dv(this.getNamedWeights(r));case 13:if(i=t.sent,!1,null,o=this.toJSON(null,false),s={modelTopology:o,format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(OE),convertedBy:null},!(null!=r&&r.includeOptimizer)||null==this.optimizer){t.next=34;break}return s.trainingConfig=this.getTrainingConfig(),c="optimizer",t.t0=e,t.next=25,this.optimizer.getWeights();case 25:return t.t1=t.sent,t.t2=c,t.next=29,t.t0.encodeWeights.call(t.t0,t.t1,t.t2);case 29:l=t.sent,f=l.data,h=l.specs,(u=i.specs).push.apply(u,Et(h)),i.data=kv([i.data,f]);case 34:return null!=this.userDefinedMetadata&&(!0,wE(this.userDefinedMetadata,this.name,true),s.userDefinedMetadata=this.userDefinedMetadata),s.weightData=i.data,s.weightSpecs=i.specs,t.abrupt("return",n.save(s));case 38:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"setUserDefinedMetadata",value:function(e){wE(e,this.name),this.userDefinedMetadata=e}},{key:"getUserDefinedMetadata",value:function(){return this.userDefinedMetadata}}]),r}(LE);hT.className="Model",$m(hT);var dT=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n)}(hT);dT.className="Functional",$m(dT);var pT=function(e){mp(n,e);var t=wp(n);function n(e){var r;if(Fc(this,n),e=e||{},(r=t.call(this,{inputs:[],outputs:[]})).trainable=!0,r.built=!1,r.name=null!=e.name?e.name:YI("sequential_"),null!=e.layers){var a,i=Rc(e.layers);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.add(o)}}catch(eq){i.e(eq)}finally{i.f()}}return r}return Oc(n,[{key:"checkShape",value:function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new SI("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}},{key:"add",value:function(e){var t,r=e instanceof n||e instanceof hT;if(r){if(1!==(t=e).outputs.length)throw new SI("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new SI("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new SI("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var a=function(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new SI("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new xN({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(r)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new SI("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new SI("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=bN(this.outputs[0])}this.inboundNodes=[],new mN({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:EI(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}},{key:"pop",value:function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}},{key:"call",value:function(e,t){return null==this.model&&this.build(),this.model.call(e,t)}},{key:"build",value:function(e){if(sN(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new hT({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}},{key:"countParams",value:function(){return this.built||this.build(),JN(gp(n.prototype),"countParams",this).call(this)}},{key:"summary",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),JN(gp(n.prototype),"summary",this).call(this,e,t,r)}},{key:"setWeights",value:function(e){null==this.model&&this.build(),this.model.setWeights(e)}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new wI("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}},{key:"evaluateDataset",value:function(){var e=Ue(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new wI("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.evaluateDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}},{key:"predictOnBatch",value:function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}},{key:"compile",value:function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}},{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e}},{key:"fit",value:function(){var e=Ue(Xe().mark((function e(t,n){var r,a=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:{},this.built){e.next=3;break}throw new wI("The model needs to be compiled before being used.");case 3:return e.abrupt("return",this.model.fit(t,n,r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=Ue(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new wI("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.fitDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=Ue(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.trainOnBatch(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stopTraining",get:function(){if(null==this.model)throw new SI("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(null==this.model)throw new SI("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}},{key:"getConfig",value:function(){var e,t=[],n=Rc(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value,a={};a.className=r.getClassName(),a.config=r.getConfig(),t.push(a)}}catch(eq){n.e(eq)}finally{n.f()}return{name:this.name,layers:t}}}],[{key:"fromConfig",value:function(e,t){var r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new SI("Legacy serialization format not supported yet.");r=t}else Vc(null!=t.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),r=t.layers,delete t.layers,i=t;var o=new e(i);if(!(o instanceof n))throw new II("Sequential.fromConfig called on non-Sequential input: ".concat(o));var s,u=Rc(r);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=void 0,f=QN(c,l,a);a&&f.setFastWeightInitDuringBuild(!0),o.add(f)}}catch(eq){u.e(eq)}finally{u.f()}return o}}]),n}(hT);pT.className="Sequential",$m(pT);var vT=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"getConfig",value:function(){return{}}}]),n}(Jm),mT=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return OC(e,t)}}]),n}(vT);mT.className="elu",$m(mT);var gT=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"apply",value:function(e){return Yy(e)}}]),n}(vT);gT.className="selu",$m(gT);var yT=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"apply",value:function(e){return qy(e)}}]),n}(vT);yT.className="relu",$m(yT);var bT=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"apply",value:function(e){return ng((function(){return Iy(6,qy(e))}))}}]),n}(vT);bT.className="relu6",$m(bT);var xT=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"apply",value:function(e){return e}}]),n}(vT);xT.className="linear",$m(xT);var kT=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"apply",value:function(e){return Jy(e)}}]),n}(vT);kT.className="sigmoid",$m(kT);var wT=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"apply",value:function(e){return function(e){return ng((function(){var t=lg(.5,py(.2,e));return zg(t,0,1)}))}(e)}}]),n}(vT);wT.className="hardSigmoid",$m(wT);var ST=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"apply",value:function(e){return ab(e)}}]),n}(vT);ST.className="softplus",$m(ST);var IT=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"apply",value:function(e){return function(e){return ng((function(){return Qg(e,lg(cg(e),1))}))}(e)}}]),n}(vT);IT.className="softsign",$m(IT);var CT=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"apply",value:function(e){return cb(e)}}]),n}(vT);CT.className="tanh",$m(CT);var NT=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return rb(e,t)}}]),n}(vT);NT.className="softmax",$m(NT);var ET=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return gy(e,t)}}]),n}(vT);ET.className="logSoftmax",$m(ET);var TT=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return ng((function(){return py(Jy(py(e,t)),e)}))}}]),n}(vT);TT.className="swish",$m(TT);var AT=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"apply",value:function(e){return ng((function(){return py(e,cb(ab(e)))}))}}]),n}(vT);function RT(e){return e.getClassName()}function FT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return zI(e,Qm.getMap().classNameMap,t,"activation")}function DT(e){if(null==e){var t={className:"linear",config:{}};return FT(t)}if("string"===typeof e){var n={};return n.className=e,n.config={},FT(n)}return e instanceof vT?e:FT(e)}function OT(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}AT.className="mish",$m(AT);var LT=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n)}(Jm),_T=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),r=t.call(this),OT(e),r.l1=null==e||null==e.l1?.01:e.l1,r.l2=null==e||null==e.l2?.01:e.l2,r.hasL1=0!==r.l1,r.hasL2=0!==r.l2,r}return Oc(n,[{key:"apply",value:function(e){var t=this;return ng((function(){var n=zy([1]);return t.hasL1&&(n=lg(n,my(py(t.l1,cg(e))))),t.hasL2&&(n=lg(n,my(py(t.l2,RC(e))))),Rg(n,[])}))}},{key:"getConfig",value:function(){return{l1:this.l1,l2:this.l2}}}],[{key:"fromConfig",value:function(e,t){return new e({l1:t.l1,l2:t.l2})}}]),n}(LT);_T.className="L1L2",$m(_T);var MT={l1l2:"L1L2"};function zT(e){return _I(e)}function PT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return zI(e,Qm.getMap().classNameMap,t,"regularizer")}function BT(e){return null==e?null:"string"===typeof e?PT({className:e in MT?MT[e]:e,config:{}}):e instanceof LT?e:PT(e)}var WT=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,null!=e&&(r.maxValue=e.maxValue),r}return Oc(n,[{key:"call",value:function(e,t){e=oN(e);var n=qy(e);return null!=this.maxValue&&(n=zg(n,0,this.maxValue)),n}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={maxValue:this.maxValue},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(yN);WT.className="ReLU",$m(WT);var UT=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=.3,null==e&&(e={}),r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return Oc(n,[{key:"call",value:function(e,t){var n=oN(e);return ly(n,this.alpha)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(yN);UT.className="LeakyReLU",$m(UT);var VT=function(e){mp(n,e);var t=wp(n);function n(e){var r;if(Fc(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),r.supportsMasking=!0,r.alphaInitializer=rN(e.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=BT(e.alphaRegularizer),r.alphaConstraint=PN(e.alphaConstraint),null==e.sharedAxes)r.sharedAxes=null;else if(Array.isArray(e.sharedAxes))r.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new SI("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));r.sharedAxes=[e.sharedAxes]}return r}return Oc(n,[{key:"build",value:function(e){var t=(e=sN(e)).slice(1);if(null!=this.sharedAxes){var n,r=Rc(this.sharedAxes);try{for(r.s();!(n=r.n()).done;){t[n.value-1]=1}}catch(eq){r.e(eq)}finally{r.f()}}this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(null!=this.sharedAxes)for(var i=1;i<e.length;++i)a[i]=e[i];this.inputSpec=[new dN({ndim:e.length,axes:a})],this.built=!0}},{key:"call",value:function(e,t){return e=oN(e),Uy(e,this.alpha.read())}},{key:"getConfig",value:function(){var e={alphaInitializer:nN(this.alphaInitializer),alphaRegularizer:zT(this.alphaRegularizer),alphaConstraint:MN(this.alphaConstraint),sharedAxes:this.sharedAxes},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(yN);VT.className="PReLU",$m(VT);var jT=function(e){mp(n,e);var t=wp(n);function n(e){var r;if(Fc(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==r.DEFAULT_ALPHA)throw new II("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");return r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return Oc(n,[{key:"call",value:function(e,t){var n=oN(e);return $g(n)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(yN);jT.className="ELU",$m(jT);var GT=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_THETA=1,null==e&&(e={}),r.theta=null==e.theta?r.DEFAULT_THETA:e.theta,r}return Oc(n,[{key:"call",value:function(e,t){var n=oN(e);return py(n,ym(uy(n,this.theta),"float32"))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={theta:this.theta},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(yN);GT.className="ThresholdedReLU",$m(GT);var HT=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_AXIS=1,null==e&&(e={}),r.softmax=(new NT).apply,r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r}return Oc(n,[{key:"call",value:function(e,t){var n=oN(e);return this.softmax(n,this.axis)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={axis:this.axis},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(yN);function KT(e,t,n){if("number"===typeof e)return EI(e,t);if(e.length!==t)throw new SI("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(var r=0;r<t;++r){var a=e[r];if(!hC(a))throw new SI("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(a))}return e}function qT(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(null==e)return e;var i,o=t+(t-1)*(a-1);return i="same"===n?e:e-o+1,Math.floor((i+r-1)/r)}function XT(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+vC([n-t,0]);else{if("same"!==r)throw new SI("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function YT(e,t){return ng((function(){return nC(t),"channelsFirst"===t?gb(e,[0,2,3,1]):e}))}function ZT(e,t){return ng((function(){return nC(t),"channelsFirst"===t?gb(e,[0,2,3,4,1]):e}))}function JT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return ng((function(){if(null==i&&(i="channelsLast"),nC(i),3!==e.shape.length)throw new SI("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new SI("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new SI("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(t.shape.length," instead"));if("channelsFirst"===i&&(e=gb(e,[0,2,1])),"causal"===a)throw new II("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=Gg(e,t,r,"same"===a?"same":"valid","NWC",o);return null!=n&&(s=DC(s,n)),s}))}function QT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return ng((function(){if(null==i&&(i="channelsLast"),nC(i),3!==e.rank&&4!==e.rank)throw new SI("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new SI("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));var u=YT(e,i);if("causal"===a)throw new II("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=Db({x:u,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===i&&(u=gb(u,[0,3,1,2])),u}))}function $T(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;return ng((function(){if(null==i&&(i="channelsLast"),nC(i),4!==e.rank&&5!==e.rank)throw new SI("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new SI("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));var s=ZT(e,i);if("causal"===a)throw new II("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=qg(s,t,r,"same"===a?"same":"valid","NDHWC",o),null!=n&&(s=DC(s,n)),"channelsFirst"===i&&(s=gb(s,[0,4,1,2,3])),s}))}HT.className="Softmax",$m(HT);var eA=function(e){mp(n,e);var t=wp(n);function n(e,r){var a;if(Fc(this,n),(a=t.call(this,r)).bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),a.rank=e,jI(a.rank,"rank"),1!==a.rank&&2!==a.rank&&3!==a.rank)throw new II("Convolution layer for rank other than 1, 2, or 3 (".concat(a.rank,") is ")+"not implemented yet.");if(a.kernelSize=KT(r.kernelSize,e,"kernelSize"),a.strides=KT(null==r.strides?1:r.strides,e,"strides"),a.padding=null==r.padding?"valid":r.padding,rC(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,nC(a.dataFormat),a.activation=DT(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=rN(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=PN(r.biasConstraint),a.biasRegularizer=BT(r.biasRegularizer),a.activityRegularizer=BT(r.activityRegularizer),a.dilationRate=KT(null==r.dilationRate?1:r.dilationRate,e,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new SI("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(a.dilationRate)));if(2===a.rank){if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new SI("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)))}else if(3===a.rank)if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate,a.dilationRate];else if(3!==a.dilationRate.length)throw new SI("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)));return a}return Oc(n,[{key:"getConfig",value:function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:RT(this.activation),useBias:this.useBias,biasInitializer:nN(this.biasInitializer),biasRegularizer:zT(this.biasRegularizer),activityRegularizer:zT(this.activityRegularizer),biasConstraint:MN(this.biasConstraint)},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(TI("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!VI(e.kernelSize,"number",1,3))throw new SI("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(yN),tA=function(e){mp(n,e);var t=wp(n);function n(e,r){var a;return Fc(this,n),(a=t.call(this,e,r)).kernel=null,n.verifyArgs(r),a.filters=r.filters,jI(a.filters,"filters"),a.kernelInitializer=rN(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=PN(r.kernelConstraint),a.kernelRegularizer=BT(r.kernelRegularizer),a}return Oc(n,[{key:"build",value:function(e){e=sN(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new SI("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));var n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:ze({},t,n)}],this.built=!0}},{key:"call",value:function(e,t){var n=this;return ng((function(){var t;e=oN(e);var r=null==n.bias?null:n.bias.read(),a=HI(n.activation.getClassName());if(null!=a&&2===n.rank)t=QT(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)t=JT(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=QT(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new II("convolutions greater than 3D are not implemented yet.");t=$T(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))}},{key:"computeOutputShape",value:function(e){e=sN(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=qT(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var i=[e[0]];return"channelsLast"===this.dataFormat?(i=i.concat(t)).push(this.filters):(i.push(this.filters),i=i.concat(t)),i}},{key:"getConfig",value:function(){var e={filters:this.filters,kernelInitializer:nN(this.kernelInitializer),kernelRegularizer:zT(this.kernelRegularizer),kernelConstraint:MN(this.kernelConstraint)},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new SI("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}]),n}(eA),nA=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),r=t.call(this,2,e),n.verifyArgs(e),r}return Oc(n,[{key:"getConfig",value:function(){var e=JN(gp(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!VI(e.kernelSize,"number",1,2))throw new SI("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(tA);nA.className="Conv2D",$m(nA);var rA=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),r=t.call(this,3,e),n.verifyArgs(e),r}return Oc(n,[{key:"getConfig",value:function(){var e=JN(gp(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new SI("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(tA);rA.className="Conv3D",$m(rA);var aA=function(e){mp(n,e);var t=wp(n);function n(e){var r;if(Fc(this,n),(r=t.call(this,e)).inputSpec=[new dN({ndim:4})],"same"!==r.padding&&"valid"!==r.padding)throw new SI("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return Oc(n,[{key:"build",value:function(e){if(4!==(e=sN(e)).length)throw new SI("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new SI("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new dN({ndim:4,axes:ze({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return ng((function(){var t=oN(e);if(4!==t.shape.length)throw new SI("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,i=t.shape,o=i[0];"channelsFirst"===n.dataFormat?(r=2,a=3):(r=1,a=2);var s=i[r],u=i[a],c=n.kernelSize[0],l=n.kernelSize[1],f=n.strides[0],h=n.strides[1],d=[o,XT(s,f,c,n.padding),XT(u,h,l,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=gb(t,[0,2,3,1]));var p=Kg(t,n.kernel.read(),d,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(p=gb(p,[0,3,1,2])),null!=n.bias&&(p=DC(p,n.bias.read(),n.dataFormat)),null!=n.activation&&(p=n.activation.apply(p)),p}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=(e=sN(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var i=this.kernelSize[0],o=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return a[t]=this.filters,a[n]=XT(a[n],s,i,this.padding),a[r]=XT(a[r],u,o,this.padding),a}},{key:"getConfig",value:function(){var e=JN(gp(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(nA);aA.className="Conv2DTranspose",$m(aA);var iA=function(e){mp(n,e);var t=wp(n);function n(e){var r;if(Fc(this,n),(r=t.call(this,e)).inputSpec=[new dN({ndim:5})],"same"!==r.padding&&"valid"!==r.padding)throw new SI("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return Oc(n,[{key:"build",value:function(e){if(5!==(e=sN(e)).length)throw new SI("Input should have rank 5; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new SI("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new dN({ndim:5,axes:ze({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return ng((function(){var t=oN(e);if(5!==t.shape.length)throw new SI("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,i,o=t.shape,s=o[0];"channelsFirst"===n.dataFormat?(i=2,r=3,a=4):(i=1,r=2,a=3);var u=o[i],c=o[r],l=o[a],f=n.kernelSize[0],h=n.kernelSize[1],d=n.kernelSize[2],p=n.strides[0],v=n.strides[1],m=n.strides[2],g=[s,XT(u,p,f,n.padding),XT(c,v,h,n.padding),XT(l,m,d,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=gb(t,[0,2,3,4,1]));var y=Yg(t,n.kernel.read(),g,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(y=gb(y,[0,4,1,2,3])),null!==n.bias&&(y=DC(y,n.bias.read(),n.dataFormat)),null!==n.activation&&(y=n.activation.apply(y)),y}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a,i=(e=sN(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3,a=4):(t=4,n=1,r=2,a=3);var o=this.kernelSize[0],s=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],l=this.strides[1],f=this.strides[2];return i[t]=this.filters,i[n]=XT(i[n],c,o,this.padding),i[r]=XT(i[r],l,s,this.padding),i[a]=XT(i[a],f,u,this.padding),i}},{key:"getConfig",value:function(){var e=JN(gp(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(rA);iA.className="Conv3DTranspose",$m(iA);var oA=function(e){mp(n,e);var t=wp(n);function n(e,r){var a;if(Fc(this,n),(a=t.call(this,e,r)).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",a.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",a.depthwiseKernel=null,a.pointwiseKernel=null,null==r.filters)throw new SI("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=r.kernelInitializer||null!=r.kernelRegularizer||null!=r.kernelConstraint)throw new SI("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=r.padding&&"same"!==r.padding&&"valid"!==r.padding)throw new SI("SeparableConv".concat(a.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(r.padding)));return a.depthMultiplier=null==r.depthMultiplier?1:r.depthMultiplier,a.depthwiseInitializer=rN(r.depthwiseInitializer||a.DEFAULT_DEPTHWISE_INITIALIZER),a.depthwiseRegularizer=BT(r.depthwiseRegularizer),a.depthwiseConstraint=PN(r.depthwiseConstraint),a.pointwiseInitializer=rN(r.depthwiseInitializer||a.DEFAULT_POINTWISE_INITIALIZER),a.pointwiseRegularizer=BT(r.pointwiseRegularizer),a.pointwiseConstraint=PN(r.pointwiseConstraint),a}return Oc(n,[{key:"build",value:function(e){if((e=sN(e)).length<this.rank+2)throw new SI("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new SI("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));for(var n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[],i=0;i<this.rank;++i)a.push(1);a.push(n*this.depthMultiplier,this.filters);var o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new dN({ndim:this.rank+2,axes:ze({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return ng((function(){var t;if(e=oN(e),1===n.rank)throw new II("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=gb(e,[0,2,3,1])),t=Zy(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=DC(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=gb(t,[0,3,1,2])),t}))}},{key:"getConfig",value:function(){var e=JN(gp(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=nN(this.depthwiseInitializer),e.pointwiseInitializer=nN(this.pointwiseInitializer),e.depthwiseRegularizer=zT(this.depthwiseRegularizer),e.pointwiseRegularizer=zT(this.pointwiseRegularizer),e.depthwiseConstraint=MN(this.depthwiseConstraint),e.pointwiseConstraint=MN(this.pointwiseConstraint),e}}]),n}(tA);oA.className="SeparableConv";var sA=function(e){mp(n,e);var t=wp(n);function n(e){return Fc(this,n),t.call(this,2,e)}return Oc(n)}(oA);sA.className="SeparableConv2D",$m(sA);var uA=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),r=t.call(this,1,e),n.verifyArgs(e),r.inputSpec=[{ndim:3}],r}return Oc(n,[{key:"getConfig",value:function(){var e=JN(gp(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.dataFormat,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!VI(e.kernelSize,"number",1,1))throw new SI("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(tA);uA.className="Conv1D",$m(uA);var cA=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),r=t.call(this,e),"number"===typeof e.cropping?r.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?r.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:r.cropping=e.cropping,r.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return Oc(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}},{key:"call",value:function(e,t){var n=this;return ng((function(){if(e=oN(e),"channelsLast"===n.dataFormat){var t=SC(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return SC(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var r=SC(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return SC(r,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))}},{key:"getConfig",value:function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(yN);cA.className="Cropping2D",$m(cA);var lA=function(e){mp(n,e);var t=wp(n);function n(e){var r,a;return Fc(this,n),(r=t.call(this,e)).DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=null==e.size?r.DEFAULT_SIZE:e.size,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,nC(r.dataFormat),r.interpolation=null==e.interpolation?"nearest":e.interpolation,a=r.interpolation,UI(JI,"InterpolationFormat",a),r}return Oc(n,[{key:"computeOutputShape",value:function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}var r=null==e[1]?null:this.size[0]*e[1],a=null==e[2]?null:this.size[1]*e[2];return[e[0],r,a,e[3]]}},{key:"call",value:function(e,t){var n=this;return ng((function(){var t=oN(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=gb(t,[0,2,3,1]);var a=n.size[0]*r[2],i=n.size[1]*r[3],o="nearest"===n.interpolation?Lx.resizeNearestNeighbor(t,[a,i]):Lx.resizeBilinear(t,[a,i]);return gb(o,[0,3,1,2])}var s=n.size[0]*r[1],u=n.size[1]*r[2];return"nearest"===n.interpolation?Lx.resizeNearestNeighbor(t,[s,u]):Lx.resizeBilinear(t,[s,u])}))}},{key:"getConfig",value:function(){var e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(yN);lA.className="UpSampling2D",$m(lA);var fA=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this,2,e)).depthwiseKernel=null,r.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,r.depthwiseInitializer=rN(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=PN(e.depthwiseConstraint),r.depthwiseRegularizer=BT(e.depthwiseRegularizer),r}return Oc(n,[{key:"build",value:function(e){if((e=sN(e)).length<4)throw new SI("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new SI("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));var n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return ng((function(){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return ng((function(){null==a&&(a="channelsLast"),nC(a);var o=YT(e,a);if(4!==e.rank)throw new SI("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new SI("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return o=Zg(o,t,n,"same"===r?"same":"valid","NHWC",i),"channelsFirst"===a&&(o=gb(o,[0,3,1,2])),o}))}(e=oN(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=DC(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))}},{key:"computeOutputShape",value:function(e){e=sN(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=qT(t,this.kernelSize[0],this.padding,this.strides[0]),i=qT(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,i]:[e[0],a,i,r]}},{key:"getConfig",value:function(){var e=JN(gp(n.prototype),"getConfig",this).call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=nN(this.depthwiseInitializer),e.depthwiseRegularizer=zT(this.depthwiseRegularizer),e.depthwiseConstraint=MN(this.depthwiseRegularizer),e}}]),n}(eA);function hA(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new SI("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function dA(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return ng((function(){var u=t.shape.length;if(u<3)throw new SI("Input should be at least 3D, but is ".concat(u,"D."));var c=[1,0].concat(mC(2,u));if(t=gb(t,c),null!=i)throw new II("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=ym(ym(a,"bool"),"float32")).rank===u-1&&(a=ny(a,-1)),a=gb(a,c)),r&&(t=Xy(t,0),null!=a&&(a=Xy(a,0)));var l,f,h=[],d=n,p=t.shape[0],v=hb(t);null!=a&&(f=hb(a));for(var m,g=function(t){var n=v[t],r=ng((function(){return e(n,d)}));if(null==a)l=r[0],d=r[1];else{var i=ng((function(){var e=f[t],n=vy(By(e),e);return{output:lg(py(r[0],e),py(d[0],n)),newStates:d.map((function(t,a){return lg(py(r[1][a],e),py(t,n))}))}}));l=i.output,d=i.newStates}s&&h.push(l)},y=0;y<p;++y)g(y);if(s){m=ub(h,1)}return[l,m,d]}))}fA.className="DepthwiseConv2D",$m(fA);var pA=function(e){mp(n,e);var t=wp(n);function n(e){var r,a;if(Fc(this,n),r=t.call(this,e),null==e.cell)throw new SI("cell property is missing for the constructor of RNN.");if(null==(a=Array.isArray(e.cell)?new wA({cells:e.cell}):e.cell).stateSize)throw new SI("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=a,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new dN({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return Oc(n,[{key:"getStates",value:function(){return null==this.states_?mC(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_}},{key:"setStates",value:function(e){this.states_=e}},{key:"computeOutputShape",value:function(e){aN(e)&&(e=e[0]);var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){var a,i=[],o=Rc(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push([e[0],s])}}catch(eq){o.e(eq)}finally{o.f()}return[n].concat(i)}return n}},{key:"computeMask",value:function(e,t){var n=this;return ng((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var r=n.states.map((function(e){return null}));return[e].concat(r)}return e}))}},{key:"states",get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e}},{key:"build",value:function(e){if(null!=this.numConstants)throw new II("Constants support is not implemented in RNN yet.");aN(e)&&(e=e[0]);var t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new dN({shape:[t,null].concat(Et(n))});var r,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!qc(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),r))throw new SI("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=r.map((function(e){return new dN({shape:[null,e]})}));this.stateful&&this.resetStates()}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ng((function(){if(!t.stateful)throw new kI("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape[0];if(null==r)throw new SI("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states_)Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return zy([r,e])})):t.states_=[zy([r,t.cell.stateSize])];else if(null==e)rg(t.states_),null!=t.keptStates&&(rg(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return zy([r,e])})):t.states_[0]=zy([r,t.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new SI("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===n?t.keptStates.push(t.states_.slice()):rg(t.states_);for(var a=0;a<t.states_.length;++a){var i=e[a],o=Array.isArray(t.cell.stateSize)?t.cell.stateSize[a]:t.cell.stateSize,s=[r,o];if(!qc(i.shape,s))throw new SI("State ".concat(a," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(s,", received shape=").concat(i.shape));t.states_[a]=i}}t.states_=t.states_.map((function(e){return ag(e.clone())}))}))}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=hA(e,r,a,this.numConstants);e=i.inputs,r=i.initialState,a=i.constants;var o=[],s=[];if(null!=r){t.initialState=r,o=o.concat(r),this.stateSpec=[];var u,c=Rc(r);try{for(c.s();!(u=c.n()).done;){var l=u.value;this.stateSpec.push(new dN({shape:l.shape}))}}catch(eq){c.e(eq)}finally{c.f()}s=s.concat(this.stateSpec)}if(null!=a&&(t.constants=a,o=o.concat(a),this.numConstants=a.length),o[0]instanceof pN){var f=[e].concat(o),h=this.inputSpec.concat(s),d=this.inputSpec;this.inputSpec=h;var p=JN(gp(n.prototype),"apply",this).call(this,f,t);return this.inputSpec=d,p}return JN(gp(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return ng((function(){var r=null==t?null:t.mask,a=null==t?null:t.training,i=null==t?null:t.initialState;e=oN(e),null==i&&(i=n.stateful?n.states_:n.getInitialState(e));var o=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==o)throw new SI("RNN Layer has ".concat(o," state(s) but was passed ")+"".concat(i.length," initial state(s)."));n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:a},u=dA((function(e,t){var r=n.cell.call([e].concat(t),s);return[r[0],r.slice(1)]}),e,i,n.goBackwards,r,null,n.unroll,n.returnSequences),c=u[0],l=u[1],f=u[2];n.stateful&&n.resetStates(f,a);var h=n.returnSequences?l:c;return n.returnState?[h].concat(f):h}))}},{key:"getInitialState",value:function(e){var t=this;return ng((function(){var n=zy(e.shape);return n=bC(n=my(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?NC(n,[1,e]):n})):t.cell.stateSize>1?[NC(n,[1,t.cell.stateSize])]:[n]}))}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}},{key:"setFastWeightInitDuringBuild",value:function(e){JN(gp(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e=JN(gp(n.prototype),"getConfig",this).call(this),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var r=this.cell.getConfig();return this.getClassName()===n.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign({},r,e,t)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.cell,a=QN(r,n);return new e(Object.assign(t,{cell:a}))}}]),n}(yN);pA.className="RNN",$m(pA);var vA=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n)}(yN),mA=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,jI(r.units,"units"),r.activation=DT(null==e.activation?r.DEFAULT_ACTIVATION:e.activation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=rN(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=rN(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=rN(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=BT(e.kernelRegularizer),r.recurrentRegularizer=BT(e.recurrentRegularizer),r.biasRegularizer=BT(e.biasRegularizer),r.kernelConstraint=PN(e.kernelConstraint),r.recurrentConstraint=PN(e.recurrentConstraint),r.biasConstraint=PN(e.biasConstraint),r.dropout=pC([1,vC([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=pC([1,vC([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return Oc(n,[{key:"build",value:function(e){e=sN(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return ng((function(){if(2!==e.length)throw new SI("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));var r=e[1];e=e[0];var a,i=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=SA({ones:function(){return By(e)},rate:n.dropout,training:i,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=SA({ones:function(){return By(r)},rate:n.recurrentDropout,training:i,dropoutFunc:n.dropoutFunc}));var o=n.dropoutMask,s=n.recurrentDropoutMask;a=TC(null!=o?py(e,o):e,n.kernel.read()),null!=n.bias&&(a=DC(a,n.bias.read())),null!=s&&(r=py(r,s));var u=lg(a,TC(r,n.recurrentKernel.read()));return null!=n.activation&&(u=n.activation.apply(u)),[u,u]}))}},{key:"getConfig",value:function(){var e=JN(gp(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:RT(this.activation),useBias:this.useBias,kernelInitializer:nN(this.kernelInitializer),recurrentInitializer:nN(this.recurrentInitializer),biasInitializer:nN(this.biasInitializer),kernelRegularizer:zT(this.kernelRegularizer),recurrentRegularizer:zT(this.recurrentRegularizer),biasRegularizer:zT(this.biasRegularizer),activityRegularizer:zT(this.activityRegularizer),kernelConstraint:MN(this.kernelConstraint),recurrentConstraint:MN(this.recurrentConstraint),biasConstraint:MN(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},e,t)}}]),n}(vA);mA.className="SimpleRNNCell",$m(mA);var gA=function(e){mp(n,e);var t=wp(n);function n(e){return Fc(this,n),e.cell=new mA(e),t.call(this,e)}return Oc(n,[{key:"call",value:function(e,t){var r=this;return ng((function(){null!=r.cell.dropoutMask&&(rg(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(rg(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return JN(gp(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(pA);gA.className="SimpleRNN",$m(gA);var yA=function(e){mp(n,e);var t=wp(n);function n(e){var r;if(Fc(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new SI("GRUCell does not support reset_after parameter set to true.");return r.units=e.units,jI(r.units,"units"),r.activation=DT(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=DT(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=rN(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=rN(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=rN(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=BT(e.kernelRegularizer),r.recurrentRegularizer=BT(e.recurrentRegularizer),r.biasRegularizer=BT(e.biasRegularizer),r.kernelConstraint=PN(e.kernelConstraint),r.recurrentConstraint=PN(e.recurrentConstraint),r.biasConstraint=PN(e.biasConstraint),r.dropout=pC([1,vC([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=pC([1,vC([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return Oc(n,[{key:"build",value:function(e){var t=(e=sN(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return ng((function(){if(2!==e.length)throw new SI("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=null!=t.training&&t.training,a=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=SA({ones:function(){return By(e)},rate:n.dropout,training:r,count:3,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=SA({ones:function(){return By(a)},rate:n.recurrentDropout,training:r,count:3,dropoutFunc:n.dropoutFunc}));var i,o,s,u=n.dropoutMask,c=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=py(e,u[0]));var l=TC(e,n.kernel.read());n.useBias&&(l=DC(l,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(a=py(a,c[0]));var f=n.recurrentKernel.read(),h=Ke(ib(f,[2*n.units,n.units],f.rank-1),2),d=h[0],p=h[1],v=TC(a,d),m=Ke(ib(l,3,l.rank-1),3),g=m[0],y=m[1],b=m[2],x=Ke(ib(v,2,v.rank-1),2),k=x[0],w=x[1];i=n.recurrentActivation.apply(lg(g,k)),o=n.recurrentActivation.apply(lg(y,w));var S=TC(py(o,a),p);s=n.activation.apply(lg(b,S));var I=lg(py(i,a),py(lg(1,Ly(i)),s));return[I,I]}))}},{key:"getConfig",value:function(){var e=JN(gp(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:RT(this.activation),recurrentActivation:RT(this.recurrentActivation),useBias:this.useBias,kernelInitializer:nN(this.kernelInitializer),recurrentInitializer:nN(this.recurrentInitializer),biasInitializer:nN(this.biasInitializer),kernelRegularizer:zT(this.kernelRegularizer),recurrentRegularizer:zT(this.recurrentRegularizer),biasRegularizer:zT(this.biasRegularizer),activityRegularizer:zT(this.activityRegularizer),kernelConstraint:MN(this.kernelConstraint),recurrentConstraint:MN(this.recurrentConstraint),biasConstraint:MN(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},e,t)}}]),n}(vA);yA.className="GRUCell",$m(yA);var bA=function(e){mp(n,e);var t=wp(n);function n(e){return Fc(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new yA(e),t.call(this,e)}return Oc(n,[{key:"call",value:function(e,t){var r=this;return ng((function(){null!=r.cell.dropoutMask&&(rg(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(rg(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return JN(gp(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(pA);bA.className="GRU",$m(bA);var xA=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,jI(r.units,"units"),r.activation=DT(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=DT(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=rN(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=rN(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=rN(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=BT(e.kernelRegularizer),r.recurrentRegularizer=BT(e.recurrentRegularizer),r.biasRegularizer=BT(e.biasRegularizer),r.kernelConstraint=PN(e.kernelConstraint),r.recurrentConstraint=PN(e.recurrentConstraint),r.biasConstraint=PN(e.biasConstraint),r.dropout=pC([1,vC([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=pC([1,vC([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return Oc(n,[{key:"build",value:function(e){var t,n,r=(e=sN(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,i=this.units;n=new(t=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"apply",value:function(e,t){var n=a.apply([i]),r=(new WC).apply([i]),o=a.apply([2*i]);return CC(CC(n,r),o)}}]),n}(PC),t.className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}},{key:"call",value:function(e,t){var n=this;return ng((function(){var r=null!=t.training&&t.training;if(3!==e.length)throw new SI("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var a=e[1],i=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=SA({ones:function(){return By(e)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=SA({ones:function(){return By(a)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var o,s,u,c,l=n.dropoutMask,f=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=py(e,l[0]));var h=TC(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(a=py(a,f[0])),h=lg(h,TC(a,n.recurrentKernel.read())),n.useBias&&(h=DC(h,n.bias.read()));var d=Ke(ib(h,4,h.rank-1),4),p=d[0],v=d[1],m=d[2],g=d[3];o=n.recurrentActivation.apply(p),s=n.recurrentActivation.apply(v),u=lg(py(s,i),py(o,n.activation.apply(m))),c=n.recurrentActivation.apply(g);var y=py(c,n.activation.apply(u));return[y,y,u]}))}},{key:"getConfig",value:function(){var e=JN(gp(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:RT(this.activation),recurrentActivation:RT(this.recurrentActivation),useBias:this.useBias,kernelInitializer:nN(this.kernelInitializer),recurrentInitializer:nN(this.recurrentInitializer),biasInitializer:nN(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:zT(this.kernelRegularizer),recurrentRegularizer:zT(this.recurrentRegularizer),biasRegularizer:zT(this.biasRegularizer),activityRegularizer:zT(this.activityRegularizer),kernelConstraint:MN(this.kernelConstraint),recurrentConstraint:MN(this.recurrentConstraint),biasConstraint:MN(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},e,t)}}]),n}(vA);xA.className="LSTMCell",$m(xA);var kA=function(e){mp(n,e);var t=wp(n);function n(e){return Fc(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new xA(e),t.call(this,e)}return Oc(n,[{key:"call",value:function(e,t){var r=this;return ng((function(){null!=r.cell.dropoutMask&&(rg(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(rg(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return JN(gp(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(pA);kA.className="LSTM",$m(kA);var wA=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this,e)).cells=e.cells,r}return Oc(n,[{key:"stateSize",get:function(){var e,t=[],n=Rc(this.cells.slice().reverse());try{for(n.s();!(e=n.n()).done;){var r=e.value;Array.isArray(r.stateSize)?t.push.apply(t,Et(r.stateSize)):t.push(r.stateSize)}}catch(eq){n.e(eq)}finally{n.f()}return t}},{key:"call",value:function(e,t){var n=this;return ng((function(){var r,a=e.slice(1),i=[],o=Rc(n.cells.slice().reverse());try{for(o.s();!(r=o.n()).done;){var s=r.value;Array.isArray(s.stateSize)?i.push(a.splice(0,s.stateSize.length)):i.push(a.splice(0,1))}}catch(eq){o.e(eq)}finally{o.f()}i.reverse();for(var u,c=[],l=0;l<n.cells.length;++l){var f=n.cells[l];a=i[l],u=0===l?[e[0]].concat(a):[u[0]].concat(a),u=f.call(u,t),c.push(u.slice(1))}a=[];var h,d=Rc(c.slice().reverse());try{for(d.s();!(h=d.n()).done;){var p,v=h.value;(p=a).push.apply(p,Et(v))}}catch(eq){d.e(eq)}finally{d.f()}return[u[0]].concat(a)}))}},{key:"build",value:function(e){var t;aN(e)&&(e=e[0]),this.cells.forEach((function(n,r){oC("RNNCell_".concat(r),(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}},{key:"getConfig",value:function(){var e=JN(gp(n.prototype),"getConfig",this).call(this),t={cells:this.cells.map((function(e){return{className:e.getClassName(),config:e.getConfig()}}))};return Object.assign({},e,t)}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];var e,t=[],n=Rc(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,Et(r.trainableWeights))}}catch(eq){n.e(eq)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=Rc(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,Et(r.nonTrainableWeights))}}catch(eq){n.e(eq)}finally{n.f()}if(!this.trainable){var a,i=[],o=Rc(this.cells);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,Et(s.trainableWeights))}}catch(eq){o.e(eq)}finally{o.f()}return i.concat(t)}return t}},{key:"getWeights",value:function(){var e,t=[],n=Rc(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,Et(r.weights))}}catch(eq){n.e(eq)}finally{n.f()}return fN(t)}},{key:"setWeights",value:function(e){var t,n=[],r=Rc(this.cells);try{for(r.s();!(t=r.n()).done;)for(var a=t.value,i=a.weights.length,o=e.splice(i),s=0;s<a.weights.length;++s)n.push([a.weights[s],o[s]])}catch(eq){r.e(eq)}finally{r.f()}hN(n)}}],[{key:"fromConfig",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],i=Rc(t.cells);try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push(QN(o,r))}}catch(eq){i.e(eq)}finally{i.f()}return new e({cells:a})}}]),n}(vA);function SA(e){var t=e.ones,n=e.rate,r=e.training,a=void 0!==r&&r,i=e.count,o=void 0===i?1:i,s=e.dropoutFunc,u=function(){return null!=s?s(t(),n):LC(t(),n)},c=function(){return _C(u,t,a)};return!o||o<=1?ag(c().clone()):Array(o).fill(void 0).map(c).map((function(e){return ag(e.clone())}))}wA.className="StackedRNNCells",$m(wA);var IA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},CA=function(e){mp(n,e);var t=wp(n);function n(e){var r;if(Fc(this,n),e.unroll)throw new II("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new II("It is not possible at the moment to stack convolutional cells.");return(r=t.call(this,e)).inputSpec=[new dN({ndim:5})],r}return Oc(n,[{key:"call",value:function(e,t){var r=this;return ng((function(){if(null!=r.cell.dropoutMask&&(rg(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(rg(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t&&t.constants)throw new SI("ConvRNN2D cell does not support constants");var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return JN(gp(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}},{key:"computeOutputShape",value:function(e){var t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0]].concat(Et(t.slice(2)))),this.returnState&&(t=[t].concat(Et(Array(2).fill([e[0]].concat(Et(t.slice(-3))))))),t}},{key:"getInitialState",value:function(e){var t=this;return ng((function(){var n=t.cell.stateSize,r=e.shape,a=t.computeSingleOutputShape(r),i=zy([a[0]].concat(Et(a.slice(2))));return Array.isArray(n)?Array(n.length).fill(i):[i]}))}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ng((function(){if(!t.stateful)throw new kI("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape,a=t.computeSingleOutputShape(r),i=[a[0]].concat(Et(a.slice(2)));if(null==r[0])throw new SI("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.getStates())Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return zy(i)})):t.states_=[zy(i)];else if(null==e)rg(t.states_),null!=t.keptStates&&(rg(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return zy(i)})):t.states_[0]=zy(i);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new SI("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));n?t.keptStates.push(t.states_.slice()):rg(t.states_);for(var o=0;o<t.states_.length;++o){var s=e[o],u=i;if(!qc(s.shape,u))throw new SI("State ".concat(o," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(u,", received shape=").concat(s.shape));t.states_[o]=s}}t.states_=t.states_.map((function(e){return ag(e.clone())}))}))}},{key:"computeSingleOutputShape",value:function(e){var t=this.cell,n=t.dataFormat,r=t.filters,a=t.kernelSize,i=t.padding,o=t.strides,s=t.dilationRate,u="channelsFirst"===n,c=e[u?3:2],l=e[u?4:3],f=qT(c,a[0],i,o[0],s[0]),h=qT(l,a[1],i,o[1],s[1]);return[].concat(Et(e.slice(0,2)),Et(u?[r,f,h]:[f,h,r]))}}]),n}(pA);CA.className="ConvRNN2D";var NA=function(e){mp(n,e);var t=wp(n);function n(e){var r;Fc(this,n);var a=e.filters,i=e.kernelSize,o=e.strides,s=e.padding,u=e.dataFormat,c=e.dilationRate;return(r=t.call(this,Object.assign({},e,{units:a}))).filters=a,jI(r.filters,"filters"),r.kernelSize=KT(i,2,"kernelSize"),r.kernelSize.forEach((function(e){return jI(e,"kernelSize")})),r.strides=KT(o||1,2,"strides"),r.strides.forEach((function(e){return jI(e,"strides")})),r.padding=s||"valid",rC(r.padding),r.dataFormat=u||"channelsLast",nC(r.dataFormat),r.dilationRate=KT(c||1,2,"dilationRate"),r.dilationRate.forEach((function(e){return jI(e,"dilationRate")})),r}return Oc(n,[{key:"build",value:function(e){var t;e=sN(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new SI("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));var r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var i=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",i,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var o;if(this.unitForgetBias){var s=this.biasInitializer,u=this.filters;o=new(t=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"apply",value:function(e,t){return IC([s.apply([u]),Py([u]),s.apply([2*u])])}}]),n}(PC),t.className="CustomInit",t)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,o,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}},{key:"call",value:function(e,t){var n=this;return ng((function(){if(3!==e.length)throw new SI("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=t.training||!1,a=e[0],i=e[1],o=e[2];0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=SA({ones:function(){return By(a)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var s=n.dropoutMask,u=function(e,t,n){return t&&t[n]?py(t[n],e):e},c=u(a,s,0),l=u(a,s,1),f=u(a,s,2),h=u(a,s,3);0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=SA({ones:function(){return By(i)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var d=n.recurrentDropoutMask,p=u(i,d,0),v=u(i,d,1),m=u(i,d,2),g=u(i,d,3),y=Ke(ib(n.kernel.read(),4,3),4),b=y[0],x=y[1],k=y[2],w=y[3],S=Ke(n.useBias?ib(n.bias.read(),4):[null,null,null,null],4),I=S[0],C=S[1],N=S[2],E=S[3];c=n.inputConv(c,b,I,n.padding),l=n.inputConv(l,x,C,n.padding),f=n.inputConv(f,k,N,n.padding),h=n.inputConv(h,w,E,n.padding);var T=Ke(ib(n.recurrentKernel.read(),4,3),4),A=T[0],R=T[1],F=T[2],D=T[3];p=n.recurrentConv(p,A),v=n.recurrentConv(v,R),m=n.recurrentConv(m,F),g=n.recurrentConv(g,D);var O=n.recurrentActivation.apply(lg(c,p)),L=n.recurrentActivation.apply(lg(l,v)),_=lg(py(L,o),py(O,n.activation.apply(lg(f,m)))),M=py(n.recurrentActivation.apply(lg(h,g)),n.activation.apply(_));return[M,M,_]}))}},{key:"getConfig",value:function(){var e=JN(gp(n.prototype),"getConfig",this).call(this),t=(e.units,IA(e,["units"])),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},t,r)}},{key:"inputConv",value:function(e,t,n,r){var a=jg(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?DC(a,n,this.dataFormat):a}},{key:"recurrentConv",value:function(e,t){return jg(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}]),n}(xA);NA.className="ConvLSTM2DCell",$m(NA);var EA=function(e){mp(n,e);var t=wp(n);function n(e){Fc(this,n);var r=new NA(e);return t.call(this,Object.assign({},e,{cell:r}))}return Oc(n,null,[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(CA);EA.className="ConvLSTM2D",$m(EA);var TA=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this,e)).rate=Math.max(Math.min(e.rate,1),0),r.noiseShape=e.noiseShape,r.seed=e.seed,r.supportsMasking=!0,r}return Oc(n,[{key:"getNoiseShape",value:function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}},{key:"call",value:function(e,t){var n=this;return ng((function(){n.invokeCallHook(e,t);var r=oN(e);if(0<n.rate&&n.rate<1){var a=null!=t.training&&t.training,i=n.getNoiseShape(r);return _C((function(){return LC(r,n.rate,i,n.seed)}),(function(){return r}),a)}return e}))}},{key:"getConfig",value:function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"dispose",value:function(){return JN(gp(n.prototype),"dispose",this).call(this)}}]),n}(yN);TA.className="Dropout",$m(TA);var AA=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this,e)).inputSpec=[{ndim:3}],r}return Oc(n,[{key:"getNoiseShape",value:function(e){var t=e.shape;return[t[0],1,t[2]]}}]),n}(TA);AA.className="SpatialDropout1D",$m(AA);var RA=function(e){mp(n,e);var t=wp(n);function n(e){var r;if(Fc(this,n),(r=t.call(this,e)).activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var a=null;null!=e.batchSize&&(a=e.batchSize),r.batchInputShape=[a,e.inputDim]}return r.units=e.units,jI(r.units,"units"),r.activation=DT(e.activation),null!=e.useBias&&(r.useBias=e.useBias),r.kernelInitializer=rN(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=rN(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=PN(e.kernelConstraint),r.biasConstraint=PN(e.biasConstraint),r.kernelRegularizer=BT(e.kernelRegularizer),r.biasRegularizer=BT(e.biasRegularizer),r.activityRegularizer=BT(e.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],r}return Oc(n,[{key:"build",value:function(e){var t=(e=sN(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:ze({},-1,t)}],this.built=!0}},{key:"computeOutputShape",value:function(e){var t=(e=sN(e)).slice();return t[t.length-1]=this.units,t}},{key:"call",value:function(e,t){var n=this;return ng((function(){n.invokeCallHook(e,t);var r,a=oN(e),i=HI(n.activation.getClassName());return null!=i?r=TC(a,n.kernel.read(),i,n.bias?n.bias.read():null):(r=TC(a,n.kernel.read()),null!=n.bias&&(r=DC(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:RT(this.activation),useBias:this.useBias,kernelInitializer:nN(this.kernelInitializer),biasInitializer:nN(this.biasInitializer),kernelRegularizer:zT(this.kernelRegularizer),biasRegularizer:zT(this.biasRegularizer),activityRegularizer:zT(this.activityRegularizer),kernelConstraint:MN(this.kernelConstraint),biasConstraint:MN(this.biasConstraint)},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(yN);RA.className="Dense",$m(RA);var FA=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),e=e||{},(r=t.call(this,e)).inputSpec=[{minNDim:3}],r.dataFormat=e.dataFormat,r}return Oc(n,[{key:"computeOutputShape",value:function(e){var t,n=Rc((e=sN(e)).slice(1));try{for(n.s();!(t=n.n()).done;){if(null==t.value)throw new SI('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.')}}catch(eq){n.e(eq)}finally{n.f()}return[e[0],dC(e,1)]}},{key:"call",value:function(e,t){var n=this;return ng((function(){n.invokeCallHook(e,t);var r=oN(e);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var a=[0],i=2;i<r.rank;++i)a.push(i);a.push(1),r=gb(r,a)}return function(e){if(e.rank<=1)throw new SI("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));var t=[e.shape[0],dC(e.shape,1)];return Rg(e,t)}(r)}))}},{key:"getConfig",value:function(){var e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);var t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(yN);FA.className="Flatten",$m(FA);var DA=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this,e)).supportsMasking=!0,r.activation=DT(e.activation),r}return Oc(n,[{key:"call",value:function(e,t){var n=this;return ng((function(){n.invokeCallHook(e,t);var r=oN(e);return n.activation.apply(r)}))}},{key:"getConfig",value:function(){var e={activation:RT(this.activation)},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(yN);DA.className="Activation",$m(DA);var OA=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this,e)).n=e.n,r.inputSpec=[{ndim:2}],r}return Oc(n,[{key:"computeOutputShape",value:function(e){return[e[0],this.n,e[1]]}},{key:"call",value:function(e,t){var n=this;return ng((function(){return function(e,t){return ng((function(){if(2!==e.shape.length)throw new SI("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(e.shape.length," tensor."));return NC(bC(e,1),[1,t,1])}))}(e=oN(e),n.n)}))}},{key:"getConfig",value:function(){var e={n:this.n},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(yN);OA.className="RepeatVector",$m(OA);var LA=function(e){mp(n,e);var t=wp(n);function n(e){var r;Fc(this,n),(r=t.call(this,e)).targetShape=e.targetShape;for(var a=0;a<r.targetShape.length;++a)r.isUnknown(r.targetShape[a])&&(r.targetShape[a]=null);return r}return Oc(n,[{key:"isUnknown",value:function(e){return e<0||null==e}},{key:"fixUnknownDimension",value:function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,i=null,o=0;o<r.length;++o){var s=r[o];if(this.isUnknown(s)){if(null!==i)throw new SI("Can only specifiy one unknown dimension.");i=o}else a*=s}var u=dC(e);if(null!==i){if(0===a||u%a!==0)throw new SI(n);r[i]=u/a}else if(u!==a)throw new SI(n);return r}},{key:"computeOutputShape",value:function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}},{key:"call",value:function(e,t){var n=this;return ng((function(){n.invokeCallHook(e,t);var r=oN(e),a=r.shape,i=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return Rg(r,i)}))}},{key:"getConfig",value:function(){var e={targetShape:this.targetShape},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(yN);LA.className="Reshape",$m(LA);var _A=function(e){mp(n,e);var t=wp(n);function n(e){var r;if(Fc(this,n),r=t.call(this,e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));var a=mC(1,e.dims.length+1);if(!qc(e.dims.slice().sort(),a))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=e.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new dN({ndim:r.dims.length+1})],r}return Oc(n,[{key:"computeOutputShape",value:function(e){var t=(e=sN(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t}},{key:"call",value:function(e,t){return gb(oN(e),this.dimsIncludingBatch)}},{key:"getConfig",value:function(){var e={dims:this.dims},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(yN);_A.className="Permute",$m(_A);var MA=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,r.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0,r}return Oc(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=JN(gp(n.prototype),"getConfig",this).call(this),t={maskValue:this.maskValue};return Object.assign(t,e),t}},{key:"computeMask",value:function(e,t){var n=oN(e);return hg(_y(n,this.maskValue),-1)}},{key:"call",value:function(e,t){var n=this;return ng((function(){n.invokeCallHook(e,t);var r=oN(e),a=hg(_y(r,n.maskValue),-1,!0);return py(r,ym(a,r.dtype))}))}}]),n}(yN);MA.className="Masking",$m(MA);var zA=function(e){mp(n,e);var t=wp(n);function n(e){var r;if(Fc(this,n),(r=t.call(this,e)).embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var a=null;null!=e.batchSize&&(a=e.batchSize),null==e.inputLength?r.batchInputShape=[a,null]:r.batchInputShape=[a].concat(FI(e.inputLength))}return r.inputDim=e.inputDim,jI(r.inputDim,"inputDim"),r.outputDim=e.outputDim,jI(r.outputDim,"outputDim"),r.embeddingsInitializer=rN(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=BT(e.embeddingsRegularizer),r.activityRegularizer=BT(e.activityRegularizer),r.embeddingsConstraint=PN(e.embeddingsConstraint),r.maskZero=e.maskZero,r.supportsMasking=e.maskZero,r.inputLength=e.inputLength,r}return Oc(n,[{key:"build",value:function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}},{key:"warnOnIncompatibleInputShape",value:function(e){}},{key:"computeMask",value:function(e,t){var n=this;return ng((function(){return n.maskZero?(e=oN(e),_y(e,mb(e))):null}))}},{key:"computeOutputShape",value:function(e){if(e=sN(e),null==this.inputLength)return[].concat(Et(e),[this.outputDim]);var t=FI(this.inputLength);if(t.length!==e.length-1)throw new SI('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));for(var n=0,r=0;r<t.length;++r){var a=t[r],i=e[r+1];if(null!=a&&null!=i&&a!==i)throw new SI('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==a&&(t[n]=i),n++}return[e[0]].concat(Et(t),[this.outputDim])}},{key:"call",value:function(e,t){var n=this;return ng((function(){n.invokeCallHook(e,t);var r=oN(e);"int32"!==r.dtype&&(r=yC(r,"int32"));var a=AC(n.embeddings.read(),Rg(r,[r.size]));return Rg(a,sN(n.computeOutputShape(r.shape)))}))}},{key:"getConfig",value:function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:nN(this.embeddingsInitializer),embeddingsRegularizer:zT(this.embeddingsRegularizer),activityRegularizer:zT(this.activityRegularizer),embeddingsConstraint:MN(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(yN);zA.className="Embedding",$m(zA);var PA=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this,e||{})).supportsMasking=!0,r}return Oc(n,[{key:"mergeFunction",value:function(e){throw new II}},{key:"computeElementwiseOpOutputShape",value:function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],i=t[r];if(null==a||null==i||a<0||i<0)n.push(null);else if(1===a)n.push(i);else if(1===i)n.push(a);else{if(a!==i)throw new SI("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}},{key:"build",value:function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[sN(e)]),e.length<2)throw new SI("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));var t,n=[],r=Rc(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null!=a&&null!==a[0]&&n.push(a[0])}}catch(eq){r.e(eq)}finally{r.f()}if((n=BI(n)).length>1)throw new SI("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));for(var i=null==e[0]?null:e[0].slice(1),o=1;o<e.length;++o){var s=null==e[o]?null:e[o].slice(1);i=this.computeElementwiseOpOutputShape(i,s)}var u=e.map((function(e){return e.length}));-1===e.indexOf(null)&&1===BI(u).length?this.reshapeRequired=!1:this.reshapeRequired=!0}},{key:"call",value:function(e,t){var n=this;return ng((function(){if(n.reshapeRequired){var t=[],r=e.map((function(e){return e.rank}));if(-1===r.indexOf(null)){var a,i=vC(r),o=Rc(e);try{for(o.s();!(a=o.n()).done;){for(var s=a.value,u=s.rank,c=0;c<i-u;++c)s=bC(s,1);t.push(s)}}catch(eq){o.e(eq)}finally{o.f()}return n.mergeFunction(t)}var l,f=!1,h=Rc(e);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=d.rank;if(null==p){var v=d.shape,m=v[0],g=v.slice(1).concat([m]),y=Rg(d,[m].concat(dC(v.slice(1))));y=gb(y,[1,0]),y=Rg(y,g),t.push(y),f=!0}else if(p>1){var b=mC(1,p).concat([0]);t.push(gb(d,b)),f=!0}else t.push(d)}}catch(eq){h.e(eq)}finally{h.f()}var x=n.mergeFunction(t),k=x.rank;if(f)if(null==k){var w=x.shape,S=w[w.length-1],I=[S].concat(w.slice(0,w.length-1));x=Rg(gb(Rg(x,[-1,S]),[1,0]),I)}else if(k>1){var C=[k-1].concat(mC(0,k-1));x=gb(x,C)}return x}return n.mergeFunction(e)}))}},{key:"computeOutputShape",value:function(e){var t;t=null==e[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}var a,i=[],o=Rc(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;null!=s&&null!==s[0]&&i.push(s[0])}}catch(eq){o.e(eq)}finally{o.f()}return t=1===(i=BI(i)).length?i.concat(t):[null].concat(t)}},{key:"computeMask",value:function(e,t){return ng((function(){if(null==t)return null;if(!Array.isArray(t))throw new SI("`mask` should be an Array");if(!Array.isArray(e))throw new SI("`inputs` should be an Array");if(t.length!==e.length)throw new SI("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every((function(e){return null==e})))return null;for(var n=(t=t.map((function(e){return null==e?e:ny(e,0)})))[0],r=1;r<t.length-1;++r)n=yy(n,t[r]);return n}))}}]),n}(yN),BA=function(e){mp(n,e);var t=wp(n);function n(e){return Fc(this,n),t.call(this,e)}return Oc(n,[{key:"mergeFunction",value:function(e){return ng((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=lg(t,e[n]);return t}))}}]),n}(PA);BA.className="Add",$m(BA);var WA=function(e){mp(n,e);var t=wp(n);function n(e){return Fc(this,n),t.call(this,e)}return Oc(n,[{key:"mergeFunction",value:function(e){return ng((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=py(t,e[n]);return t}))}}]),n}(PA);WA.className="Multiply",$m(WA);var UA=function(e){mp(n,e);var t=wp(n);function n(e){return Fc(this,n),t.call(this,e)}return Oc(n,[{key:"mergeFunction",value:function(e){return ng((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=lg(t,e[n]);return py(1/e.length,t)}))}}]),n}(PA);UA.className="Average",$m(UA);var VA=function(e){mp(n,e);var t=wp(n);function n(e){return Fc(this,n),t.call(this,e)}return Oc(n,[{key:"mergeFunction",value:function(e){return ng((function(){for(var t=e[0],n=1;n<e.length;++n)t=wy(t,e[n]);return t}))}}]),n}(PA);VA.className="Maximum",$m(VA);var jA=function(e){mp(n,e);var t=wp(n);function n(e){return Fc(this,n),t.call(this,e)}return Oc(n,[{key:"mergeFunction",value:function(e){return ng((function(){for(var t=e[0],n=1;n<e.length;++n)t=Iy(t,e[n]);return t}))}}]),n}(PA);jA.className="Minimum",$m(jA);var GA=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this,e)).DEFAULT_AXIS=-1,null==e&&(e={}),r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return Oc(n,[{key:"build",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new SI("A `Concatenate` layer should be called on a list of at least 2 inputs");var t,n=!0,r=Rc(e);try{for(r.s();!(t=r.n()).done;){if(null!=t.value){n=!1;break}}}catch(eq){r.e(eq)}finally{r.f()}if(!n){for(var a=[],i=0;i<e.length;++i){var o=e[i].slice();o.splice(this.axis,1);var s,u=!1,c=Rc(a);try{for(c.s();!(s=c.n()).done;){if(qc(s.value,o)){u=!0;break}}}catch(eq){c.e(eq)}finally{c.f()}u||a.push(o)}if(a.length>1)throw new SI("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}}},{key:"mergeFunction",value:function(e){var t=this;return ng((function(){return IC(e,t.axis)}))}},{key:"computeOutputShape",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new SI("A `Concatenate` layer should be called on a list of inputs.");var t,n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis,i=Rc(n.slice(1));try{for(i.s();!(t=i.n()).done;){var o=t.value;if(null==r[a]||null==o[a]){r[a]=null;break}r[a]+=o[a]}}catch(eq){i.e(eq)}finally{i.f()}return r}},{key:"computeMask",value:function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new SI("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new SI("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new SI("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return ng((function(){var r=!0;if(t.forEach((function(e){null==e||(r=!1)})),r)return null;for(var a=[],i=0;i<e.length;++i)null==t[i]?a.push(ym(By(e[i]),"bool")):t[i].rank<e[i].rank?a.push(ny(t[i],-1)):a.push(t[i]);var o=Pg(a,n.axis);return fg(o,-1,!1)}))}},{key:"getConfig",value:function(){var e={axis:this.axis},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(PA);function HA(e,t){for(;e<0;)e+=t;return e}GA.className="Concatenate",$m(GA);var KA=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this,e)).axes=e.axes,r.normalize=null!=e.normalize&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return Oc(n,[{key:"build",value:function(e){Vc(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new II("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new SI("Dimension incompatibility: "+"".concat(t[r[0]]," !== ").concat(n[r[1]]))}},{key:"mergeFunction",value:function(e){if(2!==e.length)throw new SI("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));var t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return HA(t,e[n].shape.length)})):[HA(this.axes,n.shape.length),HA(this.axes,r.shape.length)],this.normalize&&(n=$N(n,t[0]),r=$N(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new II("batchDot is not implemented for tensors of 4D or higher rank yet");if(Vc(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)})),Vc(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)})),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new II("batchDot is not implemented for complex64-type Tensors yet.");var r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);var i=n;return ng((function(){var n,o;if(r>a){n=r-a;for(var s=[],u=0;u<n;++u)s.push(1);t=Rg(t,t.shape.concat(s))}else if(a>r){n=a-r;for(var c=[],l=0;l<n;++l)c.push(1);e=Rg(e,e.shape.concat(c))}else n=0;if(2===e.shape.length&&2===t.shape.length)o=i[0]===i[1]?my(py(e,t),i[0]):my(py(gb(e,[1,0]),t),i[1]);else{var f=i[0]!==e.shape.length-1,h=i[1]===t.shape.length-1;o=by(e,t,f,h)}if(n>0){for(var d,p=[],v=d=r>a?r+a-3:r-1;v<d+n;++v)p.push(v);o=sb(o,p)}return 1===o.shape.length&&(o=ny(o,1)),o}))}(n,r,t)}},{key:"interpretAxes",value:function(e,t){return Array.isArray(this.axes)?this.axes:[HA(this.axes,e.length),HA(this.axes,t.length)]}},{key:"computeOutputShape",value:function(e){Vc(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new II("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);var a=t.concat(n);return 1===a.length&&a.push(1),a}},{key:"computeMask",value:function(e,t){return null}},{key:"getConfig",value:function(){var e={axes:this.axes,normalize:this.normalize},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(PA);KA.className="Dot",$m(KA);var qA=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this,e)).supportsMasking=!0,r.stddev=e.stddev,r}return Oc(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=JN(gp(n.prototype),"getConfig",this).call(this),t={stddev:this.stddev};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return ng((function(){n.invokeCallHook(e,t);var r=oN(e);return _C((function(){return lg(EC(r.shape,0,n.stddev),r)}),(function(){return r}),t.training||!1)}))}}]),n}(yN);qA.className="GaussianNoise",$m(qA);var XA=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r}return Oc(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=JN(gp(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return ng((function(){n.invokeCallHook(e,t);var r=oN(e);if(n.rate>0&&n.rate<1){return _C((function(){var e=Math.sqrt(n.rate/(1-n.rate));return py(r,EC(r.shape,1,e))}),(function(){return r}),t.training||!1)}return r}))}}]),n}(yN);XA.className="GaussianDropout",$m(XA);var YA=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r.noiseShape=e.noiseShape,r}return Oc(n,[{key:"_getNoiseShape",value:function(e){return this.noiseShape||oN(e).shape}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=JN(gp(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return ng((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(e);return _C((function(){var t=oN(e),a=-1.7580993408473766,i=cy(Ky(r),n.rate);i=yC(i,"float32");var o=Math.pow((1-n.rate)*(1+n.rate*Math.pow(a,2)),-.5),s=-o*a*n.rate,u=lg(py(t,i),py(lg(i,-1),a));return lg(py(u,o),s)}),(function(){return oN(e)}),t.training||!1)}return e}))}}]),n}(yN);function ZA(e,t,n,r,a){var i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)i=Lg(e,t,n,r,a,o);else if(3===e.rank)i=_g(e,t,n,r,a,o);else{if(4!==e.rank)throw new II("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");i=Mg(e,t,n,r,a,o)}return i}function JA(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return ng((function(){var i=Oy(e,r),o=i.mean,s=i.variance;return[ZA(e,o,s,n,t,a),o,s]}))}function QA(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return ng((function(){var i,o=Oy(e,r),s=o.mean,u=o.variance,c=[],l=Rc(mC(0,e.rank));try{for(l.s();!(i=l.n()).done;){var f=i.value;-1!==r.indexOf(f)?c.push(1):c.push(e.shape[f])}}catch(eq){l.e(eq)}finally{l.f()}var h=Rg(s,c),d=Rg(u,c),p=null==t?null:Rg(t,c),v=null==n?null:Rg(n,c);return[ZA(e,h,d,v,p,a),s,u]}))}YA.className="AlphaDropout",$m(YA);var $A=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),null==e&&(e={}),(r=t.call(this,e)).supportsMasking=!0,r.axis=null==e.axis?-1:e.axis,r.momentum=null==e.momentum?.99:e.momentum,r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=rN(e.betaInitializer||"zeros"),r.gammaInitializer=rN(e.gammaInitializer||"ones"),r.movingMeanInitializer=rN(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=rN(e.movingVarianceInitializer||"ones"),r.betaConstraint=PN(e.betaConstraint),r.gammaConstraint=PN(e.gammaConstraint),r.betaRegularizer=BT(e.betaRegularizer),r.gammaRegularizer=BT(e.gammaRegularizer),r}return Oc(n,[{key:"build",value:function(e){e=sN(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new SI("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new dN({ndim:e.length,axes:ze({},t,n)})];var r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}},{key:"call",value:function(e,t){var n=this;return ng((function(){var r=null!=t.training&&t.training,a=oN(e),i=a.shape,o=i.length,s=mC(0,o),u=n.axis>=0?n.axis:n.axis+o;s.splice(u,1);var c=EI(1,o);c[u]=i[u];var l=s.slice();l.sort();var f=!qc(l,mC(0,o).slice(0,o-1));if(!r)return function(){if(f){var e=Rg(n.movingMean.read(),c),t=Rg(n.movingVariance.read(),c),r=n.center?Rg(n.beta.read(),c):null,i=n.scale?Rg(n.gamma.read(),c):null;return ZA(a,e,t,r,i,n.epsilon)}return ZA(a,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var h=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return qc(r.slice().sort(),mC(0,e.rank-1))?JA(e,t,n,r,a):QA(e,t,n,r,a)}(a,n.gamma.read(),n.beta.read(),s,n.epsilon),d=Ke(h,3),p=d[0],v=d[1],m=d[2],g=function(e,t,n){ng((function(){var r=1-n,a=e.read(),i=py(vy(a,t),r);e.write(vy(a,i))}))};return g(n.movingMean,v,n.momentum),g(n.movingVariance,m,n.momentum),p}))}},{key:"getConfig",value:function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:nN(this.betaInitializer),gammaInitializer:nN(this.gammaInitializer),movingMeanInitializer:nN(this.movingMeanInitializer),movingVarianceInitializer:nN(this.movingVarianceInitializer),betaRegularizer:zT(this.betaRegularizer),gammaRegularizer:zT(this.gammaRegularizer),betaConstraint:MN(this.betaConstraint),gammaConstraint:MN(this.gammaConstraint)},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(yN);$A.className="BatchNormalization",$m($A);var eR=function(e){mp(n,e);var t=wp(n);function n(e){var r;if(Fc(this,n),null==e&&(e={}),(r=t.call(this,e)).axis=null==e.axis?-1:e.axis,"number"===typeof r.axis){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received ".concat(r.axis))}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(r.axis)));var a,i=Rc(r.axis);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(!Number.isInteger(o))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(r.axis)))}}catch(eq){i.e(eq)}finally{i.f()}}return r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=rN(e.betaInitializer||"zeros"),r.gammaInitializer=rN(e.gammaInitializer||"ones"),r.betaRegularizer=BT(e.betaRegularizer),r.gammaRegularizer=BT(e.gammaRegularizer),r.supportsMasking=!0,r}return Oc(n,[{key:"build",value:function(e){var t=(e=sN(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);var r,a=Rc(this.axis);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i<0||i>=t)throw new Error("Invalid axis: ".concat(i))}}catch(eq){a.e(eq)}finally{a.f()}if(this.axis.length!==BI(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var o=this.axis.map((function(t){return e[t]}));this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}},{key:"call",value:function(e,t){var n=this,r=oN(e),a=r.shape,i=a.length;return ng((function(){var e,t=Oy(r,n.axis,!0),o=t.mean,s=t.variance,u=EI(1,i),c=Rc(n.axis);try{for(c.s();!(e=c.n()).done;){var l=e.value;u[l]=a[l]}}catch(eq){c.e(eq)}finally{c.f()}for(var f=function(e){return null!=e&&e.shape.length!==i?Rg(e,u):e},h=n.scale?f(n.gamma.read()):null,d=n.center?f(n.beta.read()):null,p=[],v=[],m=0;m<i;++m)-1!==n.axis.indexOf(m)?(p.push(a[m]),v.push(1)):(p.push(1),v.push(a[m]));return o=ry(o,p),s=ry(s,p),null!=h&&(h=ry(h,v)),null!=d&&(d=ry(d,v)),ZA(r,o,s,d,h,n.epsilon)}))}},{key:"getConfig",value:function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:nN(this.betaInitializer),gammaInitializer:nN(this.gammaInitializer),betaRegularizer:zT(this.betaRegularizer),gammaRegularizer:zT(this.gammaRegularizer)},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(yN);eR.className="LayerNormalization",$m(eR);var tR=function(e){mp(n,e);var t=wp(n);function n(e){var r;if(Fc(this,n),null==e&&(e={}),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)r.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new SI("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));var a,i;if("number"===typeof e.padding[0])a=[e.padding[0],e.padding[0]],i=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new SI("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(a=e.padding[0],2!==e.padding[1].length)throw new SI("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));i=e.padding[1]}r.padding=[a,i]}return r.inputSpec=[new dN({ndim:4})],r}return Oc(n,[{key:"computeOutputShape",value:function(e){var t,n;return e=sN(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}},{key:"call",value:function(e,t){var n=this;return ng((function(){return function(e,t,n){return ng((function(){if(4!==e.rank)throw new SI("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(e.rank,"-D tensor."));if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new SI("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new SI("Unknown data format: ".concat(n,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");var r;return r="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],Wy(e,r)}))}(oN(e),n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={padding:this.padding,dataFormat:this.dataFormat},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(yN);function nR(e,t,n,r,a,i){return ng((function(){var o;nC(a),aC(i),rC(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=YT(e,a);var s="same"===r?"same":"valid";return o="max"===i?xy(e,t,n,s):Fg(e,t,n,s),"channelsFirst"===a&&(o=gb(o,[0,3,1,2])),o}))}function rR(e,t,n,r,a,i){return ng((function(){var o;nC(a),aC(i),rC(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=ZT(e,a);var s="same"===r?"same":"valid";return o="max"===i?ky(e,t,n,s):Dg(e,t,n,s),"channelsFirst"===a&&(o=gb(o,[0,4,1,2,3])),o}))}tR.className="ZeroPadding2D",$m(tR);var aR=function(e){mp(n,e);var t=wp(n);function n(e){var r;if(Fc(this,n),null==e.poolSize&&(e.poolSize=2),r=t.call(this,e),"number"===typeof e.poolSize)r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new SI("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));r.poolSize=e.poolSize}if(jI(r.poolSize,"poolSize"),null==e.strides)r.strides=r.poolSize;else if("number"===typeof e.strides)r.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new SI("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));r.strides=e.strides}return jI(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,rC(r.padding),r.inputSpec=[new dN({ndim:3})],r}return Oc(n,[{key:"computeOutputShape",value:function(e){var t=qT((e=sN(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}},{key:"call",value:function(e,t){var n=this;return ng((function(){n.invokeCallHook(e,t),e=bC(oN(e),2);var r=n.poolingFunction(oN(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return sb(r,[2])}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(yN),iR=function(e){mp(n,e);var t=wp(n);function n(e){return Fc(this,n),t.call(this,e)}return Oc(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return nC(a),rC(r),nR(e,t,n,r,a,"max")}}]),n}(aR);iR.className="MaxPooling1D",$m(iR);var oR=function(e){mp(n,e);var t=wp(n);function n(e){return Fc(this,n),t.call(this,e)}return Oc(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return nC(a),rC(r),nR(e,t,n,r,a,"avg")}}]),n}(aR);oR.className="AveragePooling1D",$m(oR);var sR=function(e){mp(n,e);var t=wp(n);function n(e){var r;if(Fc(this,n),null==e.poolSize&&(e.poolSize=[2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new SI("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides];return jI(r.poolSize,"poolSize"),jI(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,nC(r.dataFormat),rC(r.padding),r.inputSpec=[new dN({ndim:4})],r}return Oc(n,[{key:"computeOutputShape",value:function(e){e=sN(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=qT(t,this.poolSize[0],this.padding,this.strides[0]),n=qT(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}},{key:"call",value:function(e,t){var n=this;return ng((function(){return n.invokeCallHook(e,t),n.poolingFunction(oN(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(yN),uR=function(e){mp(n,e);var t=wp(n);function n(e){return Fc(this,n),t.call(this,e)}return Oc(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return nC(a),rC(r),nR(e,t,n,r,a,"max")}}]),n}(sR);uR.className="MaxPooling2D",$m(uR);var cR=function(e){mp(n,e);var t=wp(n);function n(e){return Fc(this,n),t.call(this,e)}return Oc(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return nC(a),rC(r),nR(e,t,n,r,a,"avg")}}]),n}(sR);cR.className="AveragePooling2D",$m(cR);var lR=function(e){mp(n,e);var t=wp(n);function n(e){var r;if(Fc(this,n),null==e.poolSize&&(e.poolSize=[2,2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new SI("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides,e.strides];return jI(r.poolSize,"poolSize"),jI(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,nC(r.dataFormat),rC(r.padding),r.inputSpec=[new dN({ndim:5})],r}return Oc(n,[{key:"computeOutputShape",value:function(e){e=sN(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=qT(t,this.poolSize[0],this.padding,this.strides[0]),n=qT(n,this.poolSize[1],this.padding,this.strides[1]),r=qT(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}},{key:"call",value:function(e,t){var n=this;return ng((function(){return n.invokeCallHook(e,t),n.poolingFunction(oN(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(yN),fR=function(e){mp(n,e);var t=wp(n);function n(e){return Fc(this,n),t.call(this,e)}return Oc(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return nC(a),rC(r),rR(e,t,n,r,a,"max")}}]),n}(lR);fR.className="MaxPooling3D",$m(fR);var hR=function(e){mp(n,e);var t=wp(n);function n(e){return Fc(this,n),t.call(this,e)}return Oc(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return nC(a),rC(r),rR(e,t,n,r,a,"avg")}}]),n}(lR);hR.className="AveragePooling3D",$m(hR);var dR=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this,e)).inputSpec=[new dN({ndim:3})],r}return Oc(n,[{key:"computeOutputShape",value:function(e){return[e[0],e[2]]}},{key:"call",value:function(e,t){throw new II}}]),n}(yN),pR=function(e){mp(n,e);var t=wp(n);function n(e){return Fc(this,n),t.call(this,e||{})}return Oc(n,[{key:"call",value:function(e,t){return ng((function(){var t=oN(e);return Sy(t,1)}))}}]),n}(dR);pR.className="GlobalAveragePooling1D",$m(pR);var vR=function(e){mp(n,e);var t=wp(n);function n(e){return Fc(this,n),t.call(this,e||{})}return Oc(n,[{key:"call",value:function(e,t){return ng((function(){var t=oN(e);return dy(t,1)}))}}]),n}(dR);vR.className="GlobalMaxPooling1D",$m(vR);var mR=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,nC(r.dataFormat),r.inputSpec=[new dN({ndim:4})],r}return Oc(n,[{key:"computeOutputShape",value:function(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}},{key:"call",value:function(e,t){throw new II}},{key:"getConfig",value:function(){var e={dataFormat:this.dataFormat},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(yN),gR=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"call",value:function(e,t){var n=this;return ng((function(){var t=oN(e);return"channelsLast"===n.dataFormat?Sy(t,[1,2]):Sy(t,[2,3])}))}}]),n}(mR);gR.className="GlobalAveragePooling2D",$m(gR);var yR=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.apply(this,arguments)}return Oc(n,[{key:"call",value:function(e,t){var n=this;return ng((function(){var t=oN(e);return"channelsLast"===n.dataFormat?dy(t,[1,2]):dy(t,[2,3])}))}}]),n}(mR);yR.className="GlobalMaxPooling2D",$m(yR);var bR=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this,e)).layer=e.layer,r}return Oc(n,[{key:"build",value:function(e){this.built=!0}},{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}},{key:"getWeights",value:function(){return this.layer.getWeights()}},{key:"setWeights",value:function(e){this.layer.setWeights(e)}},{key:"getConfig",value:function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"setFastWeightInitDuringBuild",value:function(e){JN(gp(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.layer,a=QN(r,n);delete t.layer;var i={layer:a};return Object.assign(i,t),new e(i)}}]),n}(yN),xR=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this,e)).supportsMasking=!0,r}return Oc(n,[{key:"build",value:function(e){if((e=sN(e)).length<3)throw new SI("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];var t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),JN(gp(n.prototype),"build",this).call(this,e)}},{key:"computeOutputShape",value:function(e){var t=[(e=sN(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}},{key:"call",value:function(e,t){var n=this;return ng((function(){return dA((function(e,r){return[oN(n.layer.call(e,t)),[]]}),e=oN(e),[],!1,null,null,!1,!0)[1]}))}}]),n}(bR);xR.className="TimeDistributed",$m(xR);var kR=function(e){mp(n,e);var t=wp(n);function n(e){var r;Fc(this,n),r=t.call(this,e);var a=e.layer.getConfig(),i={};i.className=e.layer.getClassName(),i.config=a,r.forwardLayer=QN(i),a.goBackwards=!0!==a.goBackwards;var o,s={};if(s.className=e.layer.getClassName(),s.config=a,r.backwardLayer=QN(s),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,o=r.mergeMode,UI(eC,"BidirectionalMergeMode",o),e.weights)throw new II("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return Oc(n,[{key:"trainable",get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}},{key:"getWeights",value:function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}},{key:"setWeights",value:function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),this.returnState?(r=a.slice(1),t=a[0]):t=a[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):RI(n)}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=hA(e,r,a,this.numConstants);if(e=i.inputs,r=i.initialState,a=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==a)return JN(gp(n.prototype),"apply",this).call(this,e,t);var o=[],s=[];if(null!=r){var u=r.length;if(u%2>0)throw new SI("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,o.push.apply(o,Et(r));var c=r.map((function(e){return new dN({shape:e.shape})}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),s.push.apply(s,Et(c))}if(null!=a)throw new II("Support for constants in Bidirectional layers is not implemented yet.");for(var l=o[0]instanceof pN,f=0,h=o;f<h.length;f++){if(h[f]instanceof pN!==l)throw new SI("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(l){var d=[e].concat(o),p=this.inputSpec.concat(s),v=this.inputSpec;this.inputSpec=p;var m=JN(gp(n.prototype),"apply",this).call(this,d,t);return this.inputSpec=v,m}return JN(gp(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return ng((function(){var r,a,i,o,s=t.initialState;if(null==s)r=n.forwardLayer.call(e,t),a=n.backwardLayer.call(e,t);else{var u=s.slice(0,s.length/2),c=s.slice(s.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:u})),a=n.backwardLayer.call(e,Object.assign(t,{initialState:c}))}return n.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),n.returnSequences&&(a=Xy(a,1)),"concat"===n.mergeMode?o=IC([r,a]):"sum"===n.mergeMode?o=lg(r,a):"ave"===n.mergeMode?o=py(.5,lg(r,a)):"mul"===n.mergeMode?o=py(r,a):null==n.mergeMode&&(o=[r,a]),n.returnState?null==n.mergeMode?o.concat(i):[o].concat(i):o}))}},{key:"resetStates",value:function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}},{key:"build",value:function(e){var t=this;oC(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),oC(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0}},{key:"computeMask",value:function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}},{key:"setFastWeightInitDuringBuild",value:function(e){JN(gp(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e={mergeMode:this.mergeMode},t=JN(gp(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"fromConfig",value:function(e,t){var n=QN(t.layer);if(delete t.layer,null!=t.numConstants)throw new II("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)}}]),n}(bR);kR.className="Bidirectional",$m(kR);var wR,SR;Cl().registerFlag("KEEP_INTERMEDIATE_TENSORS",(function(){return!1}),(function(e){e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(wR||(wR={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(SR||(SR={}));var IR=n(6699);function CR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(AR(e)){var i=Array.isArray(e)?[]:{};for(var o in r.add(e),e){var s=e[o],u=CR(s,t,n,r);i[o]=u}return r.delete(e),e.__proto__&&(i.__proto__=e.__proto__),i}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function NR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:TR;return ER(e,t)}function ER(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(AR(r)){var i=Array.isArray(r)?[]:{};n.add(r);var o=function(r){var a=e.map((function(e){return e[r]})),o=ER(a,t,n);i[r]=o};for(var s in r)o(s);return n.delete(r),i}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function TR(e){return null===e?null:AR(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function AR(e){var t=!1;Cl().get("IS_BROWSER")?t=e instanceof TextDecoder:t=e instanceof n(4977).StringDecoder;return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof Fp)&&!(e instanceof Promise)&&!t)}function RR(e){return function(e,t){return CR(e,t)}(e,FR)}function FR(e){return e instanceof Fp?{value:e.clone(),recurse:!1}:AR(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var DR=function(){function e(t){if(Fc(this,e),this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return Oc(e,[{key:"wrap",value:function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}},{key:"get",value:function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}},{key:"set",value:function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}},{key:"length",value:function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}},{key:"isFull",value:function(){return this.length()===this.capacity}},{key:"isEmpty",value:function(){return 0===this.length()}},{key:"push",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}},{key:"pushAll",value:function(e){var t,n=Rc(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.push(r)}}catch(eq){n.e(eq)}finally{n.f()}}},{key:"pop",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e}},{key:"unshift",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}},{key:"shift",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}},{key:"shuffleExcise",value:function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}]),e}(),OR=function(e){mp(n,e);var t=wp(n);function n(){return Fc(this,n),t.call(this,n.INITIAL_CAPACITY)}return Oc(n,[{key:"isFull",value:function(){return!1}},{key:"push",value:function(e){JN(gp(n.prototype),"isFull",this).call(this)&&this.expand(),JN(gp(n.prototype),"push",this).call(this,e)}},{key:"unshift",value:function(e){JN(gp(n.prototype),"isFull",this).call(this)&&this.expand(),JN(gp(n.prototype),"unshift",this).call(this,e)}},{key:"expand",value:function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}]),n}(DR);function LR(e){return new BR(e)}function _R(e,t){return new ZR(e,t)}OR.INITIAL_CAPACITY=32;var MR,zR=function(){function e(){Fc(this,e)}return Oc(e,[{key:"toArray",value:function(){var e=Ue(Xe().mark((function e(){var t,n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.next();case 3:n=e.sent;case 4:if(n.done){e.next=11;break}return t.push(n.value),e.next=8,this.next();case 8:n=e.sent,e.next=4;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=Ue(Xe().mark((function e(){var t,n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.prefetch(100),n=[],e.next=4,t.next();case 4:r=e.sent;case 5:if(r.done){e.next=12;break}return n.push(r.value),e.next=9,t.next();case 9:r=e.sent,e.next=5;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveFully",value:function(){var e=Ue(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:t=e.sent;case 3:if(t.done){e.next=9;break}return e.next=6,this.next();case 6:t=e.sent,e.next=3;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveWhile",value:function(){var e=Ue(Xe().mark((function e(t){var n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:n=e.sent,r=t(n.value);case 4:if(n.done||!r){e.next=11;break}return e.next=7,this.next();case 7:n=e.sent,r=t(n.value),e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e){return new KR(this,e)}},{key:"filter",value:function(e){return new GR(this,e)}},{key:"map",value:function(e){return new HR(this,e)}},{key:"mapAsync",value:function(e){return new qR(this,e)}},{key:"serialMapAsync",value:function(e){return new qR(this,e).serial()}},{key:"flatmap",value:function(e){return new YR(this,e)}},{key:"forEachAsync",value:function(){var e=Ue(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map(t).resolveFully());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"serialForEach",value:function(){var e=Ue(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.serialMapAsync(t).resolveWhile((function(e){return!0===e})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rowMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new jR(this,e,t)}},{key:"columnMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:TR,r=this.rowMajorBatch(e,t);return r.map((function(e){return NR(e,n)}))}},{key:"concatenate",value:function(e,t){return new ZR(new PR([this,e]),t)}},{key:"take",value:function(e){return e<0||null==e?this:new VR(this,e)}},{key:"skip",value:function(e){return e<0||null==e?this:new UR(this,e)}},{key:"prefetch",value:function(e){return new JR(this,e)}},{key:"shuffle",value:function(e,t){return new QR(this,e,t)}},{key:"serial",value:function(){return new WR(this)}}]),e}(),PR=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this)).items=e,r.trav=0,r}return Oc(n,[{key:"summary",value:function(){return"Array of ".concat(this.items.length," items")}},{key:"next",value:function(){var e=Ue(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trav>=this.items.length)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=this.items[this.trav],this.trav++,e.abrupt("return",{value:RR(t),done:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(zR),BR=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this)).nextFn=e,r}return Oc(n,[{key:"summary",value:function(){return"Function call"}},{key:"next",value:function(){var e=Ue(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.nextFn());case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.message="Error thrown while iterating through a dataset: ".concat(e.t0.message),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}()}]),n}(zR),WR=function(e){mp(n,e);var t=wp(n);function n(e){var r;return Fc(this,n),(r=t.call(this)).upstream=e,r.lastRead=Promise.resolve({value:null,done:!1}),r}return Oc(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Serial")}},{key:"next",value:function(){var e=Ue(Xe().mark((function e(){var t=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Ue(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.upstream.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(zR),UR=function(e){mp(n,e);var t=wp(n);function n(e,r){var a;return Fc(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Oc(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Skip")}},{key:"next",value:function(){var e=Ue(Xe().mark((function e(){var t=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Ue(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++<this.maxCount)){e.next=9;break}return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done){e.next=6;break}return e.abrupt("return",t);case 6:rg(t.value),e.next=0;break;case 9:return e.abrupt("return",this.upstream.next());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(zR),VR=function(e){mp(n,e);var t=wp(n);function n(e,r){var a;return Fc(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a}return Oc(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Take")}},{key:"next",value:function(){var e=Ue(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++>=this.maxCount)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.abrupt("return",this.upstream.next());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(zR),jR=function(e){mp(n,e);var t=wp(n);function n(e,r){var a,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Fc(this,n),(a=t.call(this)).upstream=e,a.batchSize=r,a.enableSmallLastBatch=i,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Oc(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}},{key:"next",value:function(){var e=Ue(Xe().mark((function e(){var t=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Ue(Xe().mark((function e(){var t,n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];case 1:if(!(t.length<this.batchSize)){e.next=12;break}return e.next=4,this.upstream.next();case 4:if(!(n=e.sent).done){e.next=9;break}if(!(this.enableSmallLastBatch&&t.length>0)){e.next=8;break}return e.abrupt("return",{value:t,done:!1});case 8:return e.abrupt("return",{value:null,done:!0});case 9:t.push(n.value),e.next=1;break;case 12:return e.abrupt("return",{value:t,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(zR),GR=function(e){mp(n,e);var t=wp(n);function n(e,r){var a;return Fc(this,n),(a=t.call(this)).upstream=e,a.predicate=r,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Oc(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Filter")}},{key:"next",value:function(){var e=Ue(Xe().mark((function e(){var t=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Ue(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done&&!this.predicate(t.value)){e.next=6;break}return e.abrupt("return",t);case 6:rg(t.value),e.next=0;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(zR),HR=function(e){mp(n,e);var t=wp(n);function n(e,r){var a;return Fc(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return Oc(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Map")}},{key:"next",value:function(){var e=Ue(Xe().mark((function e(){var t,n,r,a,i,o,s;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:n=Gp(t.value),r=this.transform(t.value),a=Gp(r),i=Rc(n);try{for(i.s();!(o=i.n()).done;)jp(s=o.value,a)||s.dispose()}catch(eq){i.e(eq)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(zR),KR=function(e){mp(n,e);var t=wp(n);function n(e,r){var a;return Fc(this,n),(a=t.call(this)).upstream=e,a.handler=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Oc(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> handleErrors")}},{key:"next",value:function(){var e=Ue(Xe().mark((function e(){var t=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Ue(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,this.upstream.next();case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),this.handler(e.t0)){e.next=11;break}return e.abrupt("return",{value:null,done:!0});case 11:e.next=0;break;case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()}]),n}(zR),qR=function(e){mp(n,e);var t=wp(n);function n(e,r){var a;return Fc(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return Oc(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> AsyncMap")}},{key:"next",value:function(){var e=Ue(Xe().mark((function e(){var t,n,r,a,i,o,s;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:return n=Gp(t.value),e.next=8,this.transform(t.value);case 8:r=e.sent,a=Gp(r),i=Rc(n);try{for(i.s();!(o=i.n()).done;)jp(s=o.value,a)||s.dispose()}catch(eq){i.e(eq)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(zR),XR=function(e){mp(n,e);var t=wp(n);function n(){var e;return Fc(this,n),(e=t.call(this)).outputQueue=new OR,e.lastRead=Promise.resolve({value:null,done:!1}),e}return Oc(n,[{key:"next",value:function(){var e=Ue(Xe().mark((function e(){var t=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Ue(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.outputQueue.length()){e.next=7;break}return e.next=3,this.pump();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:e.next=0;break;case 7:return e.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(zR),YR=function(e){mp(n,e);var t=wp(n);function n(e,r){var a;return Fc(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return Oc(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Flatmap")}},{key:"pump",value:function(){var e=Ue(Xe().mark((function e(){var t,n,r,a,i,o,s;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:n=Gp(t.value),r=this.transform(t.value),a=Gp(r),this.outputQueue.pushAll(r),i=Rc(n);try{for(i.s();!(o=i.n()).done;)jp(s=o.value,a)||s.dispose()}catch(eq){i.e(eq)}finally{i.f()}return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(XR),ZR=function(e){mp(n,e);var t=wp(n);function n(e,r){var a;return Fc(this,n),(a=t.call(this)).baseErrorHandler=r,a.lastRead=null,a.iterator=null,a.moreIterators=e,a}return Oc(n,[{key:"summary",value:function(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}},{key:"next",value:function(){var e=Ue(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.readFromChain(this.lastRead),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readFromChain",value:function(){var e=Ue(Xe().mark((function e(t){var n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(null!=this.iterator){e.next=10;break}return e.next=5,this.moreIterators.next();case 5:if(!(n=e.sent).done){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 10:return e.next=12,this.iterator.next();case 12:if(!(r=e.sent).done){e.next=16;break}return this.iterator=null,e.abrupt("return",this.readFromChain(t));case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(zR);!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(MR||(MR={}));var JR=function(e){mp(n,e);var t=wp(n);function n(e,r){var a;return Fc(this,n),(a=t.call(this)).upstream=e,a.bufferSize=r,a.buffer=new DR(r),a}return Oc(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Prefetch")}},{key:"refill",value:function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}}},{key:"next",value:function(){return this.refill(),this.buffer.shift()}}]),n}(zR),QR=function(e){mp(n,e);var t=wp(n);function n(e,r,a){var i;return Fc(this,n),(i=t.call(this,e,r)).upstream=e,i.windowSize=r,i.upstreamExhausted=!1,i.random=IR.alea(a||up().toString()),i.lastRead=Promise.resolve({value:null,done:!1}),i}return Oc(n,[{key:"next",value:function(){var e=Ue(Xe().mark((function e(){var t=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"randomInt",value:function(e){return Math.floor(this.random()*e)}},{key:"chooseIndex",value:function(){return this.randomInt(this.buffer.length())}},{key:"serialNext",value:function(){var e=Ue(Xe().mark((function e(){var t,n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){e.next=14;break}return t=this.chooseIndex(),e.next=5,this.buffer.shuffleExcise(t);case 5:if(!(n=e.sent).done){e.next=10;break}this.upstreamExhausted=!0,e.next=12;break;case 10:return this.refill(),e.abrupt("return",n);case 12:e.next=1;break;case 14:return e.abrupt("return",{value:null,done:!0});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(JR),$R=function(){function e(){Fc(this,e),this.size=null}return Oc(e,[{key:"batch",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return Vc(e>0,(function(){return"batchSize needs to be positive, but it is\n      ".concat(e)})),t=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),eF(Ue(Xe().mark((function t(){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.iterator();case 2:return t.abrupt("return",t.sent.columnMajorBatch(e,n,tF));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"concatenate",value:function(e){var t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,eF(Ue(Xe().mark((function t(){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.next=5,e.iterator();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.concatenate.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))),t)}},{key:"filter",value:function(e){var t,n=this;return t=this.size===1/0?1/0:null,eF(Ue(Xe().mark((function t(){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.filter((function(t){return ng((function(){return e(t)}))})));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"forEachAsync",value:function(){var e=Ue(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.iterator();case 2:return e.abrupt("return",e.sent.forEachAsync(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"map",value:function(e){var t=this;return eF(Ue(Xe().mark((function n(){return Xe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.map((function(t){return ng((function(){return e(t)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"mapAsync",value:function(e){var t=this;return eF(Ue(Xe().mark((function n(){return Xe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"prefetch",value:function(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var t=this;return eF(Ue(Xe().mark((function n(){return Xe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.prefetch(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"repeat",value:function(e){var t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,eF(Ue(Xe().mark((function t(){var r;return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=LR(Ue(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 4:case"end":return e.stop()}}),e)})))),t.abrupt("return",_R(r.take(e)));case 2:case"end":return t.stop()}}),t)}))),t)}},{key:"skip",value:function(e){var t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,eF(Ue(Xe().mark((function t(){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.skip(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"shuffle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));var r=this,a=IR.alea(t||up().toString());return eF(Ue(Xe().mark((function t(){var i;return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.int32(),n&&(i+=a.int32()),t.next=4,r.iterator();case 4:return t.abrupt("return",t.sent.shuffle(e,i.toString()));case 5:case"end":return t.stop()}}),t)}))),this.size)}},{key:"take",value:function(e){var t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,eF(Ue(Xe().mark((function t(){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.take(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"toArray",value:function(){var e=Ue(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArray());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=Ue(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArrayForTest());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function eF(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(function(n){mp(a,n);var r=wp(a);function a(){var e;return Fc(this,a),(e=r.apply(this,arguments)).size=t,e}return Oc(a,[{key:"iterator",value:function(){var t=Ue(Xe().mark((function t(){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),a}($R))}function tF(e){return null===e?null:function(e){return null==e||null===(t=e)||"object"!==typeof t&&"function"!==typeof t||Array.isArray(e)||"object"===typeof e&&e instanceof Fp||al(e);var t}(e[0])?{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof Fp?ub(e):fv(e)}(e),recurse:!1}:{value:null,recurse:!0}}$R.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function nF(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&Vc("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}var rF=Rk,aF=function(e){mp(n,e);var t=wp(n);function n(){var e;return Fc(this,n),(e=t.call(this)).blockSize=48,e.firstUse=!0,e.data=new Lc(xp(e),eg()),e}return Oc(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,Cl().get("IS_NODE")&&Ld("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&ol(n[0])){var a=n.map((function(e){return cp(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:function(){var e=Ue(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;return"complex64"===n?hk(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return lp(e)}));return gm(e.shape,e.dtype,n)}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return gm(e.shape,e.dtype,t)}},{key:"makeOutput",value:function(e,t,n){return eg().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e),r=n.complexTensorInfos;null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:function(){var e=Ue(Xe().mark((function e(t){var n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=up(),t(),r=up()-n,e.abrupt("return",{kernelMs:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){nF([e],"where");var t=this.readSync(e.dataId);return rF(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return JN(gp(n.prototype),"epsilon",this).call(this)}}]),n}(_c);aF.nextDataId=0;function iF(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(nF(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var u=o,c=u.data.get(s.dataId).values,l=Kc(s.shape),f=n||s.dtype,h=nl(f,l),d=0;d<l;++d)h[d]=t(c[d],i);return u.makeTensorInfo(s.shape,f,h)}}function oF(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(nF(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var u=o,c=u.data.get(s.dataId).values,l=n||s.dtype,f=t(c,l,i);return u.makeTensorInfo(s.shape,l,f)}}ig("cpu",(function(){return new aF}),1);var sF=iF(Ef,(function(e){return e>=0?e:Math.exp(e)-1})),uF={kernelName:Ef,backendName:"cpu",kernelFunc:sF};function cF(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var lF={kernelName:Gf,backendName:"cpu",kernelFunc:cF};function fF(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha;nF([a],"leakyRelu");for(var o=Kc(a.shape),s=n.data.get(a.dataId).values,u=tl("float32",o),c=0;c<s.length;c++)u[c]=s[c]<0?i*s[c]:s[c];return n.makeTensorInfo(a.shape,"float32",u)}var hF={kernelName:Zf,backendName:"cpu",kernelFunc:fF};function dF(e){return function(t,n,r,a,i){var o=jm(t,n),s=o.length,u=fl(o),c=tl(i,Kc(o)),l=t.length,f=n.length,h=fl(t),d=fl(n),p=Um(t,o),v=Um(n,o);if(p.length+v.length===0)for(var m=0;m<c.length;++m)c[m]=e(r[m%r.length],a[m%a.length]);else for(var g=function(t){var n=bl(t,s,u),i=n.slice(-l);p.forEach((function(e){return i[e]=0}));var o=yl(i,l,h),m=n.slice(-f);v.forEach((function(e){return m[e]=0}));var g=yl(m,f,d);c[t]=e(r[o],a[g])},y=0;y<c.length;++y)g(y);return[c,o]}}var pF=dF((function(e,t){return e<0?t*e:e}));function vF(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;nF([r,a],"prelu");var i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=Ke(pF(r.shape,a.shape,i,o,"float32"),2),u=s[0],c=s[1];return n.makeTensorInfo(c,"float32",u)}var mF={kernelName:Fh,backendName:"cpu",kernelFunc:vF},gF=iF(Mh,(function(e){return Math.max(0,e)})),yF={kernelName:Mh,backendName:"cpu",kernelFunc:gF},bF=iF(Vh,(function(e){return Math.min(Math.max(0,e),6)})),xF={kernelName:Vh,backendName:"cpu",kernelFunc:bF};function kF(e){return function(t,n,r){for(var a=tl(n,t.length),i=0;i<t.length;++i)a[i]=e(t[i],r);return a}}var wF=kF((function(e){return 1/(1+Math.exp(-e))})),SF=iF(ed,(function(e){return 1/(1+Math.exp(-e))})),IF={kernelName:ed,backendName:"cpu",kernelFunc:SF};function CF(e,t,n,r,a){if("linear"===n)return cF({inputs:{x:t},backend:e});if("relu"===n)return gF({inputs:{x:t},backend:e});if("elu"===n)return sF({inputs:{x:t},backend:e});if("relu6"===n)return bF({inputs:{x:t},backend:e});if("prelu"===n)return vF({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return fF({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return SF({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function NF(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}var EF={kernelName:tf,backendName:"cpu",kernelFunc:NF};function TF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){var r=TF(e,t,"float32"),a=TF(e,t,"float32");return NF({inputs:{real:r,imag:a},backend:e})}var i=vl(Kc(t),n);return e.makeTensorInfo(t,n,i)}function AF(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var RF={kernelName:Lh,backendName:"cpu",kernelFunc:AF};function FF(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dtype;if("complex64"===i){if("complex64"===a.dtype)return cF({inputs:{x:a},backend:n});var o=TF(n,a.shape,a.dtype),s=FF({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),u=NF({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}if("complex64"===a.dtype){var c=AF({inputs:{input:a},backend:n}),l=FF({inputs:{x:c},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(c),l}if(!rl(a.dtype,i)){var f=cF({inputs:{x:a},backend:n});return{dataId:f.dataId,shape:f.shape,dtype:i}}if("int32"===i){var h=n.data.get(a.dataId).values,d=Int32Array.from(h);return n.makeTensorInfo(a.shape,"int32",d)}if("bool"===i){var p=n.data.get(a.dataId).values,v=sp([0],a.dtype),m=dF((function(e,t){return e!==t?1:0}))(a.shape,[],p,v,"bool"),g=Ke(m,2),y=g[0],b=g[1];return n.makeTensorInfo(b,"bool",y)}throw new Error("Error in Cast: failed to cast ".concat(a.dtype," to ").concat(i))}var DF={kernelName:Ql,backendName:"cpu",kernelFunc:FF};function OF(e,t,n,r){return null==n?function(n){var a=n.inputs,i=n.backend,o=a.a,s=a.b,u=i;nF([o,s],e);var c=u.data.get(o.dataId).values,l=u.data.get(s.dataId).values,f="string"===o.dtype?Ak(c):c,h="string"===o.dtype?Ak(l):l,d=r||o.dtype,p=Ke(t(o.shape,s.shape,f,h,d),2),v=p[0],m=p[1];return u.makeTensorInfo(m,d,v)}:function(e){var a=e.inputs,i=e.backend,o=a.a,s=a.b,u=i;if("complex64"===o.dtype||"complex64"===s.dtype){var c=FF({inputs:{x:o},backend:u,attrs:{dtype:"complex64"}}),l=u.data.get(c.dataId),f=l.complexTensorInfos.real,h=l.complexTensorInfos.imag,d=u.data.get(f.dataId).values,p=u.data.get(h.dataId).values,v=FF({inputs:{x:s},backend:u,attrs:{dtype:"complex64"}}),m=u.data.get(v.dataId),g=m.complexTensorInfos.real,y=m.complexTensorInfos.imag,b=u.data.get(g.dataId).values,x=u.data.get(y.dataId).values,k=Ke(n(o.shape,s.shape,d,p,b,x),3),w=k[0],S=k[1],I=k[2],C=u.makeTensorInfo(I,"float32",w),N=u.makeTensorInfo(I,"float32",S),E=NF({inputs:{real:C,imag:N},backend:u});return u.disposeIntermediateTensorInfo(c),u.disposeIntermediateTensorInfo(v),u.disposeIntermediateTensorInfo(C),u.disposeIntermediateTensorInfo(N),E}var T=u.data.get(o.dataId).values,A=u.data.get(s.dataId).values,R=r||o.dtype,F=Ke(t(o.shape,s.shape,T,A,R),2),D=F[0],O=F[1];return u.makeTensorInfo(O,R,D)}}function LF(e){return function(t,n,r,a,i,o){var s=jm(t,n),u=Kc(s),c=s.length,l=fl(s),f=tl("float32",u),h=tl("float32",u),d=Um(t,s),p=Um(n,s),v=hk(r,a),m=hk(i,o),g=t.length,y=fl(t),b=n.length,x=fl(n);if(d.length+p.length===0)for(var k=0;k<f.length;k++){var w=k%v.length,S=k%m.length,I=e(v[2*w],v[2*w+1],m[2*S],m[2*S+1]);f[k]=I.real,h[k]=I.imag}else for(var C=function(t){var n=bl(t,c,l),r=n.slice(-g);d.forEach((function(e){return r[e]=0}));var a=yl(r,g,y),i=n.slice(-b);p.forEach((function(e){return i[e]=0}));var o=yl(i,b,x),s=e(v[2*a],v[2*a+1],m[2*o],m[2*o+1]);f[t]=s.real,h[t]=s.imag},N=0;N<f.length;N++)C(N);return[f,h,s]}}var _F=dF((function(e,t){return e+t})),MF=LF((function(e,t,n,r){return{real:e+n,imag:t+r}})),zF=OF(Ol,_F,MF),PF={kernelName:Ol,backendName:"cpu",kernelFunc:zF};function BF(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=Kc(a.shape),s=Qc(i,o),u=Kc(s);Vc(o===u,(function(){return"The new shape (".concat(s,") has ").concat(u," elements and the old ")+"shape (".concat(a.shape,") has ").concat(o," elements. The new shape and old ")+"shape must have the same number of elements."})),n.incRef(a.dataId);var c=n.data.get(a.dataId);if(null!=c.complexTensorInfos){var l=c.complexTensorInfos.real,f=c.complexTensorInfos.imag;l.shape=s,f.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}var WF={kernelName:zh,backendName:"cpu",kernelFunc:BF};function UF(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=r.transposeA,s=r.transposeB;nF([a,i],"matMul");var u=a.shape.length,c=i.shape.length,l=o?a.shape[u-2]:a.shape[u-1],f=s?i.shape[c-1]:i.shape[c-2],h=o?a.shape[u-1]:a.shape[u-2],d=s?i.shape[c-2]:i.shape[c-1],p=a.shape.slice(0,-2),v=i.shape.slice(0,-2),m=Kc(p),g=Kc(v),y=jm(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([h,d]);Vc(l===f,(function(){return"Error in matMul: inner shapes (".concat(l,") and (")+"".concat(f,") of Tensors with shapes ").concat(a.shape," and ")+"".concat(i.shape," and transposeA=").concat(o)+" and transposeB=".concat(s," must match.")}));for(var b=s?[g,d,f]:[g,f,d],x=BF({inputs:{x:a},backend:n,attrs:{shape:o?[m,l,h]:[m,h,l]}}),k=BF({inputs:{x:i},backend:n,attrs:{shape:b}}),w=o?x.shape[1]:x.shape[2],S=o?x.shape[2]:x.shape[1],I=s?k.shape[1]:k.shape[2],C=Math.max(m,g),N=n.data.get(x.dataId).values,E=n.data.get(k.dataId).values,T=fl(x.shape),A=fl(k.shape),R=Ke(o?[T[0],1,T[1]]:[T[0],T[1],1],3),F=R[0],D=R[1],O=R[2],L=Ke(s?[1,A[1],A[0]]:[A[1],1,A[0]],3),_=L[0],M=L[1],z=L[2],P=S*I,B=gm([C,S,I],x.dtype),W=B.values,U=n.blockSize,V=0;V<C;V++)for(var j=0;j<S;j+=U)for(var G=0;G<I;G+=U)for(var H=0;H<w;H+=U)for(var K=Math.min(j+U,S),q=Math.min(G+U,I),X=Math.min(H+U,w),Y=j;Y<K;Y++)for(var Z=G;Z<q;Z++){for(var J=0,Q=H;Q<X;Q++){var $=Math.min(V,m-1)*F,ee=Math.min(V,g-1)*z;J+=N[$+Y*D+Q*O]*E[Q*_+Z*M+ee]}W[V*P+(Y*I+Z)]+=J}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(k),n.makeTensorInfo(y,B.dtype,B.values)}var VF={kernelName:Xl,backendName:"cpu",kernelFunc:UF};var jF={kernelName:Fd,backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,i=e.backend,o=e.attrs,s=a.a,u=a.b,c=a.bias,l=a.preluActivationWeights,f=o.transposeA,h=o.transposeB,d=o.activation,p=o.leakyreluAlpha,v=[];t=UF({inputs:{a:s,b:u},attrs:{transposeA:f,transposeB:h},backend:i}),c&&(n=zF({inputs:{a:t,b:c},backend:i}),v.push(t),t=n),d&&(r=CF(i,t,d,l,p),v.push(t),t=r);for(var m=0,g=v;m<g.length;m++){var y=g[m];i.disposeIntermediateTensorInfo(y)}return t}};function GF(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var HF={kernelName:Rl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;nF(t,"abs");var r=new Float32Array(Kc(t.shape));return r=GF(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},KF=iF(Fl,(function(e){return Math.acos(e)})),qF={kernelName:Fl,backendName:"cpu",kernelFunc:KF},XF=iF(Dl,(function(e){return Math.acosh(e)})),YF={kernelName:Dl,backendName:"cpu",kernelFunc:XF};var ZF={kernelName:Ll,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;nF(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),i=gm(r[0].shape,r[0].dtype),o=i.values,s=0;s<r.length;s++)for(var u=a[s],c=0;c<o.length;c++)o[c]+=u[c];return n.makeTensorInfo(i.shape,i.dtype,i.values)}};function JF(e,t,n,r,a){for(var i=t.length,o=Kc(t),s=fl(t),u=fl(a),c=tl(n,Kc(a)),l=0;l<o;++l){for(var f=bl(l,i,s),h=new Array(f.length),d=0;d<h.length;d++)h[d]=f[r[d]];c[yl(h,i,u)]=e[l]}return c}function QF(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.perm;nF(a,"transpose");for(var o=a.shape.length,s=new Array(o),u=0;u<s.length;u++)s[u]=a.shape[i[u]];var c=JF(r.data.get(a.dataId).values,a.shape,a.dtype,i,s);return{dataId:r.write(c,s,a.dtype),shape:s,dtype:a.dtype}}var $F={kernelName:Id,backendName:"cpu",kernelFunc:QF};var eD={kernelName:_l,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;nF(a,"all");var s=$c(i,a.shape),u=s,c=Ay(u,a.shape.length),l=a;null!=c&&(l=QF({inputs:{x:a},backend:n,attrs:{perm:c}}),u=Fy(u.length,a.shape.length)),Ty("all",u,l.shape.length);for(var f=Ke(Ny(l.shape,u),2),h=f[0],d=Kc(f[1]),p=vl(Kc(h),l.dtype),v=n.data.get(l.dataId).values,m=0;m<p.length;++m){for(var g=m*d,y=v[g],b=0;b<d;++b){var x=v[g+b];y=y&&x}p[m]=y}null!=c&&n.disposeIntermediateTensorInfo(l);var k=n.makeTensorInfo(h,l.dtype,p);if(o){var w=BF({inputs:{x:k},backend:n,attrs:{shape:Ey(h,s)}});return n.disposeIntermediateTensorInfo(k),w}return k}};var tD={kernelName:Ml,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;nF(a,"any");var s=$c(i,a.shape),u=s,c=Ay(u,a.shape.length),l=a;null!=c&&(l=QF({inputs:{x:a},backend:n,attrs:{perm:c}}),u=Fy(u.length,a.shape.length)),Ty("any",u,l.shape.length);for(var f=Ke(Ny(l.shape,u),2),h=f[0],d=Kc(f[1]),p=vl(Kc(h),l.dtype),v=n.data.get(l.dataId).values,m=0;m<p.length;++m){for(var g=m*d,y=v[g],b=0;b<d;++b){var x=v[g+b];y=y||x}p[m]=y}null!=c&&n.disposeIntermediateTensorInfo(l);var k=n.makeTensorInfo(h,l.dtype,p);if(o){var w=BF({inputs:{x:k},backend:n,attrs:{shape:Ey(h,s)}});return n.disposeIntermediateTensorInfo(k),w}return k}};var nD={kernelName:zl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;nF(a,"argMax");var o=$c(i,a.shape),s=Ay(o,a.shape.length),u=a,c=[];null!=s&&(u=QF({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),o=Fy(o.length,u.shape.length)),Ty("argMax",o=[o[0]],u.shape.length);for(var l=Ke(Ny(u.shape,o),2),f=l[0],h=l[1],d=vl(Kc(f),"int32"),p=Kc(h),v=n.data.get(u.dataId).values,m=0;m<d.length;++m){for(var g=m*p,y=v[g],b=0,x=0;x<p;++x){var k=v[g+x];k>y&&(y=k,b=x)}d[m]=b}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(f,"int32",d)}};var rD={kernelName:Pl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;nF(a,"argMin");var o=$c(i,a.shape),s=Ay(o,a.shape.length),u=a,c=[];null!=s&&(u=QF({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),o=Fy(o.length,u.shape.length)),Ty("argMin",o=[o[0]],u.shape.length);for(var l=Ke(Ny(u.shape,o),2),f=l[0],h=l[1],d=vl(Kc(f),"int32"),p=Kc(h),v=n.data.get(u.dataId).values,m=0;m<d.length;++m){for(var g=m*p,y=v[g],b=0,x=0;x<p;++x){var k=v[g+x];k<y&&(y=k,b=x)}d[m]=b}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(f,"int32",d)}},aD=iF(Bl,(function(e){return Math.asin(e)})),iD={kernelName:Bl,backendName:"cpu",kernelFunc:aD},oD=iF(Wl,(function(e){return Math.asinh(e)})),sD={kernelName:Wl,backendName:"cpu",kernelFunc:oD},uD=iF(Ul,(function(e){return Math.atan(e)})),cD={kernelName:Ul,backendName:"cpu",kernelFunc:uD},lD=dF((function(e,t){return Math.atan2(e,t)})),fD=OF(jl,lD),hD={kernelName:jl,backendName:"cpu",kernelFunc:fD},dD=iF(Vl,(function(e){return Math.atanh(e)})),pD={kernelName:Vl,backendName:"cpu",kernelFunc:dD};function vD(e,t,n,r,a,i){for(var o=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,c=a.dilationWidth,l=a.effectiveFilterHeight,f=a.effectiveFilterWidth,h=a.padInfo.top,d=a.padInfo.left,p="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=gm(a.outShape,n),m=v.values,g=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],b=a.outShape[3],x=0;x<a.batchSize;++x)for(var k=x*g,w=x*r[0],S=0;S<a.inChannels;++S)for(var I=0;I<a.outHeight;++I)for(var C=I*o-h,N=Math.max(0,C),E=Math.min(a.inHeight,l+C),T=k+I*y,A=0;A<a.outWidth;++A){for(var R=A*s-d,F=Math.max(0,R),D=Math.min(a.inWidth,f+R),O=p,L=0,_=0,M=N;M<E;M+=u){for(var z=w+M*r[1],P=F;P<D;P+=c){var B=e[z+P*r[2]+S];"max"===i&&B>O?O=B:"avg"===i&&(L+=B,_++)}if(isNaN(O))break}m[T+A*b+S]="avg"===i?L/_:O}return v}function mD(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=gm(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,c=r.dilationHeight,l=r.dilationWidth,f=r.effectiveFilterHeight,h=r.effectiveFilterWidth,d=r.padInfo.top,p=r.padInfo.left,v=gm(t,n,e),m=0;m<r.batchSize;++m)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.outHeight;++y){for(var b=y*s-d,x=b;x<0;)x+=c;for(var k=Math.min(r.inHeight,f+b),w=0;w<r.outWidth;++w){for(var S=w*u-p,I=S;I<0;)I+=l;for(var C=Math.min(r.inWidth,h+S),N=Number.NEGATIVE_INFINITY,E=-1,T=x;T<k;T+=c)for(var A=T-b,R=I;R<C;R+=l){var F=R-S,D=v.get(m,T,R,g);D>N&&(N=D,E=a?i?((m*r.inHeight+T)*r.inWidth+R)*r.inChannels+g:(T*r.inWidth+R)*r.inChannels+g:A*h+F)}o.set(E,m,y,w,g)}}return o}function gD(e,t,n,r,a,i){for(var o=a.strideDepth,s=a.strideHeight,u=a.strideWidth,c=a.dilationDepth,l=a.dilationHeight,f=a.dilationWidth,h=a.effectiveFilterDepth,d=a.effectiveFilterHeight,p=a.effectiveFilterWidth,v=a.padInfo.front,m=a.padInfo.top,g=a.padInfo.left,y="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=gm(a.outShape,n),x=b.values,k=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],w=a.outShape[2]*a.outShape[3]*a.outShape[4],S=a.outShape[3]*a.outShape[4],I=a.outShape[4],C=0;C<a.batchSize;++C)for(var N=C*k,E=C*r[0],T=0;T<a.inChannels;++T)for(var A=0;A<a.outDepth;++A){for(var R=A*o-v,F=R;F<0;)F+=c;for(var D=Math.min(a.inDepth,h+R),O=N+A*w,L=0;L<a.outHeight;++L){for(var _=L*s-m,M=_;M<0;)M+=l;for(var z=Math.min(a.inHeight,d+_),P=O+L*S,B=0;B<a.outWidth;++B){for(var W=B*u-g,U=W;U<0;)U+=f;for(var V=Math.min(a.inWidth,p+W),j=P+B*I,G=y,H=0,K=0,q=F;q<D;q+=c){for(var X=E+q*r[1],Y=M;Y<z;Y+=l){for(var Z=X+Y*r[2],J=U;J<V;J+=f){var Q=e[Z+J*r[3]+T];if("max"===i&&Q>G?G=Q:"avg"===i&&(H+=Q,K++),isNaN(G))break}if(isNaN(G))break}if(isNaN(G))break}x[j+T]="avg"===i?H/K:G}}}return b}var yD={kernelName:Gl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;nF(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;Vc(Eg(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c,l=vg(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&qc(l.inShape,l.outShape))c=cF({inputs:{x:a},backend:n});else{var f=n.data.get(a.dataId).values,h=fl(a.shape),d=vD(f,a.shape,a.dtype,h,l,"avg");c=n.makeTensorInfo(l.outShape,a.dtype,d.values)}return c}};var bD={kernelName:Kl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;nF(a,"avgPool3d");var l=mg(a.shape,i,o,1,s,u,c),f=gD(n.data.get(a.dataId).values,a.shape,a.dtype,fl(a.shape),l,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}};var xD={kernelName:ql,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;nF([a,i],"avgPool3DGrad");for(var l=mg(i.shape,o,s,1,u,c),f=l.strideDepth,h=l.strideHeight,d=l.strideWidth,p=l.filterDepth,v=l.filterHeight,m=l.filterWidth,g=l.dilationDepth,y=l.dilationHeight,b=l.dilationWidth,x=l.effectiveFilterDepth,k=l.effectiveFilterHeight,w=l.effectiveFilterWidth,S=x-1-l.padInfo.front,I=w-1-l.padInfo.left,C=k-1-l.padInfo.top,N=gm(i.shape,"float32"),E=1/(p*v*m),T=n.bufferSync(a),A=0;A<l.batchSize;++A)for(var R=0;R<l.inChannels;++R)for(var F=0;F<l.inDepth;++F)for(var D=0;D<l.inHeight;++D)for(var O=0;O<l.inWidth;++O){for(var L=F-S,_=D-C,M=O-I,z=0,P=0;P<x;P+=g){var B=(L+P)/f;if(!(B<0||B>=l.outDepth||Math.floor(B)!==B))for(var W=0;W<k;W+=y){var U=(_+W)/h;if(!(U<0||U>=l.outHeight||Math.floor(U)!==U))for(var V=0;V<w;V+=b){var j=(M+V)/d;if(!(j<0||j>=l.outWidth||Math.floor(j)!==j))z+=T.get(A,B,U,j,R)}}}N.set(z*E,A,F,D,O,R)}return n.makeTensorInfo(N.shape,N.dtype,N.values)}};var kD={kernelName:Hl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;nF([a,i],"avgPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=vg(o.shape,s,u,1,c),f=l.strideHeight,h=l.strideWidth,d=l.filterHeight,p=l.filterWidth,v=l.dilationHeight,m=l.dilationWidth,g=l.effectiveFilterHeight,y=l.effectiveFilterWidth,b=y-1-l.padInfo.left,x=g-1-l.padInfo.top,k=gm(o.shape,"float32"),w=1/(d*p),S=n.data.get(a.dataId).values,I=gm(a.shape,"float32",S),C=0;C<l.batchSize;++C)for(var N=0;N<l.inChannels;++N)for(var E=0;E<l.inHeight;++E)for(var T=0;T<l.inWidth;++T){for(var A=E-x,R=T-b,F=0,D=0;D<g;D+=v){var O=(A+D)/f;if(!(O<0||O>=l.outHeight||Math.floor(O)!==O))for(var L=0;L<y;L+=m){var _=(R+L)/h;if(!(_<0||_>=l.outWidth||Math.floor(_)!==_))F+=I.get(C,O,_,N)}}k.set(F*w,C,E,T,N)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};var wD={kernelName:Bf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.scale,o=t.offset,s=t.mean,u=t.variance;Vc(s.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Vc(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Vc(null==i||s.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),nF([a,s,u,i,o],"batchNorm");var c=r.varianceEpsilon;null==c&&(c=.001);for(var l=n.data.get(a.dataId).values,f=n.data.get(s.dataId).values,h=n.data.get(u.dataId).values,d=i?n.data.get(i.dataId).values:new Float32Array([1]),p=o?n.data.get(o.dataId).values:new Float32Array([0]),v=new Float32Array(l.length),m=p.length,g=d.length,y=h.length,b=f.length,x=0,k=0,w=0,S=0,I=0;I<l.length;++I)v[I]=p[x++]+(l[I]-f[k++])*d[w++]/Math.sqrt(h[S++]+c),x>=m&&(x=0),k>=b&&(k=0),w>=g&&(w=0),S>=y&&(S=0);return n.makeTensorInfo(a.shape,a.dtype,v)}};function SD(e,t,n,r,a){var i=Km(r,t,n),o=Kc(n),s=fl(r);if(i){var u=qm(t,s);return"string"===a?e.slice(u,u+o):e.subarray(u,u+o)}for(var c=gm(r,a,"string"===a?Ak(e):e),l=gm(n,a),f=0;f<l.size;++f){var h=l.indexToLoc(f),d=h.map((function(e,n){return e+t[n]}));l.set.apply(l,[c.get.apply(c,Et(d))].concat(Et(h)))}return"string"===a?l.values.map((function(e){return cp(e)})):l.values}function ID(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size;nF(a,"slice");var s=Ke(Xm(a,i,o),2),u=s[0],c=s[1];Gm(a,u,c);var l=SD(n.data.get(a.dataId).values,u,c,a.shape,a.dtype);return n.makeTensorInfo(c,a.dtype,l)}var CD={kernelName:Zh,backendName:"cpu",kernelFunc:ID};var ND={kernelName:Yl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;nF([a],"batchToSpaceND");var s=i.reduce((function(e,t){return e*t})),u=Jx(a.shape,i,s),c=Qx(u.length,i.length),l=$x(a.shape,i,s),f=ek(o,i.length),h=tk(l,o,i.length),d=BF({inputs:{x:a},backend:n,attrs:{shape:u}}),p=QF({inputs:{x:d},backend:n,attrs:{perm:c}}),v=BF({inputs:{x:p},backend:n,attrs:{shape:l}}),m=ID({inputs:{x:v},backend:n,attrs:{begin:f,size:h}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),m}};function ED(e,t,n,r,a){for(var i=Kc(r),o=vl(a,n),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(o[u]+=i>0?t[s]:1)}return o}function TD(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],i=e.shape[1],o=gm([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<i;u++){var c=e.get(s,u);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?o.set(1,s,c):t.size>0?o.set(o.get(s,c)+t.get(s,u),s,c):o.set(o.get(s,c)+1,s,c))}return o}var AD={kernelName:Zl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=ED(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,s)}};var RD={kernelName:Jl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=jm(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},FD=kF((function(e){return Math.ceil(e)})),DD=oF($l,FD),OD={kernelName:$l,backendName:"cpu",kernelFunc:DD},LD=iF(ef,(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),_D={kernelName:ef,backendName:"cpu",kernelFunc:LD},MD={kernelName:nf,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(Kc(t.shape)),a=n.data.get(t.dataId),i=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,s=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,c=0;c<s.length;c++){var l=s[c],f=u[c];r[c]=Math.hypot(l,f)}return n.makeOutput(r,t.shape,"float32")}};function zD(e,t,n,r){var a=nl(n,Kc(t));if(r&&"string"!==n){var i=0;e.forEach((function(e){var t=Kc(e.shape);a.set(e.vals,i),i+=t}))}else{var o=0;e.forEach((function(e){for(var r="string"===n?Ak(e.vals):e.vals,i=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+o,c=0;c<e.shape[1];++c)a[u+c]=r[i++];o+=e.shape[1]}))}return a}function PD(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var BD={kernelName:Kf,backendName:"cpu",kernelFunc:PD};function WD(e){var t=e.inputs,n=e.backend,r=$c(e.attrs.axis,t[0].shape)[0],a=Xx(t.map((function(e){return e.shape})),r);if(0===Kc(a))return n.makeTensorInfo(a,t[0].dtype,[]);var i=t.filter((function(e){return Kc(e.shape)>0}));if(1===i.length)return cF({inputs:{x:i[0]},backend:n});if(qx(i.map((function(e){return e.shape})),r),"complex64"===i[0].dtype){var o=i.map((function(e){return AF({inputs:{input:e},backend:n})})),s=i.map((function(e){return PD({inputs:{input:e},backend:n})})),u=WD({inputs:o,backend:n,attrs:{axis:r}}),c=WD({inputs:s,backend:n,attrs:{axis:r}}),l=NF({inputs:{real:u,imag:c},backend:n});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),l}var f=i.map((function(e){var t=Kc(e.shape.slice(r));return BF({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),h=f.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));a=Xx(f.map((function(e){return e.shape})),1);var d=1===f[0].shape[0],p=zD(h,a,t[0].dtype,d),v=Xx(i.map((function(e){return e.shape})),r),m=n.makeTensorInfo(v,t[0].dtype,p);return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}var UD={kernelName:rf,backendName:"cpu",kernelFunc:WD};function VD(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dilations,l=r.dimRoundingMode;nF([a,i],"conv2d");for(var f=Tg(u),h=gg(a.shape,i.shape,o,c,s,l,!1,f),d=h.filterHeight,p=h.filterWidth,v=h.dilationHeight,m=h.dilationWidth,g=h.padInfo.left,y=h.padInfo.top,b="channelsLast"===h.dataFormat,x=new Tp(h.outShape,a.dtype),k=fl(a.shape),w=fl(i.shape),S=k[0],I=b?k[1]:k[2],C=b?k[2]:1,N=b?1:k[1],E=x.strides[0],T=b?x.strides[1]:x.strides[2],A=b?x.strides[2]:1,R=b?1:x.strides[1],F=n.data.get(a.dataId).values,D=n.data.get(i.dataId).values,O=x.values,L=0;L<h.batchSize;++L)for(var _=L*S,M=L*E,z=0;z<h.outHeight;++z)for(var P=M+z*T,B=z*h.strideHeight-y,W=0;W<d;++W){var U=B+W*v;if(!(U<0||U>=h.inHeight))for(var V=W*w[0],j=_+U*I,G=0;G<h.outWidth;++G)for(var H=P+G*A,K=G*h.strideWidth-g,q=0;q<p;++q){var X=K+q*m;if(!(X<0||X>=h.inWidth))for(var Y=j+X*C,Z=V+q*w[1],J=0;J<h.inChannels;++J){for(var Q=F[Y+J*N],$=0;$<h.outChannels;++$)O[H+$*R]+=Q*D[Z+$];Z+=h.outChannels}}}return n.makeTensorInfo(x.shape,x.dtype,O)}var jD={kernelName:af,backendName:"cpu",kernelFunc:VD};var GD={kernelName:of,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape;nF([a,i],"conv2dBackpropFilter");for(var f=Tg(u),h=gg(a.shape,l,o,1,s,c,!1,f),d=h.strideHeight,p=h.strideWidth,v=h.filterHeight,m=h.filterWidth,g="channelsLast"===h.dataFormat,y=new Tp(h.filterShape,"float32"),b=h.padInfo.left,x=h.padInfo.top,k=n.data.get(a.dataId).values,w=n.data.get(i.dataId).values,S=new Tp(a.shape,a.dtype,k),I=new Tp(i.shape,i.dtype,w),C=0;C<v;++C)for(var N=Math.max(0,Math.ceil((x-C)/d)),E=Math.min(h.outHeight,(h.inHeight+x-C)/d),T=0;T<m;++T)for(var A=Math.max(0,Math.ceil((b-T)/p)),R=Math.min(h.outWidth,(h.inWidth+b-T)/p),F=0;F<h.inChannels;++F)for(var D=0;D<h.outChannels;++D){for(var O=0,L=0;L<h.batchSize;++L)for(var _=N;_<E;++_)for(var M=C+_*d-x,z=A;z<R;++z){var P=T+z*p-b;O+=g?S.get(L,M,P,F)*I.get(L,_,z,D):S.get(L,F,M,P)*I.get(L,D,_,z)}y.set(O,C,T,F,D)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var HD={kernelName:sf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode;nF([a,i],"conv2dBackpropInput");var f=fl(i.shape),h=fl(a.shape),d=Tg(c),p=gg(o,i.shape,s,1,u,l,!1,d),v=new Tp(p.inShape,"float32"),m=v.values,g=n.data.get(a.dataId).values,y=n.data.get(i.dataId).values,b=Ke(f,3),x=b[0],k=b[1],w=b[2],S=p.batchSize,I=p.filterHeight,C=p.filterWidth,N=p.inChannels,E=p.inHeight,T=p.inWidth,A=p.outChannels,R=p.outHeight,F=p.outWidth,D=p.strideHeight,O=p.strideWidth;d=p.dataFormat;for(var L=I-1-p.padInfo.top,_=C-1-p.padInfo.left,M="channelsLast"===d,z=v.strides[0],P=M?v.strides[1]:v.strides[2],B=M?v.strides[2]:1,W=M?1:v.strides[1],U=h[0],V=M?h[1]:h[2],j=M?h[2]:1,G=M?1:h[1],H=0;H<S;++H)for(var K=0;K<N;++K)for(var q=0;q<E;++q)for(var X=q-L,Y=Math.max(0,Math.ceil(X/D)),Z=Math.min(R,(I+X)/D),J=0;J<T;++J){for(var Q=J-_,$=Math.max(0,Math.ceil(Q/O)),ee=Math.min(F,(C+Q)/O),te=0,ne=Y;ne<Z;++ne)for(var re=ne*D-X,ae=$;ae<ee;++ae)for(var ie=U*H+V*ne+j*ae,oe=x*(I-1-re)+k*(C-1-(ae*O-Q))+w*K,se=0;se<A;++se){te+=g[ie+G*se]*y[oe+se]}m[z*H+P*q+B*J+W*K]=te}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};var KD={kernelName:uf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations;nF([a,i],"conv3d");for(var c=yg(a.shape,i.shape,o,u,s),l=c.filterDepth,f=c.filterHeight,h=c.filterWidth,d=c.dilationDepth,p=c.dilationHeight,v=c.dilationWidth,m=c.padInfo,g=m.front,y=m.left,b=m.top,x=new Tp(c.outShape,a.dtype),k=n.data.get(a.dataId).values,w=n.data.get(i.dataId).values,S=x.values,I=fl(a.shape),C=fl(i.shape),N=0;N<c.batchSize;++N)for(var E=N*I[0],T=N*x.strides[0],A=0;A<c.outDepth;++A)for(var R=T+A*x.strides[1],F=A*c.strideDepth-g,D=0;D<l;++D){var O=F+D*d;if(!(O<0||O>=c.inDepth))for(var L=D*C[0],_=E+O*I[1],M=0;M<c.outHeight;++M)for(var z=R+M*x.strides[2],P=M*c.strideHeight-b,B=0;B<f;++B){var W=P+B*p;if(!(W<0||W>=c.inHeight))for(var U=L+B*C[1],V=_+W*I[2],j=0;j<c.outWidth;++j)for(var G=z+j*c.outChannels,H=j*c.strideWidth-y,K=0;K<h;++K){var q=H+K*v;if(!(q<0||q>=c.inWidth))for(var X=U+K*C[2],Y=V+q*c.inChannels,Z=X,J=0;J<c.inChannels;++J){for(var Q=k[Y+J],$=0;$<c.outChannels;++$)S[G+$]+=Q*w[Z+$];Z+=c.outChannels}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var qD={kernelName:cf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape;nF([a,i],"conv3dBackpropFilterV2");for(var c=fl(a.shape),l=fl(i.shape),f=yg(a.shape,u,o,1,s),h=f.strideDepth,d=f.strideHeight,p=f.strideWidth,v=f.filterDepth,m=f.filterHeight,g=f.filterWidth,y=new Tp(f.filterShape,"float32"),b=y.values,x=Ke(y.strides,4),k=x[0],w=x[1],S=x[2],I=x[3],C=n.data.get(i.dataId).values,N=Ke(l,4),E=N[0],T=N[1],A=N[2],R=N[3],F=n.data.get(a.dataId).values,D=Ke(c,4),O=D[0],L=D[1],_=D[2],M=D[3],z=f.padInfo.front,P=f.padInfo.left,B=f.padInfo.top,W=0;W<v;++W)for(var U=Math.max(0,Math.ceil((z-W)/h)),V=Math.min(f.outDepth,(f.inDepth+z-W)/h),j=W*k,G=0;G<m;++G)for(var H=Math.max(0,Math.ceil((B-G)/d)),K=Math.min(f.outHeight,(f.inHeight+B-G)/d),q=G*w+j,X=0;X<g;++X)for(var Y=Math.max(0,Math.ceil((P-X)/p)),Z=Math.min(f.outWidth,(f.inWidth+P-X)/p),J=X*S+q,Q=0;Q<f.inChannels;++Q)for(var $=Q*I+J,ee=0;ee<f.outChannels;++ee){for(var te=0,ne=0;ne<f.batchSize;++ne)for(var re=ne*O,ae=ne*E,ie=U;ie<V;++ie)for(var oe=(W+ie*h-z)*L+re,se=ie*T+ae,ue=H;ue<K;++ue)for(var ce=(G+ue*d-B)*_+oe,le=ue*A+se,fe=Y;fe<Z;++fe){var he=fe*R+le;te+=F[(X+fe*p-P)*M+ce+Q]*C[he+ee]}b[$+ee]=te}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var XD={kernelName:lf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=r.inputShape;nF([a],"conv3dBackpropInputV2");for(var c=fl(a.shape),l=fl(i.shape),f=yg(u,i.shape,s,1,o),h=new Tp(f.inShape,"float32"),d=h.values,p=Ke(h.strides,4),v=p[0],m=p[1],g=p[2],y=p[3],b=n.data.get(a.dataId).values,x=Ke(c,4),k=x[0],w=x[1],S=x[2],I=x[3],C=n.data.get(i.dataId).values,N=Ke(l,4),E=N[0],T=N[1],A=N[2],R=N[3],F=f.batchSize,D=f.filterDepth,O=f.filterHeight,L=f.filterWidth,_=f.inChannels,M=f.inDepth,z=f.inHeight,P=f.inWidth,B=f.outChannels,W=f.outDepth,U=f.outHeight,V=f.outWidth,j=f.strideDepth,G=f.strideHeight,H=f.strideWidth,K=D-1-f.padInfo.front,q=O-1-f.padInfo.top,X=L-1-f.padInfo.left,Y=0;Y<F;++Y)for(var Z=0;Z<_;++Z)for(var J=0;J<M;++J)for(var Q=J-K,$=Math.max(0,Math.ceil(Q/j)),ee=Math.min(W,(D+Q)/j),te=0;te<z;++te)for(var ne=te-q,re=Math.max(0,Math.ceil(ne/G)),ae=Math.min(U,(O+ne)/G),ie=0;ie<P;++ie){for(var oe=ie-X,se=Math.max(0,Math.ceil(oe/H)),ue=Math.min(V,(L+oe)/H),ce=0,le=$;le<ee;++le)for(var fe=le*j-Q,he=re;he<ae;++he)for(var de=he*G-ne,pe=se;pe<ue;++pe)for(var ve=k*Y+w*le+S*he+I*pe,me=E*(D-1-fe)+T*(O-1-de)+A*(L-1-(pe*H-oe))+R*Z,ge=0;ge<B;++ge){ce+=b[ve+ge]*C[me+ge]}d[v*Y+m*J+g*te+y*ie+Z]=ce}return n.makeTensorInfo(h.shape,h.dtype,h.values)}},YD=iF(ff,(function(e){return Math.cos(e)})),ZD={kernelName:ff,backendName:"cpu",kernelFunc:YD},JD=iF(hf,(function(e){return Math.cosh(e)})),QD={kernelName:hf,backendName:"cpu",kernelFunc:JD};var $D={kernelName:vf,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=Ke(a.shape,4),f=l[0],h=l[1],d=l[2],p=l[3],v=i.shape[0],m=Ke(s,2),g=m[0],y=m[1],b=gm([v,g,y,p],"float32"),x=n.data.get(i.dataId).values,k=n.data.get(o.dataId).values,w=n.data.get(a.dataId).values,S=fl(a.shape),I=fl(b.shape),C=0;C<v;C++){var N=4*C,E=x[N],T=x[N+1],A=x[N+2],R=x[N+3],F=k[C];if(!(F>=f))for(var D=g>1?(A-E)*(h-1)/(g-1):0,O=y>1?(R-T)*(d-1)/(y-1):0,L=0;L<g;L++){var _=g>1?E*(h-1)+L*D:.5*(E+A)*(h-1);if(_<0||_>h-1)for(var M=0;M<y;M++)for(var z=0;z<p;z++){var P=z+M*I[2]+L*I[1]+C*I[0];b.values[P]=c}else if("bilinear"===u)for(var B=Math.floor(_),W=Math.ceil(_),U=_-B,V=0;V<y;V++){var j=y>1?T*(d-1)+V*O:.5*(T+R)*(d-1);if(j<0||j>d-1)for(var G=0;G<p;G++){var H=G+V*I[2]+L*I[1]+C*I[0];b.values[H]=c}else for(var K=Math.floor(j),q=Math.ceil(j),X=j-K,Y=0;Y<p;Y++){var Z=Y+K*S[2]+B*S[1]+F*S[0],J=w[Z],Q=w[Z=Y+q*S[2]+B*S[1]+F*S[0]],$=w[Z=Y+K*S[2]+W*S[1]+F*S[0]],ee=J+(Q-J)*X,te=$+(w[Z=Y+q*S[2]+W*S[1]+F*S[0]]-$)*X;Z=Y+V*I[2]+L*I[1]+C*I[0],b.values[Z]=ee+(te-ee)*U}}else for(var ne=0;ne<y;++ne){var re=y>1?T*(d-1)+ne*O:.5*(T+R)*(d-1);if(re<0||re>d-1)for(var ae=0;ae<p;ae++){var ie=ae+ne*I[2]+L*I[1]+C*I[0];b.values[ie]=c}else for(var oe=Math.round(re),se=Math.round(_),ue=0;ue<p;ue++){var ce=ue+oe*S[2]+se*S[1]+F*S[0],le=ue+ne*I[2]+L*I[1]+C*I[0];b.values[le]=w[ce]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};var eO={kernelName:df,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;nF(a,"cumprod");var u=Ay([i],a.shape.length),c=a;null!=u&&(c=QF({inputs:{x:a},backend:n,attrs:{perm:u}}));var l=Fy(1,a.shape.length)[0];if(l!==c.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(l));for(var f=Wp(c.dtype,"int32"),h=pl(Kc(c.shape),f),d=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],v=s?function(e,t){return e+p-t-1}:function(e,t){return e+t},m=0;m<d.length;m+=p)for(var g=0;g<p;g++){var y=v(m,g);if(0===g)h[y]=o?1:d[y];else{var b=v(m,g-1);h[y]=o?d[b]*h[b]:d[y]*h[b]}}var x=n.makeTensorInfo(c.shape,f,h);if(null!=u){var k=QF({inputs:{x:x},backend:n,attrs:{perm:Ry(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),k}return x}};var tO={kernelName:pf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;nF(a,"cumsum");var u=Ay([i],a.shape.length),c=a;null!=u&&(c=QF({inputs:{x:a},backend:n,attrs:{perm:u}}));var l=Fy(1,a.shape.length)[0];if(l!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(l));for(var f=Wp(c.dtype,"int32"),h=vl(Kc(c.shape),f),d=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],v=s?function(e,t){return e+p-t-1}:function(e,t){return e+t},m=0;m<d.length;m+=p)for(var g=0;g<p;g++){var y=v(m,g);if(0===g)h[y]=o?0:d[y];else{var b=v(m,g-1);h[y]=o?d[b]+h[b]:d[y]+h[b]}}var x=n.makeTensorInfo(c.shape,f,h);if(null!=u){var k=QF({inputs:{x:x},backend:n,attrs:{perm:Ry(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),k}return x}};var nO={kernelName:mf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=ED(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}if(2===a.shape.length){var c=TD(n.bufferSync(a),n.bufferSync(i),o,s);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};var rO={kernelName:gf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat;Vc("NHWC"===o,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(o)}));for(var s=a.shape[0],u=a.shape[1],c=a.shape[2],l=a.shape[3],f=u*i,h=c*i,d=l/(i*i),p=n.data.get(a.dataId).values,v=new Float32Array(s*f*h*d),m=0,g=0;g<s;++g)for(var y=0;y<f;++y)for(var b=Math.floor(y/i),x=y%i,k=0;k<h;++k)for(var w=Math.floor(k/i),S=(x*i+k%i)*d,I=0;I<d;++I){var C=I+S+l*(w+c*(b+u*g));v[m++]=p[C]}return n.makeTensorInfo([s,f,h,d],a.dtype,v)}};function aO(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode;nF([a,i],"depthwiseConv2DNative");var l=fl(a.shape),f=fl(i.shape),h=u;null==h&&(h=[1,1]),Vc(Eg(o,h),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(h,"'")}));for(var d=gg(a.shape,i.shape,o,h,s,c,!0),p=d.filterHeight,v=d.filterWidth,m=d.dilationHeight,g=d.dilationWidth,y=d.padInfo,b=y.left,x=y.top,k=d.outChannels/d.inChannels,w=new Tp(d.outShape,a.dtype),S=n.data.get(a.dataId).values,I=n.data.get(i.dataId).values,C=w.values,N=0;N<d.batchSize;++N)for(var E=N*l[0],T=N*w.strides[0],A=0;A<d.outHeight;++A)for(var R=T+A*w.strides[1],F=A*d.strideHeight-x,D=0;D<p;++D){var O=F+D*m;if(!(O<0||O>=d.inHeight))for(var L=D*f[0],_=E+O*l[1],M=0;M<d.outWidth;++M)for(var z=R+M*w.strides[2],P=M*d.strideWidth-b,B=0;B<v;++B){var W=P+B*g;if(!(W<0||W>=d.inWidth))for(var U=L+B*f[1],V=_+W*d.inChannels,j=z,G=U,H=0;H<d.inChannels;++H){for(var K=S[V+H],q=0;q<k;++q)C[j+q]+=K*I[G+q];j+=k,G+=k}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}var iO={kernelName:yf,backendName:"cpu",kernelFunc:aO};var oO={kernelName:bf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape;nF([a,i],"depthwiseConv2dNativeBackpropFilter");for(var f=gg(a.shape,l,o,s,u,c,!0),h=f.strideHeight,d=f.strideWidth,p=f.filterHeight,v=f.filterWidth,m=new Tp(f.filterShape,"float32"),g=f.padInfo.left,y=f.padInfo.top,b=f.outChannels/f.inChannels,x=n.data.get(a.dataId).values,k=new Tp(a.shape,a.dtype,x),w=n.data.get(i.dataId).values,S=new Tp(i.shape,i.dtype,w),I=0;I<p;++I)for(var C=Math.max(0,Math.ceil((y-I)/h)),N=Math.min(f.outHeight,(f.inHeight+y-I)/h),E=0;E<v;++E)for(var T=Math.max(0,Math.ceil((g-E)/d)),A=Math.min(f.outWidth,(f.inWidth+g-E)/d),R=0;R<f.outChannels;++R){for(var F=Math.trunc(R/b),D=R%b,O=0,L=0;L<f.batchSize;++L)for(var _=C;_<N;++_)for(var M=I+_*h-y,z=T;z<A;++z){var P=E+z*d-g;O+=k.get(L,M,P,F)*S.get(L,_,z,R)}m.set(O,I,E,F,D)}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};var sO={kernelName:xf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.inputShape;nF([a,i],"depthwiseConv2DNativeBackpropInput");for(var f=fl(a.shape),h=fl(i.shape),d=gg(l,i.shape,o,s,u,c,!0),p=new Tp(d.inShape,"float32"),v=p.values,m=Ke(p.strides,3),g=m[0],y=m[1],b=m[2],x=n.data.get(a.dataId).values,k=Ke(f,3),w=k[0],S=k[1],I=k[2],C=n.data.get(i.dataId).values,N=Ke(h,3),E=N[0],T=N[1],A=N[2],R=d.batchSize,F=d.filterHeight,D=d.filterWidth,O=d.inChannels,L=d.inHeight,_=d.inWidth,M=d.outChannels,z=d.outHeight,P=d.outWidth,B=d.strideHeight,W=d.strideWidth,U=F-1-d.padInfo.top,V=D-1-d.padInfo.left,j=M/O,G=0;G<R;++G)for(var H=0;H<O;++H)for(var K=0;K<L;++K)for(var q=K-U,X=Math.max(0,Math.ceil(q/B)),Y=Math.min(z,(F+q)/B),Z=0;Z<_;++Z){for(var J=Z-V,Q=Math.max(0,Math.ceil(J/W)),$=Math.min(P,(D+J)/W),ee=0,te=X;te<Y;++te)for(var ne=te*B-q,re=Q;re<$;++re)for(var ae=w*G+S*te+I*re,ie=E*(F-1-ne)+T*(D-1-(re*W-J))+A*H,oe=0;oe<j;++oe){ee+=x[ae+(H*j+oe)]*C[ie+oe]}v[g*G+y*K+b*Z+H]=ee}return n.makeTensorInfo(p.shape,p.dtype,p.values)}};var uO={kernelName:kf,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,a=Kc(r.shape),i=n.data.get(r.dataId).values,o=gm([a,a],r.dtype),s=o.values,u=0;u<i.length;u++)s[u*a+u]=i[u];var c=[].concat(Et(r.shape),Et(r.shape));return n.makeTensorInfo(c,o.dtype,o.values)}},cO={kernelName:wf,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=n,l=c.data.get(a.dataId).values,f=a.shape.length,h=c.data.get(i.dataId).values,d=i.shape.length,p=pg(a.shape,i.shape,o,s,"NHWC",u),v=p.batchSize,m=p.inHeight,g=p.inWidth,y=p.inChannels,b=p.outHeight,x=p.outWidth,k=p.padInfo,w=p.strideHeight,S=p.strideWidth,I=p.filterHeight,C=p.filterWidth,N=p.dilationHeight,E=p.dilationWidth,T=p.outShape,A=Kc(T),R=T.length,F=nl(a.dtype,A),D=0;D<v;++D)for(var O=0;O<b;++O)for(var L=O*w-k.top,_=0;_<x;++_)for(var M=_*S-k.left,z=0;z<y;++z){for(var P=Number.MIN_SAFE_INTEGER,B=0;B<I;++B){var W=L+B*N;if(W>=0&&W<m)for(var U=0;U<C;++U){var V=M+U*E;if(V>=0&&V<g){var j=yl([D,W,V,z],f,fl(a.shape)),G=yl([B,U,z],d,fl(i.shape)),H=l[j]+h[G];H>P&&(P=H)}}}F[yl([D,O,_,z],R,fl(T))]=P}return{dataId:c.write(sp(F,a.dtype),T,a.dtype),shape:T,dtype:a.dtype}}},lO={kernelName:If,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,f=dl(a.shape,l.data.get(a.dataId).values),h=dl(i.shape,l.data.get(i.dataId).values),d=pg(a.shape,i.shape,s,u,"NHWC",c),p=d.batchSize,v=d.inHeight,m=d.inWidth,g=d.inChannels,y=d.outHeight,b=d.outWidth,x=d.padInfo,k=d.strideHeight,w=d.strideWidth,S=d.filterHeight,I=d.filterWidth,C=d.dilationHeight,N=d.dilationWidth,E=d.outShape;Vc(o.rank===E.length,(function(){return"Error in ".concat(If,", dy ")+"must have the same rank as output ".concat(E.length,", but got ")+"".concat(o.rank)}));for(var T=dl(E,l.data.get(o.dataId).values),A=ml(i.shape,i.dtype),R=0;R<p;++R)for(var F=0;F<y;++F)for(var D=F*k-x.top,O=0;O<b;++O)for(var L=O*w-x.left,_=0;_<g;++_){for(var M=Number.MIN_SAFE_INTEGER,z=0,P=0,B=0;B<S;++B){var W=D+B*C;if(W>=0&&W<v)for(var U=0;U<I;++U){var V=L+U*N;if(V>=0&&V<m){var j=f[R][W][V][_]+h[B][U][_];j>M&&(M=j,z=B,P=U)}}}A[z][P][_]+=T[R][F][O][_]}return{dataId:l.write(sp(A,a.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},fO={kernelName:Sf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,f=dl(a.shape,l.data.get(a.dataId).values),h=dl(i.shape,l.data.get(i.dataId).values),d=pg(a.shape,i.shape,s,u,"NHWC",c),p=d.batchSize,v=d.inHeight,m=d.inWidth,g=d.inChannels,y=d.outHeight,b=d.outWidth,x=d.padInfo,k=d.strideHeight,w=d.strideWidth,S=d.filterHeight,I=d.filterWidth,C=d.dilationHeight,N=d.dilationWidth,E=d.outShape;Vc(o.rank===E.length,(function(){return"Error in ".concat(Sf,", dy ")+"must have the same rank as output ".concat(E.length,", but got ")+"".concat(o.rank)}));for(var T=dl(E,l.data.get(o.dataId).values),A=ml(a.shape,a.dtype),R=0;R<p;++R)for(var F=0;F<y;++F)for(var D=F*k-x.top,O=0;O<b;++O)for(var L=O*w-x.left,_=0;_<g;++_){for(var M=Number.MIN_SAFE_INTEGER,z=D<0?0:D,P=L<0?0:L,B=0;B<S;++B){var W=D+B*C;if(W>=0&&W<v)for(var U=0;U<I;++U){var V=L+U*N;if(V>=0&&V<m){var j=f[R][W][V][_]+h[B][U][_];j>M&&(M=j,z=W,P=V)}}}A[R][z][P][_]+=T[R][F][O][_]}return{dataId:l.write(sp(A,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},hO=dF((function(e,t){return e*t})),dO=LF((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),pO=OF(xh,hO,dO),vO={kernelName:xh,backendName:"cpu",kernelFunc:pO};function mO(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims;nF(i,"sum");var u=(t="bool"===i.dtype?FF({inputs:{x:i},backend:r,attrs:{dtype:"int32"}}):cF({inputs:{x:i},backend:r})).shape.length,c=$c(o,t.shape),l=Ay(c,u),f=c,h=t;null!=l&&(h=QF({inputs:{x:t},backend:r,attrs:{perm:l}}),f=Fy(f.length,u)),Ty("sum",f,h.shape.length);for(var d=Ke(Ny(h.shape,f),2),p=d[0],v=d[1],m=TF(r,p,Wp(h.dtype,"int32")),g=Kc(v),y=r.data.get(m.dataId).values,b=r.data.get(h.dataId).values,x=0;x<y.length;++x){for(var k=x*g,w=0,S=0;S<g;++S)w+=b[k+S];y[x]=w}if(s){var I=m;m=BF({inputs:{x:m},backend:r,attrs:{shape:Ey(m.shape,c)}}),r.disposeIntermediateTensorInfo(I)}return r.disposeIntermediateTensorInfo(t),null!=l&&r.disposeIntermediateTensorInfo(h),m}var gO={kernelName:rd,backendName:"cpu",kernelFunc:mO};var yO={kernelName:Nf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=yk(e.attrs.equation,r.length),i=a.allDims,o=a.summedDims,s=a.idDims;xk(i.length,s,r);for(var u=kk(o,s),c=u.path,l=u.steps,f=l.length,h=null,d=i.length,p=[],v=0;v<f;++v){var m,g=Rc(l[v]);try{for(g.s();!(m=g.n()).done;){var y=m.value,b=bk(d,s[y]),x=b.permutationIndices,k=b.expandDims,w=void 0;wk(x)?w=r[y]:(w=QF({inputs:{x:r[y]},backend:n,attrs:{perm:x}}),p.push(w));for(var S=w.shape.slice(),I=0;I<k.length;++I)S.splice(k[I],0,1);qc(w.shape,S)||(w=BF({inputs:{x:w},backend:n,attrs:{shape:S}}),p.push(w)),null===h?h=w:(h=pO({inputs:{a:w,b:h},backend:n}),p.push(h))}}catch(eq){g.e(eq)}finally{g.f()}v<f-1&&(c[v]>=0&&(h=mO({inputs:{x:h},backend:n,attrs:{axis:c[v]-(i.length-d),keepDims:!1}}),p.push(h)),d--)}for(var C=0,N=p;C<N.length;C++){var E=N[C];E!==h&&n.disposeIntermediateTensorInfo(E)}return h}};var bO={kernelName:Tf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;nF([r,a],"eluGrad");for(var i=new Float32Array(Kc(a.shape)),o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,u=0;u<o.length;++u){var c=o[u];i[u]=c>=1?s[u]:s[u]*(c+1)}return n.makeTensorInfo(a.shape,"float32",i)}},xO=dF((function(e,t){return e===t?1:0})),kO=OF(Rf,xO,null,"bool"),wO={kernelName:Rf,backendName:"cpu",kernelFunc:kO},SO=iF(Af,(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+.3275911*n);return t*(1-((((1.061405429*r-1.453152027)*r+1.421413741)*r-.284496736)*r+.254829592)*r*Math.exp(-n*n))})),IO={kernelName:Af,backendName:"cpu",kernelFunc:SO},CO=kF((function(e){return Math.exp(e)})),NO=oF(Ff,CO,"float32"),EO={kernelName:Ff,backendName:"cpu",kernelFunc:NO};function TO(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,i=r.dim,o=a.shape.length,s=a.shape.slice(),u=i;return i<0&&(Vc(-(o+1)<=i,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+i+1),s.splice(u,0,1),BF({inputs:{x:a},backend:n,attrs:{shape:s}})}var AO={kernelName:Df,backendName:"cpu",kernelFunc:TO},RO=kF((function(e){return Math.expm1(e)})),FO=oF(Of,RO),DO={kernelName:Of,backendName:"cpu",kernelFunc:FO},OO=dF((function(e,t){return e/t})),LO=OF(Cf,OO),_O={kernelName:Cf,backendName:"cpu",kernelFunc:LO},MO=dF((function(e,t){return e-t})),zO=LF((function(e,t,n,r){return{real:e-n,imag:t-r}})),PO=OF(yd,MO,zO),BO={kernelName:yd,backendName:"cpu",kernelFunc:PO};function WO(e,t,n){for(var r=e.shape,a=r[0],i=r[1],o=n.data.get(e.dataId),s=o.complexTensorInfos.real,u=o.complexTensorInfos.imag,c=[a,i],l=Kc(c),f=tl("float32",l),h=tl("float32",l),d=0;d<a;d++){for(var p=ID({inputs:{x:s},backend:n,attrs:{begin:[d,0],size:[1,i]}}),v=ID({inputs:{x:u},backend:n,attrs:{begin:[d,0],size:[1,i]}}),m=NF({inputs:{real:p,imag:v},backend:n}),g=UO(m,t,n),y=hk(g.real,g.imag),b=0;b<i;b++){var x=dk(y,b);f[d*i+b]=x.real,h[d*i+b]=x.imag}n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m)}var k=n.makeTensorInfo(c,"float32",f),w=n.makeTensorInfo(c,"float32",h),S=NF({inputs:{real:k,imag:w},backend:n});return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(w),S}function UO(e,t,n){var r=Kc(e.shape),a=n.data.get(e.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if(0===((g=r)&g-1)){var s=VO(i,o,r,t,n),u=[e.shape[0],e.shape[1]];if(t){var c=n.makeTensorInfo(u,"float32",s.real),l=n.makeTensorInfo(u,"float32",s.imag),f=n.makeTensorInfo([],"float32",op(r,"float32")),h=cF({inputs:{x:f},backend:n}),d=_O.kernelFunc({inputs:{a:c,b:f},backend:n}),p=_O.kernelFunc({inputs:{a:l,b:h},backend:n}),v=n.data.get(d.dataId).values,m=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),{real:v,imag:m}}return s}var g,y=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var i=0,o=0,s=0;s<t;s++){var u=vk(a*s,t,n),c=dk(e,s);i+=c.real*u.real-c.imag*u.imag,o+=c.real*u.imag+c.imag*u.real}n&&(i/=t,o/=t),pk(r,i,o,a)}return r}(hk(i,o),r,t);return function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(y)}function VO(e,t,n,r,a){if(1===n)return{real:e,imag:t};var i=hk(e,t),o=n/2,s=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(i),u=s.real,c=s.imag,l=[u.length],f=a.makeTensorInfo(l,"float32",u),h=a.makeTensorInfo(l,"float32",c),d=NF({inputs:{real:f,imag:h},backend:a}),p=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(i),v=p.real,m=p.imag,g=[v.length],y=a.makeTensorInfo(g,"float32",v),b=a.makeTensorInfo(g,"float32",m),x=NF({inputs:{real:y,imag:b},backend:a}),k=VO(u,c,o,r,a),w=k.real,S=k.imag,I=[w.length],C=a.makeTensorInfo(I,"float32",w),N=a.makeTensorInfo(I,"float32",S),E=NF({inputs:{real:C,imag:N},backend:a}),T=VO(v,m,o,r,a),A=T.real,R=T.imag,F=[A.length],D=a.makeTensorInfo(F,"float32",A),O=a.makeTensorInfo(F,"float32",R),L=NF({inputs:{real:D,imag:O},backend:a}),_=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}(n,r),M=[_.real.length],z=a.makeTensorInfo(M,"float32",_.real),P=a.makeTensorInfo(M,"float32",_.imag),B=NF({inputs:{real:z,imag:P},backend:a}),W=pO({inputs:{a:B,b:L},backend:a}),U=zF({inputs:{a:E,b:W},backend:a}),V=PO({inputs:{a:E,b:W},backend:a}),j=AF({inputs:{input:U},backend:a}),G=AF({inputs:{input:V},backend:a}),H=PD({inputs:{input:U},backend:a}),K=PD({inputs:{input:V},backend:a}),q=WD({inputs:[j,G],backend:a,attrs:{axis:0}}),X=WD({inputs:[H,K],backend:a,attrs:{axis:0}}),Y=a.data.get(q.dataId).values,Z=a.data.get(X.dataId).values;return a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(C),a.disposeIntermediateTensorInfo(N),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(D),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(K),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(X),{real:Y,imag:Z}}var jO={kernelName:Lf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=Kc(r.shape),i=r.shape[r.shape.length-1],o=BF({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=WO(o,!1,n),u=BF({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}};function GO(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype||ul(a),o=nl(i,Kc(r));return function(e,t,n){e.fill(t)}(o,a),t.makeTensorInfo(r,i,o)}var HO={kernelName:_f,backendName:"cpu",kernelFunc:GO};var KO={kernelName:Mf,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,a=n,i=tl(r.dtype,Kc(r.shape)),o=Ke(r.shape,4),s=o[0],u=o[1],c=o[2],l=o[3],f=a.data.get(r.dataId).values,h=0;h<s;h++)for(var d=h*c*u*l,p=0;p<u;p++)for(var v=p*(c*l),m=0;m<c;m++)for(var g=m*l,y=0;y<l;y++){var b=Math.round(c-m-1),x=d+v+g+y,k=f[x];if(b>=0&&b<c)k=f[d+v+b*l+y];i[x]=k}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},qO=kF((function(e){return Math.floor(e)})),XO=oF(zf,qO),YO={kernelName:zf,backendName:"cpu",kernelFunc:XO},ZO=dF((function(e,t){return Math.floor(e/t)})),JO=OF(Pf,ZO,null,"int32"),QO={kernelName:Pf,backendName:"cpu",kernelFunc:JO};var $O={kernelName:Dd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,f=r.dilations,h=r.dimRoundingMode,d=r.activation,p=r.leakyreluAlpha,v=VD({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:f,dimRoundingMode:h}});if(o){var m=v;if("NCHW"===l&&1===o.shape.length&&1!==o.shape[0]){var g=BF({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});v=zF({inputs:{a:v,b:g},backend:n}),n.disposeIntermediateTensorInfo(g)}else v=zF({inputs:{a:v,b:o},backend:n});n.disposeIntermediateTensorInfo(m)}if(d){var y=v;v=CF(n,v,d,s,p),n.disposeIntermediateTensorInfo(y)}return v}};var eL={kernelName:Od,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,f=r.dilations,h=r.dimRoundingMode,d=r.activation,p=r.leakyreluAlpha,v=aO({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:f,dimRoundingMode:h}});if(o){var m=v;v=zF({inputs:{a:v,b:o},backend:n}),n.disposeIntermediateTensorInfo(m)}if(d){var g=v;v=CF(n,v,d,s,p),n.disposeIntermediateTensorInfo(g)}return v}};function tL(e,t,n,r,a,i,o,s,u){for(var c=gm([r,i],n),l=0;l<r;l++){for(var f=[],h=0,d=0;d<a;d++){var p=e[l*a+d];h+=p*o[d],f.push(p)}if(h<0||h>=u/i)throw new Error("Invalid indices: ".concat(f," does not index into ").concat(s));for(var v=0;v<i;v++)c.values[l*i+v]=t.get.apply(t,Et(t.indexToLoc(h*i+v)))}return c}var nL={kernelName:Uf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=Kc(r.shape),o=a.shape,s=o[o.length-1],u=Ke(nk(r,a),4),c=u[0],l=u[1],f=u[2],h=u[3];if(0===l)return n.makeTensorInfo(c,r.dtype,[]);var d=tL(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,l,s,f,h,r.shape,i);return n.makeTensorInfo(c,r.dtype,d.values)}};function rL(e,t,n){for(var r=gm(n,e.dtype),a=0;a<r.size;++a){var i=r.indexToLoc(a).slice(),o=i[0],s=i[2],u=t.locToIndex([o,s]);i[2]=t.values[u];var c=e.locToIndex(i);0<=c&&c<e.values.length&&(r.values[a]=e.values[c])}return r}var aL={kernelName:Wf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims;nF([a,i],"gatherV2");for(var u=$c(o,a.shape)[0],c=n.data.get(i.dataId).values,l=a.shape[u],f=function(e){var t=c[e];Vc(t<=l-1&&t>=0,(function(){return"GatherV2: the index value ".concat(t," is not in [0, ").concat(l-1,"]")}))},h=0;h<c.length;++h)f(h);var d=s;null==s&&(d=0);var p=Kc(i.shape),v=Tk(a,i,u,d),m=BF({inputs:{x:a},backend:n,attrs:{shape:[v.batchSize,v.outerSize,v.dimSize,v.sliceSize]}}),g=BF({inputs:{x:i},backend:n,attrs:{shape:[v.batchSize,p/v.batchSize]}}),y=[v.batchSize,v.outerSize,p/v.batchSize,v.sliceSize],b=n.bufferSync(g),x=rL(n.bufferSync(m),b,y);return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(v.outputShape,x.dtype,x.values)}},iL=dF((function(e,t){return e>t?1:0})),oL=OF(Vf,iL,null,"bool"),sL={kernelName:Vf,backendName:"cpu",kernelFunc:oL},uL=dF((function(e,t){return e>=t?1:0})),cL=OF(jf,uL,null,"bool"),lL={kernelName:jf,backendName:"cpu",kernelFunc:cL};var fL={kernelName:Hf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=Kc(r.shape),i=r.shape[r.shape.length-1],o=BF({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=WO(o,!0,n),u=BF({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}},hL=iF(qf,(function(e){return Number.isFinite(e)?1:0}),"bool"),dL={kernelName:qf,backendName:"cpu",kernelFunc:hL},pL=iF(Xf,(function(e){return Math.abs(e)===1/0?1:0}),"bool"),vL={kernelName:Xf,backendName:"cpu",kernelFunc:pL},mL=iF(Yf,(function(e){return Number.isNaN(e)?1:0}),"bool"),gL={kernelName:Yf,backendName:"cpu",kernelFunc:mL},yL=dF((function(e,t){return e<t?1:0})),bL=OF(Jf,yL,null,"bool"),xL={kernelName:Jf,backendName:"cpu",kernelFunc:bL},kL=dF((function(e,t){return e<=t?1:0})),wL=OF(Qf,kL,null,"bool"),SL={kernelName:Qf,backendName:"cpu",kernelFunc:wL};function IL(e,t,n){var r=(t-e)/(n-1),a=vl(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}var CL={kernelName:$f,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=IL(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},NL=kF((function(e){return Math.log(e)})),EL=oF(eh,NL),TL={kernelName:eh,backendName:"cpu",kernelFunc:EL},AL=iF(th,(function(e){return Math.log1p(e)})),RL={kernelName:th,backendName:"cpu",kernelFunc:AL},FL=dF((function(e,t){return e&&t})),DL=OF(nh,FL,null,"bool"),OL={kernelName:nh,backendName:"cpu",kernelFunc:DL},LL=iF(rh,(function(e){return e?0:1}),"bool"),_L={kernelName:rh,backendName:"cpu",kernelFunc:LL},ML=dF((function(e,t){return e||t})),zL=OF(ah,ML,null,"bool"),PL={kernelName:ah,backendName:"cpu",kernelFunc:zL};var BL={kernelName:ih,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta;nF(a,"LRN");var c=a.shape[3],l=c-1,f=n.data.get(a.dataId).values,h=Kc(a.shape),d=new Float32Array(h);function p(e){for(var t=e%c,n=e-t+Math.max(0,t-i),r=e-t+Math.min(t+i,l),a=0;n<=r;n++){var o=f[n];a+=o*o}return a}for(var v=0;v<h;v++){var m=p(v),g=f[v]*Math.pow(o+s*m,-u);d[v]=g}return n.makeTensorInfo(a.shape,a.dtype,d)}};var WL={kernelName:oh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta;nF(o,"LRNGrad");for(var f=Kc(o.shape),h=o.shape[3],d=n.data.get(o.dataId).values,p=n.data.get(a.dataId).values,v=n.data.get(i.dataId).values,m=new Float32Array(f),g=f,y=0;y<g;y++){for(var b=y%h,x=y-b+Math.max(0,b-s),k=y-b+Math.min(h,b+s+1),w=0,S=x;S<k;S++)w+=Math.pow(p[S],2);w=c*w+u;for(var I=x;I<k;I++){var C=-2*c*l*p[I]*v[y]/w;y===I&&(C+=Math.pow(w,-l)),C*=d[y],m[I]+=C}}return n.makeTensorInfo(o.shape,a.dtype,m)}};function UL(e,t,n,r){for(var a=tl(r,Kc(n)),i=0;i<a.length;++i){for(var o=i*t,s=e[o],u=0;u<t;++u){var c=e[o+u];(Number.isNaN(c)||c>s)&&(s=c)}a[i]=s}return a}function VL(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=n,u=a.shape,c=u.length,l=$c(i,u),f=l,h=Ay(f,c),d=s.data.get(a.dataId).values;if(null!=h){for(var p=new Array(c),v=0;v<p.length;v++)p[v]=u[h[v]];d=JF(d,u,a.dtype,h,p),f=Fy(f.length,c),u=p}nF(a,"max"),Ty("max",f,c);var m=Ke(Ny(u,f),2),g=m[0],y=UL(d,Kc(m[1]),g,a.dtype),b=s.write(y,g,a.dtype),x=g;o&&(x=Ey(g,l));return{dataId:b,shape:x,dtype:a.dtype}}var jL={kernelName:sh,backendName:"cpu",kernelFunc:VL},GL=dF((function(e,t){return Math.max(e,t)})),HL=OF(uh,GL),KL={kernelName:uh,backendName:"cpu",kernelFunc:HL};var qL={kernelName:ch,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;nF(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;Vc(Eg(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c,l=vg(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&qc(l.inShape,l.outShape))c=cF({inputs:{x:a},backend:n});else{var f=n.data.get(a.dataId).values,h=fl(a.shape),d=vD(f,a.shape,a.dtype,h,l,"max");c=n.makeTensorInfo(l.outShape,a.dtype,d.values)}return c}};var XL={kernelName:fh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;nF(a,"maxPool3d");var l=mg(a.shape,i,o,1,s,u,c),f=gD(n.data.get(a.dataId).values,a.shape,a.dtype,fl(a.shape),l,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}};var YL={kernelName:hh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;nF([a,i],"maxPool3DGrad");for(var l=mg(i.shape,o,s,1,u,c),f=function(e,t){for(var n=gm(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,f=t.effectiveFilterWidth,h=t.padInfo.front,d=t.padInfo.top,p=t.padInfo.left,v=0;v<t.batchSize;++v)for(var m=0;m<t.inChannels;++m)for(var g=0;g<t.outDepth;++g){for(var y=g*r-h,b=y;b<0;)b+=o;for(var x=Math.min(t.inDepth,c+y),k=0;k<t.outHeight;++k){for(var w=k*a-d,S=w;S<0;)S+=s;for(var I=Math.min(t.inHeight,l+w),C=0;C<t.outWidth;++C){for(var N=C*i-p,E=N;E<0;)E+=u;for(var T=Math.min(t.inWidth,f+N),A=Number.NEGATIVE_INFINITY,R=-1,F=b;F<x;F+=o)for(var D=F-y,O=S;O<I;O+=s)for(var L=O-w,_=E;_<T;_+=u){var M=_-N,z=e.get(v,F,O,_,m);z>=A&&(A=z,R=D*l*f+L*l+M)}n.set(R,v,g,k,C,m)}}}return n}(n.bufferSync(i),l),h=l.strideDepth,d=l.strideHeight,p=l.strideWidth,v=l.dilationDepth,m=l.dilationHeight,g=l.dilationWidth,y=l.effectiveFilterDepth,b=l.effectiveFilterHeight,x=l.effectiveFilterWidth,k=y-1-l.padInfo.front,w=x-1-l.padInfo.left,S=b-1-l.padInfo.top,I=gm(i.shape,"float32"),C=n.bufferSync(a),N=0;N<l.batchSize;++N)for(var E=0;E<l.inChannels;++E)for(var T=0;T<l.inDepth;++T)for(var A=0;A<l.inHeight;++A)for(var R=0;R<l.inWidth;++R){for(var F=T-k,D=A-S,O=R-w,L=0,_=0;_<y;_+=v){var M=(F+_)/h;if(!(M<0||M>=l.outDepth||Math.floor(M)!==M))for(var z=0;z<b;z+=m){var P=(D+z)/d;if(!(P<0||P>=l.outHeight||Math.floor(P)!==P))for(var B=0;B<x;B+=g){var W=(O+B)/p;if(!(W<0||W>=l.outWidth||Math.floor(W)!==W)){var U=y*b*x-1-f.get(N,M,P,W,E)===_*b*x+z*x+B?1:0;if(0!==U)L+=C.get(N,M,P,W,E)*U}}}}I.set(L,N,T,A,R,E)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}};var ZL={kernelName:lh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;nF([i,t.output],"maxPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,f=vg(o.shape,s,u,1,c,l),h=n.data.get(o.dataId).values,d=gm(f.outShape,o.dtype,mD(h,o.shape,o.dtype,f).values),p=f.strideHeight,v=f.strideWidth,m=f.dilationHeight,g=f.dilationWidth,y=f.effectiveFilterHeight,b=f.effectiveFilterWidth,x=b-1-f.padInfo.left,k=y-1-f.padInfo.top,w=gm(o.shape,"float32"),S=n.data.get(a.dataId).values,I=gm(a.shape,"float32",S),C=0;C<f.batchSize;++C)for(var N=0;N<f.inChannels;++N)for(var E=0;E<f.inHeight;++E)for(var T=0;T<f.inWidth;++T){for(var A=E-k,R=T-x,F=0,D=0;D<y;D+=m){var O=(A+D)/p;if(!(O<0||O>=f.outHeight||Math.floor(O)!==O))for(var L=0;L<b;L+=g){var _=(R+L)/v;if(!(_<0||_>=f.outWidth||Math.floor(_)!==_)){var M=y*b-1-d.get(C,O,_,N)===D*b+L?1:0;if(0!==M)F+=I.get(C,O,_,N)*M}}}w.set(F,C,E,T,N)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};var JL={kernelName:dh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,u=n.includeBatchInIndex,c=r;nF(a,"MaxPoolWithArgmax");var l=c.data.get(a.dataId).values,f=vg(a.shape,i,o,[1,1],s),h=function(e,t,n,r,a){var i=vD(e,0,n,fl(t),a,"max"),o=mD(e,t,n,a,!0,r);return[i.values,o.values]}(l,a.shape,a.dtype,u,f),d=Ke(h,2),p=d[0],v=d[1],m=c.write(p,f.outShape,a.dtype),g=c.write(v,f.outShape,a.dtype);return[{dataId:m,shape:f.outShape,dtype:a.dtype},{dataId:g,shape:f.outShape,dtype:"int32"}]}};var QL={kernelName:ph,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=$c(i,a.shape),u=Kc(Ny(a.shape,s)[1]),c=[],l=n.makeTensorInfo([],"float32",new Float32Array([u]));c.push(l);var f=FF({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});c.push(f);var h=LO({inputs:{a:f,b:l},backend:n});c.push(h);var d=mO({inputs:{x:h},backend:n,attrs:{axis:i,keepDims:o}});return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),d}};var $L={kernelName:vh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;nF(a,"min");var s=$c(i,a.shape),u=s,c=Ay(u,a.shape.length),l=a;null!=c&&(l=QF({inputs:{x:a},backend:n,attrs:{perm:c}}),u=Fy(u.length,a.shape.length)),Ty("min",u,l.shape.length);for(var f=Ke(Ny(l.shape,u),2),h=f[0],d=Kc(f[1]),p=vl(Kc(h),l.dtype),v=n.data.get(l.dataId).values,m=0;m<p.length;++m){for(var g=m*d,y=v[g],b=0;b<d;++b){var x=v[g+b];(Number.isNaN(x)||x<y)&&(y=x)}p[m]=y}null!=c&&n.disposeIntermediateTensorInfo(l);var k=n.makeTensorInfo(h,l.dtype,p);if(o){var w=BF({inputs:{x:k},backend:n,attrs:{shape:Ey(h,s)}});return n.disposeIntermediateTensorInfo(k),w}return k}},e_=dF((function(e,t){return Math.min(e,t)})),t_=OF(mh,e_),n_={kernelName:mh,backendName:"cpu",kernelFunc:t_};var r_={kernelName:gh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode;nF(a,"mirrorPad");for(var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=i.map((function(e){return e[0]})),c=i.map((function(e,t){return e[0]+a.shape[t]})),l="reflect"===o?0:1,f=n.data.get(a.dataId).values,h=a.shape.length,d=fl(a.shape),p=Kc(s),v=s.length,m=fl(s),g=tl(a.dtype,p),y=0;y<p;y++){for(var b=bl(y,v,m),x=0;x<v;x++)b[x]<u[x]?b[x]=2*u[x]-b[x]-l:b[x]>=c[x]&&(b[x]=2*(c[x]-1)-b[x]+l);b=b.map((function(e,t){return e-u[t]}));var k=yl(b,h,d);g[y]=f[k]}return{dataId:n.write(g,s,a.dtype),shape:s,dtype:a.dtype}}},a_=dF((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),i_=OF(yh,a_),o_={kernelName:yh,backendName:"cpu",kernelFunc:i_},s_=n(8598);function u_(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=a.shape.length,s=i;if(-1===s&&(s=o-1),s!==o-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(o," and dim was ").concat(s));var u=$c([s],a.shape),c=VL({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),l=Ey(c.shape,u),f=BF({inputs:{x:c},backend:n,attrs:{shape:l}}),h=PO({inputs:{a:a,b:f},backend:n}),d=NO({inputs:{x:h},backend:n}),p=mO({inputs:{x:d},backend:n,attrs:{axis:u,keepDims:!1}}),v=BF({inputs:{x:p},backend:n,attrs:{shape:l}}),m=LO({inputs:{a:d,b:v},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),m}var c_={kernelName:od,backendName:"cpu",kernelFunc:u_};var l_={kernelName:bh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized;nF(a,"multinomial");for(var u=s?a:u_({inputs:{logits:a},backend:n,attrs:{dim:-1}}),c=u.shape[0],l=u.shape[1],f=n.data.get(u.dataId).values,h=[c,i],d=vl(Kc(h),"int32"),p=0;p<c;++p){var v=p*l,m=new Float32Array(l-1);m[0]=f[v];for(var g=1;g<m.length;++g)m[g]=m[g-1]+f[v+g];for(var y=s_.alea(o.toString()),b=p*i,x=0;x<i;++x){var k=y();d[b+x]=m.length;for(var w=0;w<m.length;w++)if(k<m[w]){d[b+x]=w;break}}}return s||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(h,"int32",d)}};function f_(e,t,n){var r=op(-1,n);return hO([],t,r,e,n)}var h_={kernelName:kh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;nF(r,"neg");var a=Ke(f_(n.data.get(r.dataId).values,r.shape,r.dtype),2),i=a[0],o=a[1];return n.makeTensorInfo(o,r.dtype,i)}},d_=Yb;var p_={kernelName:Sh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold;nF(a,"NonMaxSuppression");var c=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,f=d_(c,l,o,s,u).selectedIndices;return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}},v_=Zb;var m_={kernelName:Ih,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize;nF(a,"NonMaxSuppressionPadded");var l=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,h=v_(l,f,o,s,u,c),d=h.selectedIndices,p=h.validOutputs;return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},g_=Jb;var y_={kernelName:Ch,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma;nF(a,"NonMaxSuppressionWithScore");var l=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,h=g_(l,f,o,s,u,c),d=h.selectedIndices,p=h.selectedScores;return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([p.length],"float32",new Float32Array(p))]}},b_=dF((function(e,t){return e!==t?1:0})),x_=OF(wh,b_,null,"bool"),k_={kernelName:wh,backendName:"cpu",kernelFunc:x_};var w_={kernelName:Eh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue;nF(a,"oneHot");var u=Kc(a.shape),c=new Float32Array(u*i);c.fill(s);for(var l=n.data.get(a.dataId).values,f=0;f<u;++f)l[f]>=0&&l[f]<i&&(c[f*i+l[f]]=o);return n.makeTensorInfo([].concat(Et(a.shape),[i]),"int32",c)}};function S_(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=AF({inputs:{input:r},backend:n}),i=S_({inputs:{x:a},backend:n}),o=PD({inputs:{input:r},backend:n}),s=S_({inputs:{x:o},backend:n}),u=NF({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return GO({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var I_={kernelName:Td,backendName:"cpu",kernelFunc:S_};var C_={kernelName:Nh,backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var i=AF({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=PD({inputs:{input:a},backend:r}),u=S_({inputs:{x:s},backend:r}),c=NF({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return GO({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function N_(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return TO({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){jc(a,e.shape,"All tensors passed to stack must have matching shapes"),Vc(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=WD({inputs:t.map((function(e){var t=TO({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}var E_={kernelName:Th,backendName:"cpu",kernelFunc:N_};var T_={kernelName:Ah,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;nF(a,"pad");var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=i.map((function(e){return e[0]})),c=n.data.get(a.dataId).values,l=Kc(a.shape),f=a.shape.length,h=fl(a.shape),d=Kc(s),p=s.length,v=fl(s),m=tl(a.dtype,d);0!==o&&m.fill(o);for(var g=0;g<l;g++){m[yl(bl(g,f,h).map((function(e,t){return e+u[t]})),p,v)]=c[g]}return{dataId:n.write(m,s,a.dtype),shape:s,dtype:a.dtype}}},A_=dF((function(e,t){return Math.pow(e,t)})),R_=OF(Rh,A_),F_={kernelName:Rh,backendName:"cpu",kernelFunc:R_};function D_(e,t,n,r){for(var a=Ke(Ny(e,r),2),i=a[0],o=a[1],s=Wp(t,"int32"),u=vl(Kc(i),s),c=Kc(o),l=0;l<u.length;++l){for(var f=l*c,h=1,d=0;d<c;++d)h*=n[f+d];u[l]=h}return{outVals:u,outShape:i,outDtype:s}}var O_={kernelName:Dh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;nF(a,"prod");var s=a.shape.length,u=$c(i,a.shape),c=Ay(u,s),l=u,f=a,h=[];null!=c&&(f=QF({inputs:{x:a},backend:n,attrs:{perm:c}}),h.push(f),l=Fy(l.length,s));var d=n.data.get(f.dataId).values,p=D_(f.shape,f.dtype,d,l),v=p.outVals,m=p.outShape,g=p.outDtype,y=m;return o&&(y=Ey(m,u)),h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(y,g,v)}};function L_(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return vl(0,r);var a=vl(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+n;return a}var __={kernelName:Oh,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.dtype,o=L_(r,a,n.step,i);return t.makeTensorInfo([o.length],i,o)}},M_=iF(_h,(function(e){return 1/e})),z_={kernelName:_h,backendName:"cpu",kernelFunc:M_};var P_={kernelName:Wh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;nF(a,"resizeBilinear");for(var u=fl(a.shape),c=Ke(s,2),l=c[0],f=c[1],h=Ke(a.shape,4),d=h[0],p=h[1],v=h[2],m=h[3],g=n.data.get(a.dataId).values,y=new Float32Array(Kc([d,l,f,m])),b=[i&&l>1?p-1:p,i&&f>1?v-1:v],x=[i&&l>1?l-1:l,i&&f>1?f-1:f],k=0,w=b[0]/x[0],S=b[1]/x[1],I=0;I<d;I++)for(var C=0;C<l;C++){var N=void 0;N=o?w*(C+.5)-.5:w*C;for(var E=Math.max(0,Math.floor(N)),T=N-E,A=Math.min(p-1,Math.ceil(N)),R=I*u[0]+E*u[1],F=I*u[0]+A*u[1],D=0;D<f;D++){var O=void 0;O=o?S*(D+.5)-.5:S*D;for(var L=Math.max(0,Math.floor(O)),_=O-L,M=Math.min(v-1,Math.ceil(O)),z=R+L*u[2],P=F+L*u[2],B=R+M*u[2],W=F+M*u[2],U=0;U<m;U++){var V=g[z+U],j=g[P+U],G=V+(g[B+U]-V)*_,H=G+(j+(g[W+U]-j)*_-G)*T;y[k++]=H}}}return n.makeTensorInfo([d,l,f,m],"float32",y)}};var B_={kernelName:Uh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;nF([i,a],"resizeBilinearGrad");for(var s=fl(a.shape),u=Ke(a.shape,4),c=u[0],l=u[1],f=u[2],h=u[3],d=Ke(i.shape,3),p=d[1],v=d[2],m=new Float32Array(c*l*f*h),g=[o&&p>1?l-1:l,o&&v>1?f-1:f],y=[o&&p>1?p-1:p,o&&v>1?v-1:v],b=g[0]/y[0],x=g[1]/y[1],k=n.data.get(i.dataId).values,w=0,S=0;S<c;S++)for(var I=S*s[0],C=0;C<p;C++)for(var N=C*b,E=Math.floor(N),T=Math.min(Math.ceil(N),l-1),A=I+E*s[1],R=I+T*s[1],F=N-E,D=1-F,O=0;O<v;O++)for(var L=O*x,_=Math.floor(L),M=Math.min(Math.ceil(L),f-1),z=L-_,P=1-z,B=A+_*s[2],W=A+M*s[2],U=R+_*s[2],V=R+M*s[2],j=D*P,G=D*z,H=F*P,K=F*z,q=0;q<h;q++){var X=k[w++];m[B+q]+=X*j,m[W+q]+=X*G,m[U+q]+=X*H,m[V+q]+=X*K}return n.makeTensorInfo([c,f,l,h],"float32",m)}};var W_={kernelName:Ph,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;nF(a,"resizeNearestNeighbor");for(var u=fl(a.shape),c=Ke(s,2),l=c[0],f=c[1],h=Ke(a.shape,4),d=h[0],p=h[1],v=h[2],m=h[3],g=n.data.get(a.dataId).values,y=new Float32Array(d*l*f*m),b=[i&&l>1?p-1:p,i&&f>1?v-1:v],x=[i&&l>1?l-1:l,i&&f>1?f-1:f],k=b[0]/x[0],w=b[1]/x[1],S=0,I=0;I<d;I++)for(var C=I*u[0],N=0;N<l;N++){var E=o?k*(N+.5):k*N,T=Math.min(p-1,i?Math.round(E):Math.floor(E));o&&(T=Math.max(0,T));for(var A=C+T*u[1],R=0;R<f;R++){var F=o?w*(R+.5):w*R,D=Math.min(v-1,i?Math.round(F):Math.floor(F));o&&(D=Math.max(0,D));for(var O=A+D*u[2],L=0;L<m;L++){var _=g[O+L];y[S++]=_}}}return n.makeTensorInfo([d,l,f,m],a.dtype,y)}};var U_={kernelName:Bh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;nF([i,a],"resizeNearestNeighborGrad");for(var s=fl(a.shape),u=fl(i.shape),c=Ke(a.shape,4),l=c[0],f=c[1],h=c[2],d=c[3],p=Ke(i.shape,3),v=p[1],m=p[2],g=new Float32Array(l*f*h*d),y=n.data.get(i.dataId).values,b=[o&&v>1?f-1:f,o&&m>1?h-1:h],x=[o&&v>1?v-1:v,o&&m>1?m-1:m],k=b[0]/x[0],w=b[1]/x[1],S=1/k,I=1/w,C=2*Math.ceil(S)+2,N=2*Math.ceil(I)+2,E=0;E<l;E++)for(var T=E*s[0],A=0;A<f;A++)for(var R=T+A*s[1],F=Math.floor(A*S),D=Math.floor(F-C/2),O=0;O<h;O++)for(var L=R+O*s[2],_=Math.floor(O*I),M=Math.floor(_-N/2),z=0;z<d;z++){for(var P=0,B=0;B<C;B++){var W=B+D;if(!(W<0||W>=v)){var U=T+W*u[1],V=W*k;if(A===Math.min(f-1,o?Math.round(V):Math.floor(V)))for(var j=0;j<N;j++){var G=j+M;if(!(G<0||G>=m)){var H=U+G*u[2],K=G*w;O===Math.min(h-1,o?Math.round(K):Math.floor(K))&&(P+=y[H+z])}}}}g[L+z]=P}return n.makeTensorInfo(a.shape,a.dtype,g)}};var V_={kernelName:jh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims;nF(a,"reverse");var o=a.shape.length,s=$c(i,a.shape);if(0===o)return cF({inputs:{x:a},backend:n});for(var u=new Tp(a.shape,a.dtype),c=n.bufferSync(a),l=function(e){var t=u.indexToLoc(e),n=t.slice();s.forEach((function(e){return n[e]=a.shape[e]-1-n[e]})),u.set.apply(u,[c.get.apply(c,Et(n))].concat(Et(t)))},f=0;f<u.size;f++)l(f);return n.makeTensorInfo(u.shape,u.dtype,u.values)}},j_={kernelName:Rd,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,u=r,c=tl(a.dtype,Kc(a.shape)),l=Ke(a.shape,4),f=l[0],h=l[1],d=l[2],p=l[3],v=Ke(Zx(s,h,d),2),m=v[0],g=v[1],y=Math.sin(i),b=Math.cos(i),x=u.data.get(a.dataId).values,k=0;k<f;k++)for(var w=k*d*h*p,S=0;S<h;S++)for(var I=S*(d*p),C=0;C<d;C++)for(var N=C*p,E=0;E<p;E++){var T=[f,S,C,E],A=T[2],R=T[1],F=(A-m)*b-(R-g)*y,D=(A-m)*y+(R-g)*b;F=Math.round(F+m),D=Math.round(D+g);var O=o;if("number"!==typeof o&&(O=3===E?255:o[E]),F>=0&&F<d&&D>=0&&D<h)O=x[w+D*(d*p)+F*p+E];c[w+I+N+E]=O}return{dataId:u.write(c,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},G_=iF(Gh,(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),H_={kernelName:Gh,backendName:"cpu",kernelFunc:G_},K_=kF((function(e){return 1/Math.sqrt(e)})),q_=oF(Hh,K_),X_={kernelName:Hh,backendName:"cpu",kernelFunc:q_};function Y_(e,t,n,r,a,i,o,s,u,c){var l=[r/a,a],f=e.values,h=t.values;if(0===r)return gm(n,t.dtype);var d=gm(l,t.dtype);"string"===typeof u||"number"===typeof u?d.values.fill(u):"boolean"===typeof u&&d.values.fill(+u);for(var p=0;p<i;p++){for(var v=[],m=0,g=0;g<o;g++){var y=f[p*o+g];v.push(y),m+=y*s[g]}if(m<0||m>=r/a)throw new Error("Invalid indices: ".concat(v," does not index into ").concat(n));for(var b=0;b<a;b++)c?d.values[m*a+b]+=h[p*a+b]:d.values[m*a+b]=0===t.rank?h[0]:h[p*a+b]}return d}var Z_={kernelName:Kh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=rk(0,a,o),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,f=s.strides,h=s.outputSize,d=Y_(n.bufferSync(a),n.bufferSync(i),o,h,l,c,u,f,0,!0);return n.makeTensorInfo(o,d.dtype,d.values)}};function J_(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<t?n=a+1:r=a;return r}function Q_(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<=t?n=a+1:r=a;return r}var $_={kernelName:qh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,s=function(e,t,n,r,a,i){for(var o=nl("int32",n*a),s=0;s<n;++s)for(var u=e.slice(s*r,(s+1)*r),c=s*a,l=0;l<a;++l)o[c+l]="left"===i?J_(u,t[l+c]):Q_(u,t[l+c]);return o}(n.data.get(a.dataId).values,n.data.get(i.dataId).values,a.shape[0],a.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",s)}};var eM={kernelName:Xh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e;nF([r,a,i],"select");for(var o=r.shape.length,s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,l=Wp(a.dtype,i.dtype),f=vl(Kc(a.shape),l),h=0,d=0===o||o>1||1===a.shape.length?1:Kc(a.shape.slice(1)),p=0;p<s.length;p++)for(var v=0;v<d;v++)1===s[p]?f[h++]=u[p]:f[h++]=c[p];return n.makeTensorInfo(a.shape,l,f)}},tM=iF(Yh,(function(e){return e>=0?1.0507009873554805*e:1.7580993408473768*(Math.exp(e)-1)})),nM={kernelName:Yh,backendName:"cpu",kernelFunc:tM},rM=iF($h,(function(e){return e<0?-1:e>0?1:0})),aM={kernelName:$h,backendName:"cpu",kernelFunc:rM},iM=iF(Jh,(function(e){return Math.sin(e)})),oM={kernelName:Jh,backendName:"cpu",kernelFunc:iM},sM=iF(Qh,(function(e){return Math.sinh(e)})),uM={kernelName:Qh,backendName:"cpu",kernelFunc:sM},cM=Math.log(1.1920928955078125e-7)+2,lM=iF(td,(function(e){var t=e>-cM,n=e<cM,r=Math.exp(e);return n?r:t?e:Math.log(1+r)})),fM={kernelName:td,backendName:"cpu",kernelFunc:lM};var hM={kernelName:ad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;nF([a],"spaceToBatchND");var s=Kc(i),u=[[0,0]];u.push.apply(u,Et(o));for(var c=1+i.length;c<a.shape.length;++c)u.push([0,0]);var l=T_.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),f=Jx(l.shape,i,s,!1),h=Qx(f.length,i.length,!1),d=$x(l.shape,i,s,!1),p=BF({inputs:{x:l},backend:n,attrs:{shape:f}}),v=QF({inputs:{x:p},backend:n,attrs:{perm:h}}),m=BF({inputs:{x:v},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),m}};function dM(e,t,n,r,a,i,o){var s=t[0],u=i[0],c=new Array(u),l=new Array(s),f=t[1];if(0===u){if(0!==s)throw new Error("Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(s));return[nl(n,0),[0,f],nl(a,0),c,l]}for(var h,d=!0,p=0,v=new Array(u).fill(0),m=0;m<s;++m){var g=e[m*f];if(g<0)throw new Error((h=g,"indices(".concat(m,", 0) is invalid: ").concat(h," < 0")));if(g>=u)throw new Error(Ck(m,g,u));++v[g],d=d&&g>=p,p=g}for(var y=!0,b=0;b<u;++b){var x=0===v[b];c[b]=x,y=y&&!x,v[b]=Math.max(v[b],1),b>0&&(v[b]+=v[b-1])}if(y&&d){for(var k=e,w=r,S=0;S<s;++S)l[S]=S;return[k,[s,f],w,c,l]}for(var I=v[u-1],C=nl(n,I*f),N=nl(a,I),E=new Array(u).fill(0),T=0;T<s;++T){var A=e[T*f],R=E[A],F=(0===A?0:v[A-1])+R;E[A]++;for(var D=0;D<f;++D)C[F*f+D]=e[T*f+D];N[F]=r[T],l[T]=F}for(var O=0;O<u;++O){if(0===E[O]){var L=0===O?0:v[O-1];C[L*f+0]=O;for(var _=1;_<f;++_)C[L*f+_]=0;N[L]=o}}return[C,[I,f],N,c,l]}var pM={kernelName:sd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values[0],f=Ke(dM(s,r.shape,r.dtype,u,a.dtype,c,l),5),h=f[0],d=f[1],p=f[2],v=f[3],m=f[4];return[n.makeTensorInfo(d,r.dtype,h),n.makeTensorInfo([d[0]],a.dtype,p),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};function vM(e,t,n,r,a){for(var i,o,s=Kc(r),u=t[0],c=a.length,l=[],f=1,h=-1,d=0;d<c;++d){var p=a[d];if(-1===p){if(-1!==h)throw new Error((o=d,"only one output dimension may be -1, not both ".concat(h," and ").concat(o)));h=d,l.push(1)}else{if(p<0)throw new Error((i=p,"size ".concat(d," must be non-negative, not ").concat(i)));f*=p,l.push(p)}}if(-1!==h){if(f<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");var v=Math.trunc(s/f);if(f*v!==s)throw new Error(function(e,t){var n=Kc(e),r=Kc(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}(r,l));l[h]=v}if(Kc(l)!==s)throw new Error(function(e,t){var n=Kc(e),r=Kc(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}(r,l));var m=r.length,g=[];if(m>0){g[m-1]=1;for(var y=m-2;y>=0;--y)g[y]=g[y+1]*r[y+1]}var b=[];if(c>0){b[c-1]=1;for(var x=c-2;x>=0;--x)b[x]=b[x+1]*l[x+1]}for(var k=nl(n,u*c),w=0;w<u;++w){for(var S=0,I=0;I<m;++I)S+=e[w*m+I]*g[I];for(var C=0;C<c;++C)k[w*c+C]=Math.trunc(S/b[C]),S%=b[C]}return[k,[u,c],l]}var mM={kernelName:ud,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,u=Array.from(n.data.get(i.dataId).values),c=Ke(vM(s,r.shape,r.dtype,o,u),3),l=c[0],f=c[1],h=c[2];return[n.makeTensorInfo(f,r.dtype,l),n.makeTensorInfo([h.length],i.dtype,new Int32Array(h))]}};function gM(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=r.length,u=[t[0],e.length/t[0]],c=u[1],l=s>0?a[s-1]+1:0,f=l;if(f<0)throw new Error("segment ids must be >= 0");var h=t.slice();h[0]=f;var d=h.reduce((function(e,t){return e*t}),1),p=nl(n,d);if(0===s)return f>0&&p.fill(o),[p,h];if(f<=0)throw new Error("segment ids must be >= 0");for(var v=0,m=1,g=0,y=a[v];;){var b=0;if(m<s){if(y===(b=a[m])){++m;continue}if(y>=b)throw new Error("segment ids are not increasing")}if(y<0||y>=f)throw new Error(Nk(y,f));y>g&&p.fill(o,g*c,y*c);for(var x=v;x<m;++x){var k=r[x];if(k<0||k>=u[0])throw new Error(Ek(x,r[x],u[0]));for(var w=0;w<c;w++)p[y*c+w]+=e[k*c+w]}if(i)for(var S=0;S<c;S++)p[y*c+S]/=m-v;if(v=m,g=y+1,y=b,++m>s)break}return g<f&&p.fill(o,g*c,f*c),[p,h]}var yM={kernelName:cd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=Ke(gM(o,r.shape,r.dtype,s,u,!0),2),l=c[0],f=c[1];return n.makeTensorInfo(f,r.dtype,l)}};var bM={kernelName:ld,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=Ke(gM(o,r.shape,r.dtype,s,u),2),l=c[0],f=c[1];return n.makeTensorInfo(f,r.dtype,l)}};var xM={kernelName:fd,backendName:"cpu",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.sparseIndices,o=n.sparseValues,s=n.defaultValue,u=a.outputShape,c=rk(0,i,u),l=c.sliceRank,f=c.numUpdates,h=c.sliceSize,d=c.strides,p=c.outputSize,v=!1,m=r.bufferSync(i);switch(o.dtype){case"bool":t=Y_(m,r.bufferSync(o),u,p,h,f,l,d,Boolean(r.data.get(s.dataId).values[0]),v);break;case"float32":t=Y_(m,r.bufferSync(o),u,p,h,f,l,d,r.data.get(s.dataId).values[0],v);break;case"int32":t=Y_(m,r.bufferSync(o),u,p,h,f,l,d,r.data.get(s.dataId).values[0],v);break;case"string":t=Y_(m,r.bufferSync(o),u,p,h,f,l,d,lp(r.data.get(s.dataId).values[0]),v);break;default:throw new Error("Unsupported type ".concat(o.dtype))}return r.makeTensorInfo(u,t.dtype,t.values)}};var kM={kernelName:id,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=$c(r.axis,a.shape)[0],s=Ik(a,i,o),u=new Array(a.shape.length).fill(0),c=a.shape.slice();return s.map((function(e){var t=Et(c);t[o]=e;var r=ID({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[o]+=e,r}))}},wM=kF((function(e){return Math.sqrt(e)})),SM=iF(nd,(function(e){return Math.sqrt(e)})),IM={kernelName:nd,backendName:"cpu",kernelFunc:SM},CM={kernelName:dd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;nF(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var u=i[s];o[s]=u*u}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},NM=dF((function(e,t){var n=e-t;return n*n})),EM=OF(hd,NM),TM={kernelName:hd,backendName:"cpu",kernelFunc:EM},AM=iF(Ad,(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),RM={kernelName:Ad,backendName:"cpu",kernelFunc:AM};function FM(e,t,n,r){for(var a=gm(e,t.dtype),i=0;i<a.size;i++){for(var o=a.indexToLoc(i),s=new Array(o.length),u=0;u<s.length;u++)s[u]=o[u]*n[u]+r[u];a.set.apply(a,[t.get.apply(t,s)].concat(Et(o)))}return a}var DM={kernelName:pd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.end,s=r.strides,u=r.beginMask,c=r.endMask,l=r.ellipsisMask,f=r.newAxisMask,h=r.shrinkAxisMask;nF(a,"stridedSlice");var d,p=Ym(a.shape,i,o,s,u,c,l,f,h),v=p.finalShapeSparse,m=p.finalShape,g=p.isIdentity,y=p.sliceDim0,b=p.isSimpleSlice,x=p.begin,k=p.end,w=p.strides;if(g)d=BF({inputs:{x:a},backend:n,attrs:{shape:m}});else if(y||b){Vc(a.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(a.shape.length)}));var S=Hm(x,k,w),I=ID({inputs:{x:a},backend:n,attrs:{begin:x,size:S}});d=BF({inputs:{x:I},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(I)}else{var C=FM(v,n.bufferSync(a),w,x);d=n.makeTensorInfo(m,C.dtype,C.values)}return d}},OM=function(){function e(t,n,r,a,i,o){Fc(this,e),this.separator=cp(t),this.nGramWidths=n,this.leftPad=cp(r),this.rightPad=cp(a),this.padWidth=i,this.preserveShort=o}return Oc(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,i){for(var o=this,s=function(s){var u=o.getPadWidth(i),c=Math.max(0,u-s),l=Math.max(0,u-(a-(s+1))),f=i-(c+l),h=t+(c>0?0:s-u),d=0;d+=c*o.leftPad.length;for(var p=0;p<f;++p)d+=e[h+p].length;d+=l*o.rightPad.length,d+=(c+l+f-1)*o.separator.length,n[r+s]=new Uint8Array(d);for(var v=n[r+s],m=0,g=function(e){return e.forEach((function(e){return v[m++]=e}))},y=0;y<c;++y)g(o.leftPad),g(o.separator);for(var b=0;b<f-1;++b)g(e[h+b]),g(o.separator);if(f>0){g(e[h+f-1]);for(var x=0;x<l;++x)g(o.separator),g(o.rightPad)}else{for(var k=0;k<l-1;++k)g(o.rightPad),g(o.separator);g(o.rightPad)}},u=0;u<a;++u)s(u)}},{key:"compute",value:function(e,t){var n=this,r=e.length,a=t.length;if(a>0){var i=t[0];if(0!==i)throw new Error("First split value must be 0, got ".concat(i));for(var o=1;o<a;++o){var s=t[o]>=i;if(!(s=s&&t[o]<=r))throw new Error("Invalid split value ".concat(t[o],", must be in [").concat(i,", ").concat(r,"]"));i=t[o]}if(i!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(i))}var u=a-1,c=nl("int32",a);if(0===r||0===a){for(var l=new Array(r),f=0;f<=u;++f)c[f]=0;return[l,c]}c[0]=0;for(var h=function(e){var r=t[e]-t[e-1],a=0;n.nGramWidths.forEach((function(e){a+=n.getNumNGrams(r,e)})),n.preserveShort&&r>0&&0===a&&(a=1),c[e]=c[e-1]+a},d=1;d<=u;++d)h(d);for(var p=new Array(c[u]),v=function(r){var a=t[r],i=c[r];if(n.nGramWidths.forEach((function(o){var s=t[r+1]-t[r],u=n.getNumNGrams(s,o);n.createNGrams(e,a,p,i,u,o),i+=u})),n.preserveShort&&i===c[r]){var o=t[r+1]-t[r];if(0===o)return"continue";var s=o+2*n.padWidth;n.createNGrams(e,a,p,i,1,s)}},m=0;m<u;++m)v(m);return[p,c]}}]),e}();function LM(e,t,n,r,a,i,o,s){return new OM(n,r,a,i,o,s).compute(e,t)}var _M={kernelName:vd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,u=r.padWidth,c=r.preserveShortSequences,l=t.data,f=t.dataSplits,h=Ke(LM(n.data.get(l.dataId).values,n.data.get(f.dataId).values,a,i,o,s,u,c),2),d=h[0],p=h[1];return[n.makeTensorInfo([d.length],"string",d),n.makeTensorInfo(f.shape,"int32",p)]}};function MM(e,t,n,r){if(e.length)if(0!==t.length)if(1!==t.length){for(var a=0,i=0;i<e.length+1;i++)if(i===e.length||-1!==t.indexOf(e[i])){var o=e.subarray(a,i);n&&0===o.length||r.push(o),a=i+1}}else{for(var s=t[0],u=e.indexOf(s);-1!==u;){var c=e.subarray(0,u);n&&0===c.length||r.push(c),u=(e=e.subarray(u+1)).indexOf(s)}n&&0===e.length||r.push(e)}else for(var l=0;l<e.length;++l)r.push(e.subarray(l,l+1))}function zM(e,t,n){for(var r=e.length,a=[],i=0,o=0,s=new Array(r),u=0;u<r;++u){var c=a.length;MM(e[u],t,n,a);var l=a.length-c;s[u]=l,i+=l,o=Math.max(o,l)}for(var f=nl("int32",2*i),h=new Array(i),d=[r,o],p=0,v=0;v<r;++v)for(var m=0;m<s[v];++m)f[2*p]=v,f[2*p+1]=m,h[p]=a[p],++p;return[f,h,d]}var PM={kernelName:md,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=Ke(zM(n.data.get(a.dataId).values,n.data.get(i.dataId).values[0],r),3),s=o[0],u=o[1],c=o[2],l=u.length;return[n.makeTensorInfo([l,2],"int32",s),n.makeTensorInfo([l],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(c))]}};function BM(e,t){for(var n=nl("int32",e.length),r=0;r<e.length;++r)n[r]=ip(e[r]).modulo(t).getLowBitsUnsigned();return n}var WM={kernelName:gd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=BM(n.data.get(a.dataId).values,r);return n.makeTensorInfo(a.shape,"int32",i)}},UM=iF(bd,(function(e){return Math.tan(e)})),VM={kernelName:bd,backendName:"cpu",kernelFunc:UM},jM=iF(xd,(function(e){return Math.tanh(e)}));function GM(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=gm(n,e.dtype),i=0;i<a.values.length;++i){for(var o=a.indexToLoc(i),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=o[u]%e.shape[u];var c=e.locToIndex(s);a.values[i]=e.values[c]}return a}var HM={kernelName:kd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;nF(a,"tile");var o=GM(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}},KM=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function qM(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;r>n;){if(r-n>600){var a=r-n+1,i=t-n+1,o=Math.log(a),s=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*s*(a-s)/a)*Math.sign(i-a/2),c=Math.max(n,Math.floor(t-i*s/a+u)),l=Math.min(r,Math.floor(t+(a-i)*s/a+u));qM(e,t,c,l)}var f=e[t],h=n,d=r;for(Wc(e,n,t),KM(e[r],f)>0&&Wc(e,n,r);h<d;){for(Wc(e,h,d),h++,d--;KM(e[h],f)<0;)h+=1;for(;KM(e[d],f)>0;)d-=1}0===KM(e[n],f)?Wc(e,n,d):Wc(e,d+=1,r),d<=t&&(n=d+1),t<=d&&(r=d-1)}}function XM(e,t,n,r,a){for(var i=t[t.length-1],o=e.length/i,s=i,u=tl(n,o*r),c=tl("int32",o*r),l=function(t){var n=t*s,i=e.subarray(n,n+s),o=new Array(i.length);i.forEach((function(e,t){return o[t]={value:e,index:t}})),r<o.length&&(qM(o,r),o=o.slice(0,r)),a&&o.sort(KM);for(var l=t*r,f=u.subarray(l,l+r),h=c.subarray(l,l+r),d=0;d<r;d++)f[d]=o[d].value,h[d]=o[d].index},f=0;f<o;f++)l(f);var h=t.slice();return h[h.length-1]=r,[gm(h,n,u),gm(h,"int32",c)]}var YM={kernelName:wd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted;nF(a,"topk");var s=Ke(XM(n.data.get(a.dataId).values,a.shape,a.dtype,i,o),2),u=s[0],c=s[1];return[n.makeTensorInfo(u.shape,u.dtype,u.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}};var ZM={kernelName:Sd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=t.transforms,o=n.interpolation,s=n.fillMode,u=n.fillValue,c=n.outputShape,l=Ke(a.shape,4),f=l[0],h=l[1],d=l[2],p=l[3],v=Ke(null!=c?c:[h,d],2),m=v[0],g=v[1],y=[f,m,g,p],b=fl(a.shape),x=b[0],k=b[1],w=b[2],S=tl(a.dtype,Kc(y));S.fill(u);for(var I=r.data.get(a.dataId).values,C=r.data.get(i.dataId).values,N=0;N<f;++N){for(var E=1===i.shape[0]?C:C.subarray(8*N,8*N+8),T=0;T<m;++T)for(var A=0;A<g;++A)for(var R=0;R<p;++R){var F=void 0,D=E[6]*A+E[7]*T+1;if(0!==D){var O=(E[0]*A+E[1]*T+E[2])/D,L=(E[3]*A+E[4]*T+E[5])/D,_=JM(O,d,s),M=JM(L,h,s);switch(o){case"nearest":F=$M(I,h,d,x,k,w,N,M,_,R,u);break;case"bilinear":F=ez(I,h,d,x,k,w,N,M,_,R,u);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(o))}S[N*x+T*k+A*w+R]=F}}return r.makeTensorInfo(y,a.dtype,S)}return{dataId:r.write(S,y,a.dtype),shape:a.shape,dtype:a.dtype}}};function JM(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var a=2*t;(n-=a*Math.trunc(n/a))>=t&&(n=a-n-1)}return Pc(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var a=t-1;n-=t*Math.trunc(n/a)}return Pc(0,n,t-1)}(e,t);case"nearest":return function(e,t){return Pc(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function QM(e,t,n,r,a,i,o,s,u,c,l){return 0<=s&&s<t&&0<=u&&u<n?e[o*r+s*a+u*i+c]:l}function $M(e,t,n,r,a,i,o,s,u,c,l){return QM(e,t,n,r,a,i,o,Math.round(s),Math.round(u),c,l)}function ez(e,t,n,r,a,i,o,s,u,c,l){var f=Math.floor(s),h=Math.floor(u),d=f+1,p=h+1;return(d-s)*((p-u)*QM(e,t,n,r,a,i,o,f,h,c,l)+(u-h)*QM(e,t,n,r,a,i,o,f,p,c,l))+(s-f)*((p-u)*QM(e,t,n,r,a,i,o,d,h,c,l)+(u-h)*QM(e,t,n,r,a,i,o,d,p,c,l))}function tz(e,t,n,r){for(var a=$c(t,n)[0],i=[1,n[0],1],o=0;o<a;o++)i[0]*=n[o];i[1]=n[a];for(var s=a+1;s<n.length;s++)i[2]*=n[s];for(var u={},c=new Int32Array(n[a]),l=new Tp(i,r,e),f=[],h=1===i[0]&&1===i[2],d=0;d<n[a];d++){var p=void 0;if(h)p=e[d].toString();else{for(var v=[],m=0;m<i[0];m++)for(var g=0;g<i[2];g++)v.push(l.get(m,d,g));p=v.join(",")}if(void 0!==u[p])c[d]=u[p];else{var y=Object.keys(u).length;u[p]=y,c[d]=y,f.push(d)}}var b=i.slice();b[1]=Object.keys(u).length;var x=new Tp(b,r);f.forEach((function(e,t){for(var n=0;n<i[0];n++)for(var r=0;r<i[2];r++)x.set(l.get(n,e,r),n,t,r)}));var k=n.slice();return k[a]=b[1],{outputValues:x.values,outputShape:k,indices:c}}var nz={kernelName:Cd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;nF(i,"unique");var o=tz(r.data.get(i.dataId).values,a,i.shape,i.dtype),s=o.outputValues,u=o.outputShape,c=o.indices;return[r.makeTensorInfo(u,i.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}};var rz={kernelName:Nd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape.length,s=a.shape[i],u=new Array(o-1),c=0,l=0;l<o;l++)l!==i&&(u[c++]=a.shape[l]);var f=new Array(o).fill(0),h=a.shape.slice();h[i]=1;for(var d=new Array(s),p=0;p<d.length;p++){f[i]=p;var v=ID({inputs:{x:a},backend:n,attrs:{begin:f,size:h}});d[p]=BF({inputs:{x:v},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(v)}return d}};for(var az={kernelName:Ed,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments;nF(a,"unsortedSegmentSum");for(var s=[],u=[],c=a.shape.length-i.shape.length,l=i,f=0;f<c;++f){var h=TO({inputs:{input:l},backend:n,attrs:{dim:f+1}});l=h,u.push(h)}for(var d=0;d<o;++d){var p=op(d,"int32"),v=n.makeTensorInfo([],"int32",p),m=kO({inputs:{a:v,b:l},backend:n}),g=FF({inputs:{x:m},backend:n,attrs:{dtype:"float32"}}),y=pO({inputs:{a:g,b:a},backend:n}),b=mO({inputs:{x:y},backend:n,attrs:{axis:0,keepDims:!1}});s.push(b),u.push(v),u.push(m),u.push(g),u.push(y),u.push(b)}var x=N_({inputs:s,backend:n,attrs:{axis:0}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}},iz=0,oz=[jF,HF,qF,YF,PF,ZF,eD,tD,nD,rD,iD,sD,cD,hD,pD,yD,bD,xD,kD,VF,wD,ND,AD,RD,DF,OD,_D,EF,MD,UD,jD,GD,HD,KD,qD,XD,ZD,QD,$D,eO,tO,nO,rO,iO,oO,sO,uO,cO,lO,fO,yO,uF,bO,wO,IO,EO,AO,DO,jO,HO,KO,YO,QO,$O,eL,nL,aL,sL,lL,lF,fL,BD,dL,vL,gL,hF,xL,SL,CL,TL,RL,OL,_L,PL,BL,WL,jL,KL,qL,XL,YL,ZL,JL,QL,$L,n_,r_,o_,l_,vO,h_,p_,m_,y_,k_,w_,C_,E_,T_,F_,mF,O_,__,RF,_O,z_,yF,xF,WF,P_,B_,W_,U_,V_,j_,H_,X_,Z_,$_,eM,nM,IF,aM,oM,uM,CD,c_,fM,hM,pM,mM,yM,bM,xM,kM,IM,CM,TM,RM,DM,_M,PM,WM,BO,gO,VM,{kernelName:xd,backendName:"cpu",kernelFunc:jM},HM,YM,ZM,$F,nz,rz,az,I_];iz<oz.length;iz++){Wd(oz[iz])}var sz,uz,cz,lz={},fz={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function hz(e,t){if(!(e in lz)||null!=t){var n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=null==t?function(e){if("undefined"!==typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e):t;if(n.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete lz[e]}),!1),1===e)return n.getContext("webgl",fz)||n.getContext("experimental-webgl",fz);return n.getContext("webgl2",fz)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;lz[e]=n}var r=lz[e];return null==r||r.isContextLost()?(delete lz[e],hz(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),lz[e])}function dz(e,t){return[t,e]}function pz(e){var t=Kc(e);return Yc(Math.ceil(t/4))}function vz(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function mz(e,t){var n,r,a,i,o,s,u,c,l,f,h=e;return 2===Cl().getNumber("WEBGL_VERSION")?(n=h.R32F,r=h.R16F,a=h.RGBA16F,i=h.RGBA32F,o=h.RED,u=4,c=1,l=h.HALF_FLOAT,f=h.FLOAT,s=h.RGBA8):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=h.RGBA,o=e.RGBA,u=4,c=4,l=null!=t?t.HALF_FLOAT_OES:null,f=e.FLOAT,s=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:s,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:l,textureTypeFloat:f}}function gz(e,t){var n=t();return Cl().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(sz||(sz={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(uz||(uz={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(cz||(cz={}));function yz(e){return!!(Cl().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function bz(e,t){return Dz(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}var xz,kz,wz=/ERROR: [0-9]+:([0-9]+):/g;function Sz(e,t){var n=wz.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,o=a.map((function(e,t){return Zc((t+1).toString(),i)+e})),s=0,u=0;u<o.length;u++)s=Math.max(o[u].length,s);var c=o.slice(0,r-1),l=o.slice(r-1,r),f=o.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(Zc(l[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join("\n"))}function Iz(e,t){if(gz(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function Cz(e,t,n,r,a,i,o){var s=e.getAttribLocation(t,n);return-1!==s&&(gz(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),gz(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,i,o)})),gz(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function Nz(e,t,n){return Dz(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}function Ez(e,t,n){return e.getUniformLocation(t,n)}function Tz(e,t,n,r){gz(e,(function(){return function(e,t,n){Oz(e,n),gz(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),gz(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}(e,t,r)})),gz(e,(function(){return e.uniform1i(n,r)}))}function Az(e,t,n){gz(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),gz(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function Rz(e,t){gz(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),gz(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function Fz(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function Dz(e,t,n){var r=gz(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function Oz(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function Lz(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Kc(e.slice(0,e.length-t))}function _z(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Mz(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[Lz(e)].concat(Et(_z(e)))),t}function zz(e){return e%2===0}function Pz(e,t){if(qc(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(zz(n)&&zz(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&zz(e[0])&&zz(t[0])}function Bz(e,t){return null!=e.getExtension(t)}function Wz(e){try{if(null!=hz(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function Uz(e){if(0===e)return!1;var t=hz(e);if(1!==e){if(Bz(t,"EXT_color_buffer_float"))return Vz(t);var n="EXT_color_buffer_half_float";if(Bz(t,n)){var r=t.getExtension(n);return function(e,t){var n=mz(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),s}(t,r)}return!1}return!!Bz(t,"OES_texture_float")&&(!!Bz(t,"WEBGL_color_buffer_float")&&Vz(t))}function Vz(e){var t=mz(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function jz(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&Vc("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var Gz=Cl();function Hz(){var e,t,n,r,a,i,o,s,u,c;return 2===Cl().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}}function Kz(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=fl(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / ").concat(t),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(i,"; ").concat(o,";")})).join("")}function qz(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=fl(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(i,"; ").concat(o,";")})).join("")}function Xz(e,t){var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}function Yz(e){var t=fl(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}Gz.registerFlag("HAS_WEBGL",(function(){return Gz.getNumber("WEBGL_VERSION")>0})),Gz.registerFlag("WEBGL_VERSION",(function(){return Wz(2)?2:Wz(1)?1:0})),Gz.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),Gz.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===Gz.get("WEBGL_VERSION")})),Gz.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),Gz.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),Gz.registerFlag("WEBGL_PACK",(function(){return Gz.getBool("HAS_WEBGL")})),Gz.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return Gz.getBool("WEBGL_PACK")})),Gz.registerFlag("WEBGL_PACK_CLIP",(function(){return Gz.getBool("WEBGL_PACK")})),Gz.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return Gz.getBool("WEBGL_PACK")})),Gz.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return Gz.getBool("WEBGL_PACK")})),Gz.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return Gz.getBool("WEBGL_PACK")})),Gz.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return Gz.getBool("WEBGL_PACK")})),Gz.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return Gz.getBool("WEBGL_PACK")})),Gz.registerFlag("WEBGL_PACK_REDUCE",(function(){return Gz.getBool("WEBGL_PACK")})),Gz.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return Gz.getBool("WEBGL_PACK")})),Gz.registerFlag("WEBGL_CONV_IM2COL",(function(){return Gz.getBool("WEBGL_PACK")})),Gz.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==xz){var t=hz(e);xz=t.getParameter(t.MAX_TEXTURE_SIZE)}return xz}(Gz.getNumber("WEBGL_VERSION"))})),Gz.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==kz){var t=hz(e);kz=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,kz)}(Gz.getNumber("WEBGL_VERSION"))})),Gz.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=Gz.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=hz(e);return Bz(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:Bz(t,"EXT_disjoint_timer_query")?1:0}(e)})),Gz.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return Gz.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!ev()})),Gz.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=hz(e);if(1===e){if(!Bz(t,"OES_texture_float"))return!1}else if(!Bz(t,"EXT_color_buffer_float"))return!1;return Vz(t)}(Gz.getNumber("WEBGL_VERSION"))})),Gz.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!Gz.getBool("WEBGL_FORCE_F16_TEXTURES")&&Gz.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),Gz.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return Uz(Gz.getNumber("WEBGL_VERSION"))})),Gz.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=Gz.getNumber("WEBGL_VERSION"))&&null!=hz(e).fenceSync;var e})),Gz.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return Gz.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),Gz.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),Gz.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return ev()?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),Gz.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),Gz.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),Gz.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),Gz.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128}));var Zz="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",Jz=Um;function Qz(e,t,n){var r=[];if(e.forEach((function(e){var t=Kc(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(gP(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var a,i,o=r.join("\n"),s=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?eP(e,r):$z(e,r);var i=e.shapeInfo.logicalShape,o=t.logicalShape;i.length<=o.length&&(a+=n?pP(e,t):vP(e,t));return a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),u=t.texShape,c=Hz(),l=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(c),f=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(tP,"\n    ").concat(nP,"\n    ").concat(rP,"\n  ")}(c);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(qc(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),i=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),i=a*Math.ceil(e[e.length-2]/2),o=i,s="",u="b, r, c",c=2;c<e.length-1;c++)o*=e[e.length-c-1],s="\n      int b".concat(c," = index / ").concat(o,";\n      index -= b").concat(c," * ").concat(o,";\n    ")+s,u="b".concat(c,", ")+u;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(u,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(c)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(qc(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){var r=qz(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(r,"\n    return ivec3(r, c, d);\n  }\n")}var a=Kz(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){var r=qz(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}var a=Kz(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=Kz(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=Kz(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(c)),n.packedInputs&&(f+=aP),[f,l,i,o,a,s,n.userCode].join("\n")}function $z(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return oP(e,t);case 1:return sP(e,t);case 2:return uP(e,t);case 3:return cP(e,t);case 4:return lP(e,t);case 5:return fP(e);case 6:return hP(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function eP(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Hz();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=Hz();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");var o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(o[0],", ").concat(o[1],", index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=i[0],s=i[1],u=Hz();if(null!=i&&qc(n,i))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ");var c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],l=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(l,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){var s=[1,2],u=yP(e,n.slice(1)),c=["b","row","col"];return"\n        ".concat(eP(u,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(bP(c,s),");\n        }\n      ")}var l=Hz();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");var f=o[0],h=o[1],d=Math.ceil(n[2]/2),p=d*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(f,", ").concat(h,", ").concat(p,", ").concat(d,", b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Hz();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var i=e.shapeInfo.logicalShape,o=i.length,s=e.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=u[0],l=u[1],f=Math.ceil(i[o-1]/2),h=f*Math.ceil(i[o-2]/2),d="int b, int row, int col",p="b * ".concat(h," + (row / 2) * ").concat(f," + (col / 2)"),v=2;v<o-1;v++)d="int b".concat(v,", ")+d,h*=i[o-v-1],p="b".concat(v," * ").concat(h," + ")+p;return"\n    vec4 ".concat(r,"(").concat(d,") {\n      int index = ").concat(p,";\n      int texR = index / ").concat(l,";\n      int texC = index - texR * ").concat(l,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(l,", ").concat(c,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var tP="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",nP="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",rP="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",aP="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function iP(e){return"offset".concat(e)}function oP(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var a=Ke(e.shapeInfo.texShape,2),i=a[0],o=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=iP(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var u=Ke(e.shapeInfo.texShape,2),c=u[0],l=u[1];return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(c,", ").concat(l,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function sP(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(dP(e),"\n      }\n    ");var a=e.shapeInfo.texShape,i=a[0],o=a[1];if(1===o&&1===i)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=iP(n);return 1===o?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):1===i?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(o,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):t?"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(o,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function uP(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&qc(n,i)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var o=i[0],s=i[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var u=el(n),c=u.newShape,l=u.keptDims,f=c;if(f.length<n.length){var h=yP(e,f);return"\n      ".concat($z(h,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(bP(["row","col"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(dP(e),"\n      }\n    ");var d=i[0],p=i[1],v=iP(r);return 1===p?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(d,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):1===d?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(p,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):t?"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(v,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(v,";\n    vec2 uv = uvFromFlat(").concat(d,", ").concat(p,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}function cP(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],s=el(n),u=s.newShape,c=s.keptDims,l=u;if(l.length<n.length){var f=yP(e,l);return"\n        ".concat($z(f,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(bP(["row","col","depth"],c),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(o,", 1)));\n        ").concat(dP(e),"\n      }\n    ");var h=e.shapeInfo.texShape,d=h[0],p=h[1],v=e.shapeInfo.flatOffset;if(p===i&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(o,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(p,".0, ").concat(d,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(p===o&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(p,".0, ").concat(d,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var m=iP(r);return t?"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    "):"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(m,";\n        vec2 uv = uvFromFlat(").concat(d,", ").concat(p,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}function lP(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,s=n[1]*o,u=el(n),c=u.newShape,l=u.keptDims;if(c.length<n.length){var f=yP(e,c);return"\n      ".concat($z(f,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(bP(["row","col","depth","depth2"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(o,", ").concat(i,", 1)));\n        ").concat(dP(e),"\n      }\n    ");var h=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],v=d[1],m="int stride2 = ".concat(r,"Shape[3];"),g="int stride1 = ".concat(r,"Shape[2] * stride2;"),y="int stride0 = ".concat(r,"Shape[1] * stride1;");if(v===s&&null==h)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(m,"\n        ").concat(g,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(o,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(v===i&&null==h)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var b=iP(r);return t?"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(m,"\n      ").concat(g,"\n      ").concat(y,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(v,", index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}function fP(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,o=t[2]*i,s=t[1]*o,u=el(t),c=u.newShape,l=u.keptDims;if(c.length<t.length){var f=yP(e,c);return"\n      ".concat($z(f),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(bP(["row","col","depth","depth2","depth3"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(o,", ").concat(i,", ").concat(a,")) +\n          depth3;\n        ").concat(dP(e),"\n      }\n    ");var h=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],v=d[1];if(v===s&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(o,", ").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(v===a&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var m=iP(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," + depth * ").concat(i," +\n          depth2 * ").concat(a," + depth3 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(v,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function hP(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=el(t),i=a.newShape,o=a.keptDims;if(i.length<t.length){var s=yP(e,i);return"\n      ".concat($z(s),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(bP(["row","col","depth","depth2","depth3","depth4"],o),");\n      }\n    ")}var u=t[5],c=t[4]*u,l=t[3]*c,f=t[2]*l,h=t[1]*f;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(h,", ").concat(f,", ").concat(l,", ").concat(c,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(u,", 1)));\n        ").concat(dP(e),"\n      }\n    ");var d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,v=p[0],m=p[1];if(m===h&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(f,", ").concat(l,", ").concat(c,", ").concat(u,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(m===u&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=iP(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(h," + col * ").concat(f," + depth * ").concat(l," +\n          depth2 * ").concat(c," + depth3 * ").concat(u," + depth4 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(v,", ").concat(m,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function dP(e){var t=e.name,n=Kc(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function pP(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),i="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=Jz(e.shapeInfo.logicalShape,t.logicalShape),c=mP(s),l=s-o,f=["x","y","z","w","u","v"];n=0===o?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords.".concat(f[e+l]," = 0;")})).join("\n");var h="";h=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(f[t+l])})).join(", ");var d="return outputValue;",p=1===Kc(e.shapeInfo.logicalShape),v=1===Kc(t.logicalShape);if(1!==o||p||v){if(p&&!v)d=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var m=o-2,g=o-1;u.indexOf(m)>-1&&u.indexOf(g)>-1?d="return vec4(outputValue.x);":u.indexOf(m)>-1?d="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(g)>-1&&(d="return vec4(outputValue.xx, outputValue.zz);")}}else d="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(i,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(h,");\n      ").concat(d,"\n    }\n  ")}function vP(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&qc(o,i))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var c,l=mP(u),f=Jz(e.shapeInfo.logicalShape,t.logicalShape),h=u-s,d=["x","y","z","w","u","v"];c=0===s?"":u<2&&f.length>=1?"coords = 0;":f.map((function(e){return"coords.".concat(d[e+h]," = 0;")})).join("\n");var p="";return p=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(d[t+h])})).join(", "),"\n    float ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(c,"\n      return get").concat(r,"(").concat(p,");\n    }\n  ")}function mP(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function gP(e,t,n){var r=el(t),a=r.newShape,i=r.keptDims,o=t.length,s=e&&3===o&&1===t[0],u=s?t.slice(1):a,c=!e&&o>1&&!qc(t,n)&&a.length<o||s;return{useSqueezeShape:c,uniformShape:c?u:t,keptDims:i}}function yP(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function bP(e,t){return t.map((function(t){return e[t]})).join(", ")}function xP(e,t,n,r){var a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=a.map((function(e){return e.shapeInfo})),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=Qz(a,o,t),u=function(e,t){var n=Dz(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(gz(e,(function(){return e.shaderSource(n,t)})),gz(e,(function(){return e.compileShader(n)})),Cl().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw Sz(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,s),c=e.createProgram(u);return Cl().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:u,source:s,webGLProgram:c,inShapeInfos:i,outShapeInfo:o,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:t,fragmentShader:u,source:s,webGLProgram:c,inShapeInfos:i,outShapeInfo:o},kP(e,t,c))}function kP(e,t,n){var r,a,i,o,s={},u={},c={},l=[],f=null;o=e.getUniformLocation(n,"NAN",!1),1===Cl().getNumber("WEBGL_VERSION")&&(f=e.getUniformLocation(n,"INFINITY",!1));for(var h=!1,d=0;d<t.variableNames.length;d++){var p=t.variableNames[d];s[p]=e.getUniformLocation(n,p,h),s["offset".concat(p)]=e.getUniformLocation(n,"offset".concat(p),h),t.enableShapeUniforms&&(u["".concat(p,"Shape")]=e.getUniformLocation(n,"".concat(p,"Shape"),h),c["".concat(p,"TexShape")]=e.getUniformLocation(n,"".concat(p,"TexShape"),h))}return t.enableShapeUniforms&&(r=e.getUniformLocation(n,"outShape",h),i=e.getUniformLocation(n,"outShapeStrides",h),a=e.getUniformLocation(n,"outTexShape",h)),t.customUniforms&&t.customUniforms.forEach((function(t,r){l[r]=e.getUniformLocation(n,t.name,h)})),{uniformLocations:s,customUniformLocations:l,infLoc:f,nanLoc:o,inShapesLocations:u,inTexShapesLocations:c,outShapeLocation:r,outShapeStridesLocation:i,outTexShapeLocation:a}}function wP(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],i=a.shape;if(!qc(r,i))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(i," must match"));if(!e.isUniform||!a.isUniform){var o=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!qc(o,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(o," and ").concat(s," must match"))}}))}function SP(e,t,n,r,a){t.program.enableShapeUniforms||(wP(t.inShapeInfos,n),wP([t.outShapeInfo],[r]));var i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):e.setOutputMatrixTexture(i.texture,o[0],o[1]),e.setProgram(t.webGLProgram),1===Cl().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],i=t.uniformLocations[a],o=t.uniformLocations["offset".concat(a)],s=t.inShapesLocations["".concat(a,"Shape")],u=t.inTexShapesLocations["".concat(a,"TexShape")];if(s){var c=gP(t.program.packedInputs,n.shape,n.texData.texShape).uniformShape;switch(c.length){case 1:e.gl.uniform1iv(s,new Int32Array(c));break;case 2:e.gl.uniform2iv(s,new Int32Array(c));break;case 3:e.gl.uniform3iv(s,new Int32Array(c));break;case 4:e.gl.uniform4iv(s,new Int32Array(c))}}if(u&&e.gl.uniform2i(u,n.texData.texShape[0],n.texData.texShape[1]),null!=i)if(n.isUniform)if(Kc(n.shape)<2)e.gl.uniform1f(i,n.uniformValues[0]);else{var l=n.uniformValues;l instanceof Float32Array||(l=new Float32Array(l)),e.gl.uniform1fv(i,l)}else null!=n.texData.slice&&null!=o&&e.gl.uniform1i(o,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture.texture,i,r)}));var s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var u=fl(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(u));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(u));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(u))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a&&t.program.customUniforms.forEach((function(n,r){var i=t.customUniformLocations[r],o=a[r];if("float"===n.type)e.gl.uniform1fv(i,o);else if("vec2"===n.type)e.gl.uniform2fv(i,o);else if("vec3"===n.type)e.gl.uniform3fv(i,o);else if("vec4"===n.type)e.gl.uniform4fv(i,o);else if("int"===n.type)e.gl.uniform1iv(i,o);else if("ivec2"===n.type)e.gl.uniform2iv(i,o);else if("ivec3"===n.type)e.gl.uniform3iv(i,o);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(i,o)}})),e.executeProgram()}function IP(e,t,n){var r="";t.concat(n).forEach((function(t){var a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var i=t.texData.texShape,o=gP(e.packedInputs,t.shape,i),s=o.useSqueezeShape,u=o.uniformShape,c=o.keptDims,l="",f="",h="";if(1===u.length&&e.packedInputs){var d=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];l="".concat(d[0]>1,"_").concat(d[1]>1)}else if(2!==u.length||e.packedInputs){if(u.length>2&&!e.packedInputs){var p=fl(u);h="".concat(p[0]===i[1],"_").concat(p[p.length-1]===i[1])}}else f="".concat(u[0]>1,"_").concat(u[1]>1);var v=t.shape.length,m=2===u.length&&qc(t.shape,i),g=1===Kc(t.shape),y=Um(t.shape,n.shape),b=!e.packedInputs&&v===n.shape.length&&qc(i,n.texData.texShape),x=e.packedInputs||u.length>2?"":"".concat(i[0]>1,"_").concat(i[1]>1);r+="".concat(v,"_").concat(b,"_").concat(s?c:"","_").concat(u.length,"_").concat(g,"_").concat(y,"_").concat(m,"_").concat(l,"_").concat(f,"_").concat(h,"_").concat(x,"_").concat(a)}else{var k=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(k,"_").concat(a)}}));var a=e.userCode,i=e.constructor.name;return i+="_"+r+"_"+a+"".concat(Cl().getNumber("WEBGL_VERSION"))}function CP(e){return Cl().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var NP=Oc((function e(t){Fc(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=sz.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=Hz();this.outputShape=t,this.enableShapeUniforms=CP(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?qz(["r","c","d"],t):Kz(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),EP=Oc((function e(t){Fc(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=sz.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=Hz();this.outputShape=t,this.enableShapeUniforms=CP(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?qz(["r","c","d"],t):Kz(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),TP=Oc((function e(t){Fc(this,e),this.variableNames=["A"],this.outTexUsage=uz.DOWNLOAD;var n=Hz();this.outputShape=t,this.userCode="\n      ".concat(Zz,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),AP=Oc((function e(t){Fc(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=uz.DOWNLOAD;var n=Hz();this.outputShape=t,this.userCode="\n      ".concat(Zz,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),RP=Oc((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Fc(this,e),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=Hz();this.outputShape=t,this.enableShapeUniforms=CP(this.outputShape.length);var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Yz(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / texShape[1];\n        int c = imod(flatIndex, texShape[1]);\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n        vec4 values = ").concat(r.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(r.output," = vec4(").concat(a,", 0., 0., 0.);\n      }\n    ")})),FP=Oc((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Fc(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=Hz();this.outputShape=t,this.enableShapeUniforms=CP(this.outputShape.length);var a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(var o=0;o<=1;o++)for(var s=0;s<=1;s++){var u=2*o+s;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(s," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(s,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(r.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(u,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(u,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(u,"] = values[2];\n            } else {\n              result[").concat(u,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Yz(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(r.output," = ").concat(i,";\n        }\n    ")}));function DP(e){var t=Hz();return function(e,t){var n=Dz(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(gz(e,(function(){return e.shaderSource(n,t)})),gz(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function OP(e){return function(e,t){var n=Dz(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return gz(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),gz(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function LP(e){return function(e,t){var n=Dz(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return gz(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),gz(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function _P(e,t,n,r,a,i){!function(e,t){var n=Cl().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var a="[".concat(e,"x").concat(t,"]"),i="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+i+".")}}(t,n);var o=function(e){return Dz(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return gz(e,(function(){return e.bindTexture(s,o)})),gz(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),gz(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),gz(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),gz(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),1===Cl().getNumber("WEBGL_VERSION")?gz(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,i,null)})):gz(e,(function(){return e.texStorage2D(s,1,r,t,n)})),gz(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),{texture:o,texShape:[n,t]}}function MP(e){return e.internalFormatFloat}function zP(e){return e.internalFormatHalfFloat}function PP(e){return e.downloadTextureFormat}function BP(e){return e.internalFormatPackedFloat}function WP(e){return e.internalFormatPackedHalfFloat}function UP(e,t,n,r,a,i,o,s){var u=e,c=new Float32Array(function(e,t){var n=Ke(vz(e,t),2);return n[0]*n[1]*4}(i,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}var VP=function(){function e(t){Fc(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=Cl().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(e,t){lz[e]=t}(n,t)):this.gl=hz(n);var r="WEBGL_color_buffer_float",a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===Cl().getNumber("WEBGL_VERSION")){var i="OES_texture_half_float";if(this.textureFloatExtension=bz(this.gl,"OES_texture_float"),Bz(this.gl,i))this.textureHalfFloatExtension=bz(this.gl,i);else if(Cl().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Bz(this.gl,a))this.colorBufferHalfFloatExtension=bz(this.gl,a);else if(Cl().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Bz(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!Bz(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=OP(this.gl),this.indexBuffer=LP(this.gl),this.framebuffer=function(e){return Dz(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=mz(this.gl,this.textureHalfFloatExtension)}return Oc(e,[{key:"debug",get:function(){return Cl().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;gz(t,(function(){return t.finish()})),gz(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),gz(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),gz(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),gz(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),gz(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Ke(dz(t,n),2);return _P(e,a[0],a[1],MP(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Ke(dz(t,n),2);return _P(e,a[0],a[1],zP(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Ke(dz(t,n),2);return _P(e,a[0],a[1],PP(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){gz(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?2===Cl().getNumber("WEBGL_VERSION")?gz(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)})):gz(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):2===Cl().getNumber("WEBGL_VERSION")?gz(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)})):gz(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),gz(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,i){var o,s,u;gz(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(o=new Float32Array(n*r*4),s=e.FLOAT,u=i.internalFormatPackedFloat),o.set(a),2===Cl().getNumber("WEBGL_VERSION")?gz(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,o)})):gz(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,o)})),gz(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Ke(vz(t,n),2);return _P(e,a[0],a[1],WP(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Ke(vz(t,n),2);return _P(e,a[0],a[1],BP(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(Rz(this.gl,this.framebuffer),this.outputTexture=null),gz(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=Ke(dz(t,n),2),i=a[0],o=a[1],s=new Uint8Array(t*n*4);return gz(e,(function(){return e.readPixels(0,0,i,o,r.downloadTextureFormat,e.UNSIGNED_BYTE,s)})),new Float32Array(s.buffer)}(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,i){return UP(this.gl,e,0,0,0,a,i,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();gz(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var i=16*t*n;return gz(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),gz(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),gz(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(Cl().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(i,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=i}else Cl().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,Cl().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return gz(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl;null==this.vertexShader&&(this.vertexShader=DP(n));var r=function(e){return Dz(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(n);return gz(n,(function(){return n.attachShader(r,t.vertexShader)})),gz(n,(function(){return n.attachShader(r,e)})),function(e,t){if(gz(e,(function(){return e.linkProgram(t)})),!Cl().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(n,r),this.debug&&Iz(n,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=function(e,t,n){return gz(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),Cz(e,t,"clipSpacePos",n,3,20,0)&&Cz(e,t,"uv",n,2,20,12)}(n,this.program,this.vertexBuffer)),r}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&gz(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&Iz(this.gl,this.program),gz(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?Nz(this.gl,e,t):Ez(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),gz(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),Tz(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=Ke(vz(t,n),2),a=r[0],i=r[1];this.setOutputMatrixTextureDriver(e,a,i)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&Iz(this.gl,this.program),Fz(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),gz(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),gz(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=bz(this.gl,2===Cl().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===Cl().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==Cl().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=Ue(Xe().mark((function e(t){var n=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jc((function(){return n.disposed||n.isQueryAvailable(t,Cl().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,Cl().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||Jc((function(){return n.pollItems(),0===n.itemsToPoll.length}))}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),Az(this.gl,e,this.framebuffer),this.debug&&Fz(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(Az(this.gl,this.outputTexture,this.framebuffer),this.debug&&Fz(this.gl)):Rz(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;Az(r,e,this.framebuffer),this.debug&&Fz(r),this.outputTexture=e,gz(r,(function(){return r.viewport(0,0,t,n)})),gz(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),gz(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();var jP=_F,GP=ED,HP=TD,KP=FD,qP=zD,XP=xO,YP=CO,ZP=RO,JP=qO,QP=tL,$P=rL,eB=iL,tB=uL,nB=yL,rB=kL,aB=IL,iB=NL,oB=UL,sB=GL,uB=e_,cB=hO,lB=f_,fB=b_,hB=D_,dB=L_,pB=K_,vB=Y_,mB=wF,gB=GF,yB=SD,bB=dM,xB=vM,kB=gM,wB=wM,SB=FM,IB=LM,CB=zM,NB=BM,EB=MO,TB=GM,AB=XM,RB=JF,FB=tz;function DB(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function OB(e,t){return 1===t?[e]:DB(e,t)}var LB=function(){function e(t){if(Fc(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=CP(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=OB("rc",this.rank),r=mP(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(r," rc = getOutputCoords();\n\n          if(").concat(a,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(i,"\n\n            setOutput(vec4(").concat(o,"));\n          }\n        }\n      ")}}return Oc(e,[{key:"getSourceCoordsArr",value:function(e){for(var t=[],n=0;n<=1;n++)for(var r=0;r<=1;r++){for(var a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1"),i=2;i<this.rank;i++)a="".concat(e[e.length-1-i],",")+a;t.push(a)}return t}},{key:"getOutOfBoundsCondition",value:function(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var t="",n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}},{key:"getSetup",value:function(e){if(1===this.rank)return"";var t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}},{key:"getOutput",value:function(e){var t=this.getSourceCoordsArr(e);if(1===this.rank){var n=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(n," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}]),e}(),_B=Oc((function e(t,n){Fc(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=CP(this.outputShape.length);for(var r="",a=0;a<4;a++){var i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+="\n        ".concat(i,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){var n=t?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=e.map((function(e,t){return t})),a=Xz(r,t);return a.map((function(t,r){var i="int ".concat(e[r]," = ").concat(n," / ").concat(a[r]),o=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(a[r]):"index -= ".concat(e[r]," * ").concat(a[r]);return"".concat(i,"; ").concat(o,";")})).join("")}(["r","c","d"],"inputShape"):Kz(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Yz(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")}));var MB=function(){function e(t){Fc(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return Oc(e,[{key:"acquireTexture",value:function(e,t,n){var r=PB(t,n),a=BB(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var i,o=zB(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return r===cz.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===cz.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===cz.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===cz.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===cz.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=PB(n,r),i=BB(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);var o=zB(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=Cl().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;var u=this.usedTextures[i],c=u.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function zB(e,t,n,r,a){var i,o=function(e,t){switch(e){case cz.PACKED_2X2_FLOAT32:return BP(t);case cz.PACKED_2X2_FLOAT16:return WP(t);case cz.UNPACKED_FLOAT32:return MP(t);case cz.UNPACKED_FLOAT16:return zP(t);case cz.PACKED_4X1_UNSIGNED_BYTE:return PP(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var s=Ke(vz(e[0],e[1]),2);i=s[0]*s[1]}else{var u=Ke(dz(e[0],e[1]),2);i=u[0]*u[1]}var c=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,o);return i*c}function PB(e,t){if(e===uz.UPLOAD)return cz.PACKED_2X2_FLOAT32;if(e===uz.RENDER||null==e)return function(e){return Cl().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?cz.PACKED_2X2_FLOAT32:cz.UNPACKED_FLOAT32:e?cz.PACKED_2X2_FLOAT16:cz.UNPACKED_FLOAT16}(t);if(e===uz.DOWNLOAD||e===uz.PIXELS)return cz.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function BB(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var WB=Oc((function e(t,n){Fc(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=CP(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),UB="if (isnan(x)) return x;",VB="return x;",jB="return abs(x);";var GB="return (x >= 0.0) ? x : (exp(x) - 1.0);",HB=UB+"\n  return (x < 0.0) ? 0.0 : x;\n",KB=UB+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",qB="return x;",XB="return 1.0 / (1.0 + exp(-1.0 * x));",YB="return x;",ZB="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",JB="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",QB="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",$B="return 1.0 / (1.0 + exp(-1.0 * x));",eW=Oc((function e(t,n){Fc(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=CP(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),tW=Oc((function e(t){Fc(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=CP(this.outputShape.length);var n=t.length,r=OB("rc",n),a=mP(n),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),o=r.slice(-2),s=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")})),nW=Rk,rW={};var aW=Cl().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var iW=function(e){mp(n,e);var t=wp(n);function n(e){var r,a,i;if(Fc(this,n),(r=t.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!Cl().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=e){if(e instanceof VP)a=e;else{var o=hz(Cl().getNumber("WEBGL_VERSION"),e);a=new VP(o)}r.binaryCache={},r.gpgpuCreatedLocally=!1}else{var s=hz(Cl().getNumber("WEBGL_VERSION"));a=new VP(s),r.binaryCache=((i=Cl().getNumber("WEBGL_VERSION"))in rW||(rW[i]={}),rW[i]),r.gpgpuCreatedLocally=!0}return r.gpgpu=a,r.canvas=r.gpgpu.gl.canvas,r.textureManager=new MB(r.gpgpu),r.numMBBeforeWarning=null==Cl().global.screen?1024:Cl().global.screen.height*Cl().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new Lc(xp(r),eg()),r}return Oc(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"write",value:function(e,t,n){if((Cl().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Cl().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:uz.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if(Cl().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:uz.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,i=t.slice,o=t.shape,s=t.isPacked;if(null!=i){var u;u=s?new eW(o,qB):new WB(o,qB);var c=this.runWebGLProgram(u,[{dataId:e,shape:o,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeIntermediateTensorInfo(c),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var f,h,d=null!=this.activeTimers;(d&&(f=up()),"complex64"===r)?h=hk(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):h=this.getValuesFromTexture(e);return d&&(this.downloadWaitMs+=up()-f),this.convertAndCacheOnCPU(e,h)}},{key:"read",value:function(){var e=Ue(Xe().mark((function e(t){var n,r,a,i,o,s,u,c,l,f,h,d,p,v,m,g,y,b,x,k,w,S,I;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,i=r.shape,o=r.slice,s=r.dtype,u=r.complexTensorInfos,c=r.isPacked,null==o){e.next=11;break}return l=c?new eW(i,qB):new WB(i,qB),f=this.runWebGLProgram(l,[{dataId:t,shape:i,dtype:s}],s),h=this.read(f.dataId),this.disposeIntermediateTensorInfo(f),e.abrupt("return",h);case 11:if(null==a){e.next=13;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 13:if(!Cl().getBool("DEBUG")){e.next=16;break}if(Cl().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==Cl().getNumber("WEBGL_VERSION")){e.next=16;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 16:if(d=null,"complex64"!==s&&Cl().get("WEBGL_BUFFER_SUPPORTED")&&(p=this.decode(t),m=this.texData.get(p.dataId),d=(v=this.gpgpu).createBufferFromTexture.apply(v,[m.texture.texture].concat(Et(pz(i))))),this.pendingRead.set(t,[]),"complex64"===s){e.next=22;break}return e.next=22,this.gpgpu.createAndWaitForFence();case 22:if("complex64"!==s){e.next=31;break}return e.next=25,Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]);case 25:y=e.sent,b=y[0],x=y[1],g=hk(b,x),e.next=32;break;case 31:null==d?g=this.getValuesFromTexture(t):(k=Kc(i),g=this.gpgpu.downloadFloat32MatrixFromBuffer(d,k));case 32:return null!=p&&this.disposeIntermediateTensorInfo(p),null!=d&&gz(w=this.gpgpu.gl,(function(){return w.deleteBuffer(d)})),S=this.convertAndCacheOnCPU(t,g),I=this.pendingRead.get(t),this.pendingRead.delete(t),I.forEach((function(e){return e(S)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&eg().removeDataId(t,this),this.pendingDeletes--),e.abrupt("return",S);case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readToGPU",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(e),r=n.values,a=n.shape,i=n.slice,o=n.dtype,s=n.isPacked,u=n.texture;if("complex64"===o)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){var c;c=s?new eW(a,qB):new WB(a,qB);var l=this.runWebGLProgram(c,[{dataId:e,shape:a,dtype:o}],o),f=this.readToGPU(l,t);return this.disposeIntermediateTensorInfo(l),f}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var h=this.decode(e,t.customTexShape),d=eg().makeTensorFromTensorInfo(h),p=this.texData.get(h.dataId);return Object.assign({tensorRef:d},p.texture)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return lp(e)}));return gm(e.shape,e.dtype,n)}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return gm(e.shape,e.dtype,t)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!yz(n)){if(Cl().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,i=Kc(n);if(Cl().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var o,s=this.decode(e),u=this.texData.get(s.dataId),c=(o=this.gpgpu).downloadMatrixFromPackedTexture.apply(o,[u.texture.texture].concat(Et(pz(n)))).subarray(0,i);return this.disposeIntermediateTensorInfo(s),c}var l=Cl().getBool("WEBGL_PACK")&&!0===a,f=l?Mz(n):n,h=l?new AP(f):new TP(f),d=this.runWebGLProgram(h,[{shape:f,dtype:r,dataId:e}],"float32"),p=this.texData.get(d.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(p.texture.texture,p.texShape[0],p.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(d),v}},{key:"timerAvailable",value:function(){return Cl().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(e){var t=this,n=this.activeTimers,r=[],a=!1;null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();var i=Hc(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),o=Hc(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e}));this.activeTimers=n,a&&(this.programTimersStack=null);var s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return Ue(Xe().mark((function e(){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Cl().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=8;break}return e.next=3,Promise.all(i);case 3:n=e.sent,s.kernelMs=Uc(n),s.getExtraProfileInfo=function(){return n.map((function(e,t){return{name:o[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=9;break;case 8:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 9:return t.uploadWaitMs=0,t.downloadWaitMs=0,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))()}},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return Cl().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:up(),endMs:null}}},{key:"endTimer",value:function(e){return Cl().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=up(),e)}},{key:"getQueryTime",value:function(){var e=Ue(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Cl().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,s=t.slice,u=s&&s.origDataId||e,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:aW;return Cl().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&Kc(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){Ld("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return nW(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new eW(e.shape,t),a=this.compileAndRun(r,[e],n);return eg().makeTensorFromTensorInfo(a)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=gB(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(Cl().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,jB,e.dtype);var n=new WB(e.shape,jB),r=this.compileAndRun(n,[e]);return eg().makeTensorFromTensorInfo(r)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&ol(n[0])){var a=n.map((function(e){return cp(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){return eg().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}},{key:"unpackTensor",value:function(e){var t=new tW(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new LB(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[Lz(e.shape)].concat(Et(_z(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[Lz(t)].concat(Et(_z(t))),i=new _B(a,n),o=[n],s=this.runWebGLProgram(i,[r],e.dtype,o,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}},{key:"decode",value:function(e,t){var n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype;null!=t&&Vc(Kc(a)<=t[0]*t[1]*4,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}));var o,s=Mz(a);o=r?new EP(s):new NP(s);var u=[null!=t?t:pz(s)];return{dtype:i,shape:a,dataId:this.runWebGLProgram(o,[{shape:s,dtype:i,dataId:e}],i,u,!0,t).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,s=this.makeTensorInfo(e.outputShape,n),u=this.texData.get(s.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===sz.DENSE){var c=null!=o?o:pz(e.outputShape);u.texShape=c.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===Kc(s.shape))return u.values=tl(s.dtype,0),s;var l=[],f=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&Kc(t.shape)<=Cl().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(a.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),l.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!Pz(n.shape,t.shape)){var r=t,i=t.shape;t.shape=n.shape,t=a.packedReshape(t,i),l.push(t),n=a.texData.get(t.dataId),r.shape=i}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(s.dataId);var h,d={shape:s.shape,texData:u,isUniform:!1},p=IP(e,f,d),v=this.getAndSaveBinary(p,(function(){return xP(a.gpgpu,e,f,d)})),m=null!=this.activeTimers;m&&(h=this.startTimer()),Cl().get("ENGINE_COMPILE_ONLY")||SP(this.gpgpu,v,f,d,r),l.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),m&&(h=this.endTimer(h),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(h)}));var g=Cl().get("WEBGL_FLUSH_THRESHOLD");if(g>0){var y=up();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!Cl().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===i){var b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;var i=this.runWebGLProgram(e,t,n,r,a);return i}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;if(!this.disposed){if(!Cl().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=ng((function(){if(!Cl().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=Cl().getBool("DEBUG");Cl().set("DEBUG",!1);var n=e.abs(sg(1e-8)).dataSync()[0];if(Cl().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,i=t.texture,o=t.usage,s=t.isPacked;if(null==i){var u,c=null!=this.activeTimers;c&&(u=up());var l=t.texShape;if(null==l&&(l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Cl().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(e=e.map((function(t,n){return n>=e.length-2?Bc(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var r=el(e);e=r.newShape}var a=Kc(e);if(e.length<=1&&a<=n)return[1,a];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var i=Lz(e),o=2,s=2;if(e.length){var u=Ke(_z(e),2);o=u[0],s=u[1]}return Yc(a=i*(o/2)*(s/2)).map((function(e){return 2*e}))}return Yc(a)}(n,s),t.texShape=l),null!=a){var f,h=Mz(n),d=l[1],p=l[0],v=a instanceof Uint8Array||a instanceof Uint8ClampedArray;if(s||!v){var m=Ke(vz(l[0],l[1]),2);d=m[0],p=m[1]}f=s?new FP(h,v):new RP(h,v);var g=v?[p,d]:l,y=this.makeTensorInfo(g,r),b=this.texData.get(y.dataId);b.usage=v?uz.PIXELS:uz.UPLOAD,b.texShape=g,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(y.dataId),d,p,a);var x=[[p,d]],k=this.runWebGLProgram(f,[y],r,x,!0),w=this.texData.get(k.dataId);t.texShape=w.texShape,t.isPacked=w.isPacked,t.usage=w.usage,Cl().get("ENGINE_COMPILE_ONLY")?this.disposeData(k.dataId):(t.texture=w.texture,t.values=null,this.texData.delete(k.dataId)),this.disposeIntermediateTensorInfo(y),c&&(this.uploadWaitMs+=up()-u)}else{var S=this.acquireTexture(l,o,r,s);t.texture=S}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*il(t)}},{key:"checkCompileCompletion",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=Ke(t[e],2)[1];this.checkCompletion_(n)}}},{key:"checkCompileCompletionAsync",value:function(){var e=Ue(Xe().mark((function e(){var t,n,r,a,i,o,s,u,c=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!this.gpgpu.parallelCompilationExtension){e.next=6;break}for(n=0,r=Object.entries(this.binaryCache);n<r.length;n++)a=Ke(r[n],2),i=a[1],t.push(this.checkCompletionAsync_(i));return e.abrupt("return",Promise.all(t));case 6:for(o=function(){var e=Ke(u[s],2)[1],n=new Promise((function(t){try{c.checkCompletion_(e),t(!0)}catch(n){throw n}}));t.push(n)},s=0,u=Object.entries(this.binaryCache);s<u.length;s++)o();return e.abrupt("return",Promise.all(t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkCompletionAsync_",value:function(){var e=Ue(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)){e.next=4;break}return e.abrupt("return",this.checkCompletion_(t));case 4:return e.next=6,Kx();case 6:return e.abrupt("return",this.checkCompletionAsync_(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkCompletion_",value:function(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw Sz(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}},{key:"getUniformLocations",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=Ke(t[e],2)[1],r=kP(this.gpgpu,n.program,n.webGLProgram),a=r.uniformLocations,i=r.customUniformLocations,o=r.infLoc,s=r.nanLoc,u=r.inShapesLocations,c=r.inTexShapesLocations,l=r.outShapeLocation,f=r.outShapeStridesLocation,h=r.outTexShapeLocation;n.uniformLocations=a,n.customUniformLocations=i,n.infLoc=o,n.nanLoc=s,n.inShapesLocations=u,n.inTexShapesLocations=c,n.outShapeLocation=l,n.outShapeStridesLocation=f,n.outTexShapeLocation=h}}}]),n}(_c);iW.nextDataId=0;tv()&&ig("webgl",(function(){return new iW}),2);var oW=Oc((function e(t,n,r){Fc(this,e),this.variableNames=["A","B"],this.outputShape=jm(n,r),this.enableShapeUniforms=CP(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")})),sW=Oc((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Fc(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=jm(n,r);var i=this.outputShape.length;this.enableShapeUniforms=CP(i);var o="";if(a)if(0===i||1===Kc(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var s=mP(i);if(o="\n          ".concat(s," coords = getOutputCoords();\n        "),1===i)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var u=OB("coords",i);this.enableShapeUniforms?o+="\n            bool nextRowOutOfBounds =\n              (".concat(u[i-2]," + 1) >= outShape[").concat(i," - 2];\n            bool nextColOutOfBounds =\n              (").concat(u[i-1]," + 1) >= outShape[").concat(i," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):o+="\n            bool nextRowOutOfBounds =\n              (".concat(u[i-2]," + 1) >= ").concat(this.outputShape[i-2],";\n            bool nextColOutOfBounds =\n              (").concat(u[i-1]," + 1) >= ").concat(this.outputShape[i-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")}));function uW(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var cW={kernelName:Gf,backendName:"webgl",kernelFunc:uW};function lW(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=uW({inputs:{x:r},backend:n}),u=uW({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:u},i}var fW={kernelName:tf,backendName:"webgl",kernelFunc:lW},hW="return (a < 0.) ? b * a : a;",dW="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var pW={kernelName:Zf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha,o=n.makeTensorInfo([],"float32",op(i,"float32")),s=Cl().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new sW(dW,a.shape,o.shape):new oW(hW,a.shape,o.shape),u=n.runWebGLProgram(s,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),u}},vW="return (a < 0.) ? b * a : a;",mW="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var gW={kernelName:Fh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=Cl().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new sW(mW,r.shape,a.shape):new oW(vW,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}};function yW(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var i,o=e.inputs,s=e.backend,u=o.x,c=s,l=a||u.dtype;if(c.shouldExecuteOnCPU([u])&&null!=r){var f=c.texData.get(u.dataId),h=r(f.values,l);return c.makeTensorInfo(u.shape,l,h)}return i=Cl().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new eW(u.shape,n):new WB(u.shape,t),c.runWebGLProgram(i,[u],l)}}function bW(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,i=e.supportsComplex,o=void 0!==i&&i,s=e.cpuKernelImpl,u=e.dtype;return function(e){var r=e.inputs,i=e.backend,c=r.a,l=r.b,f=i;if(o&&"complex64"===c.dtype){var h=f.texData.get(c.dataId),d=f.texData.get(l.dataId),p=[[h.complexTensorInfos.real,d.complexTensorInfos.real],[h.complexTensorInfos.imag,d.complexTensorInfos.imag]].map((function(e){var n=Ke(e,2),r=n[0],a=n[1],i={dataId:r.dataId,dtype:r.dtype,shape:c.shape},o={dataId:a.dataId,dtype:a.dtype,shape:l.shape},s=new oW(t,c.shape,l.shape);return f.runWebGLProgram(s,[i,o],Wp(r.dtype,a.dtype))})),v=Ke(p,2),m=v[0],g=v[1],y=lW({inputs:{real:m,imag:g},backend:f});return f.disposeIntermediateTensorInfo(m),f.disposeIntermediateTensorInfo(g),y}var b,x=u||Wp(c.dtype,l.dtype);if(("string"===c.dtype||"string"===l.dtype||f.shouldExecuteOnCPU([c,l]))&&null!=s){var k=f.texData.get(c.dataId).values,w=f.texData.get(l.dataId).values,S="string"===c.dtype?Ak(k):k,I="string"===c.dtype?Ak(w):w,C=Ke(s(c.shape,l.shape,S,I,x),2),N=C[0],E=C[1],T=f.makeTensorInfo(E,x);return f.texData.get(T.dataId).values=N,T}return b=Cl().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new sW(n,c.shape,l.shape,a):new oW(t,c.shape,l.shape),f.runWebGLProgram(b,[c,l],x)}}function xW(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?YB:VB;if("relu"===e)return t?JB:HB;if("elu"===e)return t?ZB:GB;if("relu6"===e)return t?QB:KB;if("prelu"===e)return t?mW:vW;if("leakyrelu"===e)return t?dW:hW;if("sigmoid"===e)return t?$B:XB;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var kW=Oc((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Fc(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=CP(this.outputShape.length);var l=a?t[1]:t[2],f=Math.ceil(l/2),h=a?"i * 2, rc.y":"rc.y, i * 2",d=i?"rc.z, i * 2":"i * 2, rc.z",p=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],m="",g="";s&&(m=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),g="result = activation(result);");var y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");var b="rc.x",x="rc.x";t[0]<n[0]?b="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(x="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(m,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(f,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(f,"; i++) {\n          int batchA = ").concat(b,";\n          int batchB = ").concat(x,";\n          vec4 a = getMatrixA(batchA, ").concat(h,");\n          vec4 b = getMatrixB(batchB, ").concat(d,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(p[0]," * ").concat(v[0],");\n          result += (").concat(p[1]," * ").concat(v[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(g,"\n\n        setOutput(result);\n      }\n    ")})),wW="return areal * breal - aimag * bimag;",SW="return areal * bimag + aimag * breal;",IW=Oc((function e(t,n,r){Fc(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=jm(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")})),CW="return a * b;";function NW(e){var t,n=e.inputs,r=e.backend,a=n.a,i=n.b,o=Wp(a.dtype,i.dtype);if("complex64"===a.dtype){var s=r.texData.get(a.dataId),u=r.texData.get(i.dataId),c=new IW(wW,a.shape,i.shape),l=new IW(SW,a.shape,i.shape),f=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:a.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:i.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:i.shape}],h=r.runWebGLProgram(c,f,"float32"),d=r.runWebGLProgram(l,f,"float32"),p=lW({inputs:{real:h,imag:d},backend:r});return r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(d),p}if(r.shouldExecuteOnCPU([a,i])){var v=r.texData.get(a.dataId),m=r.texData.get(i.dataId),g=Ke(cB(a.shape,i.shape,v.values,m.values,o),2),y=g[0],b=g[1],x=r.makeTensorInfo(b,o);return r.texData.get(x.dataId).values=y,x}return t=Cl().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new sW(CW,a.shape,i.shape):new oW(CW,a.shape,i.shape),r.runWebGLProgram(t,[a,i],o)}var EW={kernelName:xh,backendName:"webgl",kernelFunc:NW};function TW(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=n,s=Kc(a.shape),u=Qc(i,s),c=Kc(u);Vc(s===c,(function(){return"The new shape (".concat(u,") has ").concat(c," elements and the old ")+"shape (".concat(a.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."}));var l=o.texData.get(a.dataId);return!l.isPacked||Pz(a.shape,u)||null!==l.texture&&Pz(l.shape,u)?(o.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}):function(e,t,n){var r=[Lz(e.shape)].concat(Et(_z(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[Lz(t)].concat(Et(_z(t))),o=new _B(i,r),s=[r],u=n.runWebGLProgram(o,[a],e.dtype,s,!0);return{dataId:u.dataId,shape:t,dtype:u.dtype}}(a,u,o)}var AW={kernelName:zh,backendName:"webgl",kernelFunc:TW},RW=Oc((function e(t,n){Fc(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s=4*Math.floor(r/4),u=r%4,c="sumValue += dot(values, ones);";if(null!=n){var l=1/n;c="sumValue += dot(values * ".concat(Xc(l)?l.toPrecision(2):l,", ones);")}var f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(f,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(c,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),FW=Oc((function e(t,n){Fc(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var c="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?c="sumValue":"prod"===n?c="prodValue":"all"===n?c="allValue":"any"===n&&(c="anyValue");var l=4*Math.floor(r/4),f=r%4,h="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(u,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),d="vec4";"all"===n?(s="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===n&&(s="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");var p="";i%r>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(h,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===f,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(2===f,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(3===f,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(h,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")}));function DW(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=Yx(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),i=e,o=0;o<a.length;o++){var s,u=a[o],c=u.inSize,l=u.windowSize,f=u.outSize,h=void 0;h="mean"===n?0===o?new RW({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:f},c):new RW({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:f}):new FW({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:f},n),s=i,i=r.runWebGLProgram(h,[i],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return i}var OW=Oc((function e(t,n){Fc(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var i=mP(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(i," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")}));var LW=Oc((function e(t,n){Fc(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var i=mP(this.rank),o=DB("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=o[u];var c="vec2(".concat(s.slice(-2).join(),")"),l="++".concat(o[this.rank-1]," < ").concat(r[this.rank-1]),f="getChannel(getA(".concat(s.join(),"), ").concat(c,")");this.userCode="\n    void main() {\n      ".concat(i," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(f,";\n      if(").concat(l,") {\n        result[1] = ").concat(f,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(f,";\n        if(").concat(l,") {\n          result[3] = ").concat(f,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}));function _W(e,t,n){var r=Cl().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new LW(e.shape,t):new OW(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function MW(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,i=e.shape.length,o=$c(a,e.shape),s=o,u=Ay(s,i),c=null!=u,l=e;c&&(l=_W(e,u,r),s=Fy(s.length,i)),Ty("sum",s,i);var f=Ke(Ny(l.shape,s),2),h=f[0],d=f[1],p=h;n&&(p=Ey(h,o));var v=Kc(d),m=TW({inputs:{x:l},attrs:{shape:[Kc(e.shape)/v,v]},backend:r}),g=DW(m,Up(e.dtype),"sum",r),y=TW({inputs:{x:g},attrs:{shape:p},backend:r});return r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(g),c&&r.disposeIntermediateTensorInfo(l),y}(t.x,r.axis,r.keepDims,n)}var zW={kernelName:rd,backendName:"webgl",kernelFunc:MW};function PW(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.perm,s=r,u=i.shape.length,c=new Array(u),l=0;l<c.length;l++)c[l]=i.shape[o[l]];if(s.shouldExecuteOnCPU([i])){var f=s.texData.get(i.dataId).values,h=RB(f,i.shape,i.dtype,o,c);t=s.makeTensorInfo(c,i.dtype),s.texData.get(t.dataId).values=h}else t=_W(i,o,s);return t}var BW={kernelName:Id,backendName:"webgl",kernelFunc:PW};function WW(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,f=void 0===l?0:l,h=e.activation,d=void 0===h?null:h,p=t.shape.length,v=n.shape.length,m=r?t.shape[p-2]:t.shape[p-1],g=a?n.shape[v-1]:n.shape[v-2],y=r?t.shape[p-1]:t.shape[p-2],b=a?n.shape[v-2]:n.shape[v-1],x=t.shape.slice(0,-2),k=n.shape.slice(0,-2),w=Kc(x),S=Kc(k),I=jm(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([y,b]);Vc(m===g,(function(){return"Error in matMul: inner shapes (".concat(m,") and (")+"".concat(g,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match.")}));var C,N=r?[w,m,y]:[w,y,m],E=a?[S,b,g]:[S,g,b],T=TW({inputs:{x:t},backend:i,attrs:{shape:N}}),A=TW({inputs:{x:n},backend:i,attrs:{shape:E}}),R=[T,A],F=Math.max(w,S),D=r?T.shape[1]:T.shape[2],O=null!=s,L=null!=c,_="leakyrelu"===d,M=null!=d?xW(d,!0):null;if((1===y||1===b)&&D>1e3&&!1===(O||L||_||null!=M)){var z=T,P=A;r&&(z=PW({inputs:{x:T},backend:i,attrs:{perm:[0,2,1]}}),R.push(z)),a&&(P=PW({inputs:{x:A},backend:i,attrs:{perm:[0,2,1]}}),R.push(P));var B=1===b,W=z;1!==b&&(W=TW({inputs:{x:z},backend:i,attrs:{shape:[F,D,1]}}),R.push(W));var U=1===b?2:1,V=P;B&&(V=TW({inputs:{x:P},backend:i,attrs:{shape:[F,1,D]}}),R.push(V));var j=NW({inputs:{a:W,b:V},backend:i});C=MW({inputs:{x:j},backend:i,attrs:{axis:U,keepDims:!0}}),R.push(j)}else{var G=Wp(t.dtype,n.dtype),H=new kW(N,E,[F,y,b],r,a,O,M,L,_),K=[T,A];if(null!=s&&K.push(s),L&&K.push(c),_){var q=i.makeTensorInfo([],"float32",op(f,"float32"));K.push(q),R.push(q)}C=i.runWebGLProgram(H,K,G)}var X=TW({inputs:{x:C},backend:i,attrs:{shape:I}});R.push(C);for(var Y=0,Z=R;Y<Z.length;Y++){var J=Z[Y];i.disposeIntermediateTensorInfo(J)}return X}var UW={kernelName:Fd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights,u=r.transposeA,c=r.transposeB,l=r.activation;return WW({a:a,b:i,transposeA:u,transposeB:c,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:l})}},VW="return abs(x);";var jW={kernelName:Rl,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var i=r.texData.get(a.dataId),o=gB(i.values);return r.makeTensorInfo(a.shape,a.dtype,o)}return t=Cl().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new eW(a.shape,VW):new WB(a.shape,VW),r.runWebGLProgram(t,[a],a.dtype)}},GW=yW({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),HW={kernelName:Fl,backendName:"webgl",kernelFunc:GW},KW=yW({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),qW={kernelName:Dl,backendName:"webgl",kernelFunc:KW},XW="return a + b;",YW=bW({opSnippet:XW,packedOpSnippet:XW,supportsComplex:!0,cpuKernelImpl:jP}),ZW={kernelName:Ol,backendName:"webgl",kernelFunc:YW},JW=Oc((function e(t,n){Fc(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")})),QW=Oc((function e(t,n){Fc(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}));var $W={kernelName:Ll,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return uW({inputs:{x:a[0]},backend:r});if(a.length>Cl().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(a.length/2),o=e({inputs:a.slice(0,i),backend:r}),s=e({inputs:a.slice(i),backend:r});return e({inputs:[o,s],backend:r})}var u=a.map((function(e){return e.dtype})).reduce((function(e,t){return Wp(e,t)})),c=a.map((function(e){return e.shape})),l=Cl().getBool("WEBGL_PACK")?new QW(a[0].shape,c):new JW(a[0].shape,c);return r.runWebGLProgram(l,a,u)}};var eU={kernelName:_l,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=$c(i,a.shape),c=u,l=Ay(c,s),f=a;null!=l&&(f=PW({inputs:{x:a},backend:n,attrs:{perm:l}}),c=Fy(c.length,s)),Ty("all",c,s);var h,d=Ke(Ny(f.shape,c),2),p=d[0],v=TW({inputs:{x:f},backend:n,attrs:{shape:[-1,Kc(d[1])]}}),m=DW(v,v.dtype,"all",n);return h=TW(o?{inputs:{x:m},backend:n,attrs:{shape:Ey(p,u)}}:{inputs:{x:m},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),null!=l&&n.disposeIntermediateTensorInfo(f),h}};var tU={kernelName:Ml,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=$c(i,a.shape),c=u,l=Ay(c,s),f=a;null!=l&&(f=PW({inputs:{x:a},backend:n,attrs:{perm:l}}),c=Fy(c.length,s)),Ty("any",c,s);var h,d=Ke(Ny(f.shape,c),2),p=d[0],v=TW({inputs:{x:f},backend:n,attrs:{shape:[-1,Kc(d[1])]}}),m=DW(v,v.dtype,"any",n);return h=TW(o?{inputs:{x:m},backend:n,attrs:{shape:Ey(p,u)}}:{inputs:{x:m},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),null!=l&&n.disposeIntermediateTensorInfo(f),h}},nU=Oc((function e(t,n,r){Fc(this,e),this.variableNames=["A"];var a=t.windowSize,i=t.batchSize,o=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s="max"===n?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(u,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")})),rU=Oc((function e(t,n,r,a){Fc(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Vc(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var i=t[t.length-1],o=Math.ceil(i/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");var s,u,c=this.outputShape,l=c.length,f=mP(l),h=OB("coords",l);if(1===o){var d=mP(u=l+1);s="\n        ".concat(d," sourceLocR = ").concat(d,"(").concat(h.join(),", 0);\n        ++").concat(h[l-1],";\n        ").concat(d," sourceLocG = ").concat(d,"(").concat(h.join(),", 0);\n        ++").concat(h[l-2],";\n        ").concat(d," sourceLocA = ").concat(d,"(").concat(h.join(),", 0);\n        --").concat(h[l-1],";\n        ").concat(d," sourceLocB = ").concat(d,"(").concat(h.join(),", 0);\n        --").concat(h[l-2],";")}else u=l,s="\n        ".concat(f," sourceLocR = coords;\n        ++").concat(h[l-1],";\n        ").concat(f," sourceLocG = coords;\n        ++").concat(h[l-2],";\n        ").concat(f," sourceLocA = coords;\n        --").concat(h[l-1],";\n        ").concat(f," sourceLocB = coords;\n        --").concat(h[l-2],";");var p=["x","y","z","w","u","v"].slice(0,u),v="."+p[u-1],m=p.map((function(e){return"int "+e})),g=OB("sourceLocR",u-1).concat("inIdx.r"),y=OB("sourceLocG",u-1).concat("inIdx.g"),b=OB("sourceLocB",u-1).concat("inIdx.b"),x=OB("sourceLocA",u-1).concat("inIdx.a"),k="max"===r?"greaterThan":"lessThan",w=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),")));"),S="vec4(\n            getAChannel(".concat(g.join(),"),\n            hasNextCol ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(x.join(),") : 0.)"),I=a?"":"\n      float getBestIndicesAChannel(".concat(m.join(),") {\n        return getChannel(getBestIndicesA(").concat(p.join(),"),\n                                          vec2(").concat(p.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(m.join(),") {\n        return getChannel(getA(").concat(p.join(),"),\n                               vec2(").concat(p.slice(-2).join(),"));\n      }\n      ").concat(I,"\n      void main() {\n        ").concat(f," coords = getOutputCoords();\n        bool hasNextCol = ").concat(h[l-1]," < ").concat(c[l-1]-1,";\n        bool hasNextRow = ").concat(h[l-2]," < ").concat(c[l-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(v,", sourceLocG").concat(v,",\n          sourceLocB").concat(v,", sourceLocA").concat(v,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(S,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(w,"\n          vec4 candidate = ").concat(S,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(k,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}));function aU(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],i=t.shape[1];null!=r&&(a=r.shape[0],i=r.shape[1]);var o=Yx(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},u=new nU(s,n,null==r),c=[t];null!=r&&c.push(r);var l=e.runWebGLProgram(u,c,"int32");if(1===l.shape[1])return l;var f=aU(e,t,n,l);return e.disposeIntermediateTensorInfo(l),f}function iU(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,i=a[a.length-1],o=Yx(i),s=new rU(a,o,n,null==r),u=null==r?[t]:[t,r],c=e.runWebGLProgram(s,u,"int32");if(c.shape.length===t.shape.length){var l=iU(e,t,n,c);return e.disposeIntermediateTensorInfo(c),l}return c}function oU(e,t,n,r){var a=[n];if(Ty("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!Cl().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var i=[],o=e.texData.get(t.dataId),s=t;null!==o&&o.isPacked&&(s=e.unpackTensor(t),i.push(s));var u=Ke(Ny(s.shape,a),2),c=u[0],l=Kc(u[1]),f=TW({inputs:{x:s},backend:e,attrs:{shape:[-1,l]}});i.push(f);var h=aU(e,f,r);i.push(h);var d=TW({inputs:{x:h},backend:e,attrs:{shape:c}});return i.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),d}return iU(e,t,r)}var sU={kernelName:zl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=$c(r.axis,a.shape),o=Ay(i,a.shape.length),s=a,u=[];null!=o&&(s=PW({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(s),i=Fy(i.length,s.shape.length)),Ty("argMax",[i[0]],s.shape.length);var c=oU(n,s,i[0],"max");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}};var uU={kernelName:Pl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=$c(r.axis,a.shape),o=Ay(i,a.shape.length),s=a,u=[];null!=o&&(s=PW({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(s),i=Fy(i.length,s.shape.length)),Ty("argMin",[i[0]],s.shape.length);var c=oU(n,s,i[0],"min");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}},cU=yW({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),lU={kernelName:Bl,backendName:"webgl",kernelFunc:cU},fU=yW({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),hU={kernelName:Wl,backendName:"webgl",kernelFunc:fU},dU=yW({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),pU={kernelName:Ul,backendName:"webgl",kernelFunc:dU},vU=bW({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),mU={kernelName:jl,backendName:"webgl",kernelFunc:vU},gU=yW({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),yU={kernelName:Vl,backendName:"webgl",kernelFunc:gU},bU=Oc((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Fc(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,l=t.dilationWidth,f=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;var v="avg"===n,m="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),g="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="0.0";if(v||(y="-1.0 / 1e-20"),r){var b=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(f,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(b," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?i?m:g:"wR * ".concat(h," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var x="max",k="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(k="avgValue / count");var w=4*Math.floor(o/4),S=o%4,I="\n      if (".concat(v,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(x,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(f,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(w,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(I,"\n          }\n\n          int xC = xCCorner + ").concat(w,";\n          if (").concat(1===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(I,"\n          } else if (").concat(2===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(I,"\n          } else if (").concat(3===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(I,"\n          }\n        }\n        setOutput(").concat(k,");\n      }\n    ")}})),xU=Oc((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Fc(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideDepth,u=t.strideHeight,c=t.strideWidth,l=t.dilationDepth,f=t.dilationHeight,h=t.dilationWidth,d=t.effectiveFilterDepth,p=t.effectiveFilterHeight,v=t.effectiveFilterWidth,m=t.padInfo.front,g=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;var b="avg"===n,x="0.0";if(b||(x="-1.0 / 1e-20"),r){var k=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(d,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(p,";\n                wR += ").concat(f,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(v,";\n                  wC += ").concat(h,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(k," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?i?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(p," * ").concat(v," +\n                      wR * ").concat(v," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var w="max",S="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(S="avgValue / count");var I=4*Math.floor(o/4),C=o%4,N="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(w,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(y,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(f,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(I,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(h,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(h,", ch)\n              );\n\n              ").concat(N,"\n            }\n\n            int xC = xCCorner + ").concat(I,";\n            if (").concat(1===C,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(N,"\n            } else if (").concat(2===C,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(N,"\n            } else if (").concat(3===C,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                initializationValue\n              );\n\n              ").concat(N,"\n            }\n          }\n          setOutput(").concat(S,");\n        }\n      }\n    ")}}));var kU={kernelName:Gl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;jz(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;Vc(Eg(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c=vg(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&qc(c.inShape,c.outShape))return uW({inputs:{x:a},backend:n});var l=new bU(c,"avg",!1);return n.runWebGLProgram(l,[a],"float32")}};var wU={kernelName:Kl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat,l=mg(a.shape,i,o,[1,1,1],s,u,c),f=new xU(l,"avg",!1);return n.runWebGLProgram(f,[a],"float32")}},SU=Oc((function e(t){Fc(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=u-1-t.padInfo.top,f=c-1-t.padInfo.left,h=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(f,");\n      const float avgMultiplier = float(").concat(h,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),IU=Oc((function e(t){Fc(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,f=t.effectiveFilterDepth,h=t.effectiveFilterHeight,d=t.effectiveFilterWidth,p=f-1-t.padInfo.front,v=h-1-t.padInfo.top,m=d-1-t.padInfo.left,g=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(p,", ").concat(v,", ").concat(m,");\n      const float avgMultiplier = float(").concat(g,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(f,";\n            wD += ").concat(u,") {\n          float dyD = float(dyDCorner + wD) / ").concat(i,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(h,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var CU={kernelName:ql,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=mg(i.shape,o,s,[1,1,1],u,c),f=new IU(l);return n.runWebGLProgram(f,[a],i.dtype)}};var NU={kernelName:Hl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;jz([a,i],"avgPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=vg(o.shape,s,u,1,c),f=new SU(l);return n.runWebGLProgram(f,[a],o.dtype)}};var EU={kernelName:Xl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return WW({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},TU=Oc((function e(t,n,r,a,i,o){Fc(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],jm(t,n),jm(t,r);var s="0.0";null!=a&&(jm(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=i&&(jm(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(u,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")})),AU=Oc((function e(t,n,r,a,i,o){Fc(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],jm(t,n),jm(t,r);var s="vec4(0.0)";null!=a&&(jm(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=i&&(jm(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(u,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")})),RU={kernelName:Bf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.mean,o=t.variance,s=t.offset,u=t.scale;Vc(i.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Vc(null==s||i.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Vc(null==u||i.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var c=r.varianceEpsilon;null==c&&(c=.001);var l=[a,i,o],f=null;null!=s&&(f=s.shape,l.push(s));var h=null;null!=u&&(h=u.shape,l.push(u));var d=Cl().getBool("WEBGL_PACK_NORMALIZATION")?new AU(a.shape,i.shape,o.shape,f,h,c):new TU(a.shape,i.shape,o.shape,f,h,c);return n.runWebGLProgram(d,l,l[0].dtype)}},FU=Oc((function e(t){Fc(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=mP(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return DU.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),i=t.map((function(e,t){return"sourceLoc.".concat(DU[t]," = start[").concat(t,"] + coords.").concat(DU[t],";")}));r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(i.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")})),DU=["x","y","z","w","u","v"];var OU=Oc((function e(t){Fc(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=mP(this.rank),r=OB("coords",this.rank),a=OB("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(i,")"),s="\n      result.x = ".concat(o,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}));function LU(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=Ke(Xm(a,r.begin,r.size),2),o=i[0],s=i[1];if(Gm(a,o,s),0===Kc(s))return n.makeTensorInfo(s,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var u=n.texData.get(a.dataId),c=yB(u.values,o,s,a.shape,a.dtype);return n.makeTensorInfo(s,a.dtype,c)}var l=n.texData.get(a.dataId).isPacked,f=Km(a.shape,o,s);if(l||!f){var h=Cl().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new OU(s):new FU(s),d=[o];return n.runWebGLProgram(h,[a],a.dtype,d)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=e.dtype;var s=qm(t,fl(e.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var u=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,u+1),i}(a,o,s,n)}var _U={kernelName:Zh,backendName:"webgl",kernelFunc:LU},MU={kernelName:Yl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;Vc(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=Jx(a.shape,i,s),c=Qx(u.length,i.length),l=$x(a.shape,i,s),f=ek(o,i.length),h=tk(l,o,i.length),d=[],p=TW({inputs:{x:a},backend:n,attrs:{shape:u}}),v=PW({inputs:{x:p},backend:n,attrs:{perm:c}}),m=TW({inputs:{x:v},backend:n,attrs:{shape:l}}),g=LU({inputs:{x:m},backend:n,attrs:{begin:f,size:h}});return d.push(p),d.push(v),d.push(m),d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}};var zU={kernelName:Zl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=GP(s,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}};var PU={kernelName:Jl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.readSync(r.dataId),o=n.readSync(a.dataId),s=jm(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},BU=bW({opSnippet:"return float(a != b);",cpuKernelImpl:fB,dtype:"bool"}),WU={kernelName:wh,backendName:"webgl",kernelFunc:BU};function UU(e){var t=e.inputs,n=e.backend,r=t.input;return uW({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var VU={kernelName:Lh,backendName:"webgl",kernelFunc:UU};var jU={kernelName:Ql,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=t.attrs,i=n.x,o=a.dtype;if("complex64"===o){if("complex64"===i.dtype)return uW({inputs:{x:i},backend:r});var s=zy(i.shape),u=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),c=lW({inputs:{real:u,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(u),c}if("complex64"===i.dtype){var l=UU({inputs:{input:i},backend:r}),f=e({inputs:{x:l},backend:r,attrs:{dtype:o}});return r.disposeIntermediateTensorInfo(l),f}if(!rl(i.dtype,o)){var h=uW({inputs:{x:i},backend:r});return{dataId:h.dataId,shape:h.shape,dtype:o}}if("int32"===o)return function(e,t){var n=new WB(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===o){var d=r.makeTensorInfo([],"bool",tl("bool",1)),p=BU({inputs:{a:i,b:d},backend:r});return r.disposeIntermediateTensorInfo(d),p}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(o))}},GU="return ceil(x);",HU=yW({opSnippet:GU,packedOpSnippet:GU,cpuKernelImpl:KP}),KU={kernelName:$l,backendName:"webgl",kernelFunc:HU},qU=Oc((function e(t){Fc(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "})),XU=Oc((function e(t){Fc(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}));var YU={kernelName:ef,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.clipValueMin,s=a.clipValueMax;t=Cl().getBool("WEBGL_PACK_CLIP")?new XU(i.shape):new qU(i.shape);var u=[[o],[s]];return r.runWebGLProgram(t,[i],i.dtype,u)}},ZU=Oc((function e(t){Fc(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}));function JU(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var QU={kernelName:nf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),i=new ZU(r.shape),o=[JU(r,a.complexTensorInfos.real),JU(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}},$U=Oc((function e(t){Fc(this,e),this.outputShape=[],this.outputShape=Xx(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],i=1;i<n.length;i++){var o=n[i-1];a.push("else if (yC < ".concat(n[i],") ")+"setOutput(getT".concat(i,"(yR, yC-").concat(o,"));"))}var s=n.length,u=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(u,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")})),eV=Oc((function e(t,n){Fc(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Xx(t,n);var r=this.outputShape,a=r.length,i=mP(a),o=OB("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var u=new Array(t.length-1);u[0]=t[0][n];for(var c=1;c<u.length;c++)u[c]=u[c-1]+t[c][n];for(var l=s[n],f=s.slice(-2),h=s.join(),d="if (".concat(l," < ").concat(u[0],") {\n        return getChannel(\n            getT0(").concat(h,"), vec2(").concat(f.join(),"));\n        }"),p=1;p<u.length;p++){var v=u[p-1];d+="\n        if (".concat(l," < ").concat(u[p],"  && ").concat(l," >= ").concat(u[p-1],") {\n          return getChannel(\n            getT").concat(p,"(").concat(tV(s,l,v),"),\n            vec2(").concat(tV(f,l,v),"));\n        }")}var m=u.length,g=u[u.length-1];d+="\n        return getChannel(\n          getT".concat(m,"(").concat(tV(s,l,g),"),\n          vec2(").concat(tV(f,l,g),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(d,"\n      }\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," + 1;\n        if (").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-2]," = ").concat(o[a-2]," + 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," - 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2]," &&\n            ").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")}));function tV(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}function nV(e){var t=e.inputs,n=e.backend,r=t.input;return uW({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var rV={kernelName:Kf,backendName:"webgl",kernelFunc:nV};function aV(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return UU({inputs:{input:e},backend:n})})),i=e.map((function(e){return nV({inputs:{input:e},backend:n})})),o=aV(a,t,n),s=aV(i,t,n),u=lW({inputs:{real:o,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}var c=n.shouldExecuteOnCPU(e);if("string"===r&&(c=!0),c){var l=e.map((function(e){var r=Kc(e.shape.slice(t));return TW({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),f=l.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),h=Xx(l.map((function(e){return e.shape})),1),d=1===l[0].shape[0],p=qP(f,h,r,d),v=Xx(e.map((function(e){return e.shape})),t),m=n.makeTensorInfo(v,r,p);return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}if(e.length>Cl().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var g=Math.floor(e.length/2),y=aV(e.slice(0,g),t,n),b=aV(e.slice(g),t,n),x=aV([y,b],t,n);return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),x}if(Cl().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var k=new eV(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(k,e,r)}var w=function(e,t,n){var r=Xx(e.map((function(e){return e.shape})),t),a=e.map((function(e){return TW({inputs:{x:e},attrs:{shape:[-1,Kc(e.shape.slice(t))]},backend:n})}));return{tensors2D:a,outShape:r}}(e,t,n),S=w.tensors2D,I=w.outShape,C=new $U(S.map((function(e){return e.shape}))),N=n.runWebGLProgram(C,S,r);S.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var E=TW({inputs:{x:N},attrs:{shape:I},backend:n});return n.disposeIntermediateTensorInfo(N),E}function iV(e){var t=e.inputs,n=e.backend,r=$c(e.attrs.axis,t[0].shape)[0],a=Xx(t.map((function(e){return e.shape})),r);if(0===Kc(a))return n.makeTensorInfo(a,t[0].dtype,[]);var i=t.filter((function(e){return Kc(e.shape)>0}));return 1===i.length?uW({inputs:{x:i[0]},backend:n}):(qx(i.map((function(e){return e.shape})),r),aV(i,r,n))}var oV={kernelName:rf,backendName:"webgl",kernelFunc:iV},sV=Oc((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Fc(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,f=t.dilationWidth,h=t.filterHeight,d=t.filterWidth,p=4*Math.floor(t.inChannels/4),v=t.inChannels%4,m="channelsLast"===t.dataFormat,g=m?1:2,y=m?2:3,b=m?3:1,x="",k="";r&&(x=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),k="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(g,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(h,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(d,"; wC++) {\n            int xC = xCCorner + wC * ").concat(f,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(m,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===v,") {\n\n              if (").concat(m,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(p,") *\n                    getW(wR, wC, ").concat(p,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(p,", xR, xC) *\n                    getW(wR, wC, ").concat(p,", d2);\n              }\n\n            } else if (").concat(2===v,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2)\n              );\n\n              if (").concat(m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===v,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2),\n                getW(wR, wC, ").concat(p," + 2, d2)\n              );\n\n              if (").concat(m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1),\n                  getX(batch, xR, xC, ").concat(p," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC),\n                  getX(batch, ").concat(p," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(k,"\n        setOutput(result);\n      }\n    ")})),uV=Oc((function e(t){Fc(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,f=t.filterDepth,h=t.filterHeight,d=t.filterWidth,p=4*Math.floor(t.inChannels/4),v=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(f,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===v,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(p,") *\n                  getW(wF, wR, wC, ").concat(p,", d2);\n              } else if (").concat(2===v,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===v,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1),\n                  getX(batch, xF, xR, xC, ").concat(p," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2),\n                  getW(wF, wR, wC, ").concat(p," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),cV=Oc((function e(t,n){Fc(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=CP(this.outputShape.length);for(var r=n.dataFormat,a=Hz(),i="channelsLast"===r,o=i?0:1,s=i?1:2,u=this.enableShapeUniforms?"if(blockIndex < outShape[1] && pos < outShape[0]) {":"if(blockIndex < ".concat(t[1]," && pos < ").concat(t[0],") {"),c="",l=0;l<=1;l++)for(var f=0;f<=1;f++)c+="\n          blockIndex = rc.y + ".concat(f,";\n          pos = rc.x + ").concat(l,";\n\n          ").concat(u,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(i,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*l+f,"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*l+f,"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(c,"\n\n        ").concat(a.output," = result;\n      }\n    ")}));function lV(e,t,n,r){var a=e.shape;if(Vc(a.length<=1||3===a.length,(function(){return"WebGL conv2d only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(a.length,".")})),1===a.length){var i=n?t[3]:t[1];Vc(1===a[0]||a[0]===i,(function(){return"WebGL conv2d PReLU activation weights (".concat(a,") is ")+"not compatible with the number of output channels "+"(".concat(i,").")}))}else if(3===a.length){try{jm(a,t)}catch(s){var o="WebGL conv2d PReLU activation weights (".concat(a,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(t,").");throw Error(o)}if(!n)return PW({inputs:{x:e},backend:r,attrs:{perm:[1,2,0]}})}return e}function fV(e){var t,n=e.x,r=e.filter,a=e.convInfo,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,f=void 0===l?0:l,h=e.activation,d=void 0===h?null:h,p=n.shape,v=i.texData.get(n.dataId),m=a.inChannels,g=p[0]*p[1]*p[2],y=a.outChannels,b="channelsLast"===a.dataFormat,x=[];if(null!=c){var k=lV(c,a.outShape,b,i);k.dataId!==c.dataId&&(x.push(k),c=k)}if(!((1===g||1===y)&&m>1e3)&&v.isPacked&&b&&null!=v.texture&&p[2]%2!==0&&qc(v.shape.slice(-3),p.slice(-3))){var w=p[0]*p[1]*(p[2]+1),S={dataId:n.dataId,shape:[1,w,a.inChannels],dtype:n.dtype},I=v.shape;v.shape=v.shape.slice(),v.shape[v.shape.length-2]++,Vc(Pz(v.shape,S.shape),(function(){return"packed reshape ".concat(v.shape," to ").concat(S.shape," isn't free")}));var C=TW({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}});x.push(C);var N=WW({a:S,b:C,backend:i,transposeA:false,transposeB:false,bias:s,activation:d,preluActivationWeights:c,leakyreluAlpha:f}),E=i.texData.get(N.dataId);Vc(E.isPacked,(function(){return"batchMatMul result is expected to be packed"})),v.shape=I,E.shape=a.outShape,(t=uW({inputs:{x:N},backend:i})).shape=a.outShape,x.push(N)}else{var T=b?n:PW({inputs:{x:n},backend:i,attrs:{perm:[0,2,3,1]}}),A=T.shape,R=TW({inputs:{x:T},backend:i,attrs:{shape:[1,A[0]*A[1]*A[2],a.inChannels]}}),F=TW({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}}),D=WW({a:R,b:F,transposeA:false,transposeB:false,backend:i,bias:s,activation:d,preluActivationWeights:c,leakyreluAlpha:f}),O=TW({inputs:{x:D},backend:i,attrs:{shape:[a.batchSize,a.outHeight,a.outWidth,a.outChannels]}});t=b?O:PW({inputs:{x:O},backend:i,attrs:{perm:[0,3,1,2]}}),b||(x.push(T),x.push(O)),x.push(R),x.push(F),x.push(D)}for(var L=0,_=x;L<_.length;L++){var M=_[L];i.disposeIntermediateTensorInfo(M)}return t}function hV(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,i=e.bias,o=void 0===i?null:i,s=e.preluActivationWeights,u=void 0===s?null:s,c=e.leakyreluAlpha,l=void 0===c?0:c,f=e.activation,h=void 0===f?null:f,d=r.filterWidth,p=r.filterHeight,v=r.inChannels,m=r.outWidth,g=r.outHeight,y="channelsLast"===r.dataFormat,b=d*p*v,x=g*m,k=[b,x],w=[];if(null!=u){var S=lV(u,r.outShape,y,a);S.dataId!==u.dataId&&(w.push(S),u=S)}var I=TW({inputs:{x:t},backend:a,attrs:{shape:t.shape.slice(1)}}),C=TW({inputs:{x:n},backend:a,attrs:{shape:[1,b,Kc(n.shape)/b]}});w.push(I),w.push(C);var N=new cV(k,r),E=[I.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],T=a.runWebGLProgram(N,[I],"float32",E),A=TW({inputs:{x:T},backend:a,attrs:{shape:[1,k[0],k[1]]}});w.push(T),w.push(A);var R=null!=o,F=null!=u,D="leakyrelu"===h,O=h?xW(h,!0):null,L=new kW(A.shape,C.shape,[1,x,r.outChannels],!0,!1,R,O,F,D),_=[A,C];if(o&&_.push(o),F&&_.push(u),D){var M=a.makeTensorInfo([],"float32",op(l,"float32"));_.push(M),w.push(M)}var z=a.runWebGLProgram(L,_,"float32"),P=TW({inputs:{x:z},backend:a,attrs:{shape:[1,g,m,r.outChannels]}}),B=y?P:PW({inputs:{x:P},backend:a,attrs:{perm:[0,3,1,2]}});y||w.push(P),w.push(z);for(var W=0,U=w;W<U.length;W++){var V=U[W];a.disposeIntermediateTensorInfo(V)}return B}var dV={kernelName:af,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,c=a.dataFormat,l=a.dilations,f=a.dimRoundingMode,h=Tg(c),d=gg(i.shape,o.shape,s,l,u,f,!1,h);if(1!==d.filterHeight||1!==d.filterWidth||1!==d.dilationHeight||1!==d.dilationWidth||1!==d.strideHeight||1!==d.strideWidth||"SAME"!==d.padInfo.type&&"VALID"!==d.padInfo.type)if(Cl().getBool("WEBGL_CONV_IM2COL")&&1===i.shape[0])t=hV({x:i,filter:o,convInfo:d,backend:r});else{var p=new sV(d);t=r.runWebGLProgram(p,[i,o],"float32")}else t=fV({x:i,filter:o,convInfo:d,backend:r});var v=TW({inputs:{x:t},backend:r,attrs:{shape:d.outShape}});return r.disposeIntermediateTensorInfo(t),v}},pV=Oc((function e(t){Fc(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(o,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),vV=Oc((function e(t){Fc(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,u=r-1-t.padInfo.left,c=o?1:2,l=o?2:3,f=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(f,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),mV=Oc((function e(t){Fc(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(i,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),gV=Oc((function e(t){Fc(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=n-1-t.padInfo.front,c=r-1-t.padInfo.top,l=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(c,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(i,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var yV={kernelName:of,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape,f=Tg(u),h=gg(a.shape,l,o,1,s,c,!1,f),d=new pV(h);return n.runWebGLProgram(d,[a,i],"float32")}};var bV={kernelName:sf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode,f=Tg(c),h=gg(o,i.shape,s,1,u,l,!1,f),d=new vV(h);return n.runWebGLProgram(d,[a,i],"float32")}};var xV={kernelName:uf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=yg(a.shape,i.shape,o,u,s),l=new uV(c);return n.runWebGLProgram(l,[a,i],"float32")}};var kV={kernelName:cf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape,c=yg(a.shape,u,o,1,s),l=new mV(c);return n.runWebGLProgram(l,[a,i],"float32")}};var wV,SV={kernelName:lf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=yg(r.inputShape,i.shape,s,1,o),c=new gV(u);return n.runWebGLProgram(c,[a,i],"float32")}},IV=yW({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),CV={kernelName:ff,backendName:"webgl",kernelFunc:IV},NV=yW({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),EV={kernelName:hf,backendName:"webgl",kernelFunc:NV},TV=Oc((function e(t,n,r,a,i){Fc(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=Ke(t,4),s=o[0],u=o[1],c=o[2],l=o[3],f=Ke(n,1)[0],h=Ke(r,2),d=h[0],p=h[1];this.outputShape=[f,d,p,l];var v="bilinear"===a?1:0,m="".concat(u-1,".0"),g="".concat(c-1,".0"),y=Ke(d>1?["".concat((u-1)/(d-1)),"(y2-y1) * height_ratio","y1*".concat(m," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(m)],3),b=y[0],x=y[1],k=y[2],w=Ke(p>1?["".concat((c-1)/(p-1)),"(x2-x1) * width_ratio","x1*".concat(g," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(g)],3),S=w[0],I=w[1],C=w[2];this.userCode="\n      const float height_ratio = float(".concat(b,");\n      const float width_ratio = float(").concat(S,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(x,";\n        float width_scale = ").concat(I,";\n\n        float in_y = ").concat(k,";\n        if( in_y < 0.0 || in_y > ").concat(m," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(C,";\n        if( in_x < 0.0 || in_x > ").concat(g," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(v," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")})),AV={kernelName:vf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=new TV(a.shape,i.shape,s,u,c);return n.runWebGLProgram(l,[a,i,o],"float32")}};!function(e){e.Prod="*",e.Sum="+"}(wV||(wV={}));var RV=Oc((function e(t,n,r,a){Fc(this,e),this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}],this.op=t,this.outputShape=n;var i=n.length,o=this.op===wV.Prod?"1.0":"0.0",s=r?o:"getX(".concat(FV(i,"coords",this.op),")"),u=n[n.length-1],c="",l="";r?(c=a?"end != ".concat(u-1):"end != 0",l=a?"end + 1":"end - 1"):(c=a?"end + pow2 < ".concat(u):"end >= pow2",l=a?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(mP(i)," coords = getOutputCoords();\n        int end = ").concat(DV(i,"coords",this.op),";\n        float val = ").concat(s,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(c,") {\n          int idx = ").concat(l,";\n          ").concat(DV(i,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(FV(i,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}));function FV(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function DV(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function OV(e,t,n,r,a,i){var o=t.shape.length,s=Ay([r],o),u=t;null!=s&&(u=PW({inputs:{x:t},backend:n,attrs:{perm:s}}));var c=Fy(1,o)[0];if(c!==o-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(r));for(var l=u.shape[c],f=uW({inputs:{x:u},backend:n}),h=0;h<=Math.ceil(Math.log2(l))-1;h++){var d=new RV(e,u.shape,!1,i),p=[[h]],v=f;f=n.runWebGLProgram(d,[f],f.dtype,p),n.disposeIntermediateTensorInfo(v)}if(a){var m=new RV(e,u.shape,a,i),g=f;f=n.runWebGLProgram(m,[f],f.dtype),n.disposeIntermediateTensorInfo(g)}if(null!=s){var y=PW({inputs:{x:f},backend:n,attrs:{perm:Ry(s)}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(u),y}return f}var LV={kernelName:df,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;return OV(wV.Prod,a,n,i,o,s)}};var _V={kernelName:pf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;return OV(wV.Sum,a,n,i,o,s)}};var MV={kernelName:mf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),c=n.readSync(i.dataId),l=GP(u,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}if(2===a.shape.length){var f=n.bufferSync(a),h=n.bufferSync(i),d=HP(f,h,o,s);return n.makeTensorInfo(d.shape,i.dtype,d.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},zV=function(){function e(t,n,r){Fc(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return Oc(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var PV={kernelName:gf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat,s=a.shape[0],u=("NHWC"===o?a.shape[1]:a.shape[2])*i,c=("NHWC"===o?a.shape[2]:a.shape[3])*i,l=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),f=new zV("NHWC"===o?[s,u,c,l]:[s,l,u,c],i,o);return n.runWebGLProgram(f,[a],a.dtype)}},BV=Oc((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Fc(this,e),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=CP(this.outputShape.length);var o=t.filterHeight,s=t.filterWidth,u=t.outChannels/t.inChannels,c="",l="";r&&(c=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),l="result = activation(result);");var f=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(c,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(u,";\n        int q = d2 - d1 * ").concat(u,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(f,"\n        ").concat(l,"\n        setOutput(result);\n      }\n    ")})),WV=Oc((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Fc(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=CP(this.outputShape.length);for(var o=t.outChannels/t.inChannels,s=t.padInfo.left,u=t.strideWidth,c=t.dilationWidth,l=t.filterHeight,f=t.filterWidth,h=f,d="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",p=0;p<f;p++)d+="\n          vec4 xTexelC".concat(2*p,";\n          int xTexelC").concat(2*p,"Ready;\n          vec4 xTexelC").concat(2*p+1,";\n          int xTexelC").concat(2*p+1,"Ready;\n          vec4 xC").concat(p,";");d+="\n    for (int r = 0; r < ".concat(l,"; r++) {\n      ");for(var v=0;v<f;v++)d+="\n          xTexelC".concat(2*v," = vec4(0.0);\n          xTexelC").concat(2*v,"Ready = 0;\n          xTexelC").concat(2*v+1," = vec4(0.0);\n          xTexelC").concat(2*v+1,"Ready = 0;\n          xC").concat(v," = vec4(0.0);");d+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var m=0;m<(h+1)/2;m++){var g=2*m;if(d+="\n          xC = xCCorner + ".concat(g*c,";\n          "),1===u){if(g<f&&(s%2===1?(d+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n              "),d+=1===c&&g>0?"\n                xC".concat(g," = vec4(xTexelC").concat(g-2,".zw, xTexelC").concat(g,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(g," = vec4(previous.zw, xTexelC").concat(g,".xy);\n                  } else {\n                    xC").concat(g," = vec4(0.0, 0.0, xTexelC").concat(g,".xy);\n                  }\n                  ")):d+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                xC").concat(g," = xTexelC").concat(g,";\n                "),g+1<f)){var y=s%2===0?Bc(c):c;c%2===0&&s%2===1||c%2!==0&&s%2!==1?(d+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(y,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                    xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(g+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(g+1,"Ready = 1;\n                  }\n                  "),c>1&&(d+="\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                      xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n                      xTexelC").concat(g,"Ready = 1;\n                    }\n                    ")),d+="\n                  xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".xy);\n                  ")):d+=1===y?"\n                    xC".concat(g+1," = xTexelC").concat(g,";\n                    "):"\n                    xCOffset = xC + ".concat(y,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                      xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(g+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(g+1,"Ready = 1;\n                    }\n\n                    xC").concat(g+1," = xTexelC").concat(g+1,";\n                    ")}}else g<f&&(s%2===1?(d+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                  xTexelC").concat(g+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(g+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g+1,"Ready = 1;\n                }\n\n                xC").concat(g," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n              "),g+1<f&&(d+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(g+1," = vec4(xTexelC").concat(g+1,".xy, final.xy);\n                "))):(d+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                  xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(g+1,"Ready = 1;\n                }\n\n                xC").concat(g," = vec4(\n                  xTexelC").concat(g,".xy, xTexelC").concat(g+1,".xy);\n              "),g+1<f&&(d+="\n                  xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n                "))));g<f&&(d+="\n            wTexel = getW(r, ".concat(g,", d1, q);\n            dotProd += xC").concat(g," * vec4(wTexel.xz, wTexel.xz);\n          "),g+1<f&&(d+="\n              wTexel = getW(r, ".concat(g+1,", d1, q);\n              dotProd += xC").concat(g+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}d+="\n    }\n  ",d+="\n      }\n    ";var b="",x="";r&&(b=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),x="result = activation(result);");var k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(d,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(k,"\n        ").concat(x,"\n        setOutput(result);\n      }\n    ")}));var UV={kernelName:yf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode,l=u;null==l&&(l=[1,1]),Vc(Eg(o,l),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(l,"'")}));var f,h=gg(a.shape,i.shape,o,l,s,c,!0);f=Cl().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?new WV(h):new BV(h);var d=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return n.runWebGLProgram(f,[a,i],"float32",d)}},VV=Oc((function e(t){Fc(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),jV=Oc((function e(t){Fc(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,s=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(u,"; dm++) {\n              int d2 = d1 * ").concat(u," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var GV={kernelName:bf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape,f=gg(a.shape,l,o,s,u,c,!0),h=new VV(f);return n.runWebGLProgram(h,[a,i],"float32")}};var HV={kernelName:xf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=gg(r.inputShape,i.shape,o,s,u,c,!0),f=new jV(l);return n.runWebGLProgram(f,[a,i],"float32")}},KV=Oc((function e(t){Fc(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}));var qV={kernelName:kf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat(Et(r.shape),Et(r.shape)),i=Kc(r.shape),o=TW({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new KV(i),u=n.runWebGLProgram(s,[o],o.dtype),c=TW({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),c}},XV=Oc((function e(t){Fc(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,i=t.strideHeight,o=t.strideWidth,s=t.filterHeight,u=t.filterWidth,c=t.dilationHeight,l=t.dilationWidth,f=a.top,h=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(f,", ").concat(h,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}));var YV={kernelName:wf,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,c=a.dilations,l=pg(i.shape,o.shape,s,u,"NHWC",c),f=new XV(l),h=TW({inputs:{x:t=r.runWebGLProgram(f,[i,o],"float32")},backend:r,attrs:{shape:l.outShape}});return r.disposeIntermediateTensorInfo(t),h}};var ZV={kernelName:Nf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=yk(e.attrs.equation,r.length),i=a.allDims,o=a.summedDims,s=a.idDims;xk(i.length,s,r);for(var u=kk(o,s),c=u.path,l=u.steps,f=l.length,h=null,d=i.length,p=[],v=0;v<f;++v){var m,g=Rc(l[v]);try{for(g.s();!(m=g.n()).done;){var y=m.value,b=bk(d,s[y]),x=b.permutationIndices,k=b.expandDims,w=void 0;wk(x)?w=r[y]:(w=PW({inputs:{x:r[y]},backend:n,attrs:{perm:x}}),p.push(w));for(var S=w.shape.slice(),I=0;I<k.length;++I)S.splice(k[I],0,1);qc(w.shape,S)||(w=TW({inputs:{x:w},backend:n,attrs:{shape:S}}),p.push(w)),null===h?h=w:(h=NW({inputs:{a:w,b:h},backend:n}),p.push(h))}}catch(eq){g.e(eq)}finally{g.f()}v<f-1&&(c[v]>=0&&(h=MW({inputs:{x:h},backend:n,attrs:{axis:c[v]-(i.length-d),keepDims:!1}}),p.push(h)),d--)}for(var C=0,N=p;C<N.length;C++){var E=N[C];E!==h&&n.disposeIntermediateTensorInfo(E)}return h}},JV=yW({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),QV={kernelName:Ef,backendName:"webgl",kernelFunc:JV},$V={kernelName:Tf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,i=Cl().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new sW("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new oW("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}},ej=bW({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:XP}),tj={kernelName:Rf,backendName:"webgl",kernelFunc:ej},nj=yW({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(ok,";\n  float a1 = ").concat(sk,";\n  float a2 = ").concat(uk,";\n  float a3 = ").concat(ck,";\n  float a4 = ").concat(lk,";\n  float a5 = ").concat(fk,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),rj={kernelName:Af,backendName:"webgl",kernelFunc:nj},aj=yW({opSnippet:"if (isnan(x)) return x;\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:YP,dtype:"float32"}),ij={kernelName:Ff,backendName:"webgl",kernelFunc:aj};function oj(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,i=t.input,o=i.shape.length,s=i.shape.slice(),u=a;return a<0&&(Vc(-(o+1)<=a,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+a+1),s.splice(u,0,1),TW({inputs:{x:i},backend:r,attrs:{shape:s}})}var sj={kernelName:Df,backendName:"webgl",kernelFunc:oj},uj="return exp(x) - 1.0;",cj=yW({opSnippet:uj,packedOpSnippet:uj,cpuKernelImpl:ZP}),lj={kernelName:Of,backendName:"webgl",kernelFunc:cj},fj=Oc((function e(t,n,r){Fc(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var i,o=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)i="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}));function hj(e,t,n){var r=n.texData.get(e.dataId),a=Kc(e.shape),i=e.shape[e.shape.length-1],o=TW({inputs:{x:e},backend:n,attrs:{shape:[a/i,i]}}),s=o.shape,u=new fj("real",s,t),c=new fj("imag",s,t),l=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],f=n.runWebGLProgram(u,l,"float32"),h=n.runWebGLProgram(c,l,"float32"),d=lW({inputs:{real:f,imag:h},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h);var p=TW({inputs:{x:d},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(d),p}var dj={kernelName:Lf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return hj(t.input,!1,n)}},pj=Oc((function e(t,n){Fc(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}));function vj(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype;if("string"===(i=i||ul(a))){var o=nl(i,Kc(r));return o.fill(a),t.makeTensorInfo(r,i,o)}var s=new pj(r,a),u=[[a]];return t.runWebGLProgram(s,[],i,u)}var mj,gj={kernelName:_f,backendName:"webgl",kernelFunc:vj},yj=Oc((function e(t){Fc(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),bj={kernelName:Mf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,i=new yj(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},xj="return floor(x);",kj=yW({opSnippet:xj,packedOpSnippet:xj,cpuKernelImpl:JP}),wj={kernelName:zf,backendName:"webgl",kernelFunc:kj},Sj=bW({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),Ij={kernelName:Pf,backendName:"webgl",kernelFunc:Sj},Cj=Oc((function e(t){Fc(this,e),this.variableNames=["A"];var n=Hz(),r=Ke(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(i,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")})),Nj=Oc((function e(t){Fc(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=Hz(),r=Ke(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(i,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),Ej={kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o="undefined"!==typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement,u=Ke(o?[a.videoWidth,a.videoHeight]:[a.width,a.height],2),c=u[0],l=u[1],f=[l,c],h=[l,c,i];(s||o)&&(null==mj&&(mj=document.createElement("canvas").getContext("2d")),mj.canvas.width=c,mj.canvas.height=l,mj.drawImage(a,0,0,c,l),a=mj.canvas);var d=n.makeTensorInfo(f,"int32");n.texData.get(d.dataId).usage=uz.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),a);var p=Cl().getBool("WEBGL_PACK")?new Nj(h):new Cj(h),v=n.runWebGLProgram(p,[d],"int32");return n.disposeData(d.dataId),v}};var Tj={kernelName:Dd,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=n.bias,u=n.preluActivationWeights,c=a.strides,l=a.pad,f=a.dataFormat,h=a.dilations,d=a.dimRoundingMode,p=a.activation,v=a.leakyreluAlpha,m=Tg(f),g=gg(i.shape,o.shape,c,h,l,d,!1,m),y=[];if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(Cl().getBool("WEBGL_CONV_IM2COL")&&1===i.shape[0])t=hV({x:i,filter:o,convInfo:g,backend:r,bias:s,activation:p,preluActivationWeights:u,leakyreluAlpha:v});else{var b=null!=s,x=null!=u,k="leakyrelu"===p,w=p?xW(p,!1):null,S=new sV(g,b,w,x,k),I=[i,o];if(s&&I.push(s),u&&I.push(u),k){var C=r.makeTensorInfo([],"float32",op(v,"float32"));I.push(C),y.push(C)}t=r.runWebGLProgram(S,I,"float32")}else t=fV({x:i,filter:o,convInfo:g,backend:r,bias:s,activation:p,preluActivationWeights:u,leakyreluAlpha:v});var N=TW({inputs:{x:t},backend:r,attrs:{shape:g.outShape}});return y.push(t),y.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),N}};var Aj={kernelName:Od,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dilations,f=r.dimRoundingMode,h=r.activation,d=r.leakyreluAlpha,p=[],v=l;null==v&&(v=[1,1]),Vc(Eg(u,v),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(u," and dilations '").concat(v,"'")}));var m,g=gg(a.shape,i.shape,u,v,c,f,!0),y=Cl().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,b=h?xW(h,y):null,x=[a,i],k=null!=o,w=null!=s,S="leakyrelu"===h;if(k&&x.push(o),w&&x.push(s),S){var I=n.makeTensorInfo([],"float32",op(d,"float32"));x.push(I),p.push(I)}m=y?new WV(g,k,b,w,S):new BV(g,k,b,w,S);var C=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],N=n.runWebGLProgram(m,x,"float32",C);return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),N}},Rj=Oc((function e(t,n,r){Fc(this,e),this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=r;var a=mP(n.length),i=mP(r.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        ".concat(a," strides = ").concat(a,"(").concat(this.strides,");\n         void main() {\n          ").concat(i," coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ").concat(this.sliceDim,"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ").concat(o,";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      ")}));var Fj={kernelName:Uf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=a.shape,o=i[i.length-1],s=Kc(r.shape),u=Ke(nk(r,a),4),c=u[0],l=u[1],f=u[2],h=u[3],d=TW({inputs:{x:a},backend:n,attrs:{shape:[l,o]}}),p=TW({inputs:{x:r},backend:n,attrs:{shape:[Kc(r.shape)/f,f]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){var v=n.readSync(a.dataId),m=n.bufferSync(r),g=QP(v,m,r.dtype,l,o,f,h,r.shape,s);return n.makeTensorInfo(c,r.dtype,g.values)}var y=new Rj(o,h,[l,f]),b=n.runWebGLProgram(y,[p,d],p.dtype),x=TW({inputs:{x:b},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(b),x}},Dj=Oc((function e(t,n){Fc(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=mP(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("index"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(t[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}));function Oj(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims,u=$c(o,a.shape)[0];Cl().get("DEBUG")&&function(){for(var e=n.readSync(i.dataId),t=a.shape[u],r=function(n){var r=e[n];Vc(r<=t-1&&r>=0,(function(){return"GatherV2: the index value ".concat(r," is not in [0, ").concat(t-1,"]")}))},o=0;o<e.length;++o)r(o)}();var c=Tk(a,i,u,s),l=Kc(i.shape),f=[],h=TW({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),d=TW({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,l/c.batchSize]}});f.push(h),f.push(d);var p=[c.batchSize,c.outerSize,l/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([a,i])||"string"===a.dtype){var v=n.bufferSync(d),m=n.bufferSync(h),g=$P(m,v,p);return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(c.outputShape,g.dtype,g.values)}var y=new Dj(h.shape,p),b=n.runWebGLProgram(y,[h,d],h.dtype);f.push(b);var x=TW({inputs:{x:b},backend:n,attrs:{shape:c.outputShape}});return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}var Lj={kernelName:Wf,backendName:"webgl",kernelFunc:Oj},_j=bW({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:eB,dtype:"bool"}),Mj={kernelName:Vf,backendName:"webgl",kernelFunc:_j},zj=bW({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:tB}),Pj={kernelName:jf,backendName:"webgl",kernelFunc:zj};var Bj={kernelName:Hf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return hj(t.input,!0,n)}},Wj=yW({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),Uj={kernelName:qf,backendName:"webgl",kernelFunc:Wj},Vj=yW({opSnippet:"return float(isinf(x));",dtype:"bool"}),jj={kernelName:Xf,backendName:"webgl",kernelFunc:Vj},Gj=yW({opSnippet:"return float(isnan(x));",dtype:"bool"}),Hj={kernelName:Yf,backendName:"webgl",kernelFunc:Gj},Kj=bW({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:nB,dtype:"bool"}),qj={kernelName:Jf,backendName:"webgl",kernelFunc:Kj},Xj=bW({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:rB,dtype:"bool"}),Yj={kernelName:Qf,backendName:"webgl",kernelFunc:Xj};var Zj={kernelName:$f,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.num,o=aB(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},Jj=yW({opSnippet:"if (isnan(x)) return x;\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:iB}),Qj={kernelName:eh,backendName:"webgl",kernelFunc:Jj},$j=yW({opSnippet:"if (isnan(x)) return x;\n  return log(1.0 + x);\n"}),eG={kernelName:th,backendName:"webgl",kernelFunc:$j},tG=bW({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),nG={kernelName:nh,backendName:"webgl",kernelFunc:tG},rG=yW({opSnippet:"return float(!(x >= 1.0));"}),aG={kernelName:rh,backendName:"webgl",kernelFunc:rG},iG=bW({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),oG={kernelName:ah,backendName:"webgl",kernelFunc:iG},sG=Oc((function e(t,n,r,a,i){Fc(this,e),this.variableNames=["x"],this.outputShape=[];var o,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(u,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")})),uG=Oc((function e(t,n,r,a,i){Fc(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(u,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")})),cG={kernelName:ih,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta,c=Cl().getBool("WEBGL_PACK_NORMALIZATION")?new uG(a.shape,i,o,s,u):new sG(a.shape,i,o,s,u);return n.runWebGLProgram(c,[a],a.dtype)}},lG=Oc((function e(t,n,r,a,i){Fc(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(i,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")})),fG={kernelName:oh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta,f=new lG(a.shape,s,u,c,l);return n.runWebGLProgram(f,[a,i,o],a.dtype)}};function hG(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=a.shape.length,u=$c(i,a.shape),c=u,l=Ay(c,s),f=null!=l,h=n.shouldExecuteOnCPU([a]),d=a;if(f){if(h){for(var p=n.texData.get(d.dataId).values,v=new Array(s),m=0;m<v.length;m++)v[m]=a.shape[l[m]];var g=RB(p,a.shape,a.dtype,l,v);d=n.makeTensorInfo(v,a.dtype),n.texData.get(d.dataId).values=g}else d=_W(a,l,n);c=Fy(c.length,s)}Ty("max",c,s);var y,b=Ke(Ny(d.shape,c),2),x=b[0],k=b[1],w=x;if(o&&(w=Ey(x,u)),h){var S=n.texData.get(d.dataId).values,I=oB(S,Kc(k),w,a.dtype);y=n.makeTensorInfo(w,a.dtype),n.texData.get(y.dataId).values=I}else y=function(e,t,n,r){var a=Kc(t),i=TW({inputs:{x:e},attrs:{shape:[Kc(e.shape)/a,a]},backend:r}),o=DW(i,e.dtype,"max",r),s=TW({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(d,k,w,n);return f&&n.disposeIntermediateTensorInfo(d),y}var dG={kernelName:sh,backendName:"webgl",kernelFunc:hG},pG=bW({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:sB}),vG={kernelName:uh,backendName:"webgl",kernelFunc:pG};var mG={kernelName:ch,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;jz(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;Vc(Eg(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c=vg(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&qc(c.inShape,c.outShape))return uW({inputs:{x:a},backend:n});var l=new bU(c,"max",!1);return n.runWebGLProgram(l,[a],a.dtype)}};var gG={kernelName:fh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=mg(a.shape,i,o,[1,1,1],s,c,u),f=new xU(l,"max",!1);return n.runWebGLProgram(f,[a],a.dtype)}},yG=Oc((function e(t){Fc(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,s=i-1-t.padInfo.top,u=o-1-t.padInfo.left,c=i*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),bG=Oc((function e(t){Fc(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,l=t.effectiveFilterWidth,f=u-1-t.padInfo.front,h=c-1-t.padInfo.top,d=l-1-t.padInfo.left,p=u*c*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(f,", ").concat(h,", ").concat(d,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n           wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(p," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var xG={kernelName:hh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=mg(i.shape,o,s,[1,1,1],u,c),f=new xU(l,"max",!0),h=n.runWebGLProgram(f,[i],i.dtype),d=new bG(l),p=n.runWebGLProgram(d,[a,h],i.dtype);return n.disposeIntermediateTensorInfo(h),p}};var kG={kernelName:lh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;jz([i,t.output],"maxPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,f=vg(o.shape,s,u,1,c,l),h=new bU(f,"max",!0),d=n.runWebGLProgram(h,[o],o.dtype),p=new yG(f),v=n.runWebGLProgram(p,[a,d],o.dtype);return n.disposeIntermediateTensorInfo(d),v}};var wG={kernelName:dh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,u=n.includeBatchInIndex,c=r;Vc(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var l=[1,1];Vc(Eg(o,l),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(l,"'")}));var f=vg(a.shape,i,o,l,s),h=function(e,t,n,r){var a=new bU(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");return a=new bU(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(a,u,f,c),d=Ke(h,2);return[d[0],d[1]]}};var SG={kernelName:ph,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.keepDims,o=n.axis,s=r,u=a.shape.length,c=$c(o,a.shape),l=c,f=Ay(l,u),h=null!=f,d=s.shouldExecuteOnCPU([a]),p=[],v=a;if(h){if(d){for(var m=s.texData.get(v.dataId).values,g=new Array(u),y=0;y<g.length;y++)g[y]=a.shape[f[y]];var b=RB(m,a.shape,a.dtype,f,g);v=s.makeTensorInfo(g,a.dtype),s.texData.get(v.dataId).values=b}else v=_W(a,f,s);p.push(v),l=Fy(l.length,u)}Ty("sum",l,u);var x=Ke(Ny(v.shape,l),2),k=x[0],w=x[1],S=k;i&&(S=Ey(k,c));for(var I=function(e,t,n,r){var a=Kc(t),i=TW({inputs:{x:e},attrs:{shape:[Kc(e.shape)/a,a]},backend:r}),o=DW(i,"float32","mean",r),s=TW({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(v,w,S,s),C=0,N=p;C<N.length;C++){var E=N[C];s.disposeIntermediateTensorInfo(E)}return I}};var IG={kernelName:vh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=$c(i,a.shape),c=u,l=Ay(c,s),f=a;null!=l&&(f=PW({inputs:{x:a},backend:n,attrs:{perm:l}}),c=Fy(c.length,a.shape.length)),Ty("min",c,s);var h,d=Ke(Ny(f.shape,c),2),p=d[0],v=TW({inputs:{x:f},backend:n,attrs:{shape:[-1,Kc(d[1])]}}),m=DW(v,v.dtype,"min",n);return h=TW(o?{inputs:{x:m},backend:n,attrs:{shape:Ey(p,u)}}:{inputs:{x:m},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),null!=l&&n.disposeIntermediateTensorInfo(f),h}},CG=bW({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:uB}),NG={kernelName:mh,backendName:"webgl",kernelFunc:CG},EG=Oc((function e(t,n,r){Fc(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=mP(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(i," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")})),TG=Oc((function e(t,n,r){Fc(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=mP(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=OB("rc",a),c=OB("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),f=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),h="reflect"===r?0:1,d="";if(1===a){var p="\n        ".concat(i," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(h,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(h,";\n        }\n        source -= start;\n      ");d="\n        ".concat(i," rc = outputLoc;\n        ").concat(p,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(p,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        }\n      ")}else{var v="\n        ".concat(i," source = rc;\n        ").concat(i," lt = ").concat(i,"(lessThan(source, start));\n        ").concat(i," gte = ").concat(i,"(greaterThanEqual(source, end));\n        ").concat(i," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(h,") +\n                gte * ((end - 1) * 2 - source + ").concat(h,");\n        source -= start;\n      ");d="\n        ".concat(i," rc = outputLoc;\n        ").concat(v,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(v,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(v,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(l,") {\n            ").concat(v,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(d,"\n        setOutput(result);\n      }\n    ")})),AG={kernelName:gh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode,s=Cl().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new TG(a.shape,i,o):new EG(a.shape,i,o);return n.runWebGLProgram(s,[a],a.dtype)}},RG=bW({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),FG={kernelName:yh,backendName:"webgl",kernelFunc:RG},DG=Oc((function e(t,n,r){Fc(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")})),OG=bW({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),LG={kernelName:Cf,backendName:"webgl",kernelFunc:OG},_G="return a - b;",MG=bW({opSnippet:_G,packedOpSnippet:_G,supportsComplex:!0,cpuKernelImpl:EB}),zG={kernelName:yd,backendName:"webgl",kernelFunc:MG};function PG(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=$c([r.dim],a.shape),o=hG({inputs:{x:a},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),s=Ey(o.shape,i),u=TW({inputs:{x:o},backend:n,attrs:{shape:s}}),c=MG({inputs:{a:a,b:u},backend:n}),l=aj({inputs:{x:c},backend:n}),f=MW({inputs:{x:l},backend:n,attrs:{axis:i,keepDims:!1}}),h=TW({inputs:{x:f},backend:n,attrs:{shape:s}}),d=OG({inputs:{a:l,b:h},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),d}var BG={kernelName:od,backendName:"webgl",kernelFunc:PG};var WG={kernelName:bh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized,u=s?a:PG({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=u.shape[0],l=u.shape[1],f=new DG(c,l,i),h=[[o]],d=n.runWebGLProgram(f,[u],"int32",h);return s||n.disposeIntermediateTensorInfo(u),d}};var UG={kernelName:kh,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var i=r.texData.get(a.dataId),o=Ke(lB(i.values,a.shape,a.dtype),2),s=o[0],u=o[1];return r.makeTensorInfo(u,a.dtype,s)}return t=Cl().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new eW(a.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new WB(a.shape,"if (isnan(x)) return x;\n  return -x;\n"),r.runWebGLProgram(t,[a],a.dtype)}},VG=Yb;var jG={kernelName:Sh,backendName:"webgl",kernelFunc:function(e){Ld("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=n.readSync(a.dataId),l=n.readSync(i.dataId),f=VG(c,l,o,s,u).selectedIndices;return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}},GG=Zb;var HG={kernelName:Ih,backendName:"webgl",kernelFunc:function(e){Ld("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize,l=n.readSync(a.dataId),f=n.readSync(i.dataId),h=GG(l,f,o,s,u,c),d=h.selectedIndices,p=h.validOutputs;return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},KG=Jb;var qG={kernelName:Ch,backendName:"webgl",kernelFunc:function(e){Ld("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma,l=n.readSync(a.dataId),f=n.readSync(i.dataId),h=KG(l,f,o,s,u,c),d=h.selectedIndices,p=h.selectedScores;return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([p.length],"float32",new Float32Array(p))]}},XG=Oc((function e(t,n,r,a){Fc(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")})),YG={kernelName:Eh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue,u=Kc(a.shape),c=new XG(u,i,o,s),l=TW({inputs:{x:a},backend:n,attrs:{shape:[u]}}),f=n.runWebGLProgram(c,[l],a.dtype);n.disposeIntermediateTensorInfo(l);var h=TW({inputs:{x:f},backend:n,attrs:{shape:[].concat(Et(a.shape),[i])}});return n.disposeIntermediateTensorInfo(f),h}};function ZG(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=UU({inputs:{input:r},backend:n}),i=ZG({inputs:{x:a},backend:n}),o=nV({inputs:{input:r},backend:n}),s=ZG({inputs:{x:o},backend:n}),u=lW({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return vj({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var JG={kernelName:Td,backendName:"webgl",kernelFunc:ZG};var QG={kernelName:Nh,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var i=UU({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=nV({inputs:{input:a},backend:r}),u=ZG({inputs:{x:s},backend:r}),c=lW({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return vj({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var $G={kernelName:Th,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return oj({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){jc(a,e.shape,"All tensors passed to stack must have matching shapes"),Vc(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=iV({inputs:t.map((function(e){var t=oj({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}},eH=Oc((function e(t,n,r){Fc(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=mP(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")})),tH=Oc((function e(t,n,r){Fc(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,i=mP(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=OB("rc",a),c=OB("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),f=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),h=["".concat(i," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(l,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(l,") {")],d=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",v=0,m=1===a?2:4;v<m;v++)p+="\n        ".concat(h[v],"\n        if (").concat(d,") {\n          result[").concat(v,"] = float(value);\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(v,"] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        }\n      ");p+=1===a?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")})),nH=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;if(0===Kc(a.shape)){var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]}));return vj({backend:n,attrs:{shape:s,value:o,dtype:a.dtype}})}var u=Cl().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new tH(a.shape,i,o):new eH(a.shape,i,o),c=[[o]];return n.runWebGLProgram(u,[a],a.dtype,c)},rH={kernelName:Ah,backendName:"webgl",kernelFunc:nH},aH=bW({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),iH={kernelName:Rh,backendName:"webgl",kernelFunc:aH};var oH={kernelName:Dh,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims,u=i.shape.length,c=[],l=$c(o,i.shape),f=l,h=Ay(f,u),d=i;if(null!=h&&(d=PW({inputs:{x:i},backend:r,attrs:{perm:h}}),f=Fy(f.length,u),c.push(d)),Ty("prod",f,u),r.shouldExecuteOnCPU([d])){var p=r.texData.get(d.dataId).values,v=hB(d.shape,d.dtype,p,f),m=v.outVals,g=v.outShape,y=v.outDtype;t=r.makeTensorInfo(g,y,m)}else{var b=Ke(Ny(d.shape,f),2),x=b[0],k=Kc(b[1]),w=TW({inputs:{x:d},backend:r,attrs:{shape:[-1,k]}}),S=DW(w,Up(i.dtype),"prod",r);t=TW({inputs:{x:S},backend:r,attrs:{shape:x}}),c.push(w),c.push(S)}if(s){c.push(t);var I=Ey(t.shape,l);t=TW({inputs:{x:t},backend:r,attrs:{shape:I}})}return c.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}},sH=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=dB(r,a,i,o);return t.makeTensorInfo([s.length],o,s)},uH={kernelName:Oh,backendName:"webgl",kernelFunc:sH},cH=yW({opSnippet:"return 1.0 / x;"}),lH={kernelName:_h,backendName:"webgl",kernelFunc:cH},fH=yW({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),hH={kernelName:Mh,backendName:"webgl",kernelFunc:fH},dH=yW({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),pH={kernelName:Vh,backendName:"webgl",kernelFunc:dH},vH=Oc((function e(t,n,r,a,i){Fc(this,e),this.variableNames=["A"],this.outputShape=[];var o=Ke(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var f,h=[a&&n>1?u-1:u,a&&r>1?c-1:c],d=[a&&n>1?n-1:n,a&&r>1?r-1:r];f=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(h[0]/d[0],",\n          ").concat(h[1]/d[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")})),mH=Oc((function e(t,n,r,a,i){Fc(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=Ke(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var f,h=[a&&n>1?u-1:u,a&&r>1?c-1:c],d=[a&&n>1?n-1:n,a&&r>1?r-1:r];f=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(h[0]/d[0],",\n          ").concat(h[1]/d[1],",\n          ").concat(h[1]/d[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}));var gH={kernelName:Wh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=Ke(r.size,2),u=s[0],c=s[1],l=Cl().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new mH(a.shape,u,c,i,o):new vH(a.shape,u,c,i,o);return n.runWebGLProgram(l,[a],"float32")}},yH=Oc((function e(t,n,r){Fc(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=Ke(n,3),i=a[1],o=a[2],s=Ke(t,3),u=s[1],c=s[2],l=[r&&u>1?i-1:i,r&&c>1?o-1:o],f=[r&&u>1?u-1:u,r&&c>1?c-1:c],h=l[0]/f[0],d=l[1]/f[1],p=1/h,v=1/d,m=2*Math.ceil(p)+2,g=2*Math.ceil(v)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(h,");\n        const float widthScale = float(").concat(d,");\n\n        const float invHeightScale = float(").concat(p,");\n        const float invWidthScale = float(").concat(v,");\n\n        const int winHeight = int(").concat(m,");\n        const int winWidth = int(").concat(g,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(i-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var bH={kernelName:Uh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new yH(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},xH=Oc((function e(t,n,r,a,i){Fc(this,e),this.variableNames=["A"],this.outputShape=[];var o=Ke(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var f,h=[a&&n>1?u-1:u,a&&r>1?c-1:c],d=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";f=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(h[0]/d[0],",\n          ").concat(h[1]/d[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(p,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")})),kH=Oc((function e(t,n,r,a,i){Fc(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=Ke(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var f,h=[a&&n>1?u-1:u,a&&r>1?c-1:c],d=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";f=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(h[0]/d[0],",\n          ").concat(h[1]/d[1],",\n          ").concat(h[1]/d[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(p,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}));var wH={kernelName:Ph,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=Ke(r.size,2),u=s[0],c=s[1],l=Cl().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new kH(a.shape,u,c,i,o):new xH(a.shape,u,c,i,o);return n.runWebGLProgram(l,[a],a.dtype)}},SH=Oc((function e(t,n,r){Fc(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=Ke(n,3),i=a[1],o=a[2],s=Ke(t,3),u=s[1],c=s[2],l=[r&&u>1?i-1:i,r&&c>1?o-1:o],f=[r&&u>1?u-1:u,r&&c>1?c-1:c],h=l[0]/f[0],d=l[1]/f[1],p=1/h,v=1/d,m=2*Math.ceil(p)+2,g=2*Math.ceil(v)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(h,");\n        const float widthScale = float(").concat(d,");\n\n        const float invHeightScale = float(").concat(p,");\n        const float invWidthScale = float(").concat(v,");\n\n        const int winHeight = int(").concat(m,");\n        const int winWidth = int(").concat(g,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(l[0],") *\n                (float(dyR) / float(").concat(f[0],"));\n\n            float sourceFracCol =\n                float(").concat(l[1],") *\n                  (float(dyC) / float(").concat(f[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var IH={kernelName:Bh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new SH(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},CH=Oc((function e(t,n){Fc(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),i=mP(r);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")})),NH=Oc((function e(t,n){Fc(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=OB("rc",r),i="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),o="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=mP(r);function u(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(i,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(i,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return u(e)}(a.slice()),";\n          if(").concat(i,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",u(e)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            if(").concat(i,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}));var EH={kernelName:jh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims,o=a.shape.length,s=$c(i,a.shape);if(0===o)return uW({inputs:{x:a},backend:n});var u=Cl().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new NH(a.shape,s):new CH(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}},TH=Oc((function e(t,n){Fc(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var i="";i="number"===typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(i,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),AH={kernelName:Rd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,u=r,c=new TH(a.shape,o),l=Ke(Zx(s,a.shape[1],a.shape[2]),2),f=[[l[0],l[1],Math.sin(i),Math.cos(i)]];return u.runWebGLProgram(c,[a],a.dtype,f)}},RH=yW({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),FH={kernelName:Gh,backendName:"webgl",kernelFunc:RH},DH=yW({opSnippet:"return inversesqrt(x);",cpuKernelImpl:pB}),OH={kernelName:Hh,backendName:"webgl",kernelFunc:DH},LH=Oc((function e(t,n,r,a,i,o){Fc(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=mP(i.length),u=mP(o.length),c="";1===r?c="i":2===r&&(c="i, j");var l="getIndices(".concat(c,")"),f="";1===a?f="i":2===a&&(f="i, coords[1]");var h="getUpdates(".concat(f,")"),d=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(i,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(l,");\n              flattenedIndex += index * ").concat(d,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(h,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")}));var _H={kernelName:Kh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=rk(0,a,o),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,f=s.strides,h=s.outputSize,d=[h/l,l];if(0===h)return n.makeTensorInfo(o,a.dtype);var p=TW({inputs:{x:a},backend:n,attrs:{shape:[c,u]}}),v=TW({inputs:{x:i},backend:n,attrs:{shape:[c,l]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0])),g=new LH(c,u,p.shape.length,v.shape.length,f,d),y=n.runWebGLProgram(g,[v,p,m],v.dtype),b=TW({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(m),b}},MH=Oc((function e(t,n,r,a){Fc(this,e),this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,r];var i="for (int i = 0; i < ".concat(Math.ceil(Math.log2(n+1)),"; ++i) { if (left >= right) break;"),o=2===Cl().getNumber("WEBGL_VERSION")?"while (left < right) {":i,s="left"===a?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(o,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(s," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}));var zH={kernelName:qh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,s=new MH(a.shape[0],a.shape[1],i.shape[1],o),u=[[a.shape[1]]];return n.runWebGLProgram(s,[a,i],"int32",u)}},PH=Oc((function e(t,n,r){var a,i;if(Fc(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)i="resRC",a="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],c=0;c<n.length;c++)u.push("".concat(o[c])),c<t&&s.push("".concat(o[c]));a=s.join(),i=u.join()}var l=mP(r);this.userCode="\n      void main() {\n        ".concat(l," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")}));var BH={kernelName:Xh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=new PH(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],Wp(a.dtype,i.dtype))}},WH=yW({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(ak,";\n  float scale = ").concat(ik,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),UH={kernelName:Yh,backendName:"webgl",kernelFunc:WH},VH=yW({opSnippet:"if (isnan(x)) return x;\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:mB}),jH={kernelName:ed,backendName:"webgl",kernelFunc:VH},GH=yW({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),HH={kernelName:$h,backendName:"webgl",kernelFunc:GH},KH=yW({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),qH={kernelName:Jh,backendName:"webgl",kernelFunc:KH},XH=yW({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),YH={kernelName:Qh,backendName:"webgl",kernelFunc:XH},ZH=yW({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),JH={kernelName:td,backendName:"webgl",kernelFunc:ZH},QH={kernelName:ad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;Vc(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=[[0,0]];u.push.apply(u,Et(o));for(var c=1+i.length;c<a.shape.length;++c)u.push([0,0]);var l=[],f=nH({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),h=Jx(f.shape,i,s,!1),d=Qx(h.length,i.length,!1),p=$x(f.shape,i,s,!1),v=TW({inputs:{x:f},backend:n,attrs:{shape:h}}),m=PW({inputs:{x:v},backend:n,attrs:{perm:d}}),g=TW({inputs:{x:m},backend:n,attrs:{shape:p}});return l.push(f),l.push(v),l.push(m),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}};var $H={kernelName:sd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.readSync(r.dataId),u=n.readSync(a.dataId),c=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],f=Ke(bB(s,r.shape,r.dtype,u,a.dtype,c,l),5),h=f[0],d=f[1],p=f[2],v=f[3],m=f[4];return[n.makeTensorInfo(d,r.dtype,h),n.makeTensorInfo([d[0]],a.dtype,p),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};var eK={kernelName:ud,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),u=Array.from(n.readSync(i.dataId)),c=Ke(xB(s,r.shape,r.dtype,o,u),3),l=c[0],f=c[1],h=c[2];return[n.makeTensorInfo(f,r.dtype,l),n.makeTensorInfo([h.length],i.dtype,new Int32Array(h))]}};var tK={kernelName:cd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=Ke(kB(o,r.shape,r.dtype,s,u,!0),2),l=c[0],f=c[1];return n.makeTensorInfo(f,r.dtype,l)}};var nK={kernelName:ld,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=Ke(kB(o,r.shape,r.dtype,s,u),2),l=c[0],f=c[1];return n.makeTensorInfo(f,r.dtype,l)}};var rK={kernelName:fd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,u=rk(0,a,s),c=u.sliceRank,l=u.numUpdates,f=u.sliceSize,h=u.strides,d=u.outputSize;if("string"===i.dtype){var p=n.bufferSync(a),v=n.bufferSync(i),m=lp(n.readSync(o.dataId)[0]),g=vB(p,v,s,d,f,l,c,h,m,false);return n.makeTensorInfo(s,g.dtype,g.values)}var y=new LH(l,c,a.shape.length,i.shape.length,h,[d,1],false),b=n.runWebGLProgram(y,[i,a,o],i.dtype),x=TW({inputs:{x:b},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(b),x}};var aK={kernelName:id,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=$c(r.axis,a.shape)[0],s=Ik(a,i,o),u=a.shape.length,c=new Array(u).fill(0),l=a.shape.slice();return s.map((function(e){var t=Et(l);t[o]=e;var r=LU({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[o]+=e,r}))}},iK="return sqrt(x);",oK=yW({opSnippet:iK,packedOpSnippet:iK,cpuKernelImpl:wB}),sK={kernelName:nd,backendName:"webgl",kernelFunc:oK},uK={kernelName:dd,backendName:"webgl",kernelFunc:yW({opSnippet:"return x * x;"})},cK="return (a - b) * (a - b);",lK=bW({opSnippet:cK,packedOpSnippet:cK}),fK={kernelName:hd,backendName:"webgl",kernelFunc:lK};var hK={kernelName:Ad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=UB+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),o=new WB(a.shape,i);return r.runWebGLProgram(o,[a],a.dtype)}},dK=Oc((function e(t,n,r){Fc(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,i=mP(r.length),o=mP(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(t,");\n      ").concat(i," strides = ").concat(i,"(").concat(n,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}));var pK={kernelName:pd,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.begin,s=a.end,u=a.strides,c=a.beginMask,l=a.endMask,f=a.ellipsisMask,h=a.newAxisMask,d=a.shrinkAxisMask,p=Ym(i.shape,o,s,u,c,l,f,h,d),v=p.finalShapeSparse,m=p.finalShape,g=p.isIdentity,y=p.sliceDim0,b=p.isSimpleSlice,x=p.begin,k=p.end,w=p.strides;if(g)t=TW({inputs:{x:i},backend:r,attrs:{shape:m}});else if(y||b){Vc(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var S=Hm(x,k,w),I=LU({inputs:{x:i},backend:r,attrs:{begin:x,size:S}});t=TW({inputs:{x:I},backend:r,attrs:{shape:m}}),r.disposeIntermediateTensorInfo(I)}else{if(r.shouldExecuteOnCPU([i])){var C=r.readSync(i.dataId),N=gm(i.shape,i.dtype,C),E=SB(v,N,w,x);t=r.makeTensorInfo(m,i.dtype,E.values)}else{var T=new dK(x,w,v);t=r.runWebGLProgram(T,[i],i.dtype)}}var A=TW({inputs:{x:t},backend:r,attrs:{shape:m}});return r.disposeIntermediateTensorInfo(t),A}};var vK={kernelName:vd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,u=r.padWidth,c=r.preserveShortSequences,l=t.data,f=t.dataSplits,h=n.readSync(l.dataId),d=n.readSync(f.dataId),p=Ke(IB(h,d,a,i,o,s,u,c),2),v=p[0],m=p[1];return[n.makeTensorInfo([v.length],"string",v),n.makeTensorInfo(f.shape,"int32",m)]}};var mK={kernelName:md,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=n.readSync(a.dataId),s=n.readSync(i.dataId)[0],u=Ke(CB(o,s,r),3),c=u[0],l=u[1],f=u[2],h=l.length;return[n.makeTensorInfo([h,2],"int32",c),n.makeTensorInfo([h],"string",l),n.makeTensorInfo([2],"int32",new Int32Array(f))]}};var gK={kernelName:gd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=n.readSync(a.dataId),o=NB(i,r);return n.makeTensorInfo(a.shape,"int32",o)}},yK=yW({opSnippet:"return tan(x);"}),bK={kernelName:bd,backendName:"webgl",kernelFunc:yK},xK=yW({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),kK={kernelName:xd,backendName:"webgl",kernelFunc:xK},wK=Oc((function e(t,n){Fc(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var i=mP(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")}));function SK(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;if("string"===a.dtype||a.shape.length>5){var o=n.readSync(a.dataId),s="string"===a.dtype?o.map((function(e){return lp(e)})):o,u=gm(a.shape,a.dtype,s),c=TB(u,i);return n.makeTensorInfo(c.shape,c.dtype,c.values)}var l=new wK(a.shape,i);return n.runWebGLProgram(l,[a],a.dtype)}var IK={kernelName:kd,backendName:"webgl",kernelFunc:SK},CK=Oc((function e(t){Fc(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "})),NK=Oc((function e(t){Fc(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}));function EK(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function TK(e){for(var t=1;t<e;)t*=2;return t}var AK={kernelName:wd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=Cl().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=Cl().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=a.shape,l=c[c.length-1];if(n.shouldExecuteOnCPU([a])||l<s||i>u){var f=n.readSync(a.dataId),h=Ke(AB(f,c,a.dtype,i,o),2),d=h[0],p=h[1];return[n.makeTensorInfo(d.shape,d.dtype,d.values),n.makeTensorInfo(p.shape,p.dtype,p.values)]}if(0===i)return c[c.length-1]=0,[n.makeTensorInfo(c,a.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(1===l)return[a,vj({attrs:{shape:c,dtype:"int32",value:0},backend:n})];var v=n.texData.get(a.dataId),m=null!==v&&v.isPacked,g=m?n.unpackTensor(a):a,y=Kc(c)/l,b=TW({inputs:{x:g},attrs:{shape:[y,l]},backend:n});m&&EK(n,g);for(var x=TK(i),k=TK(l),w=null,S=function(){return null===w?[b,b]:[b,w]},I=function(e,t,r){var a=S(),i=new CK(r),o=[[l],[null===w?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=w;w=n.runWebGLProgram(i,a,"int32",o),EK(n,s)},C=1;C<x;C*=2)for(var N=2*C,E=C;E>=1;E/=2)I(N,E,[y,k]);for(var T=k;T>x;T/=2){var A=S(),R=new NK([y,T/2]),F=[[l],[null===w?1:0],[x]],D=w;w=n.runWebGLProgram(R,A,"int32",F),EK(n,D);for(var O=x/2,L=2*O,_=O;_>=1;_/=2)I(L,_,w.shape)}var M=w;w=LU({inputs:{x:w},backend:n,attrs:{begin:0,size:[y,i]}}),EK(n,M);var z=Oj({inputs:{x:b,indices:w},backend:n,attrs:{axis:1,batchDims:1}});EK(n,b);var P=c.slice(0,-1);P.push(i),M=w,w=TW({inputs:{x:w},attrs:{shape:P},backend:n}),EK(n,M);var B=z;return z=TW({inputs:{x:z},attrs:{shape:P},backend:n}),EK(n,B),[z,w]}},RK=Oc((function e(t,n,r,a,i,o){Fc(this,e),this.variableNames=["Image","Transforms"],this.outputShape=o;var s,u="nearest"===r?1:2;switch(a){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(i,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(i,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(u," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}));var FK={kernelName:Sd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.transforms,o=r.interpolation,s=r.fillMode,u=r.fillValue,c=r.outputShape,l=Ke(a.shape,4),f=l[0],h=l[1],d=l[2],p=l[3],v=Ke(null!=c?c:[h,d],2),m=v[0],g=v[1],y=new RK(h,d,o,s,u,[f,m,g,p]);return n.runWebGLProgram(y,[a,i],"float32")}};var DK={kernelName:Cd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;jz(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var o=r.readSync(i.dataId),s=FB(o,a,i.shape,i.dtype),u=s.outputValues,c=s.outputShape,l=s.indices;return[r.makeTensorInfo(c,i.dtype,u),r.makeTensorInfo([l.length],"int32",l)]}};var OK={kernelName:Nd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,s=o.shape.length,u=a.shape[i],c=new Array(s-1),l=0,f=0;f<s;f++)f!==i&&(c[l++]=o.shape[f]);var h=[],d=new Array(s).fill(0),p=o.shape.slice();p[i]=1;for(var v=new Array(u),m=0;m<v.length;m++){d[i]=m;var g=LU({inputs:{x:o},backend:n,attrs:{begin:d,size:p}}),y=TW({inputs:{x:g},backend:n,attrs:{shape:c}});v[m]=y,h.push(g)}return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}},LK=Oc((function e(t,n){Fc(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),c=r%4,l="\n        sumValue += dot(values, segFilter);\n    ",f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));var h="";i%r>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(f,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(h,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}));for(var _K={kernelName:Ed,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments,s=a.shape.length,u=[],c=0,l=Ay([c],s),f=a;null!=l&&(f=PW({inputs:{x:a},backend:n,attrs:{perm:l}}),u.push(f),c=Fy(1,s)[0]);var h=function(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}(f.shape,c,o),d=Kc([f.shape[c]]),p=TW({inputs:{x:f},backend:n,attrs:{shape:[-1,d]}});u.push(p);var v=function e(t,r,a,i,o){var s=t.shape[0],c=t.shape[1],l=function(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=ll(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=ll(e,n+1);return n}(c,o),f=new LK({windowSize:l,inSize:c,batchSize:s,numSegments:o},r),h=n.compileAndRun(f,[t,a],i);if(u.push(h),h.shape[1]===o)return h;var d=sH({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),p=SK({inputs:{x:d},backend:n,attrs:{reps:[c/l]}});return u.push(d),u.push(p),e(h,r,p,i,o)}(p,"unsortedSegmentSum",i,Up(a.dtype),o),m=TW({inputs:{x:v},backend:n,attrs:{shape:h}}),g=m;if(null!=l){u.push(m);var y=Ry(l);g=PW({inputs:{x:g},backend:n,attrs:{perm:y}})}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}},MK=0,zK=[UW,jW,HW,qW,ZW,$W,eU,tU,sU,uU,lU,hU,pU,mU,yU,kU,wU,CU,NU,EU,RU,MU,zU,PU,jU,KU,YU,fW,QU,oV,dV,yV,bV,xV,kV,SV,CV,EV,AV,LV,_V,MV,PV,UV,GV,HV,qV,YV,ZV,QV,$V,tj,rj,ij,sj,lj,dj,gj,bj,wj,Ij,Ej,Tj,Aj,Fj,Lj,Mj,Pj,cW,Bj,rV,Uj,jj,Hj,pW,qj,Yj,Zj,Qj,eG,nG,aG,oG,cG,fG,dG,vG,mG,gG,xG,kG,wG,SG,IG,NG,AG,FG,WG,EW,UG,jG,HG,qG,WU,YG,QG,$G,rH,iH,gW,oH,uH,VU,LG,lH,hH,pH,AW,gH,bH,wH,IH,EH,AH,FH,OH,_H,zH,BH,UH,jH,HH,qH,YH,_U,BG,JH,QH,$H,eK,tK,nK,rK,aK,sK,uK,fK,hK,pK,vK,mK,gK,zG,zW,bK,kK,IK,AK,FK,BW,DK,OK,_K,JG];MK<zK.length;MK++){Wd(zK[MK])}var PK,BK,WK,UK,VK,jK,GK,HK=_e.b(PK||(PK=i(["\n  font-weight: ","; ;\n"])),(function(e){return e.weight||"bold"})),KK=_e.div(BK||(BK=i(["\n  h1 {\n    margin-bottom: 1rem;\n    @media (max-width: 800px) {\n      font-size: 1.3rem;\n    }\n  }\n  button {\n    margin-bottom: 1rem;\n  }\n  .stepContent {\n    margin-bottom: 1rem;\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    justify-content: space-between;\n    img {\n      max-width: 300px;\n      @media (max-width: 1100px) {\n        width: 300px;\n      }\n    }\n  }\n  .textWrapper {\n    width: 50%;\n    text-align: justify;\n    p {\n      font-size: ",";\n      line-height: 1.4em;\n      margin-bottom: 1rem;\n    }\n    @media (max-width: 800px) {\n      font-size: 10px;\n      width: 100%;\n    }\n  }\n  &.results {\n    .stepContent > img {\n      opacity: 0.2;\n      width: 300px;\n    }\n  }\n  &.upload {\n    .UploadButton {\n      margin-bottom: 1rem;\n    }\n    .textWrapper {\n      @media (max-width: 800px) {\n        display: none;\n      }\n    }\n  }\n"])),(function(e){return e.size||"16px"})),qK=_e.div(WK||(WK=i(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),XK=_e.div(UK||(UK=i(["\n  position: relative;\n  padding-top: 4rem;\n  padding-left: 2rem;\n  z-index: 1;\n  .diagramImage {\n    width: 150px;\n    position: absolute;\n    top: -1rem;\n    left: 0;\n    z-index: -1;\n    @media (max-width: 800px) {\n      display: none;\n    }\n  }\n  @media (max-width: 800px) {\n    padding: 0;\n  }\n"]))),YK=function(){var e=Ke((0,t.useState)(null),2),n=e[0],r=e[1],a=Ke((0,t.useState)(null),2),i=a[0],o=a[1],s=Ke((0,t.useState)(0),2),u=s[0],c=s[1],l=Ke((0,t.useState)(!1),2),f=l[0],h=l[1],d=Ke((0,t.useState)(!1),2),p=d[0],v=d[1],m=function(){var e=Ue(Xe().mark((function e(t){var n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c((function(e){return e+1})),h(!0),e.next=4,fetch("http://127.0.0.1:5000/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file:t})});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,h(!1),setTimeout((function(){o(r.diagnosis)}),2e3);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,t.useEffect)((function(){null!==i?c((function(e){return e+1})):console.log("lol")}),[i]);var g=(0,t.useCallback)((function(e){var t=new FileReader;t.onabort=function(){return console.log("file reading was aborted")},t.onerror=function(){return console.log("file reading has failed")},t.onload=function(){var e=t.result;r(e)},t.readAsDataURL(e[0])}),[]);return p?(0,Qe.jsx)(qK,{children:(0,Qe.jsx)("h1",{children:"Thank you for using our tool, we will get in contact with you soon"})}):(0,Qe.jsxs)(ru,{setCurrentStep:c,currentStep:u,isPredicitng:f,result:i,photo:n,getPrediction:m,children:[(0,Qe.jsxs)(KK,{label:"Welcome",children:[(0,Qe.jsxs)("h1",{children:["Welcome to the Diabetic ",(0,Qe.jsx)(HK,{children:"Retinopathy Detection Tool"})]}),(0,Qe.jsxs)("div",{className:"stepContent",children:[(0,Qe.jsxs)("div",{className:"textWrapper",children:[(0,Qe.jsxs)("p",{children:[(0,Qe.jsx)(HK,{weight:600,children:"Diabetic retinopathy"})," is the leading cause of blindness in the working-age population of the developed world. It is estimated to affect over 93 million people."]}),(0,Qe.jsx)("p",{children:"Currently, detecting DR is a time-consuming and manual process that requires a trained clinician to examine and evaluate digital color fundus photographs of the retina."}),(0,Qe.jsxs)("p",{children:["This tool is developed and maintained by a team of students in"," ",(0,Qe.jsx)(HK,{weight:600,children:"The Faculty of Computing and Data Science at Alexandria University, Egypt"}),". It aims to help medical professionals diagnose patients suffering from Diabectic Retinopathy using the power of Machine Learning."]})]}),(0,Qe.jsx)("img",{src:rt,alt:""})]})]}),(0,Qe.jsxs)(KK,{size:"1.3em",label:"How to use?",children:[(0,Qe.jsx)("h1",{children:(0,Qe.jsx)(HK,{children:"How to use this tool"})}),(0,Qe.jsxs)("div",{className:"stepContent",children:[(0,Qe.jsxs)("div",{className:"textWrapper",children:[(0,Qe.jsx)("p",{children:"This model utilizes image classification, pattern recognition, and machine learning to analyse retinal photographs and detect diabetic retinopathy."}),(0,Qe.jsxs)("p",{children:["You are required to upload a",(0,Qe.jsx)(HK,{children:" clear color fundus retinal photograph."})]}),(0,Qe.jsx)("p",{children:(0,Qe.jsx)(HK,{children:"You can find an example photo to the right."})})]}),(0,Qe.jsx)("img",{src:at,alt:""})]})]}),(0,Qe.jsxs)(KK,{label:"Upload Photo",className:"upload",children:[(0,Qe.jsx)(nt,{upload:!0,setPhoto:r,reversed:!0,color:"white",text:"#15668a",Icon:xt,children:"Upload Photo"}),(0,Qe.jsxs)("div",{className:"stepContent",children:[(0,Qe.jsx)("div",{className:"textWrapper",children:(0,Qe.jsx)(mc,{onDrop:g,children:function(e){var t=e.getRootProps,n=e.getInputProps;return(0,Qe.jsx)("section",{children:(0,Qe.jsxs)("div",Be(Be({},t()),{},{children:[(0,Qe.jsx)("input",Be({},n())),(0,Qe.jsx)(Ct,{}),(0,Qe.jsx)("p",{children:"Drop photo here"})]}))})}})}),(0,Qe.jsx)("img",{src:n||it,alt:""})]})]}),(0,Qe.jsxs)(KK,{size:"1.3em",label:"",children:[(0,Qe.jsx)("h1",{children:(0,Qe.jsx)(HK,{children:"Please wait while you photo is being processed..."})}),(0,Qe.jsxs)("div",{className:"stepContent",children:[(0,Qe.jsxs)(XK,{className:"textWrapper",children:[(0,Qe.jsx)("img",{className:"diagramImage",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALEAAACxCAYAAACLKVzFAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAl3SURBVHgB7d1RbhPJFsbxE+dK6bzBCwoJ0nVWAKxgzAomWcHNrGDCCsisYGAF+K6AsIJ4VkBYQXwl4iBe4I0EKc49B5dHJuMOVdXVdlf7/5OsQNIQZvgoV39dXS0CAAAAAAAAAACQsTUJdHFx0dMP/9FX9/tvsLZ2fHNz8/bhw4dDAZbAO8RnZ2f3iqJ4oz/szfnycDweP9/Z2TkWYME6vgdqgP+U+QE23U6n88aN0sBCeYX4/Px8Tz8ceBz6QoAF8wqxjrK/ip/eaDT6twAL5Dud6HoeZyd63scCKXjPiYGmIsTIHiFG9ggxskeIkT1CjOwRYmSPECN7hBjZI8TIHiFG9ggxskeIkT1CjOwRYmSPECN7hBjZI8TIHiFG9ggxskeIkT1CjOwRYmSPECN7hBjZI8TIHiFG9ggxskeIkT1CjOwRYmTvXwLU6OLi4kDcg4pubm6+rK2tneqP/0j5oCJCjFpoeC209qCiJ9PPaYDF/fxAv25BPpIEmE4gOXvSlgVYQ/vkjsNejEajQ0mAECO5oihe/iTAU0keVESIkZROE45kMgf+KQ36vQ8fPviE/U6EGMl8/PjRpgdBo+v6+vpjqYgQIwl7EKfOg/+UcEOpiHYClVkToR/eSCCr3K6urt5LRYzEqMQF+ERf9ySQzolf7u7ufpGKCDGiTas0CXhY55T+ulPtif+QBJhOIJpVaTJzMSPAUEfhfUmEkRhRQqq0W4b6esZlZyyVVWk6HYi6UKGV2v6DBw+GkhAjMYJUqNLsRO5QA3wqiRFieIut0pyjra2tV1IDQgwvVao0Hblfpmoi5iHE8FKlStve3n4uNSLE+KnRaOS7Ku22pFVaGdoJ3MlVab9LuKEkrtLKEGKUalqVVobpBOb69OnTk6ZVaWUIMf7Bmojr6+vGVWllCDF+MFOldSVQ3VVaGUKMHzS5SitDiPG3pldpZWgn8F0OVVoZQoxsqrQyTCdWXE5VWhlCvMJyq9LKMJ0I5CooW1Nr+yXYj7u2CYj78nC6ad54PH7/7du3QYobIetQtUrTJmLhVVoZQuzBbogsisI2BvlFXz37nNsc77au+/xep9Oxe9AsLAP9eV9PfP4rDeL2SutKoGVWaWWYTtzBwmtn7RrGM5nsbNOTcD199fX3OdNXzD1pyeVapZUhxCXOz8/3ZsIbvBB8jq64MKfYfyyW/aPUIGZZpZUhxHPYSKXTATvhSRHe27paS71zvexCxeyVNmVVWhMDbAjxDDd9OIkcqUK90FBFVVsx2lCllSHEjgV4Y2PDztZ7siAaqkP9R/NaataWKq0MIXY2NzdfR57sVHVQZ5BzXJUWihDL5GRH/8L2ZHlqC3KOq9JCrXyI3QlWkm33K0oe5LZVaWVWOsRWo0kzAjyVLMhtrNLKrOwVOzdXrBKYL/qW29cqbmCXmu0TdvnZTUt6EvEW7liQRUP0m0TKfVVaqJUMcZXdbJStjbjrjP2t+x4HMhnluxIuOshWpWkT0coqrczKTSesSpPIs3WZvNU+9amcNIB9/fBM4p9JcaBz2jfuz+vFNvvTAJ9InMZXaWVWLsRWpUl8gIPmiu7Y6CDryGiXvt/9bM2FBd1O4qShe6XVbc3nILuKJf4XAXr6P+QvaaAKTYTNeZ/GnuxU6Wpn2DLPY339pfPw6fJOe/TsYw37gUReIndV2lPJ2MrMiStWaXtVztbt1+r3txG5SpBtmeehvWY/WbIk1FdWVVqZlZhOVKnSLDQp3lmqTi1qMJTMqrQyrQ+xvZXr229slZb0ZKdJQW7yqrRQrQ5xxSqtX8fJThOCnGuVVqa1Ia5SpdnJzuXlZW3rBpYc5GyrtDKtDXGVKs1Oduq+wXNJQT7KuUor08oQV1iVZsFd2MnOTJAHUi/77zpoY4BN60JcpUobj8e/Lfpkx76fvizIRzIJW2oDmXTcjbrbOqVWhbjiqrSjnZ2dY1kSN0raRYe+pDGUyejbihrtLq0JcdUqrQlvtW5UtkU/u+6ixlDC2Eg+kMlV0902j76zWnHFrkqVpmE51rP1Rs0V3chpDcKr2R2HZha42+fsz27LQU/drkPH2qi8b+qOQ3XKPsRVV6V9/fo1et3uIrhA9wWlsp9OVF2VtoojV9tkHeJcqjTUK9sQ51aloT5ZhjjnKg3pZXdiV/EGz1Zedl11WYW4bVUa0shmOmFVWuxuNpJBlYZ42YzERVHYjZBRu9kIVVqrZTESuyYiZpd1qrQV0PgQV9kYmiptNTQ6xLYZSOzG0EKVtjIaG2LXRERvDE2VtjoaeWJHlYYQjRuJqdIQqnEjMVUaQjVqJKZKQ4zGhJgqDbEaEWKqNFSx9BBTpaGqJpzYUaWhkqWOxG5xe1fCUaXhb0sN8fr6+i8SbihUaZix1BDryVzoNIIqDf+w1BDb5h8hx1OlYZ5lj8RvAw6nSsNcSw2xjqoD8dvWlCoNpZbeExdFsa/TitKt93N/xhrqt/Se+P79+9+fEeceI2vrJrruSwN99be3txv5TDw0R2NWsbnHyPYFCLRyj8VF+xBiZI8QI3uEGNkjxMgeIUb2CDGyR4iRPUKM7NUR4q4AC+Qb4qHncbZGOPh+OaAKrxCHLF6/ubmJ2b0HiJZ8JFY9ARbIK8Q6ur4Xf13bDEWABfEKcVEUpxIm5i5mIIpXiN3C9YF40pH70D04HKhdSMU28D3QGorNzc3YJ34CQdZ8D3R7pp1JmGfuZlCgNt4jsdvvYSBhXjOtQN1Cr9iF3nXc3djYOCHIqJP3dGJKpxU2peiG/Bo90TvVefI+u/egDjFrJ4J3o9QA21W8EzevBpIKHomNhtH2FO5JBA30Sx2ZXzEqI5XYEHf1wzuJ2BzbGeprcH19/erRo0ehF1KAH0SF2IxGo0MdVWOfszFraHPmTqdjof6ffmTf4dU1jHmHjg6x0RG5L3GP7ALmiikBKi2KL4ri8K7NAIFQrgQ40wHSe3CsNBKbz58/37u6ujphHTFS0jx90Vzt+jzWovLtSbY4SC9oPGNERkq2/kbf6X/3OTbJPXYW5K2tradWnwmQiO+7e9IbRTXIz/UbPxcgAd/7NZPf7by9vW2j8a6ELxYCbhv6HFTLvhNWj+jrmUwuUQ8FiGBPjfU6ThZg5lEGPQH89HUg9Fqns5AQT9nlav3X9avOm+1xuD0B5htcXl7u+z41dqEhnmVrjLVCeWzl9ng87url5m7EE0bRLkOZjMA8bAgAAAAAAAAAAKyO/wO/sA1m8hXo9gAAAABJRU5ErkJggg==",alt:""}),(0,Qe.jsxs)("p",{children:["The International Diabetes Federation (IDF) estimated the global population with diabetes mellitus (DM) to be 463 million in 2019 and 700 million in 2045. ",(0,Qe.jsx)(HK,{children:"Diabetic retinopathy"})," remains a common complication of DM and a leading cause of preventable blindness in the adult working population."]})]}),(0,Qe.jsx)("img",{src:n||it,style:{borderRadius:"50%"},alt:""})]})]}),(0,Qe.jsxs)(KK,{label:"Results",className:"results",children:[0===i&&(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsxs)("h1",{children:["Diagnosis:"," ",(0,Qe.jsx)("span",{style:{color:"#14a708",fontWeight:"bold"},children:"No Diabetic Retinopathy detected"})]}),(0,Qe.jsxs)("div",{className:"stepContent",children:[(0,Qe.jsx)(Ec,{}),(0,Qe.jsx)("img",{src:ot,alt:""})]})]}),1===i&&(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsxs)("h1",{children:["Diagnosis:"," ",(0,Qe.jsx)("span",{style:{color:"#DD4242",fontWeight:"bold"},children:"Diabetic Retinopathy detected"})]}),(0,Qe.jsx)("p",{children:(0,Qe.jsx)(HK,{children:"Please go to the nearest Ophthalmologist to get the proper care and fill out the info below."})}),(0,Qe.jsxs)("div",{className:"stepContent",children:[(0,Qe.jsx)(Ac,{setdone:v}),(0,Qe.jsx)("img",{src:lt,alt:""})]})]})]})]})},ZK=_e.div(VK||(VK=i(["\n  width: 80%;\n  max-width: 1920px;\n  margin-inline: auto;\n  padding-block: 1.5rem;\n  @media (max-width: 768px) {\n    width: 95%;\n  }\n"]))),JK=_e(ZK)(jK||(jK=i(["\n  padding: 2rem 0 0 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n  gap: 1rem;\n  img {\n    width: 170px;\n    @media (max-width: 768px) {\n      width: 120px;\n    }\n  }\n"]))),QK=_e.span(GK||(GK=i(["\n  height: 3rem;\n  width: 2px;\n  border-radius: 1rem;\n  background-color: #d8d8d8;\n"])));var $K=function(){return(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsxs)(JK,{children:[(0,Qe.jsx)("img",{src:Me,alt:""}),(0,Qe.jsx)(QK,{}),(0,Qe.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAABmCAYAAAD4dGyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAACGfSURBVHgB7Z0LeBTV2cffJBBIAiESoNxZkAqEIkEREVEW8YqCKKhYRbFfP/FeqxU/rVVQays+fkVtbbVeIurX+gkWvCEXS1CuSiEoBEGF5ealBAmEJJAL6fmf2TM5e3Z2dzaZ2cyG83ueeXZndmZ2Npn/eS/nPWdSSKPRNIi6urqc8vJy37Fjx/JbtGjRjq3ns805wVfgi3GKAFtKsaSkpOC1qLa2dmPLli2LMjIyAtQIUkij0USlsrLSV11dDfH2Yqs+JlxfULw+cgkm9AB7KWTf81SbNm2KKE60sDWaILKAIVxJvDnUtBSlpaXNZlb8FbsHaGFrjjvgQh8+fDifiWUwW+WuNHvlbjR5Gwj8Mjtuuha2plkDAQdj4MGJcKETAGLxmcw9nx1tJy1sTbMgghudT80U9vtmtm3bdkakz7WwNUmHbIWTyI12nGji1sLWeBY5Fj4erHBDYA3bZdnZ2fPV7VrYGk8QdKX9zSgWThSlrOEboibUtLA1CUUp6oAr7SdvdCklM4UsmTZa3qCFrXENiLisrMwvJbT8pK2wK7C/7WgWbxeKdS1sjSNIWelR2pVuEkKstha2Jm50VtqbyFa7BWk0ERDxcGpq6ii1xJJtQ0aWNN4hJSXlUvZSyN+TRkOWXUt+0q50slHK3PET8Ka5CRvuoJ8tGIUjrIsv+JlP2i9AweFywfcYPbMx+FpKzRylSsuv4+Hmg3DHm4Mr7mcLXJAJZP/mjLYfxF3IlgXB16TGon/YX1tbq13pZgrCJvZSmKwW28eWqWz5BbmbtAmwBUPlCoLvPY0sYp3UOm7h2fFkE7afLQ8FX8PIycmhk08+mQYNGkSDBw/m79u1a8cXfCYoLS2lgwcP0s6dO+nzzz+nQCBAn332GX388cdRvpqLeyZ5ROA6M62JAI+zk0XYPra8TBaChmCvueYaGj9+PJ111lnUWD766CN67bXXuMghfAsKKIEClzPTZIwd9pOu1NJEISsry5cMwp5BFi732WefTb/+9a8dEXMk3nnnHfrjH/9oZcmRYHsqeG2OEaF7SQ960MQF6/aa4GVh44Z+mZQb+9prr+WC7tWrFyUKWO7f/va33JIrBNgymhpgvXX3ksYtmGG406vCvpOMWNq00rDQs2bN4nFzUwGBX3jhhaqLDuuN6404H5UWsSbBzPaisGeT4XpzEEPff//9dNttt5FXgHs+ffp0dTPi7hlaxJqmhrniBV4TdgFbrhcrsM5vvPFGQt1uuyD+vuqqq0K2TZ48OfDCCy/4SKNpWgrTyBvA5V7NlgvFhltvvZWef/556ty5M3kNWOxp06aFbd+0aVPOrl276JJLLiGNpgkp9Yqw/0KSqJEce+SRR6h169bkNR599FF68MEHzfXM1q1ocF8ffVNygK+jP1yLW9PEHPGCsBFTm+YPosbiRWCpZVH36tyRfjN1Ip07dBCh7H5LYA/fDnEDN7viNJooJMxiw9U+YrF9BlvuFSteFjUy4RMmTDDXT+1/It09+RLKaZPF1/N83UkWN/q+UfE2bNgw0mgSTKnbyTM/GX3Rvu45HWauuueRQAqltKujuoP/u+S9wOzCd5eJHb0sapSgDh8+nLvYQFhquOEqf5m/mD4q2sLfQ9irVq3yTPKv7MB+qjpSSbldutPxyHH0+wNuju6aSoaoOe0yMh5KqUvl78vYH3du0WpzR2S/vSpqgOIUIeqOOdl0F7PUVqIGUy4cRTu/K2HLPl6PfvXVV3NxNzVvPz+bvt3xJX9/0qmn0+hJ19HxxLql79G/Pnyfv297Qnsa9993stdcaq645YqjWmyhWMlunUkzLr6S+nY0Mty/W/wWLf+ymL+HNVuwYEHIIA0vARf8+uvNHji67sKzg263NektWrBkWi9utatraun777/n25sy3t76rzW0aZXpHNH+b/fym7pDV2cs18p359LGwsW0jX0Pllbs/53T6UfkFb7Zvo0K59ZXDcJqgx4n5VEzpdQNi+1jyz/EykDm9rxwzS3UPcdoHXczd+jFVf80d050eWi8wFoLzs7P40ssYNUn+k+nVz/4iK//6U9/4gNVGvI7P1+xjD5fuczyM1ge0KXPj6n3wMERXcyqysqwbRCfU+z/Zo/pDYCTTh1OiWTZm3NC1keMu4L9vgxzPT0jg4433BA2RO3Dmx7MKsiiBj//v2fN96j7xuJVYK3l+nCI1S4XDR9C677YzpNpcMlvuukmWrhwIcXL0SMVVFa63/Izsf0bJiq4mV17/5j8V0wJczEhtM+ZxUaMCbqyhsA3sOlKc51m2/q1IetDz704RNgduvSgQWeONhtI/H0GnXkONWecFnYBSYM2nrx8aoio/3/9Kir+do+5Hk9cjeGUqPaCSAASUzjeTRdetdawxPEwfuTQkCw5Fjddcgh83jO/4/GjbL1bMYv10+kPc5cUljq36/GXPBtxySTqd4rhSbRpnxsi/OaIU8KGutAfbQajd50zjs7ofVLITi+u/tB8b9cFh9W88cYbI06C8MQTT5AbIBOOhkQQj7UGC9dsoHmFoZbksccea5DVloG16dKnL3evj7JY8Ydv9nKrLjjKtr/z19k08fb7TMuNbYHijfx9Gf1AJaxx7WfhLuM8gc2fmZYdx8O643XH5o1mbArE9migIdkvXV/XPifx46KBfeHaf7O93rVHQ9Q7b7Dl+csO/BC2Hb81nTVgCFXwnUC+fvx+HwtdrMSN79+2bq15zWgIu57446TLpDshbB8Z7rdpqSHqX54TWnm1esdW01rD2tpxwSHqCy64wMxIq2CWFLeQvQMky+Kx1nM+WE4frCkK247GCcUrjRmhBlGrGe11H7KM79L3zXUIuXDuq9xygyp2k2JdRhX2DiaG5W++yhsLGYjjDGbt4MbKcbR/0hR2jsjCXsUSampuAOGCL+9kbj2tGgXkE/7Ffot6DeI64D7DpRYgKai64cZ3z+OvaESEsFezbXJIMy7YaAkg5EL2+wPFn5EVkcIcr9JYYaNiA11apj9sJWrw5vr67q1x48bZstayqMVMKRi+KaY6cnMIp2ytz84fYPu4uYVrQkSdmZVFLVq2pEOlxuSnr7/+uuPXPXTMxcxCZfCbVwCLB4HYcTkh6sWvPm/5GSwiPovHdYU4rSwpgHD2swZ+4h33h5xT7o6KdB1oLOCpnHruWHISeCjwciJdM0CYg32SpZsslRqGjy1ojmGpTVHPGHuVpaiRCX9zQ72w7cTWKN+URf3BBx9wtxuNAsTt9rjsd99913w/wGfPDVteVExvSe53v7w8Gj9pEg3MH2JuQzJOeAJOcjKzZqr40PVkh9VMMLGwsqKRiCYQ8fmmFfXWHJZXFTVc4C4W7j68E9lNdwI0KrGuGWAf1fPxKvFabD8ZcfRUeSOy33/96S28a8sKuOECiDKWtVbHO2M8diInWECiToAqMztu+L7SQyEx9aD8fPpJvhGddOrcmTIzM6miooKLGu64G0m0XszNlV1TEStHA6JSb+pBI0fToBGjzdh69XvzbJ1LBq7+qWPG8nOIfmT5HJ+zLs+fsO9BY7RVaYCQ1caxAtWth0fQtc+dNPqK6/jy3H23hhyPRKFdq4prUt15/P5TxxiZdTXMQaOCJVauoKmxI2x/cBlFFpMJ/nzEGG6ls6P0iy7aUu+aYkZQzEISiY0bN4ZYNDQCiZ5kQU7U5fm62TpmHnPBS5i4QVabNqaoQVpaKnXv3Zu2bd7M1+ENuCFs9WaWk2qR2BFMqgmQqBpx8SRzHf3jyKq/89enyC64DsTgAsS5/knXhpwDeQAkyZCUkmN3fJcsagCRycKOJ8yIBZKF6rXLvx9hTqtWmbb+ll4CwoYrLZ4E0Y7qZ8DMpyizYSLj/RBzvQfayBaukf5xcK8jJcNUxEQLiUa22EP7nxhzf1hr9FkLho8cGfJ5i9Q0yu3Yib0zhA13/PHHHyenideqArV4RXQJyUCYbVm3ZaT+dBU5wSWfAyLeL3V3GtdbF7IfBK9aYCsOs2NbOZCpVn8TkpMqsODJBoS9gWxO3QOrfAX7x18wYEhYV1Yk4IYfirO1Q0yNiRaaqn5cDLsEcMVjUcz6qiuOHOXv4XZ3UiaHSE1NodxOnXgSraa62pzT3OmKO5SKyqAwI17SI1jBNiwrbVfYkc6R7mDf8dFK+zF/9POE3ptOVuQ1JcJiRwQFJhewPkSIGdY5O84fvllqoZH4gmBlML2QcL1FkqwpJywUDxMAGOgRabCHzEdFxeb7Pn3DW/yUlBS+QNzf7zXEt2LFCkeFjThVtobAThyolluq5xD8EGG7FZHOcVhpGFrxvubQ8AGu+PnX3kixcCrGbZURej8nm8sdCQj7hiE9fH/o27GLDyKGcLNZyzqwS0+WFGsft5BV5MTZlClTePJMBq62iLkhqiuvvJIWLVrUZPXjsrX22bDW5cxSbwnUW8pOEaZySoPV7tjRFDa+B913ToDklJrZ7sAaYTtFFdmKsLatX8NdaVlwyBrHkxW3Ogf6qNUkXdv27fk+iJXF+WGJsU0+FrF4idRYiBp5J1D/RjtZd5wcvyNcWMS6++SQBd1t/RJcDx8vEPb8t6fdh0qPGeQCe6RWGv3PKmJaYZEFR/w9YMAAXsCChiDRo6LkxF0HG9lwDM8UQNRInFkBi40+bfM466eMxATuNoQGcNNh3cpCnj9lmq3zoWBETkyJyrVBI87h1hyNhlURSDTsnAPCFaLitezSNeBY/6TruICR3FKLViAqUXjCz6XE/8ii49ywxlbxfujvRwXa3JCGZd7Tj/GiHIgZ2Xs1xJG/26u4/rTNPVIrjWdqWYGsN9zwe+65xxQWEkxiAAZcc7kmHGJ3K/6WLXbHnLYx95eFfUL7yJYEws7OOcFcxzPDGgKsF5ZooLvIrlXDTYr+4m+lvmFeDPJe7L7taMQ6h5z5RkUZ+tyFuHAsxG0FGgRkyWXad+0WImwUwWAxBntEFzZc/1OYBZaLe0RRjhVIpDnpMbhFQwtUbCMSZ+qD8VRgodesWWNZagqxIVMtFgzOKA1WcrmJnfh6X7CLC0Sy1gDCbsmSZwI3rh83Miqj1O6iWIzm1jE36nnjuZljxb9oeGRX1u7EB4jJL7h2Wti1nDbm4kZ1faG4x041G65Z7grzMq4Ke7fU/WJnFBbiakw5vGXLFi7wSEk07OfWqC7ZRc6yIewSm8IGLdPTzfdOVZ9BDLz+mt1wE++4r0FJJSEsq64uDL7AZ21y7JdRnsTOg37ssMQYEybqxK0aHvSfi2tQM9NYh+XF78vt2s3yWJSoWh1rF/RX45q7WPz9eN8+u265b97r8DnPdj/6HB6nM4McBsIe8eT9/D0GbKxevZoaghqPuplYw0gyEQLcNOG8mBMrPFIw10yejWFJwEjJs6qaGjpaVU3/fPcdXoEGNm/e7MlJJoSr78TwRpwLmWY1IebWcU6AkGD/N7t5I4EcQRJOoRRwPcYWWCXO7OLlGVaaI+p47X0lJfTnF1+i4q1b6bQhQ+jm//oZL5FtyLkaeg2JBI1ZMiTIopEwYbsx8CGZqKuro2Tl/SVLuKjBpxs2UN7KlXTReefR8QoaOTR2YNTIM2nUmWeS10iYsBOR7GoK5Di8qqoq5v5V1dXmezueyMOPzzJFpeLr0YN69exJky69lDp2aJy7iO8RN+tppwyh666+2vysY4cOIfvatdbJChqyhYuXmOvPPDEr5PPiL76gffuN/FFe/37kRbiwa4q/pjp2g6a0akkpaWnMF2lJqa3SKSWzcfFVuyScRC7ekCHTprCPHTvGX2skYTeWwO7dfIHwH5w+vVHihqjFzVqulGuODVrn4i+20sD+/T1poZwEORDxt0hWDGEfZsmcw9aldKnZWZSS0ZrS2mdTats2FA9GFVsm7/JqaEFGopGz7XJXViSMWnLjAQGlP0Qe0wtPvKK8vP64BuQNYCmzgo1teUWlmYQzYuAX6cF7wx7ty/cJBAfdZLHjYeHVz8srQv/3FeUV/JzYXww3RWyNJdqxwrLzRiJ4vPp98V6fQHgTVt8D8liDEw2rfeVzit+KbRXK30Psp3ou6u/Afvh7+NhvkL2aSH8nq++Itk88xHTFjx1iNyNbar/fTynpLalFtx8ZYm+VTnZAearoy27swAe48+jTxuwmqFATxSSwsk49blc+x77Sspj7y2O1D0QRdi2z2JWSsHvGuOGtgIt8889+Zq5DzMtXGg8jgNXGDSRuKDnhFXK97IaZdOl40+pCVA/PCp03DnE0j6WZmwlPQN0HrmnH3Fz6dP16+vNL5jMh6PczZtCcv/0t5DsRLtx9++1h3oTd6xP73j7dfBIUT94tX7Ey5Fir4yJ9D/a9fvJkeoVdq7DMOBYhDQ9JFGstvhsNZ16/cNd77vwF9P7SpSENwqTx7HwTLuXvC1lOYs7f/m5+dv3Vk8NyFPL3ir97Y0A/ds7vN6/MX/rddlq7fy/tqYh8M9ex7prqHXuoast2qtn7va0vyJNqcRtabYWiFAwWQakp6soxTzfEjYYCCwQuTxPcGGRXXIzYioY8uwosdrWFO14bdMMPlh4wtzkx0EW9yYQLjZs5UmwubnTcjE7z5DPPhH0nQoWHZ80KuelxDffOmNng64NI1GPFcXJsHOnvwPd96aWwkKMhoIGZ+/bbYVYe28S1oLGRLfin6zeE7It1uTEZ60BiEhZ72Ytfb8hnS8gHbVu0ogE5HSgvuwOd3qEbDcvtRtktjXgSAq/Z+2+q3XeAWp7Yg7noWRG/oIfUB7h8+fK4Hi8ba4ZSAdxnp+YnlwUnl4tGAskzlJ7CuiPGhtVW+7JFfH1ISiA2xGKrhFm7XONvzbO2wRsFN5T/zBH8FTeh2I4bDy4ptsNCBHbtNm9ObPP17MGtbTzg3DhXZkYm7WRWXnwXhLRcyqRDbLIQxDHC65Cvzyo5VR70THCN+/aVhIgCxyFTjc/nLlgQ8lmkY2REKCB/Lq4hyyJpiP1wXnhT+J3IQ8jXctH55/Hjxp53Lruet/l21btat2G9eQy8iaFKyNMQIrriZTVH6ZOSvXwp2G7MsnF5jwF0XpfedG7nPnwdAof1btGtE3fRrcC4bfHkj3gs9quvvsoHhqjdZBg0glpxCFCIMFa5ajzAFcf58L2IsWG1Y5WWoohFTIu0tbg4TNg1tbX8VRZ2Qyw2bhqIAvDYlFlDgXBB+c0lCR5un/gMwoJbKcSDGwrZb7h9t98z3dyuuvx2uZ6d6yJ2A4vrgFUW5xTXKmeUAdxfuMFWx0CYD/YPd0lx8z8+4yFTGK8wC75wiWEdIXqEERCHCFNiHSPzq9tv498rRAiiucWxrgW/FQ0u/gfyOZF5x283Gr1V0t9jPDkBXPHLyJgTfD5bCtkSiLTzW7u30M2fvE/+JXNo3q4vzO2w3lVfbKe6mtqwY87oXd/iYtojO91eeLj8tGnTQkQtaskxXhsDQMRMp26Ul8pxdsCG1ZZnWdnDLFX54cMhn9ceq+OJMyFsNBwNGbUmRItFFjUsCgTMr3fX7pBj0BjAgmOBC5sl9VTI53CCUcwzEOCGl0MFkRxSvQz5RsYx8jl2Rrg+HCO7tuo6vIWdyiw9+PuoxzjBaUPyQ84rXz+QE2/y32PhkqX8VbbwIK9f9CSgXSDsAFt+SYbAMRSmNxmlphiK5CdD9CGTZO+tPET/U7SUC3zJt8aUQEiyVW36kuqOhsaYyIqL2VYg1HXr1lE0IGpMrC+AyDA+GzXkiZqAQRadHXccmXE51l7/ySfm+5qaGl6csv/f/7Y8fzzgBhLutgAWBhZF3FwVFeUhn8MFlhc3u3HU/u0si+5Sq+x26DH151Cz9ZGOwzFyg2UVO4dfW/jfsiFYnTcSsNAC/DaIGv8TAax6Y+sRBNGy4jAvy4ML8LEFNeX+4Hsu8Fs+fZ+m9hlMd/QbRhjkWPXlTkrv34dSWtQ/yHM4E/bqHdv4+zlz5tCYMWP4aCcVzE4qixpWGmO1E/0kTvlBBJjLDM/higWeFPJogVFjDau946uvqHffvlQddMP3BHaY+8LbaAhwkZFtld1VJF7kmCwzMzTfcTcTfqSbLTMj8YUmsihF15IsDrULygpYY9UbkBssiFwVHD9vlGMSATwrNCbie+WKPiALv7HEM7orwJYbyLDoN5DksiMGH1f4Bs+o11UcoeqvQvusrxhS754sXryYZs6cyYdeWi0C8UCAhmbSG4Oc4IPFtpMdx9NCLpQaAFjt3Sz5V1N7jLvh+/fVW/7GTB4BYYwNxrEALb7szqnJphKWKIIIsOCmQgJNLCVK36kA/dhuobqactyJ+FuON626lsD7zI3dV2KIAw2DmkFH0g1/J1nc+J5ox8iojUJFhXN/DyT2BOs2bJCuuZ9j1ho0tKS0gIx4HBZ8KjbAel+78h/052FjCc/NqP2uhNI6G60zMuNnBK32oUOHuBWOBWJxMasKMshImiXqkbtoVCA+ZOMhasTZeTYeGgCrjYfwoTFAhnzFsmXU3Yd2sL5OHI1GYzPiSILh5rZKMsHKwYKLm+aVvxtdQ7hZkVSSM9+yhUA2WFgS7IdkGsRhVfTSGHADQ7DCUsFq4ftgZdWYX/QDqxj92kafMo6pUIo/hAcjZ6KjHaOSpVRM3sYSjtj2K9Yf36tn/BNEyqj/O4HT1XyNGY8dIMNyY+FZIS7uVf+gLQdLqHrXt3SsrD7eO39APjUUFKOgnxqP/JFnOHET2aqqD9eLBLq+7pp8SUjRClzwPYGAua5O5tgQRPeJACKRYzUUcMjxI4SDz+WbCRls2UKofacQuVuuqnp9EF2YqFmj0ytCd5uwqHL3mACFJwKISI2jxTGqRZcZesopIceJEtPyysZbbvzv1ASbkTT0jrAFBWxBExnAyqHqo/Xi3raT93WDK085I2RixNNPP51bZFjhSAtEIFtoCBziRleY28gPKdgiTS8cC4j6gakT6bT+4bOV4rc4NYcbH/gh3XzIeIubHDcPLO2oYP+1DK9qCn6mbkcXV2Mtkh2EJxDt+qJlrW9hDYN6/eifxnFDT6kPh+S/g/odd7P/b1aEsQzR/n5OoIYjTmXoZVLIOXxkPM8Lr9QtI5teO/My6p7ZlpegpuWeQLPX/ZNmr1zMd+7WrRt/pKzP56MWLaJHBLDWiL/lenMx2SHmUXMruYZGRBTHwM2e6Lc3M2UZyzMcrjxCn275mv6+dIW5/bnnnnNsZtJ4EJbXKqnkBWJdn1pSKko7eQ12MAMeK8Mdz75ug1JW0d0FnmGhqZPxNSPg5NRIATK6y/BqdokBdIWhFHVKdi9e0cY/37uXXnjhBVv92hAx+q9l6y1c865du/KbAcv06c7Gg/KEiQvXFNmy2rUsWQZRg7376l1ZXHtTiBrgRsbi1eGWDb0+0f1nR6jx7Os266SSUie7uGScnvMsQEZ/OGdtyV56emt9ny5KUh8YVP/4m4KCAtq+fbutSRggDEytFK10FN1lTiKq3ABEjYfZx2L/IaM45Qf2+vHGLeZ2PFhQo5HLesFYlyascGMyQxSz/FKsPMOEfe+GD83BJShLPT3XmJAOGfJ7772XylGVdSj2EEm43GKyQ8TfEJ1ww/HqxpTEqtWONpTzYHmlMYrraBU9+9Yiczsao6ay1hpvgR4MAWJ9t3Iabs2ggmo1pMHxyF1eioplQLsO1JZZ7b3SCLK1a9fyarMHHniAr2dnx56kH9Ybz8pOBMJqi66vv8xfQr9hyTEVxNXCVV+0togOlB02r1Vbaw1QrbWLE1b40sg95gdf/WJDydEKLmoMMJEpKiriybS+ffvy8stWrWJP+5tIIG7E9EePHuXTDZcfqaLBfevj/QpmocsqjMQMRL1s/SbzM/TZJ/ppJs2Rbl268Mo7LL4ePaOWbnqVCnaPwEqL3+HmTDRuChugHPUVMh7852NLa+XzQPAz+uSTT7iAMEACwxwhbquy06YAbn7r1q1pSXDUzld7vuMlJyhagagPBmef2bR9F39OtgDhwl133UWaxpHesiWflUQsyShqgG4++Xe4SaKVA/ccMxkgWxYIblsW3M7d8Ndff51PqJCWlka5LIMZqysskeARRJjkQTB+5FAaNWQgf7+35AceVx8JDoJBOeyqVatIo2kKvGASfST1f8viTk1NpbZt21JWVhZ5BblvG5zYrTOdlT+A9VevNEWNuBp99D1dbpU1mki47YrbAR3ZSBVOYEsO4tj33nuPu+IYZYX1I0eO8HUIvanBY36//vprKi4u5utIkhV9GTAnU9Ci1niAgBeEDcLEjXnOAEpPEXOjSwxjm/Fgu6YQOK4JxTSHDx+mc8816rSR0ZfRotZ4hIA3slP1+Ehyy0FeXh49++yz1L17/eiqjIwMatOmTcjTK90Cgi4rKwuZM3zPnj1088038/50iaJFixbNHzlyZD7L7PsomDfQaJqAQq8JGyBL/gcKDgcFiLunTp1Kd9xxR8iOEDbi7/T0dEeTbBAzlsrKSqqtrZ/uCUU0qJZ7+eWXudglCsgoygmpj2XWPZ9l9tEvBpFrwWsSxWwvClsQ9gRQ9HVD3BMnhheIQOQQN6w5Mup2rTncfIgXQq6uruaWWRazYN68efT000/zGneJ0uA1PkVxwBqMUex7c5jQ/WQIPYe04DUOwULVO70sbOAjxTUH0QQuA4FjAYjLRb84hItCGCHqaMA6w0orggaFpMwk0xgOHDiQw/rKB7M8Aqy8jwwLj/eJnRdKk/Swe97vdWELppJhwX3yRggcyTUIHK9OAwuNRQFW+k4yCm9cRwteEy/M8zwhWYQNfGTUnk8lReAA/d3Dhw+nYcOG8YQb+sHt1J0jbkYSDN1X2F/yAkpvuummwNKlS4WLDEGjBv4pUmLppkALXhOBIpZYHpJMwhbgxkW3WJgFV4HYe/TowV8BLDySXhAzXGsMF1WSYPTkk0/Ov/zyy2ezrq2NQ4y5s35BhpBfIQ8IOhZI2DFXrB0LM/ykE3bHIwVM2Dcko7BlRpFhwf0UQ+Rx4Kf6KZebDTpDf3zA/scTWE/RgmQXtoyPDFGOCr4X2eZYwAoXBReMSGt2oo6GmqHX7nxyg/iaUdqchG2FGFVm9TT7ABmDUTzvXicaHb8nJ+z/M59Zaz6DUXMXtsZBmOB9TPC9IHjWfejX7ry3EG44f08aTSPR8bsnCLCkWW+xooWtcQXtziecqUzYZm2FFrYmociC1+68Y4RYa6CFrfEEsjsfzND7yLkuzOZOiLUGWtgaz6LdeVuEWWugha1JOnSyzoD97lLW6A1h/dYB9TMtbE2z4Hi07hiemZmZaTlkWAtb06xprrE7+00zWJ/1zIifk0ZznJHsmflYoub7kEaj4cC6Hzt2DGIfTB515aO53zJa2BpNFIQr74FBMoHq6urLWKKsyM7OWtgaTZygZj49PV1Ydb+bYkfmm1np2VVVVU9h1Jbd47SwNRoHcEHshewc81ke4JV4BC3QwtZoXEJ249EFF0zSiaHEHFhk9hmEi6WQLUUsMVbItu2kRvAfiyLY8rV/pcsAAAAASUVORK5CYII=",alt:""})]}),(0,Qe.jsx)(ZK,{children:(0,Qe.jsx)(YK,{})})]})};a.createRoot(document.getElementById("root")).render((0,Qe.jsx)(t.StrictMode,{children:(0,Qe.jsx)($K,{})}))}()}();
//# sourceMappingURL=main.d22c5c9e.js.map